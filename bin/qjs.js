var Cp=Object.create;var So=Object.defineProperty;var Lp=Object.getOwnPropertyDescriptor;var kp=Object.getOwnPropertyNames;var Pp=Object.getPrototypeOf,Mp=Object.prototype.hasOwnProperty;var Up=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')});var mt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Fp=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of kp(e))!Mp.call(t,n)&&n!==r&&So(t,n,{get:()=>e[n],enumerable:!(i=Lp(e,n))||i.enumerable});return t};var Ro=(t,e,r)=>(r=t!=null?Cp(Pp(t)):{},Fp(e||!t||!t.__esModule?So(r,"default",{value:t,enumerable:!0}):r,t));var Kh=mt((Va,Ha)=>{(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Ha=="object"&&typeof Va<"u"?Ha.exports=e():t.Papa=e()})(Va,function t(){"use strict";var e=(function(){return typeof self<"u"?self:typeof window<"u"?window:typeof e<"u"?e:{}})();function r(){var c=e.URL||e.webkitURL||null,p=t.toString();return o.BLOB_URL||(o.BLOB_URL=c.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",p,")();"],{type:"text/javascript"})))}var i=!e.document&&!!e.postMessage,n=e.IS_PAPA_WORKER||!1,s={},a=0,o={};if(o.parse=l,o.unparse=h,o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!i&&!!e.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=1024*1024*10,o.RemoteChunkSize=1024*1024*5,o.DefaultDelimiter=",",o.Parser=T,o.ParserHandle=x,o.NetworkStreamer=d,o.FileStreamer=m,o.StringStreamer=g,o.ReadableStreamStreamer=E,typeof PAPA_BROWSER_CONTEXT>"u"&&(o.DuplexStreamStreamer=y),e.jQuery){var u=e.jQuery;u.fn.parse=function(c){var p=c.config||{},b=[];return this.each(function(L){var I=u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&e.FileReader;if(!I||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)b.push({file:this.files[V],inputElem:this,instanceConfig:u.extend({},p)})}),O(),this;function O(){if(b.length===0){X(c.complete)&&c.complete();return}var L=b[0];if(X(c.before)){var I=c.before(L.file,L.inputElem);if(typeof I=="object")if(I.action==="abort"){R("AbortError",L.file,L.inputElem,I.reason);return}else if(I.action==="skip"){D();return}else typeof I.config=="object"&&(L.instanceConfig=u.extend(L.instanceConfig,I.config));else if(I==="skip"){D();return}}var V=L.instanceConfig.complete;L.instanceConfig.complete=function(lt){X(V)&&V(lt,L.file,L.inputElem),D()},o.parse(L.file,L.instanceConfig)}function R(L,I,V,lt){X(c.error)&&c.error({name:L},I,V,lt)}function D(){b.splice(0,1),O()}}}n&&(e.onmessage=Se);function l(c,p){p=p||{};var b=p.dynamicTyping||!1;if(X(b)&&(p.dynamicTypingFunction=b,b={}),p.dynamicTyping=b,p.transform=X(p.transform)?p.transform:!1,p.worker&&o.WORKERS_SUPPORTED){var O=$();O.userStep=p.step,O.userChunk=p.chunk,O.userComplete=p.complete,O.userError=p.error,p.step=X(p.step),p.chunk=X(p.chunk),p.complete=X(p.complete),p.error=X(p.error),delete p.worker,O.postMessage({input:c,config:p,workerId:O.id});return}var R=null;if(c===o.NODE_STREAM_INPUT&&typeof PAPA_BROWSER_CONTEXT>"u")return R=new y(p),R.getStream();return typeof c=="string"?(c=D(c),p.download?R=new d(p):R=new g(p)):c.readable===!0&&X(c.read)&&X(c.on)?R=new E(p):(e.File&&c instanceof File||c instanceof Object)&&(R=new m(p)),R.stream(c);function D(L){return L.charCodeAt(0)===65279?L.slice(1):L}}function h(c,p){var b=!1,O=!0,R=",",D=`\r
`,L='"',I=L+L,V=!1,lt=null,Et=!1;te();var K=new RegExp(v(L),"g");if(typeof c=="string"&&(c=JSON.parse(c)),Array.isArray(c)){if(!c.length||Array.isArray(c[0]))return C(null,c,V);if(typeof c[0]=="object")return C(lt||Object.keys(c[0]),c,V)}else if(typeof c=="object")return typeof c.data=="string"&&(c.data=JSON.parse(c.data)),Array.isArray(c.data)&&(c.fields||(c.fields=c.meta&&c.meta.fields||lt),c.fields||(c.fields=Array.isArray(c.data[0])?c.fields:typeof c.data[0]=="object"?Object.keys(c.data[0]):[]),!Array.isArray(c.data[0])&&typeof c.data[0]!="object"&&(c.data=[c.data])),C(c.fields||[],c.data||[],V);throw new Error("Unable to serialize unrecognized input");function te(){if(typeof p=="object"){if(typeof p.delimiter=="string"&&!o.BAD_DELIMITERS.filter(function(G){return p.delimiter.indexOf(G)!==-1}).length&&(R=p.delimiter),(typeof p.quotes=="boolean"||typeof p.quotes=="function"||Array.isArray(p.quotes))&&(b=p.quotes),(typeof p.skipEmptyLines=="boolean"||typeof p.skipEmptyLines=="string")&&(V=p.skipEmptyLines),typeof p.newline=="string"&&(D=p.newline),typeof p.quoteChar=="string"&&(L=p.quoteChar),typeof p.header=="boolean"&&(O=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");lt=p.columns}p.escapeChar!==void 0&&(I=p.escapeChar+L),p.escapeFormulae instanceof RegExp?Et=p.escapeFormulae:typeof p.escapeFormulae=="boolean"&&p.escapeFormulae&&(Et=/^[=+\-@\t\r].*$/)}}function C(G,Z,Y){var tt="";typeof G=="string"&&(G=JSON.parse(G)),typeof Z=="string"&&(Z=JSON.parse(Z));var Nt=Array.isArray(G)&&G.length>0,ot=!Array.isArray(Z[0]);if(Nt&&O){for(var Bt=0;Bt<G.length;Bt++)Bt>0&&(tt+=R),tt+=z(G[Bt],Bt);Z.length>0&&(tt+=D)}for(var et=0;et<Z.length;et++){var ke=Nt?G.length:Z[et].length,Pe=!1,B=Nt?Object.keys(Z[et]).length===0:Z[et].length===0;if(Y&&!Nt&&(Pe=Y==="greedy"?Z[et].join("").trim()==="":Z[et].length===1&&Z[et][0].length===0),Y==="greedy"&&Nt){for(var j=[],Q=0;Q<ke;Q++){var vt=ot?G[Q]:Q;j.push(Z[et][vt])}Pe=j.join("").trim()===""}if(!Pe){for(var k=0;k<ke;k++){k>0&&!B&&(tt+=R);var _t=Nt&&ot?G[k]:k;tt+=z(Z[et][_t],k)}et<Z.length-1&&(!Y||ke>0&&!B)&&(tt+=D)}}return tt}function z(G,Z){if(typeof G>"u"||G===null)return"";if(G.constructor===Date)return JSON.stringify(G).slice(1,25);var Y=!1;Et&&typeof G=="string"&&Et.test(G)&&(G="'"+G,Y=!0);var tt=G.toString().replace(K,I);return Y=Y||b===!0||typeof b=="function"&&b(G,Z)||Array.isArray(b)&&b[Z]||xt(tt,o.BAD_DELIMITERS)||tt.indexOf(R)>-1||tt.charAt(0)===" "||tt.charAt(tt.length-1)===" ",Y?L+tt+L:tt}function xt(G,Z){for(var Y=0;Y<Z.length;Y++)if(G.indexOf(Z[Y])>-1)return!0;return!1}}function f(c){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},p.call(this,c),this.parseChunk=function(b,O){let R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&R>0){let Et=this._config.newline;if(!Et){let te=this._config.quoteChar||'"';Et=this._handle.guessLineEndings(b,te)}b=[...b.split(Et).slice(R)].join(Et)}if(this.isFirstChunk&&X(this._config.beforeFirstChunk)){var D=this._config.beforeFirstChunk(b);D!==void 0&&(b=D)}this.isFirstChunk=!1,this._halted=!1;var L=this._partialLine+b;this._partialLine="";var I=this._handle.parse(L,this._baseIndex,!this._finished);if(this._handle.paused()||this._handle.aborted()){this._halted=!0;return}var V=I.meta.cursor;this._finished||(this._partialLine=L.substring(V-this._baseIndex),this._baseIndex=V),I&&I.data&&(this._rowCount+=I.data.length);var lt=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)e.postMessage({results:I,workerId:o.WORKER_ID,finished:lt});else if(X(this._config.chunk)&&!O){if(this._config.chunk(I,this._handle),this._handle.paused()||this._handle.aborted()){this._halted=!0;return}I=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(I.data),this._completeResults.errors=this._completeResults.errors.concat(I.errors),this._completeResults.meta=I.meta),!this._completed&&lt&&X(this._config.complete)&&(!I||!I.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!lt&&(!I||!I.meta.paused)&&this._nextChunk(),I},this._sendError=function(b){X(this._config.error)?this._config.error(b):n&&this._config.error&&e.postMessage({workerId:o.WORKER_ID,error:b,finished:!1})};function p(b){var O=hr(b);O.chunkSize=parseInt(O.chunkSize),!b.step&&!b.chunk&&(O.chunkSize=null),this._handle=new x(O),this._handle.streamer=this,this._config=O}}function d(c){c=c||{},c.chunkSize||(c.chunkSize=o.RemoteChunkSize),f.call(this,c);var p;i?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished){this._chunkLoaded();return}if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),i||(p.onload=Ft(this._chunkLoaded,this),p.onerror=Ft(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var O=this._config.downloadRequestHeaders;for(var R in O)p.setRequestHeader(R,O[R])}if(this._config.chunkSize){var D=this._start+this._config.chunkSize-1;p.setRequestHeader("Range","bytes="+this._start+"-"+D)}try{p.send(this._config.downloadRequestBody)}catch(L){this._chunkError(L.message)}i&&p.status===0&&this._chunkError()},this._chunkLoaded=function(){if(p.readyState===4){if(p.status<200||p.status>=400){this._chunkError();return}this._start+=this._config.chunkSize?this._config.chunkSize:p.responseText.length,this._finished=!this._config.chunkSize||this._start>=b(p),this.parseChunk(p.responseText)}},this._chunkError=function(O){var R=p.statusText||O;this._sendError(new Error(R))};function b(O){var R=O.getResponseHeader("Content-Range");return R===null?-1:parseInt(R.substring(R.lastIndexOf("/")+1))}}d.prototype=Object.create(f.prototype),d.prototype.constructor=d;function m(c){c=c||{},c.chunkSize||(c.chunkSize=o.LocalChunkSize),f.call(this,c);var p,b,O=typeof FileReader<"u";this.stream=function(R){this._input=R,b=R.slice||R.webkitSlice||R.mozSlice,O?(p=new FileReader,p.onload=Ft(this._chunkLoaded,this),p.onerror=Ft(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){!this._finished&&(!this._config.preview||this._rowCount<this._config.preview)&&this._readChunk()},this._readChunk=function(){var R=this._input;if(this._config.chunkSize){var D=Math.min(this._start+this._config.chunkSize,this._input.size);R=b.call(R,this._start,D)}var L=p.readAsText(R,this._config.encoding);O||this._chunkLoaded({target:{result:L}})},this._chunkLoaded=function(R){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(R.target.result)},this._chunkError=function(){this._sendError(p.error)}}m.prototype=Object.create(f.prototype),m.prototype.constructor=m;function g(c){c=c||{},f.call(this,c);var p;this.stream=function(b){return p=b,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var b=this._config.chunkSize,O;return b?(O=p.substring(0,b),p=p.substring(b)):(O=p,p=""),this._finished=!p,this.parseChunk(O)}}}g.prototype=Object.create(g.prototype),g.prototype.constructor=g;function E(c){c=c||{},f.call(this,c);var p=[],b=!0,O=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(R){this._input=R,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){O&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):b=!0},this._streamData=Ft(function(R){try{p.push(typeof R=="string"?R:R.toString(this._config.encoding)),b&&(b=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(D){this._streamError(D)}},this),this._streamError=Ft(function(R){this._streamCleanUp(),this._sendError(R)},this),this._streamEnd=Ft(function(){this._streamCleanUp(),O=!0,this._streamData("")},this),this._streamCleanUp=Ft(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}E.prototype=Object.create(f.prototype),E.prototype.constructor=E;function y(c){var p=Up("stream").Duplex,b=hr(c),O=!0,R=!1,D=[],L=null;this._onCsvData=function(I){var V=I.data;!L.push(V)&&!this._handle.paused()&&this._handle.pause()},this._onCsvComplete=function(){L.push(null)},b.step=Ft(this._onCsvData,this),b.complete=Ft(this._onCsvComplete,this),f.call(this,b),this._nextChunk=function(){R&&D.length===1&&(this._finished=!0),D.length?D.shift()():O=!0},this._addToParseQueue=function(I,V){D.push(Ft(function(){if(this.parseChunk(typeof I=="string"?I:I.toString(b.encoding)),X(V))return V()},this)),O&&(O=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(I,V,lt){this._addToParseQueue(I,lt)},this._onWriteComplete=function(){R=!0,this._addToParseQueue("")},this.getStream=function(){return L},L=new p({readableObjectMode:!0,decodeStrings:!1,read:Ft(this._onRead,this),write:Ft(this._onWrite,this)}),L.once("finish",Ft(this._onWriteComplete,this))}typeof PAPA_BROWSER_CONTEXT>"u"&&(y.prototype=Object.create(f.prototype),y.prototype.constructor=y);function x(c){var p=Math.pow(2,53),b=-p,O=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,R=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,D=this,L=0,I=0,V,lt,Et=!1,K=!1,te,C=[],z={data:[],errors:[],meta:{}};if(X(c.step)){var xt=c.step;c.step=function(B){if(z=B,tt())Y();else{if(Y(),z.data.length===0)return;L+=B.data.length,c.preview&&L>c.preview?lt.abort():(z.data=z.data[0],xt(z,D))}}}this.parse=function(B,j,Q){var vt=c.quoteChar||'"';if(c.newline||(c.newline=this.guessLineEndings(B,vt)),te=!1,c.delimiter)X(c.delimiter)&&(c.delimiter=c.delimiter(B),z.meta.delimiter=c.delimiter);else{var k=ke(B,c.newline,c.skipEmptyLines,c.comments,c.delimitersToGuess);k.successful?c.delimiter=k.bestDelimiter:(te=!0,c.delimiter=o.DefaultDelimiter),z.meta.delimiter=c.delimiter}var _t=hr(c);return c.preview&&c.header&&_t.preview++,V=B,lt=new T(_t),z=lt.parse(V,j,Q),Y(),Et?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return Et},this.pause=function(){Et=!0,lt.abort(),V=X(c.chunk)?"":V.substring(lt.getCharIndex())},this.resume=function(){D.streamer._halted?(Et=!1,D.streamer.parseChunk(V,!0)):setTimeout(D.resume,3)},this.aborted=function(){return K},this.abort=function(){K=!0,lt.abort(),z.meta.aborted=!0,X(c.complete)&&c.complete(z),V=""},this.guessLineEndings=function(B,j){B=B.substring(0,1024*1024);var Q=new RegExp(v(j)+"([^]*?)"+v(j),"gm");B=B.replace(Q,"");var vt=B.split("\r"),k=B.split(`
`),_t=k.length>1&&k[0].length<vt[0].length;if(vt.length===1||_t)return`
`;for(var ee=0,$t=0;$t<vt.length;$t++)vt[$t][0]===`
`&&ee++;return ee>=vt.length/2?`\r
`:"\r"};function G(B){return c.skipEmptyLines==="greedy"?B.join("").trim()==="":B.length===1&&B[0].length===0}function Z(B){if(O.test(B)){var j=parseFloat(B);if(j>b&&j<p)return!0}return!1}function Y(){return z&&te&&(Pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),te=!1),c.skipEmptyLines&&(z.data=z.data.filter(function(B){return!G(B)})),tt()&&Nt(),et()}function tt(){return c.header&&C.length===0}function Nt(){if(!z)return;function B(Q,vt){X(c.transformHeader)&&(Q=c.transformHeader(Q,vt)),C.push(Q)}if(Array.isArray(z.data[0])){for(var j=0;tt()&&j<z.data.length;j++)z.data[j].forEach(B);z.data.splice(0,1)}else z.data.forEach(B)}function ot(B){return c.dynamicTypingFunction&&c.dynamicTyping[B]===void 0&&(c.dynamicTyping[B]=c.dynamicTypingFunction(B)),(c.dynamicTyping[B]||c.dynamicTyping)===!0}function Bt(B,j){return ot(B)?j==="true"||j==="TRUE"?!0:j==="false"||j==="FALSE"?!1:Z(j)?parseFloat(j):R.test(j)?new Date(j):j===""?null:j:j}function et(){if(!z||!c.header&&!c.dynamicTyping&&!c.transform)return z;function B(Q,vt){var k=c.header?{}:[],_t;for(_t=0;_t<Q.length;_t++){var ee=_t,$t=Q[_t];c.header&&(ee=_t>=C.length?"__parsed_extra":C[_t]),c.transform&&($t=c.transform($t,ee)),$t=Bt(ee,$t),ee==="__parsed_extra"?(k[ee]=k[ee]||[],k[ee].push($t)):k[ee]=$t}return c.header&&(_t>C.length?Pe("FieldMismatch","TooManyFields","Too many fields: expected "+C.length+" fields but parsed "+_t,I+vt):_t<C.length&&Pe("FieldMismatch","TooFewFields","Too few fields: expected "+C.length+" fields but parsed "+_t,I+vt)),k}var j=1;return!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(B),j=z.data.length):z.data=B(z.data,0),c.header&&z.meta&&(z.meta.fields=C),I+=j,z}function ke(B,j,Q,vt,k){var _t,ee,$t,Ur;k=k||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var cr=0;cr<k.length;cr++){var $i=k[cr],Fr=0,pr=0,se=0;$t=void 0;for(var je=new T({comments:vt,delimiter:$i,newline:j,preview:10}).parse(B),re=0;re<je.data.length;re++){if(Q&&G(je.data[re])){se++;continue}var me=je.data[re].length;if(pr+=me,typeof $t>"u"){$t=me;continue}else me>0&&(Fr+=Math.abs(me-$t),$t=me)}je.data.length>0&&(pr/=je.data.length-se),(typeof ee>"u"||Fr<=ee)&&(typeof Ur>"u"||pr>Ur)&&pr>1.99&&(ee=Fr,_t=$i,Ur=pr)}return c.delimiter=_t,{successful:!!_t,bestDelimiter:_t}}function Pe(B,j,Q,vt){var k={type:B,code:j,message:Q};vt!==void 0&&(k.row=vt),z.errors.push(k)}}function v(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(c){c=c||{};var p=c.delimiter,b=c.newline,O=c.comments,R=c.step,D=c.preview,L=c.fastMode,I,V=null,lt=!1;c.quoteChar===void 0||c.quoteChar===null?I='"':I=c.quoteChar;var Et=I;if(c.escapeChar!==void 0&&(Et=c.escapeChar),(typeof p!="string"||o.BAD_DELIMITERS.indexOf(p)>-1)&&(p=","),O===p)throw new Error("Comment character same as delimiter");O===!0?O="#":(typeof O!="string"||o.BAD_DELIMITERS.indexOf(O)>-1)&&(O=!1),b!==`
`&&b!=="\r"&&b!==`\r
`&&(b=`
`);var K=0,te=!1;this.parse=function(C,z,xt){if(typeof C!="string")throw new Error("Input must be a string");var G=C.length,Z=p.length,Y=b.length,tt=O.length,Nt=X(R);K=0;var ot=[],Bt=[],et=[],ke=0;if(!C)return se();if(L||L!==!1&&C.indexOf(I)===-1){for(var Pe=C.split(b),B=0;B<Pe.length;B++){if(et=Pe[B],K+=et.length,B!==Pe.length-1)K+=b.length;else if(xt)return se();if(!(O&&et.substring(0,tt)===O)){if(Nt){if(ot=[],cr(et.split(p)),je(),te)return se()}else cr(et.split(p));if(D&&B>=D)return ot=ot.slice(0,D),se(!0)}}return se()}for(var j=C.indexOf(p,K),Q=C.indexOf(b,K),vt=new RegExp(v(Et)+v(I),"g"),k=C.indexOf(I,K);;){if(C[K]===I){for(k=K,K++;;){if(k=C.indexOf(I,k+1),k===-1)return xt||Bt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ot.length,index:K}),Fr();if(k===G-1){var _t=C.substring(K,k).replace(vt,I);return Fr(_t)}if(I===Et&&C[k+1]===Et){k++;continue}if(!(I!==Et&&k!==0&&C[k-1]===Et)){j!==-1&&j<k+1&&(j=C.indexOf(p,k+1)),Q!==-1&&Q<k+1&&(Q=C.indexOf(b,k+1));var ee=Q===-1?j:Math.min(j,Q),$t=$i(ee);if(C.substr(k+1+$t,Z)===p){et.push(C.substring(K,k).replace(vt,I)),K=k+1+$t+Z,C[k+1+$t+Z]!==I&&(k=C.indexOf(I,K)),j=C.indexOf(p,K),Q=C.indexOf(b,K);break}var Ur=$i(Q);if(C.substring(k+1+Ur,k+1+Ur+Y)===b){if(et.push(C.substring(K,k).replace(vt,I)),pr(k+1+Ur+Y),j=C.indexOf(p,K),k=C.indexOf(I,K),Nt&&(je(),te))return se();if(D&&ot.length>=D)return se(!0);break}Bt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ot.length,index:K}),k++}}continue}if(O&&et.length===0&&C.substring(K,K+tt)===O){if(Q===-1)return se();K=Q+Y,Q=C.indexOf(b,K),j=C.indexOf(p,K);continue}if(j!==-1&&(j<Q||Q===-1)){et.push(C.substring(K,j)),K=j+Z,j=C.indexOf(p,K);continue}if(Q!==-1){if(et.push(C.substring(K,Q)),pr(Q+Y),Nt&&(je(),te))return se();if(D&&ot.length>=D)return se(!0);continue}break}return Fr();function cr(re){ot.push(re),ke=K}function $i(re){var me=0;if(re!==-1){var dr=C.substring(k+1,re);dr&&dr.trim()===""&&(me=dr.length)}return me}function Fr(re){return xt||(typeof re>"u"&&(re=C.substring(K)),et.push(re),K=G,cr(et),Nt&&je()),se()}function pr(re){K=re,cr(et),et=[],Q=C.indexOf(b,K)}function se(re){if(c.header&&!z&&ot.length&&!lt){let me=ot[0],dr=Object.create(null),ea=new Set(me),Ao=!1;for(let Jr=0;Jr<me.length;Jr++){let We=me[Jr];if(X(c.transformHeader)&&(We=c.transformHeader(We,Jr)),!dr[We])dr[We]=1,me[Jr]=We;else{let ji,Oo=dr[We];do ji=`${We}_${Oo}`,Oo++;while(ea.has(ji));ea.add(ji),me[Jr]=ji,dr[We]++,Ao=!0,V===null&&(V={}),V[ji]=We}ea.add(We)}Ao&&console.warn("Duplicate headers found and renamed."),lt=!0}return{data:ot,errors:Bt,meta:{delimiter:p,linebreak:b,aborted:te,truncated:!!re,cursor:ke+(z||0),renamedHeaders:V}}}function je(){R(se()),ot=[],Bt=[]}},this.abort=function(){te=!0},this.getCharIndex=function(){return K}}function $(){if(!o.WORKERS_SUPPORTED)return!1;var c=r(),p=new e.Worker(c);return p.onmessage=W,p.id=a++,s[p.id]=p,p}function W(c){var p=c.data,b=s[p.workerId],O=!1;if(p.error)b.userError(p.error,p.file);else if(p.results&&p.results.data){var R=function(){O=!0,Vt(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},D={abort:R,pause:Zr,resume:Zr};if(X(b.userStep)){for(var L=0;L<p.results.data.length&&(b.userStep({data:p.results.data[L],errors:p.results.errors,meta:p.results.meta},D),!O);L++);delete p.results}else X(b.userChunk)&&(b.userChunk(p.results,D,p.file),delete p.results)}p.finished&&!O&&Vt(p.workerId,p.results)}function Vt(c,p){var b=s[c];X(b.userComplete)&&b.userComplete(p),b.terminate(),delete s[c]}function Zr(){throw new Error("Not implemented.")}function Se(c){var p=c.data;if(typeof o.WORKER_ID>"u"&&p&&(o.WORKER_ID=p.workerId),typeof p.input=="string")e.postMessage({workerId:o.WORKER_ID,results:o.parse(p.input,p.config),finished:!0});else if(e.File&&p.input instanceof File||p.input instanceof Object){var b=o.parse(p.input,p.config);b&&e.postMessage({workerId:o.WORKER_ID,results:b,finished:!0})}}function hr(c){if(typeof c!="object"||c===null)return c;var p=Array.isArray(c)?[]:{};for(var b in c)p[b]=hr(c[b]);return p}function Ft(c,p){return function(){c.apply(p,arguments)}}function X(c){return typeof c=="function"}return o})});var Gs=mt((e$,zh)=>{"use strict";function Yt(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}Yt.prototype.clone_empty=function(){var t=new Yt(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t};Yt.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]};Yt.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1};Yt.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))};Yt.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)};Yt.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count};Yt.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,t.__items[0]===" "&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1};Yt.prototype.is_empty=function(){return this.__items.length===0};Yt.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]};Yt.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf(`
`);e!==-1?this.__character_count=t.length-e:this.__character_count+=t.length};Yt.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t};Yt.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)};Yt.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)};Yt.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1};Yt.prototype.toString=function(){var t="";return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join("")),t};function En(t,e){this.__cache=[""],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||"",t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}En.prototype.get_indent_size=function(t,e){var r=this.__base_string_length;return e=e||0,t<0&&(r=0),r+=t*this.__indent_size,r+=e,r};En.prototype.get_indent_string=function(t,e){var r=this.__base_string;return e=e||0,t<0&&(t=0,r=""),e+=t*this.__indent_size,this.__ensure_cache(e),r+=this.__cache[e],r};En.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()};En.prototype.__add_column=function(){var t=this.__cache.length,e=0,r="";this.__indent_size&&t>=this.__indent_size&&(e=Math.floor(t/this.__indent_size),t-=e*this.__indent_size,r=new Array(e+1).join(this.__indent_string)),t&&(r+=new Array(t+1).join(" ")),this.__cache.push(r)};function Qt(t,e){this.__indent_cache=new En(t,e),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new Yt(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}Qt.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)};Qt.prototype.get_line_number=function(){return this.__lines.length};Qt.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)};Qt.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)};Qt.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()};Qt.prototype.add_new_line=function(t){return this.is_empty()||!t&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)};Qt.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&(e[e.length-1]===`
`&&(e=e.replace(/\n+$/g,"")),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var r=this.__lines.join(`
`);return t!==`
`&&(r=r.replace(/[\n]/g,t)),r};Qt.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()};Qt.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)};Qt.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1};Qt.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()};Qt.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))};Qt.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()};Qt.prototype.trim=function(t){for(t=t===void 0?!1:t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null};Qt.prototype.just_added_newline=function(){return this.current_line.is_empty()};Qt.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()};Qt.prototype.ensure_empty_line_above=function(t,e){for(var r=this.__lines.length-2;r>=0;){var i=this.__lines[r];if(i.is_empty())break;if(i.item(0).indexOf(t)!==0&&i.item(-1)!==e){this.__lines.splice(r+1,0,new Yt(this)),this.previous_line=this.__lines[this.__lines.length-2];break}r--}};zh.exports.Output=Qt});var Xa=mt((r$,qh)=>{"use strict";function ov(t,e,r,i){this.type=t,this.text=e,this.comments_before=null,this.newlines=r||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}qh.exports.Token=ov});var Za=mt(ur=>{"use strict";var uv="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",Vh="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",Ya="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",Hh="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",Qa="\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}",Xh="(?:"+Qa+"|["+uv+Ya+"])",lv="(?:"+Qa+"|["+Vh+Ya+Hh+"])*";ur.identifier=new RegExp(Xh+lv,"g");ur.identifierStart=new RegExp(Xh);ur.identifierMatch=new RegExp("(?:"+Qa+"|["+Vh+Ya+Hh+"])+");ur.newline=/[\n\r\u2028\u2029]/;ur.lineBreak=new RegExp(`\r
|`+ur.newline.source);ur.allLineBreaks=new RegExp(ur.lineBreak.source,"g")});var zs=mt((n$,Ks)=>{"use strict";function Lr(t,e){this.raw_options=Yh(t,e),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","angular","django","erb","handlebars","php","smarty"],["auto"])}Lr.prototype._get_array=function(t,e){var r=this.raw_options[t],i=e||[];return typeof r=="object"?r!==null&&typeof r.concat=="function"&&(i=r.concat()):typeof r=="string"&&(i=r.split(/[^a-zA-Z0-9_\/\-]+/)),i};Lr.prototype._get_boolean=function(t,e){var r=this.raw_options[t],i=r===void 0?!!e:!!r;return i};Lr.prototype._get_characters=function(t,e){var r=this.raw_options[t],i=e||"";return typeof r=="string"&&(i=r.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),i};Lr.prototype._get_number=function(t,e){var r=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var i=parseInt(r,10);return isNaN(i)&&(i=e),i};Lr.prototype._get_selection=function(t,e,r){var i=this._get_selection_list(t,e,r);if(i.length!==1)throw new Error("Invalid Option Value: The option '"+t+`' can only be one of the following values:
`+e+`
You passed in: '`+this.raw_options[t]+"'");return i[0]};Lr.prototype._get_selection_list=function(t,e,r){if(!e||e.length===0)throw new Error("Selection list cannot be empty.");if(r=r||[e[0]],!this._is_valid_selection(r,e))throw new Error("Invalid Default Value!");var i=this._get_array(t,r);if(!this._is_valid_selection(i,e))throw new Error("Invalid Option Value: The option '"+t+`' can contain only the following values:
`+e+`
You passed in: '`+this.raw_options[t]+"'");return i};Lr.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some(function(r){return e.indexOf(r)===-1})};function Yh(t,e){var r={};t=Qh(t);var i;for(i in t)i!==e&&(r[i]=t[i]);if(e&&t[e])for(i in t[e])r[i]=t[e][i];return r}function Qh(t){var e={},r;for(r in t){var i=r.replace(/-/g,"_");e[i]=t[r]}return e}Ks.exports.Options=Lr;Ks.exports.normalizeOpts=Qh;Ks.exports.mergeOpts=Yh});var Ja=mt((s$,tc)=>{"use strict";var Zh=zs().Options,fv=["before-newline","after-newline","preserve-newline"];function Jh(t){Zh.call(this,t,"js");var e=this.raw_options.brace_style||null;e==="expand-strict"?this.raw_options.brace_style="expand":e==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var r=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var i=0;i<r.length;i++)r[i]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=r[i];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",fv),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}Jh.prototype=new Zh;tc.exports.Options=Jh});var qs=mt((a$,rc)=>{"use strict";var ec=RegExp.prototype.hasOwnProperty("sticky");function ne(t){this.__input=t||"",this.__input_length=this.__input.length,this.__position=0}ne.prototype.restart=function(){this.__position=0};ne.prototype.back=function(){this.__position>0&&(this.__position-=1)};ne.prototype.hasNext=function(){return this.__position<this.__input_length};ne.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t};ne.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e};ne.prototype.__match=function(t,e){t.lastIndex=e;var r=t.exec(this.__input);return r&&!(ec&&t.sticky)&&r.index!==e&&(r=null),r};ne.prototype.test=function(t,e){return e=e||0,e+=this.__position,e>=0&&e<this.__input_length?!!this.__match(t,e):!1};ne.prototype.testChar=function(t,e){var r=this.peek(e);return t.lastIndex=0,r!==null&&t.test(r)};ne.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e};ne.prototype.read=function(t,e,r){var i="",n;return t&&(n=this.match(t),n&&(i+=n[0])),e&&(n||!t)&&(i+=this.readUntil(e,r)),i};ne.prototype.readUntil=function(t,e){var r="",i=this.__position;t.lastIndex=this.__position;var n=t.exec(this.__input);return n?(i=n.index,e&&(i+=n[0].length)):i=this.__input_length,r=this.__input.substring(this.__position,i),this.__position=i,r};ne.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)};ne.prototype.get_regexp=function(t,e){var r=null,i="g";return e&&ec&&(i="y"),typeof t=="string"&&t!==""?r=new RegExp(t,i):t&&(r=new RegExp(t.source,i)),r};ne.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))};ne.prototype.peekUntilAfter=function(t){var e=this.__position,r=this.readUntilAfter(t);return this.__position=e,r};ne.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t};rc.exports.InputScanner=ne});var nc=mt((o$,ic)=>{"use strict";function Xr(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}Xr.prototype.restart=function(){this.__position=0};Xr.prototype.isEmpty=function(){return this.__tokens_length===0};Xr.prototype.hasNext=function(){return this.__position<this.__tokens_length};Xr.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t};Xr.prototype.peek=function(t){var e=null;return t=t||0,t+=this.__position,t>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e};Xr.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1};ic.exports.TokenStream=Xr});var xn=mt((u$,sc)=>{"use strict";function Ze(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}Ze.prototype.read=function(){var t=this._input.read(this._starting_pattern);return(!this._starting_pattern||t)&&(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t};Ze.prototype.read_match=function(){return this._input.match(this._match_pattern)};Ze.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e};Ze.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e};Ze.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e};Ze.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e};Ze.prototype._create=function(){return new Ze(this._input,this)};Ze.prototype._update=function(){};sc.exports.Pattern=Ze});var uc=mt((l$,oc)=>{"use strict";var ac=xn().Pattern;function kr(t,e){ac.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}kr.prototype=new ac;kr.prototype.__set_whitespace_patterns=function(t,e){t+="\\t ",e+="\\n\\r",this._match_pattern=this._input.get_regexp("["+t+e+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+e+"]")};kr.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var t=this._input.read(this._match_pattern);if(t===" ")this.whitespace_before_token=" ";else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t};kr.prototype.matching=function(t,e){var r=this._create();return r.__set_whitespace_patterns(t,e),r._update(),r};kr.prototype._create=function(){return new kr(this._input,this)};kr.prototype.__split=function(t,e){t.lastIndex=0;for(var r=0,i=[],n=t.exec(e);n;)i.push(e.substring(r,n.index)),r=n.index+n[0].length,n=t.exec(e);return r<e.length?i.push(e.substring(r,e.length)):i.push(""),i};oc.exports.WhitespacePattern=kr});var bn=mt((f$,eo)=>{"use strict";var hv=qs().InputScanner,lc=Xa().Token,to=nc().TokenStream,cv=uc().WhitespacePattern,Tn={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},Je=function(t,e){this._input=new hv(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new cv(this._input)};Je.prototype.tokenize=function(){this._input.restart(),this.__tokens=new to,this._reset();for(var t,e=new lc(Tn.START,""),r=null,i=[],n=new to;e.type!==Tn.EOF;){for(t=this._get_next_token(e,r);this._is_comment(t);)n.add(t),t=this._get_next_token(e,r);n.isEmpty()||(t.comments_before=n,n=new to),t.parent=r,this._is_opening(t)?(i.push(r),r=t):r&&this._is_closing(t,r)&&(t.opened=r,r.closed=t,r=i.pop(),t.parent=r),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens};Je.prototype._is_first_token=function(){return this.__tokens.isEmpty()};Je.prototype._reset=function(){};Je.prototype._get_next_token=function(t,e){this._readWhitespace();var r=this._input.read(/.+/g);return r?this._create_token(Tn.RAW,r):this._create_token(Tn.EOF,"")};Je.prototype._is_comment=function(t){return!1};Je.prototype._is_opening=function(t){return!1};Je.prototype._is_closing=function(t,e){return!1};Je.prototype._create_token=function(t,e){var r=new lc(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return r};Je.prototype._readWhitespace=function(){return this._patterns.whitespace.read()};eo.exports.Tokenizer=Je;eo.exports.TOKEN=Tn});var Vs=mt((h$,fc)=>{"use strict";function ro(t,e){t=typeof t=="string"?t:t.source,e=typeof e=="string"?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,"g")}ro.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var r=this.__directive_pattern.exec(t);r;)e[r[1]]=r[2],r=this.__directive_pattern.exec(t);return e};ro.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)};fc.exports.Directives=ro});var so=mt((c$,hc)=>{"use strict";var io=xn().Pattern,no={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1,angular:!1};function $e(t,e){io.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},no),this._excluded=Object.assign({},no),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var r=new io(t);this.__patterns={handlebars_comment:r.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:r.starting_with(/{{{/).until_after(/}}}/),handlebars:r.starting_with(/{{/).until_after(/}}/),php:r.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:r.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:r.starting_with(/{%/).until_after(/%}/),django_value:r.starting_with(/{{/).until_after(/}}/),django_comment:r.starting_with(/{#/).until_after(/#}/),smarty:r.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:r.starting_with(/{\*/).until_after(/\*}/),smarty_literal:r.starting_with(/{literal}/).until_after(/{\/literal}/)}}$e.prototype=new io;$e.prototype._create=function(){return new $e(this._input,this)};$e.prototype._update=function(){this.__set_templated_pattern()};$e.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e};$e.prototype.read_options=function(t){var e=this._create();for(var r in no)e._disabled[r]=t.templating.indexOf(r)===-1;return e._update(),e};$e.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e};$e.prototype.read=function(){var t="";this._match_pattern?t=this._input.read(this._starting_pattern):t=this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t};$e.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.angular||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+t.join("|")+")")};$e.prototype._read_template=function(){var t="",e=this._input.peek();if(e==="<"){var r=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&r==="?"&&(t=t||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&r==="%"&&(t=t||this.__patterns.erb.read())}else e==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(t=t||this.__patterns.handlebars_comment.read(),t=t||this.__patterns.handlebars_unescaped.read(),t=t||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=t||this.__patterns.django_comment.read(),t=t||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(t=t||this.__patterns.smarty_comment.read(),t=t||this.__patterns.smarty_literal.read(),t=t||this.__patterns.smarty.read()));return t};hc.exports.TemplatablePattern=$e});var An=mt((p$,vn)=>{"use strict";var pv=qs().InputScanner,pc=bn().Tokenizer,ao=bn().TOKEN,dv=Vs().Directives,Ce=Za(),_v=xn().Pattern,mv=so().TemplatablePattern;function oo(t,e){return e.indexOf(t)!==-1}var P={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:ao.START,RAW:ao.RAW,EOF:ao.EOF},cc=new dv(/\/\*/,/\*\//),gv=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,yv=/[0-9]/,Ev=/[^\d\.]/,xv=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),Yr=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";Yr=Yr.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");Yr="\\?\\.(?!\\d) "+Yr;Yr=Yr.replace(/ /g,"|");var Tv=new RegExp(Yr),dc="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),bv=dc.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),vv=new RegExp("^(?:"+bv.join("|")+")$"),Hs,Zt=function(t,e){pc.call(this,t,e),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var r=new _v(this._input),i=new mv(this._input).read_options(this._options);this.__patterns={template:i,identifier:i.starting_with(Ce.identifier).matching(Ce.identifierMatch),number:r.matching(gv),punct:r.matching(Tv),comment:r.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:r.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:r.matching(/<!--/),html_comment_end:r.matching(/-->/),include:r.starting_with(/#include/).until_after(Ce.lineBreak),shebang:r.starting_with(/#!/).until_after(Ce.lineBreak),xml:r.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:i.until(/['\\\n\r\u2028\u2029]/),double_quote:i.until(/["\\\n\r\u2028\u2029]/),template_text:i.until(/[`\\$]/),template_expression:i.until(/[`}\\]/)}};Zt.prototype=new pc;Zt.prototype._is_comment=function(t){return t.type===P.COMMENT||t.type===P.BLOCK_COMMENT||t.type===P.UNKNOWN};Zt.prototype._is_opening=function(t){return t.type===P.START_BLOCK||t.type===P.START_EXPR};Zt.prototype._is_closing=function(t,e){return(t.type===P.END_BLOCK||t.type===P.END_EXPR)&&e&&(t.text==="]"&&e.text==="["||t.text===")"&&e.text==="("||t.text==="}"&&e.text==="{")};Zt.prototype._reset=function(){Hs=!1};Zt.prototype._get_next_token=function(t,e){var r=null;this._readWhitespace();var i=this._input.peek();return i===null?this._create_token(P.EOF,""):(r=r||this._read_non_javascript(i),r=r||this._read_string(i),r=r||this._read_pair(i,this._input.peek(1)),r=r||this._read_word(t),r=r||this._read_singles(i),r=r||this._read_comment(i),r=r||this._read_regexp(i,t),r=r||this._read_xml(i,t),r=r||this._read_punctuation(),r=r||this._create_token(P.UNKNOWN,this._input.next()),r)};Zt.prototype._read_word=function(t){var e;if(e=this.__patterns.identifier.read(),e!=="")return e=e.replace(Ce.allLineBreaks,`
`),!(t.type===P.DOT||t.type===P.RESERVED&&(t.text==="set"||t.text==="get"))&&vv.test(e)?(e==="in"||e==="of")&&(t.type===P.WORD||t.type===P.STRING)?this._create_token(P.OPERATOR,e):this._create_token(P.RESERVED,e):this._create_token(P.WORD,e);if(e=this.__patterns.number.read(),e!=="")return this._create_token(P.WORD,e)};Zt.prototype._read_singles=function(t){var e=null;return t==="("||t==="["?e=this._create_token(P.START_EXPR,t):t===")"||t==="]"?e=this._create_token(P.END_EXPR,t):t==="{"?e=this._create_token(P.START_BLOCK,t):t==="}"?e=this._create_token(P.END_BLOCK,t):t===";"?e=this._create_token(P.SEMICOLON,t):t==="."&&Ev.test(this._input.peek(1))?e=this._create_token(P.DOT,t):t===","&&(e=this._create_token(P.COMMA,t)),e&&this._input.next(),e};Zt.prototype._read_pair=function(t,e){var r=null;return t==="#"&&e==="{"&&(r=this._create_token(P.START_BLOCK,t+e)),r&&(this._input.next(),this._input.next()),r};Zt.prototype._read_punctuation=function(){var t=this.__patterns.punct.read();if(t!=="")return t==="="?this._create_token(P.EQUALS,t):t==="?."?this._create_token(P.DOT,t):this._create_token(P.OPERATOR,t)};Zt.prototype._read_non_javascript=function(t){var e="";if(t==="#"){if(this._is_first_token()&&(e=this.__patterns.shebang.read(),e))return this._create_token(P.UNKNOWN,e.trim()+`
`);if(e=this.__patterns.include.read(),e)return this._create_token(P.UNKNOWN,e.trim()+`
`);t=this._input.next();var r="#";if(this._input.hasNext()&&this._input.testChar(yv)){do t=this._input.next(),r+=t;while(this._input.hasNext()&&t!=="#"&&t!=="=");return t==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(r+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(r+="{}",this._input.next(),this._input.next())),this._create_token(P.WORD,r)}this._input.back()}else if(t==="<"&&this._is_first_token()){if(e=this.__patterns.html_comment_start.read(),e){for(;this._input.hasNext()&&!this._input.testChar(Ce.newline);)e+=this._input.next();return Hs=!0,this._create_token(P.COMMENT,e)}}else if(Hs&&t==="-"&&(e=this.__patterns.html_comment_end.read(),e))return Hs=!1,this._create_token(P.COMMENT,e);return null};Zt.prototype._read_comment=function(t){var e=null;if(t==="/"){var r="";if(this._input.peek(1)==="*"){r=this.__patterns.block_comment.read();var i=cc.get_directives(r);i&&i.ignore==="start"&&(r+=cc.readIgnored(this._input)),r=r.replace(Ce.allLineBreaks,`
`),e=this._create_token(P.BLOCK_COMMENT,r),e.directives=i}else this._input.peek(1)==="/"&&(r=this.__patterns.comment.read(),e=this._create_token(P.COMMENT,r))}return e};Zt.prototype._read_string=function(t){if(t==="`"||t==="'"||t==='"'){var e=this._input.next();return this.has_char_escapes=!1,t==="`"?e+=this._read_string_recursive("`",!0,"${"):e+=this._read_string_recursive(t),this.has_char_escapes&&this._options.unescape_strings&&(e=Av(e)),this._input.peek()===t&&(e+=this._input.next()),e=e.replace(Ce.allLineBreaks,`
`),this._create_token(P.STRING,e)}return null};Zt.prototype._allow_regexp_or_xml=function(t){return t.type===P.RESERVED&&oo(t.text,["return","case","throw","else","do","typeof","yield"])||t.type===P.END_EXPR&&t.text===")"&&t.opened.previous.type===P.RESERVED&&oo(t.opened.previous.text,["if","while","for"])||oo(t.type,[P.COMMENT,P.START_EXPR,P.START_BLOCK,P.START,P.END_BLOCK,P.OPERATOR,P.EQUALS,P.EOF,P.SEMICOLON,P.COMMA])};Zt.prototype._read_regexp=function(t,e){if(t==="/"&&this._allow_regexp_or_xml(e)){for(var r=this._input.next(),i=!1,n=!1;this._input.hasNext()&&(i||n||this._input.peek()!==t)&&!this._input.testChar(Ce.newline);)r+=this._input.peek(),i?i=!1:(i=this._input.peek()==="\\",this._input.peek()==="["?n=!0:this._input.peek()==="]"&&(n=!1)),this._input.next();return this._input.peek()===t&&(r+=this._input.next(),r+=this._input.read(Ce.identifier)),this._create_token(P.STRING,r)}return null};Zt.prototype._read_xml=function(t,e){if(this._options.e4x&&t==="<"&&this._allow_regexp_or_xml(e)){var r="",i=this.__patterns.xml.read_match();if(i){for(var n=i[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),s=n.indexOf("{")===0,a=0;i;){var o=!!i[1],u=i[2],l=!!i[i.length-1]||u.slice(0,8)==="![CDATA[";if(!l&&(u===n||s&&u.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(o?--a:++a),r+=i[0],a<=0)break;i=this.__patterns.xml.read_match()}return i||(r+=this._input.match(/[\s\S]*/g)[0]),r=r.replace(Ce.allLineBreaks,`
`),this._create_token(P.STRING,r)}}return null};function Av(t){for(var e="",r=0,i=new pv(t),n=null;i.hasNext();)if(n=i.match(/([\s]|[^\\]|\\\\)+/g),n&&(e+=n[0]),i.peek()==="\\"){if(i.next(),i.peek()==="x")n=i.match(/x([0-9A-Fa-f]{2})/g);else if(i.peek()==="u")n=i.match(/u([0-9A-Fa-f]{4})/g),n||(n=i.match(/u\{([0-9A-Fa-f]+)\}/g));else{e+="\\",i.hasNext()&&(e+=i.next());continue}if(!n||(r=parseInt(n[1],16),r>126&&r<=255&&n[0].indexOf("x")===0))return t;r>=0&&r<32||r>1114111?e+="\\"+n[0]:r===34||r===39||r===92?e+="\\"+String.fromCharCode(r):e+=String.fromCharCode(r)}return e}Zt.prototype._read_string_recursive=function(t,e,r){var i,n;t==="'"?n=this.__patterns.single_quote:t==='"'?n=this.__patterns.double_quote:t==="`"?n=this.__patterns.template_text:t==="}"&&(n=this.__patterns.template_expression);for(var s=n.read(),a="";this._input.hasNext();){if(a=this._input.next(),a===t||!e&&Ce.newline.test(a)){this._input.back();break}else a==="\\"&&this._input.hasNext()?(i=this._input.peek(),i==="x"||i==="u"?this.has_char_escapes=!0:i==="\r"&&this._input.peek(1)===`
`&&this._input.next(),a+=this._input.next()):r&&(r==="${"&&a==="$"&&this._input.peek()==="{"&&(a+=this._input.next()),r===a&&(t==="`"?a+=this._read_string_recursive("}",e,"`"):a+=this._read_string_recursive("`",e,"${"),this._input.hasNext()&&(a+=this._input.next())));a+=n.read(),s+=a}return s};vn.exports.Tokenizer=Zt;vn.exports.TOKEN=P;vn.exports.positionable_operators=xv.slice();vn.exports.line_starters=dc.slice()});var yc=mt((d$,gc)=>{"use strict";var Ov=Gs().Output,Sv=Xa().Token,Xs=Za(),Rv=Ja().Options,Nv=An().Tokenizer,Nn=An().line_starters,On=An().positionable_operators,_=An().TOKEN;function q(t,e){return e.indexOf(t)!==-1}function Iv(t){return t.replace(/^\s+/g,"")}function wv(t){for(var e={},r=0;r<t.length;r++)e[t[r].replace(/-/g,"_")]=t[r];return e}function Le(t,e){return t&&t.type===_.RESERVED&&t.text===e}function ut(t,e){return t&&t.type===_.RESERVED&&q(t.text,e)}var Ys=["case","return","do","if","throw","else","await","break","continue","async"],Cv=["before-newline","after-newline","preserve-newline"],Sn=wv(Cv),_c=[Sn.before_newline,Sn.preserve_newline],F={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function mc(t,e){e.multiline_frame||e.mode===F.ForInitializer||e.mode===F.Conditional||t.remove_indent(e.start_line_index)}function Lv(t){t=t.replace(Xs.allLineBreaks,`
`);for(var e=[],r=t.indexOf(`
`);r!==-1;)e.push(t.substring(0,r)),t=t.substring(r+1),r=t.indexOf(`
`);return t.length&&e.push(t),e}function Pr(t){return t===F.ArrayLiteral}function Rn(t){return q(t,[F.Expression,F.ForInitializer,F.Conditional])}function kv(t,e){for(var r=0;r<t.length;r++){var i=t[r].trim();if(i.charAt(0)!==e)return!1}return!0}function Pv(t,e){for(var r=0,i=t.length,n;r<i;r++)if(n=t[r],n&&n.indexOf(e)!==0)return!1;return!0}function rt(t,e){e=e||{},this._source_text=t||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new Rv(e)}rt.prototype.create_flags=function(t,e){var r=0;t&&(r=t.indentation_level,!this._output.just_added_newline()&&t.line_indent_level>r&&(r=t.line_indent_level));var i={mode:e,parent:t,last_token:t?t.last_token:new Sv(_.START_BLOCK,""),last_word:t?t.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:r,alignment:0,line_indent_level:t?t.line_indent_level:r,start_line_index:this._output.get_line_number(),ternary_depth:0};return i};rt.prototype._reset=function(t){var e=t.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new Ov(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(F.BlockStatement);var r=new Nv(t,this._options);return this._tokens=r.tokenize(),t};rt.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t,e=this._reset(this._source_text),r=this._options.eol;this._options.eol==="auto"&&(r=`
`,e&&Xs.lineBreak.test(e||"")&&(r=e.match(Xs.lineBreak)[0]));for(var i=this._tokens.next();i;)this.handle_token(i),this._last_last_text=this._flags.last_token.text,this._flags.last_token=i,i=this._tokens.next();return t=this._output.get_code(r),t};rt.prototype.handle_token=function(t,e){t.type===_.START_EXPR?this.handle_start_expr(t):t.type===_.END_EXPR?this.handle_end_expr(t):t.type===_.START_BLOCK?this.handle_start_block(t):t.type===_.END_BLOCK?this.handle_end_block(t):t.type===_.WORD?this.handle_word(t):t.type===_.RESERVED?this.handle_word(t):t.type===_.SEMICOLON?this.handle_semicolon(t):t.type===_.STRING?this.handle_string(t):t.type===_.EQUALS?this.handle_equals(t):t.type===_.OPERATOR?this.handle_operator(t):t.type===_.COMMA?this.handle_comma(t):t.type===_.BLOCK_COMMENT?this.handle_block_comment(t,e):t.type===_.COMMENT?this.handle_comment(t,e):t.type===_.DOT?this.handle_dot(t):t.type===_.EOF?this.handle_eof(t):t.type===_.UNKNOWN?this.handle_unknown(t,e):this.handle_unknown(t,e)};rt.prototype.handle_whitespace_and_comments=function(t,e){var r=t.newlines,i=this._options.keep_array_indentation&&Pr(this._flags.mode);if(t.comments_before)for(var n=t.comments_before.next();n;)this.handle_whitespace_and_comments(n,e),this.handle_token(n,e),n=t.comments_before.next();if(i)for(var s=0;s<r;s+=1)this.print_newline(s>0,e);else if(this._options.max_preserve_newlines&&r>this._options.max_preserve_newlines&&(r=this._options.max_preserve_newlines),this._options.preserve_newlines&&r>1){this.print_newline(!1,e);for(var a=1;a<r;a+=1)this.print_newline(!0,e)}};var uo=["async","break","continue","return","throw","yield"];rt.prototype.allow_wrap_or_preserved_newline=function(t,e){if(e=e===void 0?!1:e,!this._output.just_added_newline()){var r=this._options.preserve_newlines&&t.newlines||e,i=q(this._flags.last_token.text,On)||q(t.text,On);if(i){var n=q(this._flags.last_token.text,On)&&q(this._options.operator_position,_c)||q(t.text,On);r=r&&n}if(r)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(ut(this._flags.last_token,uo))return;this._output.set_wrap_point()}}};rt.prototype.print_newline=function(t,e){if(!e&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==_.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var r=this._tokens.peek();this._flags.mode===F.Statement&&!(this._flags.if_block&&Le(r,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(t)&&(this._flags.multiline_frame=!0)};rt.prototype.print_token_line_indentation=function(t){this._output.just_added_newline()&&(this._options.keep_array_indentation&&t.newlines&&(t.text==="["||Pr(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(t.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))};rt.prototype.print_token=function(t){if(this._output.raw){this._output.add_raw_token(t);return}if(this._options.comma_first&&t.previous&&t.previous.type===_.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var e=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(e),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(t),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(t),this._output.non_breaking_space=!0,this._output.add_token(t.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)};rt.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};rt.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};rt.prototype.set_mode=function(t){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,t),this._flags=this.create_flags(this._previous_flags,t),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};rt.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===F.Statement&&mc(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};rt.prototype.start_of_object_property=function(){return this._flags.parent.mode===F.ObjectLiteral&&this._flags.mode===F.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||ut(this._flags.last_token,["get","set"]))};rt.prototype.start_of_statement=function(t){var e=!1;return e=e||ut(this._flags.last_token,["var","let","const"])&&t.type===_.WORD,e=e||Le(this._flags.last_token,"do"),e=e||!(this._flags.parent.mode===F.ObjectLiteral&&this._flags.mode===F.Statement)&&ut(this._flags.last_token,uo)&&!t.newlines,e=e||Le(this._flags.last_token,"else")&&!(Le(t,"if")&&!t.comments_before),e=e||this._flags.last_token.type===_.END_EXPR&&(this._previous_flags.mode===F.ForInitializer||this._previous_flags.mode===F.Conditional),e=e||this._flags.last_token.type===_.WORD&&this._flags.mode===F.BlockStatement&&!this._flags.in_case&&!(t.text==="--"||t.text==="++")&&this._last_last_text!=="function"&&t.type!==_.WORD&&t.type!==_.RESERVED,e=e||this._flags.mode===F.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||ut(this._flags.last_token,["get","set"])),e?(this.set_mode(F.Statement),this.indent(),this.handle_whitespace_and_comments(t,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t,ut(t,["do","for","if","while"])),!0):!1};rt.prototype.handle_start_expr=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t);var e=F.Expression;if(t.text==="["){if(this._flags.last_token.type===_.WORD||this._flags.last_token.text===")"){ut(this._flags.last_token,Nn)&&(this._output.space_before_token=!0),this.print_token(t),this.set_mode(e),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}e=F.ArrayLiteral,Pr(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),q(this._flags.last_token.type,[_.START_EXPR,_.END_EXPR,_.WORD,_.OPERATOR,_.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===_.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,e=F.ForInitializer):q(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,e=F.Conditional):q(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&t.whitespace_before===""?this._output.space_before_token=!1:(q(this._flags.last_token.text,Nn)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===_.EQUALS||this._flags.last_token.type===_.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t);else if(this._flags.last_token.type===_.WORD){this._output.space_before_token=!1;var r=this._tokens.peek(-3);if(this._options.space_after_named_function&&r){var i=this._tokens.peek(-4);ut(r,["async","function"])||r.text==="*"&&ut(i,["async","function"])?this._output.space_before_token=!0:this._flags.mode===F.ObjectLiteral?(r.text==="{"||r.text===","||r.text==="*"&&(i.text==="{"||i.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(t);(this._flags.last_token.type===_.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(q(this._last_last_text,["function","yield"])||this._flags.mode===F.ObjectLiteral&&q(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===_.START_BLOCK?this.print_newline():(this._flags.last_token.type===_.END_EXPR||this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===_.COMMA)&&this.allow_wrap_or_preserved_newline(t,t.newlines),this.print_token(t),this.set_mode(e),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()};rt.prototype.handle_end_expr=function(t){for(;this._flags.mode===F.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(t,t.text==="]"&&Pr(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===_.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(t),this.restore_mode(),mc(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===F.Conditional&&(this._previous_flags.mode=F.Expression,this._flags.do_block=!1,this._flags.do_while=!1)};rt.prototype.handle_start_block=function(t){this.handle_whitespace_and_comments(t);var e=this._tokens.peek(),r=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===_.END_EXPR?(this.set_mode(F.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(F.BlockStatement):r&&(q(r.text,[":",","])&&q(e.type,[_.STRING,_.WORD,_.RESERVED])||q(e.text,["get","set","..."])&&q(r.type,[_.WORD,_.RESERVED]))?q(this._last_last_text,["class","interface"])&&!q(r.text,[":",","])?this.set_mode(F.BlockStatement):this.set_mode(F.ObjectLiteral):this._flags.last_token.type===_.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(F.BlockStatement):q(this._flags.last_token.type,[_.EQUALS,_.START_EXPR,_.COMMA,_.OPERATOR])||ut(this._flags.last_token,["return","throw","import","default"])?this.set_mode(F.ObjectLiteral):this.set_mode(F.BlockStatement),this._flags.last_token&&ut(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var i=!e.comments_before&&e.text==="}",n=i&&this._flags.last_word==="function"&&this._flags.last_token.type===_.END_EXPR;if(this._options.brace_preserve_inline){var s=0,a=null;this._flags.inline_frame=!0;do if(s+=1,a=this._tokens.peek(s-1),a.newlines){this._flags.inline_frame=!1;break}while(a.type!==_.EOF&&!(a.type===_.END_BLOCK&&a.opened===t))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&t.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==_.OPERATOR&&(n||this._flags.last_token.type===_.EQUALS||ut(this._flags.last_token,Ys)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(Pr(this._previous_flags.mode)&&(this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.COMMA)&&((this._flags.last_token.type===_.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(t),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==_.OPERATOR&&this._flags.last_token.type!==_.START_EXPR&&(q(this._flags.last_token.type,[_.START_BLOCK,_.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(t),this.indent(),!i&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()};rt.prototype.handle_end_block=function(t){for(this.handle_whitespace_and_comments(t);this._flags.mode===F.Statement;)this.restore_mode();var e=this._flags.last_token.type===_.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:this._options.brace_style==="expand"?e||this.print_newline():e||(Pr(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(t)};rt.prototype.handle_word=function(t){if(t.type===_.RESERVED){if(q(t.text,["set","get"])&&this._flags.mode!==F.ObjectLiteral)t.type=_.WORD;else if(t.text==="import"&&q(this._tokens.peek().text,["(","."]))t.type=_.WORD;else if(q(t.text,["as","from"])&&!this._flags.import_block)t.type=_.WORD;else if(this._flags.mode===F.ObjectLiteral){var e=this._tokens.peek();e.text===":"&&(t.type=_.WORD)}}if(this.start_of_statement(t)?ut(this._flags.last_token,["var","let","const"])&&t.type===_.WORD&&(this._flags.declaration_statement=!0):t.newlines&&!Rn(this._flags.mode)&&(this._flags.last_token.type!==_.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==_.EQUALS&&(this._options.preserve_newlines||!ut(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(t),this.print_newline()):this.handle_whitespace_and_comments(t),this._flags.do_block&&!this._flags.do_while)if(Le(t,"while")){this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&Le(t,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===F.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&ut(t,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(t),this._flags.in_case=!0;return}if((this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.EQUALS||this._flags.last_token.type===_.OPERATOR)&&!this.start_of_object_property()&&!(q(this._flags.last_token.text,["+","-"])&&this._last_last_text===":"&&this._flags.parent.mode===F.ObjectLiteral)&&this.allow_wrap_or_preserved_newline(t),Le(t,"function")){(q(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(q(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===_.OPERATOR))&&!this._output.just_added_blankline()&&!t.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===_.RESERVED||this._flags.last_token.type===_.WORD?ut(this._flags.last_token,["get","set","new","export"])||ut(this._flags.last_token,uo)?this._output.space_before_token=!0:Le(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===_.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(Rn(this._flags.mode)||Pr(this._flags.mode))||this.print_newline(),this.print_token(t),this._flags.last_word=t.text;return}var r="NONE";if(this._flags.last_token.type===_.END_BLOCK?this._previous_flags.inline_frame?r="SPACE":ut(t,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&t.newlines?r="NEWLINE":(r="SPACE",this._output.space_before_token=!0):r="NEWLINE":this._flags.last_token.type===_.SEMICOLON&&this._flags.mode===F.BlockStatement?r="NEWLINE":this._flags.last_token.type===_.SEMICOLON&&Rn(this._flags.mode)?r="SPACE":this._flags.last_token.type===_.STRING?r="NEWLINE":this._flags.last_token.type===_.RESERVED||this._flags.last_token.type===_.WORD||this._flags.last_token.text==="*"&&(q(this._last_last_text,["function","yield"])||this._flags.mode===F.ObjectLiteral&&q(this._last_last_text,["{",","]))?r="SPACE":this._flags.last_token.type===_.START_BLOCK?this._flags.inline_frame?r="SPACE":r="NEWLINE":this._flags.last_token.type===_.END_EXPR&&(this._output.space_before_token=!0,r="NEWLINE"),ut(t,Nn)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?r="SPACE":r="NEWLINE"),ut(t,["else","catch","finally"]))if((!(this._flags.last_token.type===_.END_BLOCK&&this._previous_flags.mode===F.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&t.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var i=this._output.current_line;i.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else r==="NEWLINE"?ut(this._flags.last_token,Ys)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&ut(t,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==_.END_EXPR?(this._flags.last_token.type!==_.START_EXPR||!ut(t,["var","let","const"]))&&this._flags.last_token.text!==":"&&(Le(t,"if")&&Le(t.previous,"else")?this._output.space_before_token=!0:this.print_newline()):ut(t,Nn)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&Pr(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():r==="SPACE"&&(this._output.space_before_token=!0);t.previous&&(t.previous.type===_.WORD||t.previous.type===_.RESERVED)&&(this._output.space_before_token=!0),this.print_token(t),this._flags.last_word=t.text,t.type===_.RESERVED&&(t.text==="do"?this._flags.do_block=!0:t.text==="if"?this._flags.if_block=!0:t.text==="import"?this._flags.import_block=!0:this._flags.import_block&&Le(t,"from")&&(this._flags.import_block=!1))};rt.prototype.handle_semicolon=function(t){this.start_of_statement(t)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(t);for(var e=this._tokens.peek();this._flags.mode===F.Statement&&!(this._flags.if_block&&Le(e,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(t)};rt.prototype.handle_string=function(t){t.text.startsWith("`")&&t.newlines===0&&t.whitespace_before===""&&(t.previous.text===")"||this._flags.last_token.type===_.WORD)||(this.start_of_statement(t)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(t),this._flags.last_token.type===_.RESERVED||this._flags.last_token.type===_.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.EQUALS||this._flags.last_token.type===_.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t):t.text.startsWith("`")&&this._flags.last_token.type===_.END_EXPR&&(t.previous.text==="]"||t.previous.text===")")&&t.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(t)};rt.prototype.handle_equals=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0};rt.prototype.handle_comma=function(t){this.handle_whitespace_and_comments(t,!0),this.print_token(t),this._output.space_before_token=!0,this._flags.declaration_statement?(Rn(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)):this._flags.mode===F.ObjectLiteral||this._flags.mode===F.Statement&&this._flags.parent.mode===F.ObjectLiteral?(this._flags.mode===F.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)};rt.prototype.handle_operator=function(t){var e=t.text==="*"&&(ut(this._flags.last_token,["function","yield"])||q(this._flags.last_token.type,[_.START_BLOCK,_.COMMA,_.END_BLOCK,_.SEMICOLON])),r=q(t.text,["-","+"])&&(q(this._flags.last_token.type,[_.START_BLOCK,_.START_EXPR,_.EQUALS,_.OPERATOR])||q(this._flags.last_token.text,Nn)||this._flags.last_token.text===",");if(!this.start_of_statement(t)){var i=!e;this.handle_whitespace_and_comments(t,i)}if(t.text==="*"&&this._flags.last_token.type===_.DOT){this.print_token(t);return}if(t.text==="::"){this.print_token(t);return}if(q(t.text,["-","+"])&&this.start_of_object_property()){this.print_token(t);return}if(this._flags.last_token.type===_.OPERATOR&&q(this._options.operator_position,_c)&&this.allow_wrap_or_preserved_newline(t),t.text===":"&&this._flags.in_case){this.print_token(t),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==_.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var n=!0,s=!0,a=!1;if(t.text===":"?this._flags.ternary_depth===0?n=!1:(this._flags.ternary_depth-=1,a=!0):t.text==="?"&&(this._flags.ternary_depth+=1),!r&&!e&&this._options.preserve_newlines&&q(t.text,On)){var o=t.text===":",u=o&&a,l=o&&!a;switch(this._options.operator_position){case Sn.before_newline:this._output.space_before_token=!l,this.print_token(t),(!o||u)&&this.allow_wrap_or_preserved_newline(t),this._output.space_before_token=!0;return;case Sn.after_newline:this._output.space_before_token=!0,!o||u?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(t):this._output.space_before_token=!1,this.print_token(t),this._output.space_before_token=!0;return;case Sn.preserve_newline:l||this.allow_wrap_or_preserved_newline(t),n=!(this._output.just_added_newline()||l),this._output.space_before_token=n,this.print_token(t),this._output.space_before_token=!0;return}}if(e){this.allow_wrap_or_preserved_newline(t),n=!1;var h=this._tokens.peek();s=h&&q(h.type,[_.WORD,_.RESERVED])}else if(t.text==="...")this.allow_wrap_or_preserved_newline(t),n=this._flags.last_token.type===_.START_BLOCK,s=!1;else if(q(t.text,["--","++","!","~"])||r){if((this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR)&&this.allow_wrap_or_preserved_newline(t),n=!1,s=!1,t.newlines&&(t.text==="--"||t.text==="++"||t.text==="~")){var f=ut(this._flags.last_token,Ys)&&t.newlines;f&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(f,!0)}this._flags.last_token.text===";"&&Rn(this._flags.mode)&&(n=!0),this._flags.last_token.type===_.RESERVED?n=!0:this._flags.last_token.type===_.END_EXPR?n=!(this._flags.last_token.text==="]"&&(t.text==="--"||t.text==="++")):this._flags.last_token.type===_.OPERATOR&&(n=q(t.text,["--","-","++","+"])&&q(this._flags.last_token.text,["--","-","++","+"]),q(t.text,["+","-"])&&q(this._flags.last_token.text,["--","++"])&&(s=!0)),(this._flags.mode===F.BlockStatement&&!this._flags.inline_frame||this._flags.mode===F.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||n,this.print_token(t),this._output.space_before_token=s};rt.prototype.handle_block_comment=function(t,e){if(this._output.raw){this._output.add_raw_token(t),t.directives&&t.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(t.directives){this.print_newline(!1,e),this.print_token(t),t.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!Xs.newline.test(t.text)&&!t.newlines){this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0;return}else this.print_block_commment(t,e)};rt.prototype.print_block_commment=function(t,e){var r=Lv(t.text),i,n=!1,s=!1,a=t.whitespace_before,o=a.length;if(this.print_newline(!1,e),this.print_token_line_indentation(t),this._output.add_token(r[0]),this.print_newline(!1,e),r.length>1){for(r=r.slice(1),n=kv(r,"*"),s=Pv(r,a),n&&(this._flags.alignment=1),i=0;i<r.length;i++)n?(this.print_token_line_indentation(t),this._output.add_token(Iv(r[i]))):s&&r[i]?(this.print_token_line_indentation(t),this._output.add_token(r[i].substring(o))):(this._output.current_line.set_indent(-1),this._output.add_token(r[i])),this.print_newline(!1,e);this._flags.alignment=0}};rt.prototype.handle_comment=function(t,e){t.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(t),this.print_newline(!1,e)};rt.prototype.handle_dot=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),ut(this._flags.last_token,Ys)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(t,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(t)};rt.prototype.handle_unknown=function(t,e){this.print_token(t),t.text[t.text.length-1]===`
`&&this.print_newline(!1,e)};rt.prototype.handle_eof=function(t){for(;this._flags.mode===F.Statement;)this.restore_mode();this.handle_whitespace_and_comments(t)};gc.exports.Beautifier=rt});var Ec=mt((_$,lo)=>{"use strict";var Mv=yc().Beautifier,Uv=Ja().Options;function Fv(t,e){var r=new Mv(t,e);return r.beautify()}lo.exports=Fv;lo.exports.defaultOptions=function(){return new Uv}});var fo=mt((m$,bc)=>{"use strict";var xc=zs().Options;function Tc(t){xc.call(this,t,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var e=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||e;var r=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var i=0;i<r.length;i++)r[i]!=="expand"?this.brace_style="collapse":this.brace_style=r[i]}Tc.prototype=new xc;bc.exports.Options=Tc});var Sc=mt((g$,Oc)=>{"use strict";var Bv=fo().Options,$v=Gs().Output,jv=qs().InputScanner,Wv=Vs().Directives,vc=new Wv(/\/\*/,/\*\//),Ac=/\r\n|[\r\n]/,Dv=/\r\n|[\r\n]/g,Qs=/\s/,Gv=/(?:\s|\n)+/g,Kv=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,zv=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function lr(t,e){this._source_text=t||"",this._options=new Bv(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}lr.prototype.eatString=function(t){var e="";for(this._ch=this._input.next();this._ch;){if(e+=this._ch,this._ch==="\\")e+=this._input.next();else if(t.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return e};lr.prototype.eatWhitespace=function(t){for(var e=Qs.test(this._input.peek()),r=0;Qs.test(this._input.peek());)this._ch=this._input.next(),t&&this._ch===`
`&&(r===0||r<this._options.max_preserve_newlines)&&(r++,this._output.add_new_line(!0));return e};lr.prototype.foundNestedPseudoClass=function(){for(var t=0,e=1,r=this._input.peek(e);r;){if(r==="{")return!0;if(r==="(")t+=1;else if(r===")"){if(t===0)return!1;t-=1}else if(r===";"||r==="}")return!1;e++,r=this._input.peek(e)}return!1};lr.prototype.print_string=function(t){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(t)};lr.prototype.preserveSingleSpace=function(t){t&&(this._output.space_before_token=!0)};lr.prototype.indent=function(){this._indentLevel++};lr.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--};lr.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;e==="auto"&&(e=`
`,t&&Ac.test(t||"")&&(e=t.match(Ac)[0])),t=t.replace(Dv,`
`);var r=t.match(/^[\t ]*/)[0];this._output=new $v(this._options,r),this._input=new jv(t),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var i=0,n=!1,s=!1,a=!1,o=!1,u=!1,l=this._ch,h=!1,f,d,m;f=this._input.read(Gv),d=f!=="",m=l,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),l=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var g=this._input.read(Kv),E=vc.get_directives(g);E&&E.ignore==="start"&&(g+=vc.readIgnored(this._input)),this.print_string(g),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(zv)),this.eatWhitespace(!0);else if(this._ch==="$"){this.preserveSingleSpace(d),this.print_string(this._ch);var y=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);y.match(/[ :]$/)&&(y=this.eatString(": ").replace(/\s+$/,""),this.print_string(y),this._output.space_before_token=!0),i===0&&y.indexOf(":")!==-1&&(s=!0,this.indent())}else if(this._ch==="@")if(this.preserveSingleSpace(d),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var x=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);x.match(/[ :]$/)&&(x=this.eatString(": ").replace(/\s+$/,""),this.print_string(x),this._output.space_before_token=!0),i===0&&x.indexOf(":")!==-1?(s=!0,this.indent()):x in this.NESTED_AT_RULE?(this._nestedLevel+=1,x in this.CONDITIONAL_GROUP_RULE&&(a=!0)):i===0&&!s&&(o=!0)}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(d),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")s&&(s=!1,this.outdent()),o=!1,a?(a=!1,n=this._indentLevel>=this._nestedLevel):n=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&n&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(m==="("?this._output.space_before_token=!1:m!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),m==="{"&&this._output.trim(!0),s&&(this.outdent(),s=!1),this.print_string(this._ch),n=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var v=0;v<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;v++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[v])){h=!0;break}(n||a)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!o&&i===0?(this.print_string(":"),s||(s=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var T=m==='"'||m==="'";this.preserveSingleSpace(T||d),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")h=!1,i===0?(s&&(this.outdent(),s=!1),o=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),i++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),i&&(i--,this.outdent()));else{var $=!1;this._input.lookBack("with")&&($=!0),this.preserveSingleSpace(d||$),this.print_string(this._ch),s&&m==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),u=!0):(this.eatWhitespace(),i++,this.indent())}else if(this._ch===")")i&&(i--,this.outdent()),u&&this._input.peek()===";"&&this._options.selector_separator_newline&&(u=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!s||u)&&i===0&&!o?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!s&&i===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&Qs.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(d),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),Qs.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var W=m==='"'||m==="'";this.preserveSingleSpace(W||d),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&h&&this._output.add_new_line()}var Vt=this._output.get_code(e);return Vt};Oc.exports.Beautifier=lr});var Rc=mt((y$,ho)=>{"use strict";var qv=Sc().Beautifier,Vv=fo().Options;function Hv(t,e){var r=new qv(t,e);return r.beautify()}ho.exports=Hv;ho.exports.defaultOptions=function(){return new Vv}});var co=mt((E$,wc)=>{"use strict";var Nc=zs().Options;function Ic(t){Nc.call(this,t,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}Ic.prototype=new Nc;wc.exports.Options=Ic});var mo=mt((x$,_o)=>{"use strict";var Lc=bn().Tokenizer,po=bn().TOKEN,Xv=Vs().Directives,Yv=so().TemplatablePattern,Qv=xn().Pattern,it={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",CONTROL_FLOW_OPEN:"TK_CONTROL_FLOW_OPEN",CONTROL_FLOW_CLOSE:"TK_CONTROL_FLOW_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:po.START,RAW:po.RAW,EOF:po.EOF},Cc=new Xv(/<\!--/,/-->/),Jt=function(t,e){Lc.call(this,t,e),this._current_tag_name="";var r=new Yv(this._input).read_options(this._options),i=new Qv(this._input);if(this.__patterns={word:r.until(/[\n\r\t <]/),word_control_flow_close_excluded:r.until(/[\n\r\t <}]/),single_quote:r.until_after(/'/),double_quote:r.until_after(/"/),attribute:r.until(/[\n\r\t =>]|\/>/),element_name:r.until(/[\n\r\t >\/]/),angular_control_flow_start:i.matching(/\@[a-zA-Z]+[^({]*[({]/),handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),handlebars_open:i.until(/[\n\r\t }]/),handlebars_raw_close:i.until(/}}/),comment:i.starting_with(/<!--/).until_after(/-->/),cdata:i.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:i.starting_with(/<!\[/).until_after(/]>/),processing:i.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars"),this.__patterns.word_control_flow_close_excluded=this.__patterns.word_control_flow_close_excluded.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var n=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=i.matching(n).until_after(n)}};Jt.prototype=new Lc;Jt.prototype._is_comment=function(t){return!1};Jt.prototype._is_opening=function(t){return t.type===it.TAG_OPEN||t.type===it.CONTROL_FLOW_OPEN};Jt.prototype._is_closing=function(t,e){return t.type===it.TAG_CLOSE&&e&&((t.text===">"||t.text==="/>")&&e.text[0]==="<"||t.text==="}}"&&e.text[0]==="{"&&e.text[1]==="{")||t.type===it.CONTROL_FLOW_CLOSE&&t.text==="}"&&e.text.endsWith("{")};Jt.prototype._reset=function(){this._current_tag_name=""};Jt.prototype._get_next_token=function(t,e){var r=null;this._readWhitespace();var i=this._input.peek();return i===null?this._create_token(it.EOF,""):(r=r||this._read_open_handlebars(i,e),r=r||this._read_attribute(i,t,e),r=r||this._read_close(i,e),r=r||this._read_script_and_style(i,t),r=r||this._read_control_flows(i,e),r=r||this._read_raw_content(i,t,e),r=r||this._read_content_word(i,e),r=r||this._read_comment_or_cdata(i),r=r||this._read_processing(i),r=r||this._read_open(i,e),r=r||this._create_token(it.UNKNOWN,this._input.next()),r)};Jt.prototype._read_comment_or_cdata=function(t){var e=null,r=null,i=null;if(t==="<"){var n=this._input.peek(1);n==="!"&&(r=this.__patterns.comment.read(),r?(i=Cc.get_directives(r),i&&i.ignore==="start"&&(r+=Cc.readIgnored(this._input))):r=this.__patterns.cdata.read()),r&&(e=this._create_token(it.COMMENT,r),e.directives=i)}return e};Jt.prototype._read_processing=function(t){var e=null,r=null,i=null;if(t==="<"){var n=this._input.peek(1);(n==="!"||n==="?")&&(r=this.__patterns.conditional_comment.read(),r=r||this.__patterns.processing.read()),r&&(e=this._create_token(it.COMMENT,r),e.directives=i)}return e};Jt.prototype._read_open=function(t,e){var r=null,i=null;return(!e||e.type===it.CONTROL_FLOW_OPEN)&&t==="<"&&(r=this._input.next(),this._input.peek()==="/"&&(r+=this._input.next()),r+=this.__patterns.element_name.read(),i=this._create_token(it.TAG_OPEN,r)),i};Jt.prototype._read_open_handlebars=function(t,e){var r=null,i=null;return(!e||e.type===it.CONTROL_FLOW_OPEN)&&(this._options.templating.includes("angular")||this._options.indent_handlebars)&&t==="{"&&this._input.peek(1)==="{"&&(this._options.indent_handlebars&&this._input.peek(2)==="!"?(r=this.__patterns.handlebars_comment.read(),r=r||this.__patterns.handlebars.read(),i=this._create_token(it.COMMENT,r)):(r=this.__patterns.handlebars_open.read(),i=this._create_token(it.TAG_OPEN,r))),i};Jt.prototype._read_control_flows=function(t,e){var r="",i=null;if(!this._options.templating.includes("angular"))return i;if(t==="@"){if(r=this.__patterns.angular_control_flow_start.read(),r==="")return i;for(var n=r.endsWith("(")?1:0,s=0;!(r.endsWith("{")&&n===s);){var a=this._input.next();if(a===null)break;a==="("?n++:a===")"&&s++,r+=a}i=this._create_token(it.CONTROL_FLOW_OPEN,r)}else t==="}"&&e&&e.type===it.CONTROL_FLOW_OPEN&&(r=this._input.next(),i=this._create_token(it.CONTROL_FLOW_CLOSE,r));return i};Jt.prototype._read_close=function(t,e){var r=null,i=null;return e&&e.type===it.TAG_OPEN&&(e.text[0]==="<"&&(t===">"||t==="/"&&this._input.peek(1)===">")?(r=this._input.next(),t==="/"&&(r+=this._input.next()),i=this._create_token(it.TAG_CLOSE,r)):e.text[0]==="{"&&t==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),i=this._create_token(it.TAG_CLOSE,"}}"))),i};Jt.prototype._read_attribute=function(t,e,r){var i=null,n="";if(r&&r.text[0]==="<")if(t==="=")i=this._create_token(it.EQUALS,this._input.next());else if(t==='"'||t==="'"){var s=this._input.next();t==='"'?s+=this.__patterns.double_quote.read():s+=this.__patterns.single_quote.read(),i=this._create_token(it.VALUE,s)}else n=this.__patterns.attribute.read(),n&&(e.type===it.EQUALS?i=this._create_token(it.VALUE,n):i=this._create_token(it.ATTRIBUTE,n));return i};Jt.prototype._is_content_unformatted=function(t){return this._options.void_elements.indexOf(t)===-1&&(this._options.content_unformatted.indexOf(t)!==-1||this._options.unformatted.indexOf(t)!==-1)};Jt.prototype._read_raw_content=function(t,e,r){var i="";if(r&&r.text[0]==="{")i=this.__patterns.handlebars_raw_close.read();else if(e.type===it.TAG_CLOSE&&e.opened.text[0]==="<"&&e.text[0]!=="/"){var n=e.opened.text.substr(1).toLowerCase();this._is_content_unformatted(n)&&(i=this._input.readUntil(new RegExp("</"+n+"[\\n\\r\\t ]*?>","ig")))}return i?this._create_token(it.TEXT,i):null};Jt.prototype._read_script_and_style=function(t,e){if(e.type===it.TAG_CLOSE&&e.opened.text[0]==="<"&&e.text[0]!=="/"){var r=e.opened.text.substr(1).toLowerCase();if(r==="script"||r==="style"){var i=this._read_comment_or_cdata(t);if(i)return i.type=it.TEXT,i;var n=this._input.readUntil(new RegExp("</"+r+"[\\n\\r\\t ]*?>","ig"));if(n)return this._create_token(it.TEXT,n)}}return null};Jt.prototype._read_content_word=function(t,e){var r="";return this._options.unformatted_content_delimiter&&t===this._options.unformatted_content_delimiter[0]&&(r=this.__patterns.unformatted_content_delimiter.read()),r||(r=e&&e.type===it.CONTROL_FLOW_OPEN?this.__patterns.word_control_flow_close_excluded.read():this.__patterns.word.read()),r?this._create_token(it.TEXT,r):null};_o.exports.Tokenizer=Jt;_o.exports.TOKEN=it});var Uc=mt((T$,Mc)=>{"use strict";var Zv=co().Options,Jv=Gs().Output,tA=mo().Tokenizer,nt=mo().TOKEN,kc=/\r\n|[\r\n]/,eA=/\r\n|[\r\n]/g,Oe=function(t,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new Jv(t,e)};Oe.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)};Oe.prototype.set_space_before_token=function(t,e){this._output.space_before_token=t,this._output.non_breaking_space=e};Oe.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()};Oe.prototype.add_raw_token=function(t){this._output.add_raw_token(t)};Oe.prototype.print_preserved_newlines=function(t){var e=0;t.type!==nt.TEXT&&t.previous.type!==nt.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var r=0;r<e;r++)this.print_newline(r>0);return e!==0};Oe.prototype.traverse_whitespace=function(t){return t.whitespace_before||t.newlines?(this.print_preserved_newlines(t)||(this._output.space_before_token=!0),!0):!1};Oe.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped};Oe.prototype.print_newline=function(t){this._output.add_new_line(t)};Oe.prototype.print_token=function(t){t.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t.text))};Oe.prototype.indent=function(){this.indent_level++};Oe.prototype.deindent=function(){this.indent_level>0&&(this.indent_level--,this._output.set_indent(this.indent_level,this.alignment_size))};Oe.prototype.get_full_indent=function(t){return t=this.indent_level+(t||0),t<1?"":this._output.get_indent_string(t)};var rA=function(t){for(var e=null,r=t.next;r.type!==nt.EOF&&t.closed!==r;){if(r.type===nt.ATTRIBUTE&&r.text==="type"){r.next&&r.next.type===nt.EQUALS&&r.next.next&&r.next.next.type===nt.VALUE&&(e=r.next.next.text);break}r=r.next}return e},iA=function(t,e){var r=null,i=null;return e.closed?(t==="script"?r="text/javascript":t==="style"&&(r="text/css"),r=rA(e)||r,r.search("text/css")>-1?i="css":r.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?i="javascript":r.search(/(text|application|dojo)\/(x-)?(html)/)>-1?i="html":r.search(/test\/null/)>-1&&(i="null"),i):null};function In(t,e){return e.indexOf(t)!==-1}function nA(t,e,r){this.parent=t||null,this.tag=e?e.tag_name:"",this.indent_level=r||0,this.parser_token=e||null}function Qr(t){this._printer=t,this._current_frame=null}Qr.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null};Qr.prototype.record_tag=function(t){var e=new nA(this._current_frame,t,this._printer.indent_level);this._current_frame=e};Qr.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e};Qr.prototype._get_frame=function(t,e){for(var r=this._current_frame;r&&t.indexOf(r.tag)===-1;){if(e&&e.indexOf(r.tag)!==-1){r=null;break}r=r.parent}return r};Qr.prototype.try_pop=function(t,e){var r=this._get_frame([t],e);return this._try_pop_frame(r)};Qr.prototype.indent_to_tag=function(t){var e=this._get_frame(t);e&&(this._printer.indent_level=e.indent_level)};function be(t,e,r,i){this._source_text=t||"",e=e||{},this._js_beautify=r,this._css_beautify=i,this._tag_stack=null;var n=new Zv(e,"html");this._options=n,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}be.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;this._options.eol==="auto"&&(e=`
`,t&&kc.test(t)&&(e=t.match(kc)[0])),t=t.replace(eA,`
`);var r=t.match(/^[\t ]*/)[0],i={text:"",type:""},n=new Pc(this._options),s=new Oe(this._options,r),a=new tA(t,this._options).tokenize();this._tag_stack=new Qr(s);for(var o=null,u=a.next();u.type!==nt.EOF;)u.type===nt.TAG_OPEN||u.type===nt.COMMENT?(o=this._handle_tag_open(s,u,n,i,a),n=o):u.type===nt.ATTRIBUTE||u.type===nt.EQUALS||u.type===nt.VALUE||u.type===nt.TEXT&&!n.tag_complete?o=this._handle_inside_tag(s,u,n,i):u.type===nt.TAG_CLOSE?o=this._handle_tag_close(s,u,n):u.type===nt.TEXT?o=this._handle_text(s,u,n):u.type===nt.CONTROL_FLOW_OPEN?o=this._handle_control_flow_open(s,u):u.type===nt.CONTROL_FLOW_CLOSE?o=this._handle_control_flow_close(s,u):s.add_raw_token(u),i=o,u=a.next();var l=s._output.get_code(e);return l};be.prototype._handle_control_flow_open=function(t,e){var r={text:e.text,type:e.type};return t.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),e.newlines?t.print_preserved_newlines(e):t.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),t.print_token(e),t.indent(),r};be.prototype._handle_control_flow_close=function(t,e){var r={text:e.text,type:e.type};return t.deindent(),e.newlines?t.print_preserved_newlines(e):t.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),t.print_token(e),r};be.prototype._handle_tag_close=function(t,e,r){var i={text:e.text,type:e.type};return t.alignment_size=0,r.tag_complete=!0,t.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),r.is_unformatted?t.add_raw_token(e):(r.tag_start_char==="<"&&(t.set_space_before_token(e.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&r.has_wrapped_attrs&&t.print_newline(!1)),t.print_token(e)),r.indent_content&&!(r.is_unformatted||r.is_content_unformatted)&&(t.indent(),r.indent_content=!1),!r.is_inline_element&&!(r.is_unformatted||r.is_content_unformatted)&&t.set_wrap_point(),i};be.prototype._handle_inside_tag=function(t,e,r,i){var n=r.has_wrapped_attrs,s={text:e.text,type:e.type};return t.set_space_before_token(e.newlines||e.whitespace_before!=="",!0),r.is_unformatted?t.add_raw_token(e):r.tag_start_char==="{"&&e.type===nt.TEXT?t.print_preserved_newlines(e)?(e.newlines=0,t.add_raw_token(e)):t.print_token(e):(e.type===nt.ATTRIBUTE?t.set_space_before_token(!0):(e.type===nt.EQUALS||e.type===nt.VALUE&&e.previous.type===nt.EQUALS)&&t.set_space_before_token(!1),e.type===nt.ATTRIBUTE&&r.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),n=n||e.newlines!==0),this._is_wrap_attributes_force&&r.attr_count>=this._options.wrap_attributes_min_attrs&&(i.type!==nt.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(t.print_newline(!1),n=!0)),t.print_token(e),n=n||t.previous_token_wrapped(),r.has_wrapped_attrs=n),s};be.prototype._handle_text=function(t,e,r){var i={text:e.text,type:"TK_CONTENT"};return r.custom_beautifier_name?this._print_custom_beatifier_text(t,e,r):r.is_unformatted||r.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e)),i};be.prototype._print_custom_beatifier_text=function(t,e,r){var i=this;if(e.text!==""){var n=e.text,s,a=1,o="",u="";r.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?s=this._js_beautify:r.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?s=this._css_beautify:r.custom_beautifier_name==="html"&&(s=function(g,E){var y=new be(g,E,i._js_beautify,i._css_beautify);return y.beautify()}),this._options.indent_scripts==="keep"?a=0:this._options.indent_scripts==="separate"&&(a=-t.indent_level);var l=t.get_full_indent(a);if(n=n.replace(/\n[ \t]*$/,""),r.custom_beautifier_name!=="html"&&n[0]==="<"&&n.match(/^(<!--|<!\[CDATA\[)/)){var h=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(n);if(!h){t.add_raw_token(e);return}o=l+h[1]+`
`,n=h[4],h[5]&&(u=l+h[5]),n=n.replace(/\n[ \t]*$/,""),(h[2]||h[3].indexOf(`
`)!==-1)&&(h=h[3].match(/[ \t]+$/),h&&(e.whitespace_before=h[0]))}if(n)if(s){var f=function(){this.eol=`
`};f.prototype=this._options.raw_options;var d=new f;n=s(l+n,d)}else{var m=e.whitespace_before;m&&(n=n.replace(new RegExp(`
(`+m+")?","g"),`
`)),n=l+n.replace(/\n/g,`
`+l)}o&&(n?n=o+n+`
`+u:n=o+u),t.print_newline(!1),n&&(e.text=n,e.whitespace_before="",e.newlines=0,t.add_raw_token(e),t.print_newline(!0))}};be.prototype._handle_tag_open=function(t,e,r,i,n){var s=this._get_tag_open_token(e);if((r.is_unformatted||r.is_content_unformatted)&&!r.is_empty_element&&e.type===nt.TAG_OPEN&&!s.is_start_tag?(t.add_raw_token(e),s.start_tag_token=this._tag_stack.try_pop(s.tag_name)):(t.traverse_whitespace(e),this._set_tag_position(t,e,s,r,i),s.is_inline_element||t.set_wrap_point(),t.print_token(e)),s.is_start_tag&&this._is_wrap_attributes_force){var a=0,o;do o=n.peek(a),o.type===nt.ATTRIBUTE&&(s.attr_count+=1),a+=1;while(o.type!==nt.EOF&&o.type!==nt.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(s.alignment_size=e.text.length+1),!s.tag_complete&&!s.is_unformatted&&(t.alignment_size=s.alignment_size),s};var Pc=function(t,e,r){if(this.parent=e||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!r)this.tag_complete=!0;else{var i;this.tag_start_char=r.text[0],this.text=r.text,this.tag_start_char==="<"?(i=r.text.match(/^<([^\s>]*)/),this.tag_check=i?i[1]:""):(i=r.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=i?i[1]:"",(r.text.startsWith("{{#>")||r.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&r.next!==null?this.tag_check=r.next.text.split(" ")[0]:this.tag_check=r.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),r.type===nt.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||r.closed&&r.closed.text==="/>";var n=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(n=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(!t.indent_handlebars||this.text.length<3||/[^#\^]/.test(this.text.charAt(n)))}};be.prototype._get_tag_open_token=function(t){var e=new Pc(this._options,this._tag_stack.get_parser_token(),t);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||In(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&In(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&In(e.tag_check,this._options.content_unformatted),e.is_inline_element=In(e.tag_name,this._options.inline)||this._options.inline_custom_elements&&e.tag_name.includes("-")||e.tag_start_char==="{",e};be.prototype._set_tag_position=function(t,e,r,i,n){if(r.is_empty_element||(r.is_end_tag?r.start_tag_token=this._tag_stack.try_pop(r.tag_name):(this._do_optional_end_element(r)&&(r.is_inline_element||t.print_newline(!1)),this._tag_stack.record_tag(r),(r.tag_name==="script"||r.tag_name==="style")&&!(r.is_unformatted||r.is_content_unformatted)&&(r.custom_beautifier_name=iA(r.tag_check,e)))),In(r.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),r.is_empty_element){if(r.tag_start_char==="{"&&r.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),r.indent_content=!0;var s=t.current_line_has_match(/{{#if/);s||t.print_newline(!1)}r.tag_name==="!--"&&n.type===nt.TAG_CLOSE&&i.is_end_tag&&r.text.indexOf(`
`)===-1||(r.is_inline_element||r.is_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,r))}else if(r.is_end_tag){var a=!1;a=r.start_tag_token&&r.start_tag_token.multiline_content,a=a||!r.is_inline_element&&!(i.is_inline_element||i.is_unformatted)&&!(n.type===nt.TAG_CLOSE&&r.start_tag_token===i)&&n.type!=="TK_CONTENT",(r.is_content_unformatted||r.is_unformatted)&&(a=!1),a&&t.print_newline(!1)}else r.indent_content=!r.custom_beautifier_name,r.tag_start_char==="<"&&(r.tag_name==="html"?r.indent_content=this._options.indent_inner_html:r.tag_name==="head"?r.indent_content=this._options.indent_head_inner_html:r.tag_name==="body"&&(r.indent_content=this._options.indent_body_inner_html)),!(r.is_inline_element||r.is_unformatted)&&(n.type!=="TK_CONTENT"||r.is_content_unformatted)&&t.print_newline(!1),this._calcluate_parent_multiline(t,r)};be.prototype._calcluate_parent_multiline=function(t,e){e.parent&&t._output.just_added_newline()&&!((e.is_inline_element||e.is_unformatted)&&e.parent.is_inline_element)&&(e.parent.multiline_content=!0)};var sA=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"],aA=["a","audio","del","ins","map","noscript","video"];be.prototype._do_optional_end_element=function(t){var e=null;if(!(t.is_empty_element||!t.is_start_tag||!t.parent)){if(t.tag_name==="body")e=e||this._tag_stack.try_pop("head");else if(t.tag_name==="li")e=e||this._tag_stack.try_pop("li",["ol","ul","menu"]);else if(t.tag_name==="dd"||t.tag_name==="dt")e=e||this._tag_stack.try_pop("dt",["dl"]),e=e||this._tag_stack.try_pop("dd",["dl"]);else if(t.parent.tag_name==="p"&&sA.indexOf(t.tag_name)!==-1){var r=t.parent.parent;(!r||aA.indexOf(r.tag_name)===-1)&&(e=e||this._tag_stack.try_pop("p"))}else t.tag_name==="rp"||t.tag_name==="rt"?(e=e||this._tag_stack.try_pop("rt",["ruby","rtc"]),e=e||this._tag_stack.try_pop("rp",["ruby","rtc"])):t.tag_name==="optgroup"?e=e||this._tag_stack.try_pop("optgroup",["select"]):t.tag_name==="option"?e=e||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):t.tag_name==="colgroup"?e=e||this._tag_stack.try_pop("caption",["table"]):t.tag_name==="thead"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"])):t.tag_name==="tbody"||t.tag_name==="tfoot"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("thead",["table"]),e=e||this._tag_stack.try_pop("tbody",["table"])):t.tag_name==="tr"?(e=e||this._tag_stack.try_pop("caption",["table"]),e=e||this._tag_stack.try_pop("colgroup",["table"]),e=e||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(t.tag_name==="th"||t.tag_name==="td")&&(e=e||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),e=e||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return t.parent=this._tag_stack.get_parser_token(),e}};Mc.exports.Beautifier=be});var Fc=mt((b$,go)=>{"use strict";var oA=Uc().Beautifier,uA=co().Options;function lA(t,e,r,i){var n=new oA(t,e,r,i);return n.beautify()}go.exports=lA;go.exports.defaultOptions=function(){return new uA}});var Dc=mt((v$,Zs)=>{"use strict";var Bc=Ec(),$c=Rc(),jc=Fc();function Wc(t,e,r,i){return r=r||Bc,i=i||$c,jc(t,e,r,i)}Wc.defaultOptions=jc.defaultOptions;Zs.exports.js=Bc;Zs.exports.css=$c;Zs.exports.html=Wc});var zc=mt((A$,Kc)=>{"use strict";function Gc(t,e,r){var i=function(n,s){return t.js_beautify(n,s)};return i.js=t.js_beautify,i.css=e.css_beautify,i.html=r.html_beautify,i.js_beautify=t.js_beautify,i.css_beautify=e.css_beautify,i.html_beautify=r.html_beautify,i}typeof define=="function"&&define.amd?define(["./lib/beautify","./lib/beautify-css","./lib/beautify-html"],function(t,e,r){return Gc(t,e,r)}):(function(t){var e=Dc();e.js_beautify=e.js,e.css_beautify=e.css,e.html_beautify=e.html,t.exports=Gc(e,e,e)})(Kc)});var Bp=typeof global=="object"&&global&&global.Object===Object&&global,wn=Bp;var $p=typeof self=="object"&&self&&self.Object===Object&&self,jp=wn||$p||Function("return this")(),jt=jp;var Wp=jt.Symbol,Ht=Wp;var No=Object.prototype,Dp=No.hasOwnProperty,Gp=No.toString,Wi=Ht?Ht.toStringTag:void 0;function Kp(t){var e=Dp.call(t,Wi),r=t[Wi];try{t[Wi]=void 0;var i=!0}catch{}var n=Gp.call(t);return i&&(e?t[Wi]=r:delete t[Wi]),n}var Io=Kp;var zp=Object.prototype,qp=zp.toString;function Vp(t){return qp.call(t)}var wo=Vp;var Hp="[object Null]",Xp="[object Undefined]",Co=Ht?Ht.toStringTag:void 0;function Yp(t){return t==null?t===void 0?Xp:Hp:Co&&Co in Object(t)?Io(t):wo(t)}var le=Yp;function Qp(t){return t!=null&&typeof t=="object"}var Ct=Qp;var Zp="[object Symbol]";function Jp(t){return typeof t=="symbol"||Ct(t)&&le(t)==Zp}var _r=Jp;function td(t,e){for(var r=-1,i=t==null?0:t.length,n=Array(i);++r<i;)n[r]=e(t[r],r,t);return n}var De=td;var ed=Array.isArray,w=ed;var rd=1/0,Lo=Ht?Ht.prototype:void 0,ko=Lo?Lo.toString:void 0;function Po(t){if(typeof t=="string")return t;if(w(t))return De(t,Po)+"";if(_r(t))return ko?ko.call(t):"";var e=t+"";return e=="0"&&1/t==-rd?"-0":e}var Mo=Po;var id=/\s/;function nd(t){for(var e=t.length;e--&&id.test(t.charAt(e)););return e}var Uo=nd;var sd=/^\s+/;function ad(t){return t&&t.slice(0,Uo(t)+1).replace(sd,"")}var Fo=ad;function od(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var At=od;var Bo=NaN,ud=/^[-+]0x[0-9a-f]+$/i,ld=/^0b[01]+$/i,fd=/^0o[0-7]+$/i,hd=parseInt;function cd(t){if(typeof t=="number")return t;if(_r(t))return Bo;if(At(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=At(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Fo(t);var r=ld.test(t);return r||fd.test(t)?hd(t.slice(2),r?2:8):ud.test(t)?Bo:+t}var $o=cd;var jo=1/0,pd=17976931348623157e292;function dd(t){if(!t)return t===0?t:0;if(t=$o(t),t===jo||t===-jo){var e=t<0?-1:1;return e*pd}return t===t?t:0}var Wo=dd;function _d(t){var e=Wo(t),r=e%1;return e===e?r?e-r:e:0}var Ge=_d;function md(t){return t}var Re=md;var gd="[object AsyncFunction]",yd="[object Function]",Ed="[object GeneratorFunction]",xd="[object Proxy]";function Td(t){if(!At(t))return!1;var e=le(t);return e==yd||e==Ed||e==gd||e==xd}var fe=Td;var bd=jt["__core-js_shared__"],Cn=bd;var Do=(function(){var t=/[^.]+$/.exec(Cn&&Cn.keys&&Cn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function vd(t){return!!Do&&Do in t}var Go=vd;var Ad=Function.prototype,Od=Ad.toString;function Sd(t){if(t!=null){try{return Od.call(t)}catch{}try{return t+""}catch{}}return""}var er=Sd;var Rd=/[\\^$.*+?()[\]{}|]/g,Nd=/^\[object .+?Constructor\]$/,Id=Function.prototype,wd=Object.prototype,Cd=Id.toString,Ld=wd.hasOwnProperty,kd=RegExp("^"+Cd.call(Ld).replace(Rd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pd(t){if(!At(t)||Go(t))return!1;var e=fe(t)?kd:Nd;return e.test(er(t))}var Ko=Pd;function Md(t,e){return t?.[e]}var zo=Md;function Ud(t,e){var r=zo(t,e);return Ko(r)?r:void 0}var ge=Ud;var Fd=ge(jt,"WeakMap"),Ln=Fd;var qo=Object.create,Bd=(function(){function t(){}return function(e){if(!At(e))return{};if(qo)return qo(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}})(),Vo=Bd;function $d(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var Ho=$d;function jd(){}var Ot=jd;function Wd(t,e){var r=-1,i=t.length;for(e||(e=Array(i));++r<i;)e[r]=t[r];return e}var Xo=Wd;var Dd=800,Gd=16,Kd=Date.now;function zd(t){var e=0,r=0;return function(){var i=Kd(),n=Gd-(i-r);if(r=i,n>0){if(++e>=Dd)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Yo=zd;function qd(t){return function(){return t}}var Qo=qd;var Vd=(function(){try{var t=ge(Object,"defineProperty");return t({},"",{}),t}catch{}})(),ti=Vd;var Hd=ti?function(t,e){return ti(t,"toString",{configurable:!0,enumerable:!1,value:Qo(e),writable:!0})}:Re,Zo=Hd;var Xd=Yo(Zo),Jo=Xd;function Yd(t,e){for(var r=-1,i=t==null?0:t.length;++r<i&&e(t[r],r,t)!==!1;);return t}var kn=Yd;function Qd(t,e,r,i){for(var n=t.length,s=r+(i?1:-1);i?s--:++s<n;)if(e(t[s],s,t))return s;return-1}var Pn=Qd;function Zd(t){return t!==t}var tu=Zd;function Jd(t,e,r){for(var i=r-1,n=t.length;++i<n;)if(t[i]===e)return i;return-1}var eu=Jd;function t_(t,e,r){return e===e?eu(t,e,r):Pn(t,tu,r)}var ei=t_;function e_(t,e){var r=t==null?0:t.length;return!!r&&ei(t,e,0)>-1}var Mn=e_;var r_=9007199254740991,i_=/^(?:0|[1-9]\d*)$/;function n_(t,e){var r=typeof t;return e=e??r_,!!e&&(r=="number"||r!="symbol"&&i_.test(t))&&t>-1&&t%1==0&&t<e}var mr=n_;function s_(t,e,r){e=="__proto__"&&ti?ti(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}var ri=s_;function a_(t,e){return t===e||t!==t&&e!==e}var Ke=a_;var o_=Object.prototype,u_=o_.hasOwnProperty;function l_(t,e,r){var i=t[e];(!(u_.call(t,e)&&Ke(i,r))||r===void 0&&!(e in t))&&ri(t,e,r)}var gr=l_;function f_(t,e,r,i){var n=!r;r||(r={});for(var s=-1,a=e.length;++s<a;){var o=e[s],u=i?i(r[o],t[o],o,r,t):void 0;u===void 0&&(u=t[o]),n?ri(r,o,u):gr(r,o,u)}return r}var ze=f_;var ru=Math.max;function h_(t,e,r){return e=ru(e===void 0?t.length-1:e,0),function(){for(var i=arguments,n=-1,s=ru(i.length-e,0),a=Array(s);++n<s;)a[n]=i[e+n];n=-1;for(var o=Array(e+1);++n<e;)o[n]=i[n];return o[e]=r(a),Ho(t,this,o)}}var iu=h_;function c_(t,e){return Jo(iu(t,e,Re),t+"")}var ii=c_;var p_=9007199254740991;function d_(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=p_}var ni=d_;function __(t){return t!=null&&ni(t.length)&&!fe(t)}var Wt=__;function m_(t,e,r){if(!At(r))return!1;var i=typeof e;return(i=="number"?Wt(r)&&mr(e,r.length):i=="string"&&e in r)?Ke(r[e],t):!1}var yr=m_;function g_(t){return ii(function(e,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=t.length>3&&typeof s=="function"?(n--,s):void 0,a&&yr(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),e=Object(e);++i<n;){var o=r[i];o&&t(e,o,i,s)}return e})}var nu=g_;var y_=Object.prototype;function E_(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||y_;return t===r}var qe=E_;function x_(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}var su=x_;var T_="[object Arguments]";function b_(t){return Ct(t)&&le(t)==T_}var ra=b_;var au=Object.prototype,v_=au.hasOwnProperty,A_=au.propertyIsEnumerable,O_=ra((function(){return arguments})())?ra:function(t){return Ct(t)&&v_.call(t,"callee")&&!A_.call(t,"callee")},Er=O_;function S_(){return!1}var ou=S_;var fu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,uu=fu&&typeof module=="object"&&module&&!module.nodeType&&module,R_=uu&&uu.exports===fu,lu=R_?jt.Buffer:void 0,N_=lu?lu.isBuffer:void 0,I_=N_||ou,rr=I_;var w_="[object Arguments]",C_="[object Array]",L_="[object Boolean]",k_="[object Date]",P_="[object Error]",M_="[object Function]",U_="[object Map]",F_="[object Number]",B_="[object Object]",$_="[object RegExp]",j_="[object Set]",W_="[object String]",D_="[object WeakMap]",G_="[object ArrayBuffer]",K_="[object DataView]",z_="[object Float32Array]",q_="[object Float64Array]",V_="[object Int8Array]",H_="[object Int16Array]",X_="[object Int32Array]",Y_="[object Uint8Array]",Q_="[object Uint8ClampedArray]",Z_="[object Uint16Array]",J_="[object Uint32Array]",gt={};gt[z_]=gt[q_]=gt[V_]=gt[H_]=gt[X_]=gt[Y_]=gt[Q_]=gt[Z_]=gt[J_]=!0;gt[w_]=gt[C_]=gt[G_]=gt[L_]=gt[K_]=gt[k_]=gt[P_]=gt[M_]=gt[U_]=gt[F_]=gt[B_]=gt[$_]=gt[j_]=gt[W_]=gt[D_]=!1;function tm(t){return Ct(t)&&ni(t.length)&&!!gt[le(t)]}var hu=tm;function em(t){return function(e){return t(e)}}var Ve=em;var cu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Di=cu&&typeof module=="object"&&module&&!module.nodeType&&module,rm=Di&&Di.exports===cu,ia=rm&&wn.process,im=(function(){try{var t=Di&&Di.require&&Di.require("util").types;return t||ia&&ia.binding&&ia.binding("util")}catch{}})(),Ne=im;var pu=Ne&&Ne.isTypedArray,nm=pu?Ve(pu):hu,si=nm;var sm=Object.prototype,am=sm.hasOwnProperty;function om(t,e){var r=w(t),i=!r&&Er(t),n=!r&&!i&&rr(t),s=!r&&!i&&!n&&si(t),a=r||i||n||s,o=a?su(t.length,String):[],u=o.length;for(var l in t)(e||am.call(t,l))&&!(a&&(l=="length"||n&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||mr(l,u)))&&o.push(l);return o}var Un=om;function um(t,e){return function(r){return t(e(r))}}var Fn=um;var lm=Fn(Object.keys,Object),du=lm;var fm=Object.prototype,hm=fm.hasOwnProperty;function cm(t){if(!qe(t))return du(t);var e=[];for(var r in Object(t))hm.call(t,r)&&r!="constructor"&&e.push(r);return e}var Bn=cm;function pm(t){return Wt(t)?Un(t):Bn(t)}var ft=pm;var dm=Object.prototype,_m=dm.hasOwnProperty,mm=nu(function(t,e){if(qe(e)||Wt(e)){ze(e,ft(e),t);return}for(var r in e)_m.call(e,r)&&gr(t,r,e[r])}),ie=mm;function gm(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var _u=gm;var ym=Object.prototype,Em=ym.hasOwnProperty;function xm(t){if(!At(t))return _u(t);var e=qe(t),r=[];for(var i in t)i=="constructor"&&(e||!Em.call(t,i))||r.push(i);return r}var mu=xm;function Tm(t){return Wt(t)?Un(t,!0):mu(t)}var xr=Tm;var bm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vm=/^\w*$/;function Am(t,e){if(w(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||_r(t)?!0:vm.test(t)||!bm.test(t)||e!=null&&t in Object(e)}var ai=Am;var Om=ge(Object,"create"),ir=Om;function Sm(){this.__data__=ir?ir(null):{},this.size=0}var gu=Sm;function Rm(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var yu=Rm;var Nm="__lodash_hash_undefined__",Im=Object.prototype,wm=Im.hasOwnProperty;function Cm(t){var e=this.__data__;if(ir){var r=e[t];return r===Nm?void 0:r}return wm.call(e,t)?e[t]:void 0}var Eu=Cm;var Lm=Object.prototype,km=Lm.hasOwnProperty;function Pm(t){var e=this.__data__;return ir?e[t]!==void 0:km.call(e,t)}var xu=Pm;var Mm="__lodash_hash_undefined__";function Um(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ir&&e===void 0?Mm:e,this}var Tu=Um;function oi(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}oi.prototype.clear=gu;oi.prototype.delete=yu;oi.prototype.get=Eu;oi.prototype.has=xu;oi.prototype.set=Tu;var na=oi;function Fm(){this.__data__=[],this.size=0}var bu=Fm;function Bm(t,e){for(var r=t.length;r--;)if(Ke(t[r][0],e))return r;return-1}var Tr=Bm;var $m=Array.prototype,jm=$m.splice;function Wm(t){var e=this.__data__,r=Tr(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():jm.call(e,r,1),--this.size,!0}var vu=Wm;function Dm(t){var e=this.__data__,r=Tr(e,t);return r<0?void 0:e[r][1]}var Au=Dm;function Gm(t){return Tr(this.__data__,t)>-1}var Ou=Gm;function Km(t,e){var r=this.__data__,i=Tr(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}var Su=Km;function ui(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}ui.prototype.clear=bu;ui.prototype.delete=vu;ui.prototype.get=Au;ui.prototype.has=Ou;ui.prototype.set=Su;var br=ui;var zm=ge(jt,"Map"),vr=zm;function qm(){this.size=0,this.__data__={hash:new na,map:new(vr||br),string:new na}}var Ru=qm;function Vm(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Nu=Vm;function Hm(t,e){var r=t.__data__;return Nu(e)?r[typeof e=="string"?"string":"hash"]:r.map}var Ar=Hm;function Xm(t){var e=Ar(this,t).delete(t);return this.size-=e?1:0,e}var Iu=Xm;function Ym(t){return Ar(this,t).get(t)}var wu=Ym;function Qm(t){return Ar(this,t).has(t)}var Cu=Qm;function Zm(t,e){var r=Ar(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}var Lu=Zm;function li(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}li.prototype.clear=Ru;li.prototype.delete=Iu;li.prototype.get=wu;li.prototype.has=Cu;li.prototype.set=Lu;var Br=li;var Jm="Expected a function";function sa(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Jm);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=t.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(sa.Cache||Br),r}sa.Cache=Br;var ku=sa;var tg=500;function eg(t){var e=ku(t,function(i){return r.size===tg&&r.clear(),i}),r=e.cache;return e}var Pu=eg;var rg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ig=/\\(\\)?/g,ng=Pu(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(rg,function(r,i,n,s){e.push(n?s.replace(ig,"$1"):i||r)}),e}),Mu=ng;function sg(t){return t==null?"":Mo(t)}var Uu=sg;function ag(t,e){return w(t)?t:ai(t,e)?[t]:Mu(Uu(t))}var Or=ag;var og=1/0;function ug(t){if(typeof t=="string"||_r(t))return t;var e=t+"";return e=="0"&&1/t==-og?"-0":e}var He=ug;function lg(t,e){e=Or(e,t);for(var r=0,i=e.length;t!=null&&r<i;)t=t[He(e[r++])];return r&&r==i?t:void 0}var fi=lg;function fg(t,e,r){var i=t==null?void 0:fi(t,e);return i===void 0?r:i}var Fu=fg;function hg(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}var hi=hg;var Bu=Ht?Ht.isConcatSpreadable:void 0;function cg(t){return w(t)||Er(t)||!!(Bu&&t&&t[Bu])}var $u=cg;function ju(t,e,r,i,n){var s=-1,a=t.length;for(r||(r=$u),n||(n=[]);++s<a;){var o=t[s];e>0&&r(o)?e>1?ju(o,e-1,r,i,n):hi(n,o):i||(n[n.length]=o)}return n}var ci=ju;function pg(t){var e=t==null?0:t.length;return e?ci(t,1):[]}var Kt=pg;var dg=Fn(Object.getPrototypeOf,Object),$n=dg;function _g(t,e,r){var i=-1,n=t.length;e<0&&(e=-e>n?0:n+e),r=r>n?n:r,r<0&&(r+=n),n=e>r?0:r-e>>>0,e>>>=0;for(var s=Array(n);++i<n;)s[i]=t[i+e];return s}var jn=_g;function mg(t,e,r,i){var n=-1,s=t==null?0:t.length;for(i&&s&&(r=t[++n]);++n<s;)r=e(r,t[n],n,t);return r}var Wu=mg;function gg(){this.__data__=new br,this.size=0}var Du=gg;function yg(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}var Gu=yg;function Eg(t){return this.__data__.get(t)}var Ku=Eg;function xg(t){return this.__data__.has(t)}var zu=xg;var Tg=200;function bg(t,e){var r=this.__data__;if(r instanceof br){var i=r.__data__;if(!vr||i.length<Tg-1)return i.push([t,e]),this.size=++r.size,this;r=this.__data__=new Br(i)}return r.set(t,e),this.size=r.size,this}var qu=bg;function pi(t){var e=this.__data__=new br(t);this.size=e.size}pi.prototype.clear=Du;pi.prototype.delete=Gu;pi.prototype.get=Ku;pi.prototype.has=zu;pi.prototype.set=qu;var Sr=pi;function vg(t,e){return t&&ze(e,ft(e),t)}var Vu=vg;function Ag(t,e){return t&&ze(e,xr(e),t)}var Hu=Ag;var Zu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xu=Zu&&typeof module=="object"&&module&&!module.nodeType&&module,Og=Xu&&Xu.exports===Zu,Yu=Og?jt.Buffer:void 0,Qu=Yu?Yu.allocUnsafe:void 0;function Sg(t,e){if(e)return t.slice();var r=t.length,i=Qu?Qu(r):new t.constructor(r);return t.copy(i),i}var Ju=Sg;function Rg(t,e){for(var r=-1,i=t==null?0:t.length,n=0,s=[];++r<i;){var a=t[r];e(a,r,t)&&(s[n++]=a)}return s}var di=Rg;function Ng(){return[]}var Wn=Ng;var Ig=Object.prototype,wg=Ig.propertyIsEnumerable,tl=Object.getOwnPropertySymbols,Cg=tl?function(t){return t==null?[]:(t=Object(t),di(tl(t),function(e){return wg.call(t,e)}))}:Wn,_i=Cg;function Lg(t,e){return ze(t,_i(t),e)}var el=Lg;var kg=Object.getOwnPropertySymbols,Pg=kg?function(t){for(var e=[];t;)hi(e,_i(t)),t=$n(t);return e}:Wn,Dn=Pg;function Mg(t,e){return ze(t,Dn(t),e)}var rl=Mg;function Ug(t,e,r){var i=e(t);return w(t)?i:hi(i,r(t))}var Gn=Ug;function Fg(t){return Gn(t,ft,_i)}var Gi=Fg;function Bg(t){return Gn(t,xr,Dn)}var Kn=Bg;var $g=ge(jt,"DataView"),zn=$g;var jg=ge(jt,"Promise"),qn=jg;var Wg=ge(jt,"Set"),Rr=Wg;var il="[object Map]",Dg="[object Object]",nl="[object Promise]",sl="[object Set]",al="[object WeakMap]",ol="[object DataView]",Gg=er(zn),Kg=er(vr),zg=er(qn),qg=er(Rr),Vg=er(Ln),$r=le;(zn&&$r(new zn(new ArrayBuffer(1)))!=ol||vr&&$r(new vr)!=il||qn&&$r(qn.resolve())!=nl||Rr&&$r(new Rr)!=sl||Ln&&$r(new Ln)!=al)&&($r=function(t){var e=le(t),r=e==Dg?t.constructor:void 0,i=r?er(r):"";if(i)switch(i){case Gg:return ol;case Kg:return il;case zg:return nl;case qg:return sl;case Vg:return al}return e});var Me=$r;var Hg=Object.prototype,Xg=Hg.hasOwnProperty;function Yg(t){var e=t.length,r=new t.constructor(e);return e&&typeof t[0]=="string"&&Xg.call(t,"index")&&(r.index=t.index,r.input=t.input),r}var ul=Yg;var Qg=jt.Uint8Array,mi=Qg;function Zg(t){var e=new t.constructor(t.byteLength);return new mi(e).set(new mi(t)),e}var gi=Zg;function Jg(t,e){var r=e?gi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}var ll=Jg;var ty=/\w*$/;function ey(t){var e=new t.constructor(t.source,ty.exec(t));return e.lastIndex=t.lastIndex,e}var fl=ey;var hl=Ht?Ht.prototype:void 0,cl=hl?hl.valueOf:void 0;function ry(t){return cl?Object(cl.call(t)):{}}var pl=ry;function iy(t,e){var r=e?gi(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}var dl=iy;var ny="[object Boolean]",sy="[object Date]",ay="[object Map]",oy="[object Number]",uy="[object RegExp]",ly="[object Set]",fy="[object String]",hy="[object Symbol]",cy="[object ArrayBuffer]",py="[object DataView]",dy="[object Float32Array]",_y="[object Float64Array]",my="[object Int8Array]",gy="[object Int16Array]",yy="[object Int32Array]",Ey="[object Uint8Array]",xy="[object Uint8ClampedArray]",Ty="[object Uint16Array]",by="[object Uint32Array]";function vy(t,e,r){var i=t.constructor;switch(e){case cy:return gi(t);case ny:case sy:return new i(+t);case py:return ll(t,r);case dy:case _y:case my:case gy:case yy:case Ey:case xy:case Ty:case by:return dl(t,r);case ay:return new i;case oy:case fy:return new i(t);case uy:return fl(t);case ly:return new i;case hy:return pl(t)}}var _l=vy;function Ay(t){return typeof t.constructor=="function"&&!qe(t)?Vo($n(t)):{}}var ml=Ay;var Oy="[object Map]";function Sy(t){return Ct(t)&&Me(t)==Oy}var gl=Sy;var yl=Ne&&Ne.isMap,Ry=yl?Ve(yl):gl,El=Ry;var Ny="[object Set]";function Iy(t){return Ct(t)&&Me(t)==Ny}var xl=Iy;var Tl=Ne&&Ne.isSet,wy=Tl?Ve(Tl):xl,bl=wy;var Cy=1,Ly=2,ky=4,vl="[object Arguments]",Py="[object Array]",My="[object Boolean]",Uy="[object Date]",Fy="[object Error]",Al="[object Function]",By="[object GeneratorFunction]",$y="[object Map]",jy="[object Number]",Ol="[object Object]",Wy="[object RegExp]",Dy="[object Set]",Gy="[object String]",Ky="[object Symbol]",zy="[object WeakMap]",qy="[object ArrayBuffer]",Vy="[object DataView]",Hy="[object Float32Array]",Xy="[object Float64Array]",Yy="[object Int8Array]",Qy="[object Int16Array]",Zy="[object Int32Array]",Jy="[object Uint8Array]",tE="[object Uint8ClampedArray]",eE="[object Uint16Array]",rE="[object Uint32Array]",ht={};ht[vl]=ht[Py]=ht[qy]=ht[Vy]=ht[My]=ht[Uy]=ht[Hy]=ht[Xy]=ht[Yy]=ht[Qy]=ht[Zy]=ht[$y]=ht[jy]=ht[Ol]=ht[Wy]=ht[Dy]=ht[Gy]=ht[Ky]=ht[Jy]=ht[tE]=ht[eE]=ht[rE]=!0;ht[Fy]=ht[Al]=ht[zy]=!1;function Vn(t,e,r,i,n,s){var a,o=e&Cy,u=e&Ly,l=e&ky;if(r&&(a=n?r(t,i,n,s):r(t)),a!==void 0)return a;if(!At(t))return t;var h=w(t);if(h){if(a=ul(t),!o)return Xo(t,a)}else{var f=Me(t),d=f==Al||f==By;if(rr(t))return Ju(t,o);if(f==Ol||f==vl||d&&!n){if(a=u||d?{}:ml(t),!o)return u?rl(t,Hu(a,t)):el(t,Vu(a,t))}else{if(!ht[f])return n?t:{};a=_l(t,f,o)}}s||(s=new Sr);var m=s.get(t);if(m)return m;s.set(t,a),bl(t)?t.forEach(function(y){a.add(Vn(y,e,r,y,t,s))}):El(t)&&t.forEach(function(y,x){a.set(x,Vn(y,e,r,x,t,s))});var g=l?u?Kn:Gi:u?xr:ft,E=h?void 0:g(t);return kn(E||t,function(y,x){E&&(x=y,y=t[x]),gr(a,x,Vn(y,e,r,x,t,s))}),a}var Sl=Vn;var iE=4;function nE(t){return Sl(t,iE)}var ct=nE;function sE(t){for(var e=-1,r=t==null?0:t.length,i=0,n=[];++e<r;){var s=t[e];s&&(n[i++]=s)}return n}var Xe=sE;var aE="__lodash_hash_undefined__";function oE(t){return this.__data__.set(t,aE),this}var Rl=oE;function uE(t){return this.__data__.has(t)}var Nl=uE;function Hn(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new Br;++e<r;)this.add(t[e])}Hn.prototype.add=Hn.prototype.push=Rl;Hn.prototype.has=Nl;var yi=Hn;function lE(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(e(t[r],r,t))return!0;return!1}var Xn=lE;function fE(t,e){return t.has(e)}var Ei=fE;var hE=1,cE=2;function pE(t,e,r,i,n,s){var a=r&hE,o=t.length,u=e.length;if(o!=u&&!(a&&u>o))return!1;var l=s.get(t),h=s.get(e);if(l&&h)return l==e&&h==t;var f=-1,d=!0,m=r&cE?new yi:void 0;for(s.set(t,e),s.set(e,t);++f<o;){var g=t[f],E=e[f];if(i)var y=a?i(E,g,f,e,t,s):i(g,E,f,t,e,s);if(y!==void 0){if(y)continue;d=!1;break}if(m){if(!Xn(e,function(x,v){if(!Ei(m,v)&&(g===x||n(g,x,r,i,s)))return m.push(v)})){d=!1;break}}else if(!(g===E||n(g,E,r,i,s))){d=!1;break}}return s.delete(t),s.delete(e),d}var Yn=pE;function dE(t){var e=-1,r=Array(t.size);return t.forEach(function(i,n){r[++e]=[n,i]}),r}var Il=dE;function _E(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}var xi=_E;var mE=1,gE=2,yE="[object Boolean]",EE="[object Date]",xE="[object Error]",TE="[object Map]",bE="[object Number]",vE="[object RegExp]",AE="[object Set]",OE="[object String]",SE="[object Symbol]",RE="[object ArrayBuffer]",NE="[object DataView]",wl=Ht?Ht.prototype:void 0,aa=wl?wl.valueOf:void 0;function IE(t,e,r,i,n,s,a){switch(r){case NE:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case RE:return!(t.byteLength!=e.byteLength||!s(new mi(t),new mi(e)));case yE:case EE:case bE:return Ke(+t,+e);case xE:return t.name==e.name&&t.message==e.message;case vE:case OE:return t==e+"";case TE:var o=Il;case AE:var u=i&mE;if(o||(o=xi),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;i|=gE,a.set(t,e);var h=Yn(o(t),o(e),i,n,s,a);return a.delete(t),h;case SE:if(aa)return aa.call(t)==aa.call(e)}return!1}var Cl=IE;var wE=1,CE=Object.prototype,LE=CE.hasOwnProperty;function kE(t,e,r,i,n,s){var a=r&wE,o=Gi(t),u=o.length,l=Gi(e),h=l.length;if(u!=h&&!a)return!1;for(var f=u;f--;){var d=o[f];if(!(a?d in e:LE.call(e,d)))return!1}var m=s.get(t),g=s.get(e);if(m&&g)return m==e&&g==t;var E=!0;s.set(t,e),s.set(e,t);for(var y=a;++f<u;){d=o[f];var x=t[d],v=e[d];if(i)var T=a?i(v,x,d,e,t,s):i(x,v,d,t,e,s);if(!(T===void 0?x===v||n(x,v,r,i,s):T)){E=!1;break}y||(y=d=="constructor")}if(E&&!y){var $=t.constructor,W=e.constructor;$!=W&&"constructor"in t&&"constructor"in e&&!(typeof $=="function"&&$ instanceof $&&typeof W=="function"&&W instanceof W)&&(E=!1)}return s.delete(t),s.delete(e),E}var Ll=kE;var PE=1,kl="[object Arguments]",Pl="[object Array]",Qn="[object Object]",ME=Object.prototype,Ml=ME.hasOwnProperty;function UE(t,e,r,i,n,s){var a=w(t),o=w(e),u=a?Pl:Me(t),l=o?Pl:Me(e);u=u==kl?Qn:u,l=l==kl?Qn:l;var h=u==Qn,f=l==Qn,d=u==l;if(d&&rr(t)){if(!rr(e))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new Sr),a||si(t)?Yn(t,e,r,i,n,s):Cl(t,e,u,r,i,n,s);if(!(r&PE)){var m=h&&Ml.call(t,"__wrapped__"),g=f&&Ml.call(e,"__wrapped__");if(m||g){var E=m?t.value():t,y=g?e.value():e;return s||(s=new Sr),n(E,y,r,i,s)}}return d?(s||(s=new Sr),Ll(t,e,r,i,n,s)):!1}var Ul=UE;function Fl(t,e,r,i,n){return t===e?!0:t==null||e==null||!Ct(t)&&!Ct(e)?t!==t&&e!==e:Ul(t,e,r,i,Fl,n)}var Zn=Fl;var FE=1,BE=2;function $E(t,e,r,i){var n=r.length,s=n,a=!i;if(t==null)return!s;for(t=Object(t);n--;){var o=r[n];if(a&&o[2]?o[1]!==t[o[0]]:!(o[0]in t))return!1}for(;++n<s;){o=r[n];var u=o[0],l=t[u],h=o[1];if(a&&o[2]){if(l===void 0&&!(u in t))return!1}else{var f=new Sr;if(i)var d=i(l,h,u,t,e,f);if(!(d===void 0?Zn(h,l,FE|BE,i,f):d))return!1}}return!0}var Bl=$E;function jE(t){return t===t&&!At(t)}var Jn=jE;function WE(t){for(var e=ft(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,Jn(n)]}return e}var $l=WE;function DE(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}var ts=DE;function GE(t){var e=$l(t);return e.length==1&&e[0][2]?ts(e[0][0],e[0][1]):function(r){return r===t||Bl(r,t,e)}}var jl=GE;function KE(t,e){return t!=null&&e in Object(t)}var Wl=KE;function zE(t,e,r){e=Or(e,t);for(var i=-1,n=e.length,s=!1;++i<n;){var a=He(e[i]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++i!=n?s:(n=t==null?0:t.length,!!n&&ni(n)&&mr(a,n)&&(w(t)||Er(t)))}var es=zE;function qE(t,e){return t!=null&&es(t,e,Wl)}var Dl=qE;var VE=1,HE=2;function XE(t,e){return ai(t)&&Jn(e)?ts(He(t),e):function(r){var i=Fu(r,t);return i===void 0&&i===e?Dl(r,t):Zn(e,i,VE|HE)}}var Gl=XE;function YE(t){return function(e){return e?.[t]}}var Kl=YE;function QE(t){return function(e){return fi(e,t)}}var zl=QE;function ZE(t){return ai(t)?Kl(He(t)):zl(t)}var ql=ZE;function JE(t){return typeof t=="function"?t:t==null?Re:typeof t=="object"?w(t)?Gl(t[0],t[1]):jl(t):ql(t)}var Dt=JE;function tx(t,e,r,i){for(var n=-1,s=t==null?0:t.length;++n<s;){var a=t[n];e(i,a,r(a),t)}return i}var Vl=tx;function ex(t){return function(e,r,i){for(var n=-1,s=Object(e),a=i(e),o=a.length;o--;){var u=a[t?o:++n];if(r(s[u],u,s)===!1)break}return e}}var Hl=ex;var rx=Hl(),Xl=rx;function ix(t,e){return t&&Xl(t,e,ft)}var Yl=ix;function nx(t,e){return function(r,i){if(r==null)return r;if(!Wt(r))return t(r,i);for(var n=r.length,s=e?n:-1,a=Object(r);(e?s--:++s<n)&&i(a[s],s,a)!==!1;);return r}}var Ql=nx;var sx=Ql(Yl),ye=sx;function ax(t,e,r,i){return ye(t,function(n,s,a){e(i,n,r(n),a)}),i}var Zl=ax;function ox(t,e){return function(r,i){var n=w(r)?Vl:Zl,s=e?e():{};return n(r,t,Dt(i,2),s)}}var Jl=ox;var tf=Object.prototype,ux=tf.hasOwnProperty,lx=ii(function(t,e){t=Object(t);var r=-1,i=e.length,n=i>2?e[2]:void 0;for(n&&yr(e[0],e[1],n)&&(i=1);++r<i;)for(var s=e[r],a=xr(s),o=-1,u=a.length;++o<u;){var l=a[o],h=t[l];(h===void 0||Ke(h,tf[l])&&!ux.call(t,l))&&(t[l]=s[l])}return t}),Ti=lx;function fx(t){return Ct(t)&&Wt(t)}var oa=fx;function hx(t,e,r){for(var i=-1,n=t==null?0:t.length;++i<n;)if(r(e,t[i]))return!0;return!1}var rs=hx;var cx=200;function px(t,e,r,i){var n=-1,s=Mn,a=!0,o=t.length,u=[],l=e.length;if(!o)return u;r&&(e=De(e,Ve(r))),i?(s=rs,a=!1):e.length>=cx&&(s=Ei,a=!1,e=new yi(e));t:for(;++n<o;){var h=t[n],f=r==null?h:r(h);if(h=i||h!==0?h:0,a&&f===f){for(var d=l;d--;)if(e[d]===f)continue t;u.push(h)}else s(e,f,i)||u.push(h)}return u}var ef=px;var dx=ii(function(t,e){return oa(t)?ef(t,ci(e,1,oa,!0)):[]}),Nr=dx;function _x(t){var e=t==null?0:t.length;return e?t[e-1]:void 0}var Ue=_x;function mx(t,e,r){var i=t==null?0:t.length;return i?(e=r||e===void 0?1:Ge(e),jn(t,e<0?0:e,i)):[]}var Lt=mx;function gx(t,e,r){var i=t==null?0:t.length;return i?(e=r||e===void 0?1:Ge(e),e=i-e,jn(t,0,e<0?0:e)):[]}var nr=gx;function yx(t){return typeof t=="function"?t:Re}var rf=yx;function Ex(t,e){var r=w(t)?kn:ye;return r(t,rf(e))}var S=Ex;function xx(t,e){for(var r=-1,i=t==null?0:t.length;++r<i;)if(!e(t[r],r,t))return!1;return!0}var nf=xx;function Tx(t,e){var r=!0;return ye(t,function(i,n,s){return r=!!e(i,n,s),r}),r}var sf=Tx;function bx(t,e,r){var i=w(t)?nf:sf;return r&&yr(t,e,r)&&(e=void 0),i(t,Dt(e,3))}var ae=bx;function vx(t,e){var r=[];return ye(t,function(i,n,s){e(i,n,s)&&r.push(i)}),r}var is=vx;function Ax(t,e){var r=w(t)?di:is;return r(t,Dt(e,3))}var oe=Ax;function Ox(t){return function(e,r,i){var n=Object(e);if(!Wt(e)){var s=Dt(r,3);e=ft(e),r=function(o){return s(n[o],o,n)}}var a=t(e,r,i);return a>-1?n[s?e[a]:a]:void 0}}var af=Ox;var Sx=Math.max;function Rx(t,e,r){var i=t==null?0:t.length;if(!i)return-1;var n=r==null?0:Ge(r);return n<0&&(n=Sx(i+n,0)),Pn(t,Dt(e,3),n)}var of=Rx;var Nx=af(of),Ye=Nx;function Ix(t){return t&&t.length?t[0]:void 0}var Xt=Ix;function wx(t,e){var r=-1,i=Wt(t)?Array(t.length):[];return ye(t,function(n,s,a){i[++r]=e(n,s,a)}),i}var uf=wx;function Cx(t,e){var r=w(t)?De:uf;return r(t,Dt(e,3))}var A=Cx;function Lx(t,e){return ci(A(t,e),1)}var he=Lx;var kx=Object.prototype,Px=kx.hasOwnProperty,Mx=Jl(function(t,e,r){Px.call(t,r)?t[r].push(e):ri(t,r,[e])}),ua=Mx;var Ux=Object.prototype,Fx=Ux.hasOwnProperty;function Bx(t,e){return t!=null&&Fx.call(t,e)}var lf=Bx;function $x(t,e){return t!=null&&es(t,e,lf)}var N=$x;var jx="[object String]";function Wx(t){return typeof t=="string"||!w(t)&&Ct(t)&&le(t)==jx}var zt=Wx;function Dx(t,e){return De(e,function(r){return t[r]})}var ff=Dx;function Gx(t){return t==null?[]:ff(t,ft(t))}var at=Gx;var Kx=Math.max;function zx(t,e,r,i){t=Wt(t)?t:at(t),r=r&&!i?Ge(r):0;var n=t.length;return r<0&&(r=Kx(n+r,0)),zt(t)?r<=n&&t.indexOf(e,r)>-1:!!n&&ei(t,e,r)>-1}var Tt=zx;var qx=Math.max;function Vx(t,e,r){var i=t==null?0:t.length;if(!i)return-1;var n=r==null?0:Ge(r);return n<0&&(n=qx(i+n,0)),ei(t,e,n)}var ns=Vx;var Hx="[object Map]",Xx="[object Set]",Yx=Object.prototype,Qx=Yx.hasOwnProperty;function Zx(t){if(t==null)return!0;if(Wt(t)&&(w(t)||typeof t=="string"||typeof t.splice=="function"||rr(t)||si(t)||Er(t)))return!t.length;var e=Me(t);if(e==Hx||e==Xx)return!t.size;if(qe(t))return!Bn(t).length;for(var r in t)if(Qx.call(t,r))return!1;return!0}var H=Zx;var Jx="[object RegExp]";function tT(t){return Ct(t)&&le(t)==Jx}var hf=tT;var cf=Ne&&Ne.isRegExp,eT=cf?Ve(cf):hf,Ie=eT;function rT(t){return t===void 0}var ue=rT;var iT="Expected a function";function nT(t){if(typeof t!="function")throw new TypeError(iT);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}var pf=nT;function sT(t,e,r,i){if(!At(t))return t;e=Or(e,t);for(var n=-1,s=e.length,a=s-1,o=t;o!=null&&++n<s;){var u=He(e[n]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return t;if(n!=a){var h=o[u];l=i?i(h,u,o):void 0,l===void 0&&(l=At(h)?h:mr(e[n+1])?[]:{})}gr(o,u,l),o=o[u]}return t}var df=sT;function aT(t,e,r){for(var i=-1,n=e.length,s={};++i<n;){var a=e[i],o=fi(t,a);r(o,a)&&df(s,Or(a,t),o)}return s}var _f=aT;function oT(t,e){if(t==null)return{};var r=De(Kn(t),function(i){return[i]});return e=Dt(e),_f(t,r,function(i,n){return e(i,n[0])})}var Ee=oT;function uT(t,e,r,i,n){return n(t,function(s,a,o){r=i?(i=!1,s):e(r,s,a,o)}),r}var mf=uT;function lT(t,e,r){var i=w(t)?Wu:mf,n=arguments.length<3;return i(t,Dt(e,4),r,n,ye)}var Gt=lT;function fT(t,e){var r=w(t)?di:is;return r(t,pf(Dt(e,3)))}var Ir=fT;function hT(t,e){var r;return ye(t,function(i,n,s){return r=e(i,n,s),!r}),!!r}var gf=hT;function cT(t,e,r){var i=w(t)?Xn:gf;return r&&yr(t,e,r)&&(e=void 0),i(t,Dt(e,3))}var Ki=cT;var pT=1/0,dT=Rr&&1/xi(new Rr([,-0]))[1]==pT?function(t){return new Rr(t)}:Ot,yf=dT;var _T=200;function mT(t,e,r){var i=-1,n=Mn,s=t.length,a=!0,o=[],u=o;if(r)a=!1,n=rs;else if(s>=_T){var l=e?null:yf(t);if(l)return xi(l);a=!1,n=Ei,u=new yi}else u=e?[]:o;t:for(;++i<s;){var h=t[i],f=e?e(h):h;if(h=r||h!==0?h:0,a&&f===f){for(var d=u.length;d--;)if(u[d]===f)continue t;e&&u.push(f),o.push(h)}else n(u,f,r)||(u!==o&&u.push(f),o.push(h))}return o}var Ef=mT;function gT(t){return t&&t.length?Ef(t):[]}var bi=gT;function vi(t){console&&console.error&&console.error(`Error: ${t}`)}function zi(t){console&&console.warn&&console.warn(`Warning: ${t}`)}function qi(t){let e=new Date().getTime(),r=t();return{time:new Date().getTime()-e,value:r}}function Vi(t){function e(){}e.prototype=t;let r=new e;function i(){return typeof r.bar}return i(),i(),t;(0,eval)(t)}function yT(t){return ET(t)?t.LABEL:t.name}function ET(t){return zt(t.LABEL)&&t.LABEL!==""}var ve=class{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),S(this.definition,r=>{r.accept(e)})}},pt=class extends ve{constructor(e){super([]),this.idx=1,ie(this,Ee(e,r=>r!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},ce=class extends ve{constructor(e){super(e.definition),this.orgText="",ie(this,Ee(e,r=>r!==void 0))}},dt=class extends ve{constructor(e){super(e.definition),this.ignoreAmbiguities=!1,ie(this,Ee(e,r=>r!==void 0))}},yt=class extends ve{constructor(e){super(e.definition),this.idx=1,ie(this,Ee(e,r=>r!==void 0))}},kt=class extends ve{constructor(e){super(e.definition),this.idx=1,ie(this,Ee(e,r=>r!==void 0))}},Pt=class extends ve{constructor(e){super(e.definition),this.idx=1,ie(this,Ee(e,r=>r!==void 0))}},st=class extends ve{constructor(e){super(e.definition),this.idx=1,ie(this,Ee(e,r=>r!==void 0))}},It=class extends ve{constructor(e){super(e.definition),this.idx=1,ie(this,Ee(e,r=>r!==void 0))}},wt=class extends ve{get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,ie(this,Ee(e,r=>r!==void 0))}},J=class{constructor(e){this.idx=1,ie(this,Ee(e,r=>r!==void 0))}accept(e){e.visit(this)}};function ss(t){return A(t,Ai)}function Ai(t){function e(r){return A(r,Ai)}if(t instanceof pt){let r={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return zt(t.label)&&(r.label=t.label),r}else{if(t instanceof dt)return{type:"Alternative",definition:e(t.definition)};if(t instanceof yt)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof kt)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof Pt)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Ai(new J({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof It)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Ai(new J({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof st)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof wt)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof J){let r={type:"Terminal",name:t.terminalType.name,label:yT(t.terminalType),idx:t.idx};zt(t.label)&&(r.terminalLabel=t.label);let i=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(r.pattern=Ie(i)?i.source:i),r}else{if(t instanceof ce)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}var pe=class{visit(e){let r=e;switch(r.constructor){case pt:return this.visitNonTerminal(r);case dt:return this.visitAlternative(r);case yt:return this.visitOption(r);case kt:return this.visitRepetitionMandatory(r);case Pt:return this.visitRepetitionMandatoryWithSeparator(r);case It:return this.visitRepetitionWithSeparator(r);case st:return this.visitRepetition(r);case wt:return this.visitAlternation(r);case J:return this.visitTerminal(r);case ce:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function la(t){return t instanceof dt||t instanceof yt||t instanceof st||t instanceof kt||t instanceof Pt||t instanceof It||t instanceof J||t instanceof ce}function jr(t,e=[]){return t instanceof yt||t instanceof st||t instanceof It?!0:t instanceof wt?Ki(t.definition,i=>jr(i,e)):t instanceof pt&&Tt(e,t)?!1:t instanceof ve?(t instanceof pt&&e.push(t),ae(t.definition,i=>jr(i,e))):!1}function fa(t){return t instanceof wt}function xe(t){if(t instanceof pt)return"SUBRULE";if(t instanceof yt)return"OPTION";if(t instanceof wt)return"OR";if(t instanceof kt)return"AT_LEAST_ONE";if(t instanceof Pt)return"AT_LEAST_ONE_SEP";if(t instanceof It)return"MANY_SEP";if(t instanceof st)return"MANY";if(t instanceof J)return"CONSUME";throw Error("non exhaustive match")}var sr=class{walk(e,r=[]){S(e.definition,(i,n)=>{let s=Lt(e.definition,n+1);if(i instanceof pt)this.walkProdRef(i,s,r);else if(i instanceof J)this.walkTerminal(i,s,r);else if(i instanceof dt)this.walkFlat(i,s,r);else if(i instanceof yt)this.walkOption(i,s,r);else if(i instanceof kt)this.walkAtLeastOne(i,s,r);else if(i instanceof Pt)this.walkAtLeastOneSep(i,s,r);else if(i instanceof It)this.walkManySep(i,s,r);else if(i instanceof st)this.walkMany(i,s,r);else if(i instanceof wt)this.walkOr(i,s,r);else throw Error("non exhaustive match")})}walkTerminal(e,r,i){}walkProdRef(e,r,i){}walkFlat(e,r,i){let n=r.concat(i);this.walk(e,n)}walkOption(e,r,i){let n=r.concat(i);this.walk(e,n)}walkAtLeastOne(e,r,i){let n=[new yt({definition:e.definition})].concat(r,i);this.walk(e,n)}walkAtLeastOneSep(e,r,i){let n=xf(e,r,i);this.walk(e,n)}walkMany(e,r,i){let n=[new yt({definition:e.definition})].concat(r,i);this.walk(e,n)}walkManySep(e,r,i){let n=xf(e,r,i);this.walk(e,n)}walkOr(e,r,i){let n=r.concat(i);S(e.definition,s=>{let a=new dt({definition:[s]});this.walk(a,n)})}};function xf(t,e,r){return[new yt({definition:[new J({terminalType:t.separator})].concat(t.definition)})].concat(e,r)}function Wr(t){if(t instanceof pt)return Wr(t.referencedRule);if(t instanceof J)return bT(t);if(la(t))return xT(t);if(fa(t))return TT(t);throw Error("non exhaustive match")}function xT(t){let e=[],r=t.definition,i=0,n=r.length>i,s,a=!0;for(;n&&a;)s=r[i],a=jr(s),e=e.concat(Wr(s)),i=i+1,n=r.length>i;return bi(e)}function TT(t){let e=A(t.definition,r=>Wr(r));return bi(Kt(e))}function bT(t){return[t.terminalType]}var as="_~IN~_";var ha=class extends sr{constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,r,i){}walkProdRef(e,r,i){let n=vT(e.referencedRule,e.idx)+this.topProd.name,s=r.concat(i),a=new dt({definition:s}),o=Wr(a);this.follows[n]=o}};function Tf(t){let e={};return S(t,r=>{let i=new ha(r).startWalking();ie(e,i)}),e}function vT(t,e){return t.name+e+as}function M(t){return t.charCodeAt(0)}function os(t,e){Array.isArray(t)?t.forEach(function(r){e.push(r)}):e.push(t)}function Oi(t,e){if(t[e]===!0)throw"duplicate flag "+e;let r=t[e];t[e]=!0}function Dr(t){if(t===void 0)throw Error("Internal Error - Should never get here!");return!0}function Hi(){throw Error("Internal Error - Should never get here!")}function ca(t){return t.type==="Character"}var Xi=[];for(let t=M("0");t<=M("9");t++)Xi.push(t);var Yi=[M("_")].concat(Xi);for(let t=M("a");t<=M("z");t++)Yi.push(t);for(let t=M("A");t<=M("Z");t++)Yi.push(t);var pa=[M(" "),M("\f"),M(`
`),M("\r"),M("	"),M("\v"),M("	"),M("\xA0"),M("\u1680"),M("\u2000"),M("\u2001"),M("\u2002"),M("\u2003"),M("\u2004"),M("\u2005"),M("\u2006"),M("\u2007"),M("\u2008"),M("\u2009"),M("\u200A"),M("\u2028"),M("\u2029"),M("\u202F"),M("\u205F"),M("\u3000"),M("\uFEFF")];var AT=/[0-9a-fA-F]/,us=/[0-9]/,OT=/[1-9]/,Qi=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let r=this.disjunction();this.consumeChar("/");let i={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Oi(i,"global");break;case"i":Oi(i,"ignoreCase");break;case"m":Oi(i,"multiLine");break;case"u":Oi(i,"unicode");break;case"y":Oi(i,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:i,value:r,loc:this.loc(0)}}disjunction(){let e=[],r=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(r)}}alternative(){let e=[],r=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":r="Lookbehind";break;case"!":r="NegativeLookbehind"}break}}Dr(r);let i=this.disjunction();return this.consumeChar(")"),{type:r,value:i,loc:this.loc(e)}}return Hi()}quantifier(e=!1){let r,i=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":let n=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:n,atMost:n};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),r={atLeast:n,atMost:s}):r={atLeast:n,atMost:1/0},this.consumeChar("}");break}if(e===!0&&r===void 0)return;Dr(r);break}if(!(e===!0&&r===void 0)&&Dr(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(i),r}atom(){let e,r=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),Dr(e)?(e.loc=this.loc(r),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):Hi()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[M(`
`),M("\r"),M("\u2028"),M("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,r=!1;switch(this.popChar()){case"d":e=Xi;break;case"D":e=Xi,r=!0;break;case"s":e=pa;break;case"S":e=pa,r=!0;break;case"w":e=Yi;break;case"W":e=Yi,r=!0;break}return Dr(e)?{type:"Set",value:e,complement:r}:Hi()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=M("\f");break;case"n":e=M(`
`);break;case"r":e=M("\r");break;case"t":e=M("	");break;case"v":e=M("\v");break}return Dr(e)?{type:"Character",value:e}:Hi()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:M("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let e=this.popChar();return{type:"Character",value:M(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:M(e)}}}characterClass(){let e=[],r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){let i=this.classAtom(),n=i.type==="Character";if(ca(i)&&this.isRangeDash()){this.consumeChar("-");let s=this.classAtom(),a=s.type==="Character";if(ca(s)){if(s.value<i.value)throw Error("Range out of order in character class");e.push({from:i.value,to:s.value})}else os(i.value,e),e.push(M("-")),os(s.value,e)}else os(i.value,e)}return this.consumeChar("]"),{type:"Set",complement:r,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:M("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),e=!1):this.groupIdx++;let r=this.disjunction();this.consumeChar(")");let i={type:"Group",capturing:e,value:r};return e&&(i.idx=this.groupIdx),i}positiveInteger(){let e=this.popChar();if(OT.test(e)===!1)throw Error("Expecting a positive integer");for(;us.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(us.test(e)===!1)throw Error("Expecting an integer");for(;us.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:M(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return us.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){let e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let r="";for(let n=0;n<e;n++){let s=this.popChar();if(AT.test(s)===!1)throw Error("Expecting a HexDecimal digits");r+=s}return{type:"Character",value:parseInt(r,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}};var wr=class{visitChildren(e){for(let r in e){let i=e[r];e.hasOwnProperty(r)&&(i.type!==void 0?this.visit(i):Array.isArray(i)&&i.forEach(n=>{this.visit(n)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Lookbehind":this.visitLookbehind(e);break;case"NegativeLookbehind":this.visitNegativeLookbehind(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitLookbehind(e){}visitNegativeLookbehind(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}};var ls={},ST=new Qi;function Si(t){let e=t.toString();if(ls.hasOwnProperty(e))return ls[e];{let r=ST.pattern(e);return ls[e]=r,r}}function bf(){ls={}}var Af="Complement Sets are not supported for first char optimization",Zi=`Unable to use "first char" lexer optimizations:
`;function Of(t,e=!1){try{let r=Si(t);return da(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===Af)e&&zi(`${Zi}	Unable to optimize: < ${t.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let i="";e&&(i=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),vi(`${Zi}
	Failed parsing: < ${t.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+i)}}return[]}function da(t,e,r){switch(t.type){case"Disjunction":for(let n=0;n<t.value.length;n++)da(t.value[n],e,r);break;case"Alternative":let i=t.value;for(let n=0;n<i.length;n++){let s=i[n];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let a=s;switch(a.type){case"Character":fs(a.value,e,r);break;case"Set":if(a.complement===!0)throw Error(Af);S(a.value,u=>{if(typeof u=="number")fs(u,e,r);else{let l=u;if(r===!0)for(let h=l.from;h<=l.to;h++)fs(h,e,r);else{for(let h=l.from;h<=l.to&&h<Ri;h++)fs(h,e,r);if(l.to>=Ri){let h=l.from>=Ri?l.from:Ri,f=l.to,d=Qe(h),m=Qe(f);for(let g=d;g<=m;g++)e[g]=g}}}});break;case"Group":da(a.value,e,r);break;default:throw Error("Non Exhaustive Match")}let o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&_a(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return at(e)}function fs(t,e,r){let i=Qe(t);e[i]=i,r===!0&&RT(t,e)}function RT(t,e){let r=String.fromCharCode(t),i=r.toUpperCase();if(i!==r){let n=Qe(i.charCodeAt(0));e[n]=n}else{let n=r.toLowerCase();if(n!==r){let s=Qe(n.charCodeAt(0));e[s]=s}}}function vf(t,e){return Ye(t.value,r=>{if(typeof r=="number")return Tt(e,r);{let i=r;return Ye(e,n=>i.from<=n&&n<=i.to)!==void 0}})}function _a(t){let e=t.quantifier;return e&&e.atLeast===0?!0:t.value?w(t.value)?ae(t.value,_a):_a(t.value):!1}var ma=class extends wr{constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return;case"Lookbehind":this.visitLookbehind(e);return;case"NegativeLookbehind":this.visitNegativeLookbehind(e);return}super.visitChildren(e)}}visitCharacter(e){Tt(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?vf(e,this.targetCharCodes)===void 0&&(this.found=!0):vf(e,this.targetCharCodes)!==void 0&&(this.found=!0)}};function hs(t,e){if(e instanceof RegExp){let r=Si(e),i=new ma(t);return i.visit(r),i.found}else return Ye(e,r=>Tt(t,r.charCodeAt(0)))!==void 0}var Gr="PATTERN",Ni="defaultMode",cs="modes",ya=typeof new RegExp("(?:)").sticky=="boolean";function Nf(t,e){e=Ti(e,{useSticky:ya,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(v,T)=>T()});let r=e.tracer;r("initCharCodeToOptimizedIndexMap",()=>{qT()});let i;r("Reject Lexer.NA",()=>{i=Ir(t,v=>v[Gr]===St.NA)});let n=!1,s;r("Transform Patterns",()=>{n=!1,s=A(i,v=>{let T=v[Gr];if(Ie(T)){let $=T.source;return $.length===1&&$!=="^"&&$!=="$"&&$!=="."&&!T.ignoreCase?$:$.length===2&&$[0]==="\\"&&!Tt(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],$[1])?$[1]:e.useSticky?Rf(T):Sf(T)}else{if(fe(T))return n=!0,{exec:T};if(typeof T=="object")return n=!0,T;if(typeof T=="string"){if(T.length===1)return T;{let $=T.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),W=new RegExp($);return e.useSticky?Rf(W):Sf(W)}}else throw Error("non exhaustive match")}})});let a,o,u,l,h;r("misc mapping",()=>{a=A(i,v=>v.tokenTypeIdx),o=A(i,v=>{let T=v.GROUP;if(T!==St.SKIPPED){if(zt(T))return T;if(ue(T))return!1;throw Error("non exhaustive match")}}),u=A(i,v=>{let T=v.LONGER_ALT;if(T)return w(T)?A(T,W=>ns(i,W)):[ns(i,T)]}),l=A(i,v=>v.PUSH_MODE),h=A(i,v=>N(v,"POP_MODE"))});let f;r("Line Terminator Handling",()=>{let v=Uf(e.lineTerminatorCharacters);f=A(i,T=>!1),e.positionTracking!=="onlyOffset"&&(f=A(i,T=>N(T,"LINE_BREAKS")?!!T.LINE_BREAKS:Mf(T,v)===!1&&hs(v,T.PATTERN)))});let d,m,g,E;r("Misc Mapping #2",()=>{d=A(i,kf),m=A(s,KT),g=Gt(i,(v,T)=>{let $=T.GROUP;return zt($)&&$!==St.SKIPPED&&(v[$]=[]),v},{}),E=A(s,(v,T)=>({pattern:s[T],longerAlt:u[T],canLineTerminator:f[T],isCustom:d[T],short:m[T],group:o[T],push:l[T],pop:h[T],tokenTypeIdx:a[T],tokenType:i[T]}))});let y=!0,x=[];return e.safeMode||r("First Char Optimization",()=>{x=Gt(i,(v,T,$)=>{if(typeof T.PATTERN=="string"){let W=T.PATTERN.charCodeAt(0),Vt=Qe(W);ga(v,Vt,E[$])}else if(w(T.START_CHARS_HINT)){let W;S(T.START_CHARS_HINT,Vt=>{let Zr=typeof Vt=="string"?Vt.charCodeAt(0):Vt,Se=Qe(Zr);W!==Se&&(W=Se,ga(v,Se,E[$]))})}else if(Ie(T.PATTERN))if(T.PATTERN.unicode)y=!1,e.ensureOptimizations&&vi(`${Zi}	Unable to analyze < ${T.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let W=Of(T.PATTERN,e.ensureOptimizations);H(W)&&(y=!1),S(W,Vt=>{ga(v,Vt,E[$])})}else e.ensureOptimizations&&vi(`${Zi}	TokenType: <${T.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),y=!1;return v},[])}),{emptyGroups:g,patternIdxToConfig:E,charCodeToPatternIdxToConfig:x,hasCustom:n,canBeOptimized:y}}function If(t,e){let r=[],i=IT(t);r=r.concat(i.errors);let n=wT(i.valid),s=n.valid;return r=r.concat(n.errors),r=r.concat(NT(s)),r=r.concat(BT(s)),r=r.concat($T(s,e)),r=r.concat(jT(s)),r}function NT(t){let e=[],r=oe(t,i=>Ie(i[Gr]));return e=e.concat(LT(r)),e=e.concat(MT(r)),e=e.concat(UT(r)),e=e.concat(FT(r)),e=e.concat(kT(r)),e}function IT(t){let e=oe(t,n=>!N(n,Gr)),r=A(e,n=>({message:"Token Type: ->"+n.name+"<- missing static 'PATTERN' property",type:bt.MISSING_PATTERN,tokenTypes:[n]})),i=Nr(t,e);return{errors:r,valid:i}}function wT(t){let e=oe(t,n=>{let s=n[Gr];return!Ie(s)&&!fe(s)&&!N(s,"exec")&&!zt(s)}),r=A(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:bt.INVALID_PATTERN,tokenTypes:[n]})),i=Nr(t,e);return{errors:r,valid:i}}var CT=/[^\\][$]/;function LT(t){class e extends wr{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}let r=oe(t,n=>{let s=n.PATTERN;try{let a=Si(s),o=new e;return o.visit(a),o.found}catch{return CT.test(s.source)}});return A(r,n=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:bt.EOI_ANCHOR_FOUND,tokenTypes:[n]}))}function kT(t){let e=oe(t,i=>i.PATTERN.test(""));return A(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' must not match an empty string",type:bt.EMPTY_MATCH_PATTERN,tokenTypes:[i]}))}var PT=/[^\\[][\^]|^\^/;function MT(t){class e extends wr{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}let r=oe(t,n=>{let s=n.PATTERN;try{let a=Si(s),o=new e;return o.visit(a),o.found}catch{return PT.test(s.source)}});return A(r,n=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:bt.SOI_ANCHOR_FOUND,tokenTypes:[n]}))}function UT(t){let e=oe(t,i=>{let n=i[Gr];return n instanceof RegExp&&(n.multiline||n.global)});return A(e,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:bt.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[i]}))}function FT(t){let e=[],r=A(t,s=>Gt(t,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!Tt(e,o)&&o.PATTERN!==St.NA&&(e.push(o),a.push(o)),a),[]));r=Xe(r);let i=oe(r,s=>s.length>1);return A(i,s=>{let a=A(s,u=>u.name);return{message:`The same RegExp pattern ->${Xt(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:bt.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function BT(t){let e=oe(t,i=>{if(!N(i,"GROUP"))return!1;let n=i.GROUP;return n!==St.SKIPPED&&n!==St.NA&&!zt(n)});return A(e,i=>({message:"Token Type: ->"+i.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:bt.INVALID_GROUP_TYPE_FOUND,tokenTypes:[i]}))}function $T(t,e){let r=oe(t,n=>n.PUSH_MODE!==void 0&&!Tt(e,n.PUSH_MODE));return A(r,n=>({message:`Token Type: ->${n.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${n.PUSH_MODE}<-which does not exist`,type:bt.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[n]}))}function jT(t){let e=[],r=Gt(t,(i,n,s)=>{let a=n.PATTERN;return a===St.NA||(zt(a)?i.push({str:a,idx:s,tokenType:n}):Ie(a)&&DT(a)&&i.push({str:a.source,idx:s,tokenType:n})),i},[]);return S(t,(i,n)=>{S(r,({str:s,idx:a,tokenType:o})=>{if(n<a&&WT(s,i.PATTERN)){let u=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${i.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:u,type:bt.UNREACHABLE_PATTERN,tokenTypes:[i,o]})}})}),e}function WT(t,e){if(Ie(e)){if(GT(e))return!1;let r=e.exec(t);return r!==null&&r.index===0}else{if(fe(e))return e(t,0,[],{});if(N(e,"exec"))return e.exec(t,0,[],{});if(typeof e=="string")return e===t;throw Error("non exhaustive match")}}function DT(t){return Ye([".","\\","[","]","|","^","$","(",")","?","*","+","{"],r=>t.source.indexOf(r)!==-1)===void 0}function GT(t){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(t.source)}function Sf(t){let e=t.ignoreCase?"i":"";return new RegExp(`^(?:${t.source})`,e)}function Rf(t){let e=t.ignoreCase?"iy":"y";return new RegExp(`${t.source}`,e)}function wf(t,e,r){let i=[];return N(t,Ni)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+Ni+`> property in its definition
`,type:bt.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),N(t,cs)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+cs+`> property in its definition
`,type:bt.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),N(t,cs)&&N(t,Ni)&&!N(t.modes,t.defaultMode)&&i.push({message:`A MultiMode Lexer cannot be initialized with a ${Ni}: <${t.defaultMode}>which does not exist
`,type:bt.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),N(t,cs)&&S(t.modes,(n,s)=>{S(n,(a,o)=>{if(ue(a))i.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:bt.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(N(a,"LONGER_ALT")){let u=w(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];S(u,l=>{!ue(l)&&!Tt(n,l)&&i.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${s}>
`,type:bt.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),i}function Cf(t,e,r){let i=[],n=!1,s=Xe(Kt(at(t.modes))),a=Ir(s,u=>u[Gr]===St.NA),o=Uf(r);return e&&S(a,u=>{let l=Mf(u,o);if(l!==!1){let f={message:zT(u,l),type:l.issue,tokenType:u};i.push(f)}else N(u,"LINE_BREAKS")?u.LINE_BREAKS===!0&&(n=!0):hs(o,u.PATTERN)&&(n=!0)}),e&&!n&&i.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:bt.NO_LINE_BREAKS_FLAGS}),i}function Lf(t){let e={},r=ft(t);return S(r,i=>{let n=t[i];if(w(n))e[i]=[];else throw Error("non exhaustive match")}),e}function kf(t){let e=t.PATTERN;if(Ie(e))return!1;if(fe(e))return!0;if(N(e,"exec"))return!0;if(zt(e))return!1;throw Error("non exhaustive match")}function KT(t){return zt(t)&&t.length===1?t.charCodeAt(0):!1}var Pf={test:function(t){let e=t.length;for(let r=this.lastIndex;r<e;r++){let i=t.charCodeAt(r);if(i===10)return this.lastIndex=r+1,!0;if(i===13)return t.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function Mf(t,e){if(N(t,"LINE_BREAKS"))return!1;if(Ie(t.PATTERN)){try{hs(e,t.PATTERN)}catch(r){return{issue:bt.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(zt(t.PATTERN))return!1;if(kf(t))return{issue:bt.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function zT(t,e){if(e.issue===bt.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${t.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===bt.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${t.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Uf(t){return A(t,r=>zt(r)?r.charCodeAt(0):r)}function ga(t,e,r){t[e]===void 0?t[e]=[r]:t[e].push(r)}var Ri=256,ps=[];function Qe(t){return t<Ri?t:ps[t]}function qT(){if(H(ps)){ps=new Array(65536);for(let t=0;t<65536;t++)ps[t]=t>255?255+~~(t/255):t}}function ar(t,e){let r=t.tokenTypeIdx;return r===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[r]===!0}function Ii(t,e){return t.tokenTypeIdx===e.tokenTypeIdx}var Ff=1,$f={};function or(t){let e=VT(t);HT(e),YT(e),XT(e),S(e,r=>{r.isParent=r.categoryMatches.length>0})}function VT(t){let e=ct(t),r=t,i=!0;for(;i;){r=Xe(Kt(A(r,s=>s.CATEGORIES)));let n=Nr(r,e);e=e.concat(n),H(n)?i=!1:r=n}return e}function HT(t){S(t,e=>{Ea(e)||($f[Ff]=e,e.tokenTypeIdx=Ff++),Bf(e)&&!w(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Bf(e)||(e.CATEGORIES=[]),QT(e)||(e.categoryMatches=[]),ZT(e)||(e.categoryMatchesMap={})})}function XT(t){S(t,e=>{e.categoryMatches=[],S(e.categoryMatchesMap,(r,i)=>{e.categoryMatches.push($f[i].tokenTypeIdx)})})}function YT(t){S(t,e=>{jf([],e)})}function jf(t,e){S(t,r=>{e.categoryMatchesMap[r.tokenTypeIdx]=!0}),S(e.CATEGORIES,r=>{let i=t.concat(e);Tt(i,r)||jf(i,r)})}function Ea(t){return N(t,"tokenTypeIdx")}function Bf(t){return N(t,"CATEGORIES")}function QT(t){return N(t,"categoryMatches")}function ZT(t){return N(t,"categoryMatchesMap")}function Wf(t){return N(t,"tokenTypeIdx")}var xa={buildUnableToPopLexerModeMessage(t){return`Unable to pop Lexer Mode after encountering Token ->${t.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(t,e,r,i,n,s){return`unexpected character: ->${t.charAt(e)}<- at offset: ${e}, skipped ${r} characters.`}};var bt;(function(t){t[t.MISSING_PATTERN=0]="MISSING_PATTERN",t[t.INVALID_PATTERN=1]="INVALID_PATTERN",t[t.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",t[t.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",t[t.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",t[t.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",t[t.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",t[t.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",t[t.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",t[t.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",t[t.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",t[t.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",t[t.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",t[t.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",t[t.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",t[t.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",t[t.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",t[t.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(bt||(bt={}));var Ji={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:xa,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Ji);var St=class{constructor(e,r=Ji){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(n,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${n}>`);let{time:o,value:u}=qi(s),l=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${a}<-- <${n}> time: ${o}ms`),this.traceInitIndent--,u}else return s()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=ie({},Ji,r);let i=this.config.traceInitPerf;i===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof i=="number"&&(this.traceInitMaxIdent=i,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let n,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Ji.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Pf;else if(this.config.lineTerminatorCharacters===Ji.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),w(e)?n={modes:{defaultMode:ct(e)},defaultMode:Ni}:(s=!1,n=ct(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(wf(n,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Cf(n,this.trackStartLines,this.config.lineTerminatorCharacters))})),n.modes=n.modes?n.modes:{},S(n.modes,(o,u)=>{n.modes[u]=Ir(o,l=>ue(l))});let a=ft(n.modes);if(S(n.modes,(o,u)=>{this.TRACE_INIT(`Mode: <${u}> processing`,()=>{if(this.modes.push(u),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(If(o,a))}),H(this.lexerDefinitionErrors)){or(o);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=Nf(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[u]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[u]=l.charCodeToPatternIdxToConfig,this.emptyGroups=ie({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[u]=l.canBeOptimized}})}),this.defaultMode=n.defaultMode,!H(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let u=A(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+u)}S(this.lexerDefinitionWarning,o=>{zi(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(ya?(this.chopInput=Re,this.match=this.matchWithTest):(this.updateLastIndex=Ot,this.match=this.matchWithExec),s&&(this.handleModes=Ot),this.trackStartLines===!1&&(this.computeNewColumn=Re),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Ot),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let o=Gt(this.canModeBeOptimized,(u,l,h)=>(l===!1&&u.push(h),u),[]);if(r.ensureOptimizations&&!H(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{bf()}),this.TRACE_INIT("toFastProperties",()=>{Vi(this)})})}tokenize(e,r=this.defaultMode){if(!H(this.lexerDefinitionErrors)){let n=A(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+n)}return this.tokenizeInternal(e,r)}tokenizeInternal(e,r){let i,n,s,a,o,u,l,h,f,d,m,g,E,y,x,v,T=e,$=T.length,W=0,Vt=0,Zr=this.hasCustom?0:Math.floor(e.length/10),Se=new Array(Zr),hr=[],Ft=this.trackStartLines?1:void 0,X=this.trackStartLines?1:void 0,c=Lf(this.emptyGroups),p=this.trackStartLines,b=this.config.lineTerminatorsPattern,O=0,R=[],D=[],L=[],I=[];Object.freeze(I);let V;function lt(){return R}function Et(xt){let G=Qe(xt),Z=D[G];return Z===void 0?I:Z}let K=xt=>{if(L.length===1&&xt.tokenType.PUSH_MODE===void 0){let G=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(xt);hr.push({offset:xt.startOffset,line:xt.startLine,column:xt.startColumn,length:xt.image.length,message:G})}else{L.pop();let G=Ue(L);R=this.patternIdxToConfig[G],D=this.charCodeToPatternIdxToConfig[G],O=R.length;let Z=this.canModeBeOptimized[G]&&this.config.safeMode===!1;D&&Z?V=Et:V=lt}};function te(xt){L.push(xt),D=this.charCodeToPatternIdxToConfig[xt],R=this.patternIdxToConfig[xt],O=R.length,O=R.length;let G=this.canModeBeOptimized[xt]&&this.config.safeMode===!1;D&&G?V=Et:V=lt}te.call(this,r);let C,z=this.config.recoveryEnabled;for(;W<$;){u=null;let xt=T.charCodeAt(W),G=V(xt),Z=G.length;for(i=0;i<Z;i++){C=G[i];let Y=C.pattern;l=null;let tt=C.short;if(tt!==!1?xt===tt&&(u=Y):C.isCustom===!0?(v=Y.exec(T,W,Se,c),v!==null?(u=v[0],v.payload!==void 0&&(l=v.payload)):u=null):(this.updateLastIndex(Y,W),u=this.match(Y,e,W)),u!==null){if(o=C.longerAlt,o!==void 0){let Nt=o.length;for(s=0;s<Nt;s++){let ot=R[o[s]],Bt=ot.pattern;if(h=null,ot.isCustom===!0?(v=Bt.exec(T,W,Se,c),v!==null?(a=v[0],v.payload!==void 0&&(h=v.payload)):a=null):(this.updateLastIndex(Bt,W),a=this.match(Bt,e,W)),a&&a.length>u.length){u=a,l=h,C=ot;break}}}break}}if(u!==null){if(f=u.length,d=C.group,d!==void 0&&(m=C.tokenTypeIdx,g=this.createTokenInstance(u,W,m,C.tokenType,Ft,X,f),this.handlePayload(g,l),d===!1?Vt=this.addToken(Se,Vt,g):c[d].push(g)),e=this.chopInput(e,f),W=W+f,X=this.computeNewColumn(X,f),p===!0&&C.canLineTerminator===!0){let Y=0,tt,Nt;b.lastIndex=0;do tt=b.test(u),tt===!0&&(Nt=b.lastIndex-1,Y++);while(tt===!0);Y!==0&&(Ft=Ft+Y,X=f-Nt,this.updateTokenEndLineColumnLocation(g,d,Nt,Y,Ft,X,f))}this.handleModes(C,K,te,g)}else{let Y=W,tt=Ft,Nt=X,ot=z===!1;for(;ot===!1&&W<$;)for(e=this.chopInput(e,1),W++,n=0;n<O;n++){let Bt=R[n],et=Bt.pattern,ke=Bt.short;if(ke!==!1?T.charCodeAt(W)===ke&&(ot=!0):Bt.isCustom===!0?ot=et.exec(T,W,Se,c)!==null:(this.updateLastIndex(et,W),ot=et.exec(e)!==null),ot===!0)break}if(E=W-Y,X=this.computeNewColumn(X,E),x=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(T,Y,E,tt,Nt,Ue(L)),hr.push({offset:Y,line:tt,column:Nt,length:E,message:x}),z===!1)break}}return this.hasCustom||(Se.length=Vt),{tokens:Se,groups:c,errors:hr}}handleModes(e,r,i,n){if(e.pop===!0){let s=e.push;r(n),s!==void 0&&i.call(this,s)}else e.push!==void 0&&i.call(this,e.push)}chopInput(e,r){return e.substring(r)}updateLastIndex(e,r){e.lastIndex=r}updateTokenEndLineColumnLocation(e,r,i,n,s,a,o){let u,l;r!==void 0&&(u=i===o-1,l=u?-1:0,n===1&&u===!0||(e.endLine=s+l,e.endColumn=a-1+-l))}computeNewColumn(e,r){return e+r}createOffsetOnlyToken(e,r,i,n){return{image:e,startOffset:r,tokenTypeIdx:i,tokenType:n}}createStartOnlyToken(e,r,i,n,s,a){return{image:e,startOffset:r,startLine:s,startColumn:a,tokenTypeIdx:i,tokenType:n}}createFullToken(e,r,i,n,s,a,o){return{image:e,startOffset:r,endOffset:r+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:i,tokenType:n}}addTokenUsingPush(e,r,i){return e.push(i),r}addTokenUsingMemberAccess(e,r,i){return e[r]=i,r++,r}handlePayloadNoCustom(e,r){}handlePayloadWithCustom(e,r){r!==null&&(e.payload=r)}matchWithTest(e,r,i){return e.test(r)===!0?r.substring(i,e.lastIndex):null}matchWithExec(e,r){let i=e.exec(r);return i!==null?i[0]:null}};St.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";St.NA=/NOT_APPLICABLE/;function Kr(t){return Ta(t)?t.LABEL:t.name}function Ta(t){return zt(t.LABEL)&&t.LABEL!==""}var JT="parent",Df="categories",Gf="label",Kf="group",zf="push_mode",qf="pop_mode",Vf="longer_alt",Hf="line_breaks",Xf="start_chars_hint";function U(t){return tb(t)}function tb(t){let e=t.pattern,r={};if(r.name=t.name,ue(e)||(r.PATTERN=e),N(t,JT))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return N(t,Df)&&(r.CATEGORIES=t[Df]),or([r]),N(t,Gf)&&(r.LABEL=t[Gf]),N(t,Kf)&&(r.GROUP=t[Kf]),N(t,qf)&&(r.POP_MODE=t[qf]),N(t,zf)&&(r.PUSH_MODE=t[zf]),N(t,Vf)&&(r.LONGER_ALT=t[Vf]),N(t,Hf)&&(r.LINE_BREAKS=t[Hf]),N(t,Xf)&&(r.START_CHARS_HINT=t[Xf]),r}var Fe=U({name:"EOF",pattern:St.NA});or([Fe]);function zr(t,e,r,i,n,s,a,o){return{image:e,startOffset:r,endOffset:i,startLine:n,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:t.tokenTypeIdx,tokenType:t}}function ba(t,e){return ar(t,e)}var ds={buildMismatchTokenMessage({expected:t,actual:e,previous:r,ruleName:i}){return`Expecting ${Ta(t)?`--> ${Kr(t)} <--`:`token of type --> ${t.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:t,ruleName:e}){return"Redundant input, expecting EOF but found: "+t.image},buildNoViableAltMessage({expectedPathsPerAlt:t,actual:e,previous:r,customUserDescription:i,ruleName:n}){let s="Expecting: ",o=`
but found: '`+Xt(e).image+"'";if(i)return s+i+o;{let u=Gt(t,(d,m)=>d.concat(m),[]),l=A(u,d=>`[${A(d,m=>Kr(m)).join(", ")}]`),f=`one of these possible Token sequences:
${A(l,(d,m)=>`  ${m+1}. ${d}`).join(`
`)}`;return s+f+o}},buildEarlyExitMessage({expectedIterationPaths:t,actual:e,customUserDescription:r,ruleName:i}){let n="Expecting: ",a=`
but found: '`+Xt(e).image+"'";if(r)return n+r+a;{let u=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${A(t,l=>`[${A(l,h=>Kr(h)).join(",")}]`).join(" ,")}>`;return n+u+a}}};Object.freeze(ds);var Yf={buildRuleNotFoundError(t,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+t.name+"<-"}},Be={buildDuplicateFoundError(t,e){function r(h){return h instanceof J?h.terminalType.name:h instanceof pt?h.nonTerminalName:""}let i=t.name,n=Xt(e),s=n.idx,a=xe(n),o=r(n),u=s>0,l=`->${a}${u?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${i}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(t){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${t.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(t){let e=A(t.prefixPath,n=>Kr(n)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx;return`Ambiguous alternatives: <${t.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(t){let e=A(t.prefixPath,n=>Kr(n)).join(", "),r=t.alternation.idx===0?"":t.alternation.idx,i=`Ambiguous Alternatives Detected: <${t.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${t.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return i=i+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,i},buildEmptyRepetitionError(t){let e=xe(t.repetition);return t.repetition.idx!==0&&(e+=t.repetition.idx),`The repetition <${e}> within Rule <${t.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(t){return"deprecated"},buildEmptyAlternationError(t){return`Ambiguous empty alternative: <${t.emptyChoiceIdx+1}> in <OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(t){return`An Alternation cannot have more than 256 alternatives:
<OR${t.alternation.idx}> inside <${t.topLevelRule.name}> Rule.
 has ${t.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(t){let e=t.topLevelRule.name,r=A(t.leftRecursionPath,s=>s.name),i=`${e} --> ${r.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${i}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(t){return"deprecated"},buildDuplicateRuleNameError(t){let e;return t.topLevelRule instanceof ce?e=t.topLevelRule.name:e=t.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${t.grammarName}<-`}};function Qf(t,e){let r=new va(t,e);return r.resolveRefs(),r.errors}var va=class extends pe{constructor(e,r){super(),this.nameToTopRule=e,this.errMsgProvider=r,this.errors=[]}resolveRefs(){S(at(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let r=this.nameToTopRule[e.nonTerminalName];if(r)e.referencedRule=r;else{let i=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:i,type:qt.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}};var Aa=class extends sr{constructor(e,r){super(),this.topProd=e,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=ct(this.path.ruleStack).reverse(),this.occurrenceStack=ct(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,r=[]){this.found||super.walk(e,r)}walkProdRef(e,r,i){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let n=r.concat(i);this.updateExpectedNext(),this.walk(e.referencedRule,n)}}updateExpectedNext(){H(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},_s=class extends Aa{constructor(e,r){super(e,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,r,i){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let n=r.concat(i),s=new dt({definition:n});this.possibleTokTypes=Wr(s),this.found=!0}}},wi=class extends sr{constructor(e,r){super(),this.topRule=e,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},ms=class extends wi{walkMany(e,r,i){if(e.idx===this.occurrence){let n=Xt(r.concat(i));this.result.isEndOfRule=n===void 0,n instanceof J&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else super.walkMany(e,r,i)}},tn=class extends wi{walkManySep(e,r,i){if(e.idx===this.occurrence){let n=Xt(r.concat(i));this.result.isEndOfRule=n===void 0,n instanceof J&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else super.walkManySep(e,r,i)}},gs=class extends wi{walkAtLeastOne(e,r,i){if(e.idx===this.occurrence){let n=Xt(r.concat(i));this.result.isEndOfRule=n===void 0,n instanceof J&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else super.walkAtLeastOne(e,r,i)}},en=class extends wi{walkAtLeastOneSep(e,r,i){if(e.idx===this.occurrence){let n=Xt(r.concat(i));this.result.isEndOfRule=n===void 0,n instanceof J&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else super.walkAtLeastOneSep(e,r,i)}};function ys(t,e,r=[]){r=ct(r);let i=[],n=0;function s(o){return o.concat(Lt(t,n+1))}function a(o){let u=ys(s(o),e,r);return i.concat(u)}for(;r.length<e&&n<t.length;){let o=t[n];if(o instanceof dt)return a(o.definition);if(o instanceof pt)return a(o.definition);if(o instanceof yt)i=a(o.definition);else if(o instanceof kt){let u=o.definition.concat([new st({definition:o.definition})]);return a(u)}else if(o instanceof Pt){let u=[new dt({definition:o.definition}),new st({definition:[new J({terminalType:o.separator})].concat(o.definition)})];return a(u)}else if(o instanceof It){let u=o.definition.concat([new st({definition:[new J({terminalType:o.separator})].concat(o.definition)})]);i=a(u)}else if(o instanceof st){let u=o.definition.concat([new st({definition:o.definition})]);i=a(u)}else{if(o instanceof wt)return S(o.definition,u=>{H(u.definition)===!1&&(i=a(u.definition))}),i;if(o instanceof J)r.push(o.terminalType);else throw Error("non exhaustive match")}n++}return i.push({partialPath:r,suffixDef:Lt(t,n)}),i}function Es(t,e,r,i){let n="EXIT_NONE_TERMINAL",s=[n],a="EXIT_ALTERNATIVE",o=!1,u=e.length,l=u-i-1,h=[],f=[];for(f.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!H(f);){let d=f.pop();if(d===a){o&&Ue(f).idx<=l&&f.pop();continue}let m=d.def,g=d.idx,E=d.ruleStack,y=d.occurrenceStack;if(H(m))continue;let x=m[0];if(x===n){let v={idx:g,def:Lt(m),ruleStack:nr(E),occurrenceStack:nr(y)};f.push(v)}else if(x instanceof J)if(g<u-1){let v=g+1,T=e[v];if(r(T,x.terminalType)){let $={idx:v,def:Lt(m),ruleStack:E,occurrenceStack:y};f.push($)}}else if(g===u-1)h.push({nextTokenType:x.terminalType,nextTokenOccurrence:x.idx,ruleStack:E,occurrenceStack:y}),o=!0;else throw Error("non exhaustive match");else if(x instanceof pt){let v=ct(E);v.push(x.nonTerminalName);let T=ct(y);T.push(x.idx);let $={idx:g,def:x.definition.concat(s,Lt(m)),ruleStack:v,occurrenceStack:T};f.push($)}else if(x instanceof yt){let v={idx:g,def:Lt(m),ruleStack:E,occurrenceStack:y};f.push(v),f.push(a);let T={idx:g,def:x.definition.concat(Lt(m)),ruleStack:E,occurrenceStack:y};f.push(T)}else if(x instanceof kt){let v=new st({definition:x.definition,idx:x.idx}),T=x.definition.concat([v],Lt(m)),$={idx:g,def:T,ruleStack:E,occurrenceStack:y};f.push($)}else if(x instanceof Pt){let v=new J({terminalType:x.separator}),T=new st({definition:[v].concat(x.definition),idx:x.idx}),$=x.definition.concat([T],Lt(m)),W={idx:g,def:$,ruleStack:E,occurrenceStack:y};f.push(W)}else if(x instanceof It){let v={idx:g,def:Lt(m),ruleStack:E,occurrenceStack:y};f.push(v),f.push(a);let T=new J({terminalType:x.separator}),$=new st({definition:[T].concat(x.definition),idx:x.idx}),W=x.definition.concat([$],Lt(m)),Vt={idx:g,def:W,ruleStack:E,occurrenceStack:y};f.push(Vt)}else if(x instanceof st){let v={idx:g,def:Lt(m),ruleStack:E,occurrenceStack:y};f.push(v),f.push(a);let T=new st({definition:x.definition,idx:x.idx}),$=x.definition.concat([T],Lt(m)),W={idx:g,def:$,ruleStack:E,occurrenceStack:y};f.push(W)}else if(x instanceof wt)for(let v=x.definition.length-1;v>=0;v--){let T=x.definition[v],$={idx:g,def:T.definition.concat(Lt(m)),ruleStack:E,occurrenceStack:y};f.push($),f.push(a)}else if(x instanceof dt)f.push({idx:g,def:x.definition.concat(Lt(m)),ruleStack:E,occurrenceStack:y});else if(x instanceof ce)f.push(eb(x,g,E,y));else throw Error("non exhaustive match")}return h}function eb(t,e,r,i){let n=ct(r);n.push(t.name);let s=ct(i);return s.push(1),{idx:e,def:t.definition,ruleStack:n,occurrenceStack:s}}var Rt;(function(t){t[t.OPTION=0]="OPTION",t[t.REPETITION=1]="REPETITION",t[t.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",t[t.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",t[t.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",t[t.ALTERNATION=5]="ALTERNATION"})(Rt||(Rt={}));function Ts(t){if(t instanceof yt||t==="Option")return Rt.OPTION;if(t instanceof st||t==="Repetition")return Rt.REPETITION;if(t instanceof kt||t==="RepetitionMandatory")return Rt.REPETITION_MANDATORY;if(t instanceof Pt||t==="RepetitionMandatoryWithSeparator")return Rt.REPETITION_MANDATORY_WITH_SEPARATOR;if(t instanceof It||t==="RepetitionWithSeparator")return Rt.REPETITION_WITH_SEPARATOR;if(t instanceof wt||t==="Alternation")return Rt.ALTERNATION;throw Error("non exhaustive match")}function Jf(t,e,r,i,n,s){let a=rn(t,e,r),o=sh(a)?Ii:ar;return s(a,i,o,n)}function th(t,e,r,i,n,s){let a=nn(t,e,n,r),o=sh(a)?Ii:ar;return s(a[0],o,i)}function eh(t,e,r,i){let n=t.length,s=ae(t,a=>ae(a,o=>o.length===1));if(e)return function(a){let o=A(a,u=>u.GATE);for(let u=0;u<n;u++){let l=t[u],h=l.length,f=o[u];if(!(f!==void 0&&f.call(this)===!1))t:for(let d=0;d<h;d++){let m=l[d],g=m.length;for(let E=0;E<g;E++){let y=this.LA(E+1);if(r(y,m[E])===!1)continue t}return u}}};if(s&&!i){let a=A(t,u=>Kt(u)),o=Gt(a,(u,l,h)=>(S(l,f=>{N(u,f.tokenTypeIdx)||(u[f.tokenTypeIdx]=h),S(f.categoryMatches,d=>{N(u,d)||(u[d]=h)})}),u),{});return function(){let u=this.LA(1);return o[u.tokenTypeIdx]}}else return function(){for(let a=0;a<n;a++){let o=t[a],u=o.length;t:for(let l=0;l<u;l++){let h=o[l],f=h.length;for(let d=0;d<f;d++){let m=this.LA(d+1);if(r(m,h[d])===!1)continue t}return a}}}}function rh(t,e,r){let i=ae(t,s=>s.length===1),n=t.length;if(i&&!r){let s=Kt(t);if(s.length===1&&H(s[0].categoryMatches)){let o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{let a=Gt(s,(o,u,l)=>(o[u.tokenTypeIdx]=!0,S(u.categoryMatches,h=>{o[h]=!0}),o),[]);return function(){let o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){t:for(let s=0;s<n;s++){let a=t[s],o=a.length;for(let u=0;u<o;u++){let l=this.LA(u+1);if(e(l,a[u])===!1)continue t}return!0}return!1}}var Sa=class extends sr{constructor(e,r,i){super(),this.topProd=e,this.targetOccurrence=r,this.targetProdType=i}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,r,i,n){return e.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=i.concat(n),!0):!1}walkOption(e,r,i){this.checkIsTarget(e,Rt.OPTION,r,i)||super.walkOption(e,r,i)}walkAtLeastOne(e,r,i){this.checkIsTarget(e,Rt.REPETITION_MANDATORY,r,i)||super.walkOption(e,r,i)}walkAtLeastOneSep(e,r,i){this.checkIsTarget(e,Rt.REPETITION_MANDATORY_WITH_SEPARATOR,r,i)||super.walkOption(e,r,i)}walkMany(e,r,i){this.checkIsTarget(e,Rt.REPETITION,r,i)||super.walkOption(e,r,i)}walkManySep(e,r,i){this.checkIsTarget(e,Rt.REPETITION_WITH_SEPARATOR,r,i)||super.walkOption(e,r,i)}},xs=class extends pe{constructor(e,r,i){super(),this.targetOccurrence=e,this.targetProdType=r,this.targetRef=i,this.result=[]}checkIsTarget(e,r){e.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Rt.OPTION)}visitRepetition(e){this.checkIsTarget(e,Rt.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Rt.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Rt.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Rt.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Rt.ALTERNATION)}};function Zf(t){let e=new Array(t);for(let r=0;r<t;r++)e[r]=[];return e}function Oa(t){let e=[""];for(let r=0;r<t.length;r++){let i=t[r],n=[];for(let s=0;s<e.length;s++){let a=e[s];n.push(a+"_"+i.tokenTypeIdx);for(let o=0;o<i.categoryMatches.length;o++){let u="_"+i.categoryMatches[o];n.push(a+u)}}e=n}return e}function rb(t,e,r){for(let i=0;i<t.length;i++){if(i===r)continue;let n=t[i];for(let s=0;s<e.length;s++){let a=e[s];if(n[a]===!0)return!1}}return!0}function ih(t,e){let r=A(t,a=>ys([a],1)),i=Zf(r.length),n=A(r,a=>{let o={};return S(a,u=>{let l=Oa(u.partialPath);S(l,h=>{o[h]=!0})}),o}),s=r;for(let a=1;a<=e;a++){let o=s;s=Zf(o.length);for(let u=0;u<o.length;u++){let l=o[u];for(let h=0;h<l.length;h++){let f=l[h].partialPath,d=l[h].suffixDef,m=Oa(f);if(rb(n,m,u)||H(d)||f.length===e){let E=i[u];if(bs(E,f)===!1){E.push(f);for(let y=0;y<m.length;y++){let x=m[y];n[u][x]=!0}}}else{let E=ys(d,a+1,f);s[u]=s[u].concat(E),S(E,y=>{let x=Oa(y.partialPath);S(x,v=>{n[u][v]=!0})})}}}}return i}function rn(t,e,r,i){let n=new xs(t,Rt.ALTERNATION,i);return e.accept(n),ih(n.result,r)}function nn(t,e,r,i){let n=new xs(t,r);e.accept(n);let s=n.result,o=new Sa(e,t,r).startWalking(),u=new dt({definition:s}),l=new dt({definition:o});return ih([u,l],i)}function bs(t,e){t:for(let r=0;r<t.length;r++){let i=t[r];if(i.length===e.length){for(let n=0;n<i.length;n++){let s=e[n],a=i[n];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue t}return!0}}return!1}function nh(t,e){return t.length<e.length&&ae(t,(r,i)=>{let n=e[i];return r===n||n.categoryMatchesMap[r.tokenTypeIdx]})}function sh(t){return ae(t,e=>ae(e,r=>ae(r,i=>H(i.categoryMatches))))}function ah(t){let e=t.lookaheadStrategy.validate({rules:t.rules,tokenTypes:t.tokenTypes,grammarName:t.grammarName});return A(e,r=>Object.assign({type:qt.CUSTOM_LOOKAHEAD_VALIDATION},r))}function oh(t,e,r,i){let n=he(t,u=>ib(u,r)),s=lb(t,e,r),a=he(t,u=>ab(u,r)),o=he(t,u=>sb(u,t,i,r));return n.concat(s,a,o)}function ib(t,e){let r=new Ra;t.accept(r);let i=r.allProductions,n=ua(i,nb),s=Ee(n,o=>o.length>1);return A(at(s),o=>{let u=Xt(o),l=e.buildDuplicateFoundError(t,o),h=xe(u),f={message:l,type:qt.DUPLICATE_PRODUCTIONS,ruleName:t.name,dslName:h,occurrence:u.idx},d=uh(u);return d&&(f.parameter=d),f})}function nb(t){return`${xe(t)}_#_${t.idx}_#_${uh(t)}`}function uh(t){return t instanceof J?t.terminalType.name:t instanceof pt?t.nonTerminalName:""}var Ra=class extends pe{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function sb(t,e,r,i){let n=[];if(Gt(e,(a,o)=>o.name===t.name?a+1:a,0)>1){let a=i.buildDuplicateRuleNameError({topLevelRule:t,grammarName:r});n.push({message:a,type:qt.DUPLICATE_RULE_NAME,ruleName:t.name})}return n}function lh(t,e,r){let i=[],n;return Tt(e,t)||(n=`Invalid rule override, rule: ->${t}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,i.push({message:n,type:qt.INVALID_RULE_OVERRIDE,ruleName:t})),i}function Ia(t,e,r,i=[]){let n=[],s=vs(e.definition);if(H(s))return[];{let a=t.name;Tt(s,t)&&n.push({message:r.buildLeftRecursionError({topLevelRule:t,leftRecursionPath:i}),type:qt.LEFT_RECURSION,ruleName:a});let u=Nr(s,i.concat([t])),l=he(u,h=>{let f=ct(i);return f.push(h),Ia(t,h,r,f)});return n.concat(l)}}function vs(t){let e=[];if(H(t))return e;let r=Xt(t);if(r instanceof pt)e.push(r.referencedRule);else if(r instanceof dt||r instanceof yt||r instanceof kt||r instanceof Pt||r instanceof It||r instanceof st)e=e.concat(vs(r.definition));else if(r instanceof wt)e=Kt(A(r.definition,s=>vs(s.definition)));else if(!(r instanceof J))throw Error("non exhaustive match");let i=jr(r),n=t.length>1;if(i&&n){let s=Lt(t);return e.concat(vs(s))}else return e}var sn=class extends pe{constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function fh(t,e){let r=new sn;t.accept(r);let i=r.alternations;return he(i,s=>{let a=nr(s.definition);return he(a,(o,u)=>{let l=Es([o],[],ar,1);return H(l)?[{message:e.buildEmptyAlternationError({topLevelRule:t,alternation:s,emptyChoiceIdx:u}),type:qt.NONE_LAST_EMPTY_ALT,ruleName:t.name,occurrence:s.idx,alternative:u+1}]:[]})})}function hh(t,e,r){let i=new sn;t.accept(i);let n=i.alternations;return n=Ir(n,a=>a.ignoreAmbiguities===!0),he(n,a=>{let o=a.idx,u=a.maxLookahead||e,l=rn(o,t,u,a),h=ob(l,a,t,r),f=ub(l,a,t,r);return h.concat(f)})}var Na=class extends pe{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function ab(t,e){let r=new sn;t.accept(r);let i=r.alternations;return he(i,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:t,alternation:s}),type:qt.TOO_MANY_ALTS,ruleName:t.name,occurrence:s.idx}]:[])}function ch(t,e,r){let i=[];return S(t,n=>{let s=new Na;n.accept(s);let a=s.allProductions;S(a,o=>{let u=Ts(o),l=o.maxLookahead||e,h=o.idx,d=nn(h,n,u,l)[0];if(H(Kt(d))){let m=r.buildEmptyRepetitionError({topLevelRule:n,repetition:o});i.push({message:m,type:qt.NO_NON_EMPTY_LOOKAHEAD,ruleName:n.name})}})}),i}function ob(t,e,r,i){let n=[],s=Gt(t,(o,u,l)=>(e.definition[l].ignoreAmbiguities===!0||S(u,h=>{let f=[l];S(t,(d,m)=>{l!==m&&bs(d,h)&&e.definition[m].ignoreAmbiguities!==!0&&f.push(m)}),f.length>1&&!bs(n,h)&&(n.push(h),o.push({alts:f,path:h}))}),o),[]);return A(s,o=>{let u=A(o.alts,h=>h+1);return{message:i.buildAlternationAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:u,prefixPath:o.path}),type:qt.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:e.idx,alternatives:o.alts}})}function ub(t,e,r,i){let n=Gt(t,(a,o,u)=>{let l=A(o,h=>({idx:u,path:h}));return a.concat(l)},[]);return Xe(he(n,a=>{if(e.definition[a.idx].ignoreAmbiguities===!0)return[];let u=a.idx,l=a.path,h=oe(n,d=>e.definition[d.idx].ignoreAmbiguities!==!0&&d.idx<u&&nh(d.path,l));return A(h,d=>{let m=[d.idx+1,u+1],g=e.idx===0?"":e.idx;return{message:i.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:e,ambiguityIndices:m,prefixPath:d.path}),type:qt.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:g,alternatives:m}})}))}function lb(t,e,r){let i=[],n=A(e,s=>s.name);return S(t,s=>{let a=s.name;if(Tt(n,a)){let o=r.buildNamespaceConflictError(s);i.push({message:o,type:qt.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),i}function ph(t){let e=Ti(t,{errMsgProvider:Yf}),r={};return S(t.rules,i=>{r[i.name]=i}),Qf(r,e.errMsgProvider)}function dh(t){return t=Ti(t,{errMsgProvider:Be}),oh(t.rules,t.tokenTypes,t.errMsgProvider,t.grammarName)}var _h="MismatchedTokenException",mh="NoViableAltException",gh="EarlyExitException",yh="NotAllInputParsedException",Eh=[_h,mh,gh,yh];Object.freeze(Eh);function Cr(t){return Tt(Eh,t.name)}var Ci=class extends Error{constructor(e,r){super(e),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},qr=class extends Ci{constructor(e,r,i){super(e,r),this.previousToken=i,this.name=_h}},an=class extends Ci{constructor(e,r,i){super(e,r),this.previousToken=i,this.name=mh}},on=class extends Ci{constructor(e,r){super(e,r),this.name=yh}},un=class extends Ci{constructor(e,r,i){super(e,r),this.previousToken=i,this.name=gh}};var wa={},La="InRuleRecoveryException",Ca=class extends Error{constructor(e){super(e),this.name=La}},As=class{initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=N(e,"recoveryEnabled")?e.recoveryEnabled:de.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=fb)}getTokenToInsert(e){let r=zr(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,r,i,n){let s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[],u=!1,l=this.LA(1),h=this.LA(1),f=()=>{let d=this.LA(0),m=this.errorMessageProvider.buildMismatchTokenMessage({expected:n,actual:l,previous:d,ruleName:this.getCurrRuleFullName()}),g=new qr(m,l,this.LA(0));g.resyncedTokens=nr(o),this.SAVE_ERROR(g)};for(;!u;)if(this.tokenMatcher(h,n)){f();return}else if(i.call(this)){f(),e.apply(this,r);return}else this.tokenMatcher(h,s)?u=!0:(h=this.SKIP_TOKEN(),this.addToResyncTokens(h,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(e,r,i){return!(i===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,r)))}getFollowsForInRuleRecovery(e,r){let i=this.getCurrentGrammarPath(e,r);return this.getNextPossibleTokenTypes(i)}tryInRuleRecovery(e,r){if(this.canRecoverWithSingleTokenInsertion(e,r))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let i=this.SKIP_TOKEN();return this.consumeToken(),i}throw new Ca("sad sad panda")}canPerformInRuleRecovery(e,r){return this.canRecoverWithSingleTokenInsertion(e,r)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,r){if(!this.canTokenTypeBeInsertedInRecovery(e)||H(r))return!1;let i=this.LA(1);return Ye(r,s=>this.tokenMatcher(i,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){let r=this.getCurrFollowKey(),i=this.getFollowSetFromFollowKey(r);return Tt(i,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),r=this.LA(1),i=2;for(;;){let n=Ye(e,s=>ba(r,s));if(n!==void 0)return n;r=this.LA(i),i++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return wa;let e=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),i=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(i)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return A(e,(i,n)=>n===0?wa:{ruleName:this.shortRuleNameToFullName(i),idxInCallingRule:r[n],inRule:this.shortRuleNameToFullName(e[n-1])})}flattenFollowSet(){let e=A(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return Kt(e)}getFollowSetFromFollowKey(e){if(e===wa)return[Fe];let r=e.ruleName+e.idxInCallingRule+as+e.inRule;return this.resyncFollows[r]}addToResyncTokens(e,r){return this.tokenMatcher(e,Fe)||r.push(e),r}reSyncTo(e){let r=[],i=this.LA(1);for(;this.tokenMatcher(i,e)===!1;)i=this.SKIP_TOKEN(),this.addToResyncTokens(i,r);return nr(r)}attemptInRepetitionRecovery(e,r,i,n,s,a,o){}getCurrentGrammarPath(e,r){let i=this.getHumanReadableRuleStack(),n=ct(this.RULE_OCCURRENCE_STACK);return{ruleStack:i,occurrenceStack:n,lastTok:e,lastTokOccurrence:r}}getHumanReadableRuleStack(){return A(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}};function fb(t,e,r,i,n,s,a){let o=this.getKeyForAutomaticLookahead(i,n),u=this.firstAfterRepMap[o];if(u===void 0){let d=this.getCurrRuleFullName(),m=this.getGAstProductions()[d];u=new s(m,n).startWalking(),this.firstAfterRepMap[o]=u}let l=u.token,h=u.occurrence,f=u.isEndOfRule;this.RULE_STACK.length===1&&f&&l===void 0&&(l=Fe,h=1),!(l===void 0||h===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,h,a)&&this.tryInRepetitionRecovery(t,e,r,l)}function Os(t,e,r){return r|e|t}var ln=class{constructor(e){var r;this.maxLookahead=(r=e?.maxLookahead)!==null&&r!==void 0?r:de.maxLookahead}validate(e){let r=this.validateNoLeftRecursion(e.rules);if(H(r)){let i=this.validateEmptyOrAlternatives(e.rules),n=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...r,...i,...n,...s]}return r}validateNoLeftRecursion(e){return he(e,r=>Ia(r,r,Be))}validateEmptyOrAlternatives(e){return he(e,r=>fh(r,Be))}validateAmbiguousAlternationAlternatives(e,r){return he(e,i=>hh(i,r,Be))}validateSomeNonEmptyLookaheadPath(e,r){return ch(e,r,Be)}buildLookaheadForAlternation(e){return Jf(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,eh)}buildLookaheadForOptional(e){return th(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,Ts(e.prodType),rh)}};var Rs=class{initLooksAhead(e){this.dynamicTokensEnabled=N(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:de.dynamicTokensEnabled,this.maxLookahead=N(e,"maxLookahead")?e.maxLookahead:de.maxLookahead,this.lookaheadStrategy=N(e,"lookaheadStrategy")?e.lookaheadStrategy:new ln({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){S(e,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{let{alternation:i,repetition:n,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:u}=hb(r);S(i,l=>{let h=l.idx===0?"":l.idx;this.TRACE_INIT(`${xe(l)}${h}`,()=>{let f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:r,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),d=Os(this.fullRuleNameToShort[r.name],256,l.idx);this.setLaFuncCache(d,f)})}),S(n,l=>{this.computeLookaheadFunc(r,l.idx,768,"Repetition",l.maxLookahead,xe(l))}),S(s,l=>{this.computeLookaheadFunc(r,l.idx,512,"Option",l.maxLookahead,xe(l))}),S(a,l=>{this.computeLookaheadFunc(r,l.idx,1024,"RepetitionMandatory",l.maxLookahead,xe(l))}),S(o,l=>{this.computeLookaheadFunc(r,l.idx,1536,"RepetitionMandatoryWithSeparator",l.maxLookahead,xe(l))}),S(u,l=>{this.computeLookaheadFunc(r,l.idx,1280,"RepetitionWithSeparator",l.maxLookahead,xe(l))})})})}computeLookaheadFunc(e,r,i,n,s,a){this.TRACE_INIT(`${a}${r===0?"":r}`,()=>{let o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:n}),u=Os(this.fullRuleNameToShort[e.name],i,r);this.setLaFuncCache(u,o)})}getKeyForAutomaticLookahead(e,r){let i=this.getLastExplicitRuleShortName();return Os(i,e,r)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,r){this.lookAheadFuncsCache.set(e,r)}},ka=class extends pe{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},Ss=new ka;function hb(t){Ss.reset(),t.accept(Ss);let e=Ss.dslMethods;return Ss.reset(),e}function Ua(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}function Fa(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}function xh(t,e,r){t.children[r]===void 0?t.children[r]=[e]:t.children[r].push(e)}function Th(t,e,r){t.children[e]===void 0?t.children[e]=[r]:t.children[e].push(r)}var cb="name";function Ba(t,e){Object.defineProperty(t,cb,{enumerable:!1,configurable:!0,writable:!1,value:e})}function pb(t,e){let r=ft(t),i=r.length;for(let n=0;n<i;n++){let s=r[n],a=t[s],o=a.length;for(let u=0;u<o;u++){let l=a[u];l.tokenTypeIdx===void 0&&this[l.name](l.children,e)}}}function bh(t,e){let r=function(){};Ba(r,t+"BaseSemantics");let i={visit:function(n,s){if(w(n)&&(n=n[0]),!ue(n))return this[n.name](n.children,s)},validateVisitor:function(){let n=db(this,e);if(!H(n)){let s=A(n,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=i,r.prototype.constructor=r,r._RULE_NAMES=e,r}function vh(t,e,r){let i=function(){};Ba(i,t+"BaseSemanticsWithDefaults");let n=Object.create(r.prototype);return S(e,s=>{n[s]=pb}),i.prototype=n,i.prototype.constructor=i,i}var $a;(function(t){t[t.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",t[t.MISSING_METHOD=1]="MISSING_METHOD"})($a||($a={}));function db(t,e){return _b(t,e)}function _b(t,e){let r=oe(e,n=>fe(t[n])===!1),i=A(r,n=>({msg:`Missing visitor method: <${n}> on ${t.constructor.name} CST Visitor.`,type:$a.MISSING_METHOD,methodName:n}));return Xe(i)}var Cs=class{initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=N(e,"nodeLocationTracking")?e.nodeLocationTracking:de.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Ot,this.cstFinallyStateUpdate=Ot,this.cstPostTerminal=Ot,this.cstPostNonTerminal=Ot,this.cstPostRule=Ot;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Fa,this.setNodeLocationFromNode=Fa,this.cstPostRule=Ot,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Ot,this.setNodeLocationFromNode=Ot,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Ua,this.setNodeLocationFromNode=Ua,this.cstPostRule=Ot,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Ot,this.setNodeLocationFromNode=Ot,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Ot,this.setNodeLocationFromNode=Ot,this.cstPostRule=Ot,this.setInitialNodeLocation=Ot;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let r=this.LA(1);e.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let r={name:e,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let r=this.LA(0),i=e.location;i.startOffset<=r.startOffset?(i.endOffset=r.endOffset,i.endLine=r.endLine,i.endColumn=r.endColumn):(i.startOffset=NaN,i.startLine=NaN,i.startColumn=NaN)}cstPostRuleOnlyOffset(e){let r=this.LA(0),i=e.location;i.startOffset<=r.startOffset?i.endOffset=r.endOffset:i.startOffset=NaN}cstPostTerminal(e,r){let i=this.CST_STACK[this.CST_STACK.length-1];xh(i,r,e),this.setNodeLocationFromToken(i.location,r)}cstPostNonTerminal(e,r){let i=this.CST_STACK[this.CST_STACK.length-1];Th(i,r,e),this.setNodeLocationFromNode(i.location,e.location)}getBaseCstVisitorConstructor(){if(ue(this.baseCstVisitorConstructor)){let e=bh(this.className,ft(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(ue(this.baseCstVisitorWithDefaultsConstructor)){let e=vh(this.className,ft(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}};var Ls=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Li}LA(e){let r=this.currIdx+e;return r<0||this.tokVectorLength<=r?Li:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var ks=class{ACTION(e){return e.call(this)}consume(e,r,i){return this.consumeInternal(r,e,i)}subrule(e,r,i){return this.subruleInternal(r,e,i)}option(e,r){return this.optionInternal(r,e)}or(e,r){return this.orInternal(r,e)}many(e,r){return this.manyInternal(e,r)}atLeastOne(e,r){return this.atLeastOneInternal(e,r)}CONSUME(e,r){return this.consumeInternal(e,0,r)}CONSUME1(e,r){return this.consumeInternal(e,1,r)}CONSUME2(e,r){return this.consumeInternal(e,2,r)}CONSUME3(e,r){return this.consumeInternal(e,3,r)}CONSUME4(e,r){return this.consumeInternal(e,4,r)}CONSUME5(e,r){return this.consumeInternal(e,5,r)}CONSUME6(e,r){return this.consumeInternal(e,6,r)}CONSUME7(e,r){return this.consumeInternal(e,7,r)}CONSUME8(e,r){return this.consumeInternal(e,8,r)}CONSUME9(e,r){return this.consumeInternal(e,9,r)}SUBRULE(e,r){return this.subruleInternal(e,0,r)}SUBRULE1(e,r){return this.subruleInternal(e,1,r)}SUBRULE2(e,r){return this.subruleInternal(e,2,r)}SUBRULE3(e,r){return this.subruleInternal(e,3,r)}SUBRULE4(e,r){return this.subruleInternal(e,4,r)}SUBRULE5(e,r){return this.subruleInternal(e,5,r)}SUBRULE6(e,r){return this.subruleInternal(e,6,r)}SUBRULE7(e,r){return this.subruleInternal(e,7,r)}SUBRULE8(e,r){return this.subruleInternal(e,8,r)}SUBRULE9(e,r){return this.subruleInternal(e,9,r)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,r,i=ki){if(Tt(this.definedRulesNames,e)){let a={message:Be.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:qt.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(a)}this.definedRulesNames.push(e);let n=this.defineRule(e,r,i);return this[e]=n,n}OVERRIDE_RULE(e,r,i=ki){let n=lh(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(n);let s=this.defineRule(e,r,i);return this[e]=s,s}BACKTRACK(e,r){return function(){this.isBackTrackingStack.push(1);let i=this.saveRecogState();try{return e.apply(this,r),!0}catch(n){if(Cr(n))return!1;throw n}finally{this.reloadRecogState(i),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return ss(at(this.gastProductionsCache))}};var Ps=class{initRecognizerEngine(e,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Ii,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},N(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(w(e)){if(H(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(w(e))this.tokensMap=Gt(e,(s,a)=>(s[a.name]=a,s),{});else if(N(e,"modes")&&ae(Kt(at(e.modes)),Wf)){let s=Kt(at(e.modes)),a=bi(s);this.tokensMap=Gt(a,(o,u)=>(o[u.name]=u,o),{})}else if(At(e))this.tokensMap=ct(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Fe;let i=N(e,"modes")?Kt(at(e.modes)):at(e),n=ae(i,s=>H(s.categoryMatches));this.tokenMatcher=n?Ii:ar,or(at(this.tokensMap))}defineRule(e,r,i){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let n=N(i,"resyncEnabled")?i.resyncEnabled:ki.resyncEnabled,s=N(i,"recoveryValueFunc")?i.recoveryValueFunc:ki.recoveryValueFunc,a=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=e,this.fullRuleNameToShort[e]=a;let o;return this.outputCst===!0?o=function(...h){try{this.ruleInvocationStateUpdate(a,e,this.subruleIdx),r.apply(this,h);let f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,n,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...h){try{return this.ruleInvocationStateUpdate(a,e,this.subruleIdx),r.apply(this,h)}catch(f){return this.invokeRuleCatch(f,n,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:e,originalGrammarAction:r})}invokeRuleCatch(e,r,i){let n=this.RULE_STACK.length===1,s=r&&!this.isBackTracking()&&this.recoveryEnabled;if(Cr(e)){let a=e;if(s){let o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){let u=this.CST_STACK[this.CST_STACK.length-1];return u.recoveredNode=!0,u}else return i(e);else{if(this.outputCst){let u=this.CST_STACK[this.CST_STACK.length-1];u.recoveredNode=!0,a.partialCstResult=u}throw a}}else{if(n)return this.moveToTerminatedState(),i(e);throw a}}else throw e}optionInternal(e,r){let i=this.getKeyForAutomaticLookahead(512,r);return this.optionInternalLogic(e,r,i)}optionInternalLogic(e,r,i){let n=this.getLaFuncFromCache(i),s;if(typeof e!="function"){s=e.DEF;let a=e.GATE;if(a!==void 0){let o=n;n=()=>a.call(this)&&o.call(this)}}else s=e;if(n.call(this)===!0)return s.call(this)}atLeastOneInternal(e,r){let i=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,r,i)}atLeastOneInternalLogic(e,r,i){let n=this.getLaFuncFromCache(i),s;if(typeof r!="function"){s=r.DEF;let a=r.GATE;if(a!==void 0){let o=n;n=()=>a.call(this)&&o.call(this)}}else s=r;if(n.call(this)===!0){let a=this.doSingleRepetition(s);for(;n.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,Rt.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,r],n,1024,e,gs)}atLeastOneSepFirstInternal(e,r){let i=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,r,i)}atLeastOneSepFirstInternalLogic(e,r,i){let n=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){n.call(this);let o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,n,en],o,1536,e,en)}else throw this.raiseEarlyExitException(e,Rt.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(e,r){let i=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,r,i)}manyInternalLogic(e,r,i){let n=this.getLaFuncFromCache(i),s;if(typeof r!="function"){s=r.DEF;let o=r.GATE;if(o!==void 0){let u=n;n=()=>o.call(this)&&u.call(this)}}else s=r;let a=!0;for(;n.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,r],n,768,e,ms,a)}manySepFirstInternal(e,r){let i=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,r,i)}manySepFirstInternalLogic(e,r,i){let n=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){n.call(this);let o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,o,n,tn],o,1280,e,tn)}}repetitionSepSecondInternal(e,r,i,n,s){for(;i();)this.CONSUME(r),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,r,i,n,s],i,1536,e,s)}doSingleRepetition(e){let r=this.getLexerPosition();return e.call(this),this.getLexerPosition()>r}orInternal(e,r){let i=this.getKeyForAutomaticLookahead(256,r),n=w(e)?e:e.DEF,a=this.getLaFuncFromCache(i).call(this,n);if(a!==void 0)return n[a].ALT.call(this);this.raiseNoAltException(r,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new on(r,e))}}subruleInternal(e,r,i){let n;try{let s=i!==void 0?i.ARGS:void 0;return this.subruleIdx=r,n=e.apply(this,s),this.cstPostNonTerminal(n,i!==void 0&&i.LABEL!==void 0?i.LABEL:e.ruleName),n}catch(s){throw this.subruleInternalError(s,i,e.ruleName)}}subruleInternalError(e,r,i){throw Cr(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:i),delete e.partialCstResult),e}consumeInternal(e,r,i){let n;try{let s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),n=s):this.consumeInternalError(e,s,i)}catch(s){n=this.consumeInternalRecovery(e,r,s)}return this.cstPostTerminal(i!==void 0&&i.LABEL!==void 0?i.LABEL:e.name,n),n}consumeInternalError(e,r,i){let n,s=this.LA(0);throw i!==void 0&&i.ERR_MSG?n=i.ERR_MSG:n=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:r,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new qr(n,r,s))}consumeInternalRecovery(e,r,i){if(this.recoveryEnabled&&i.name==="MismatchedTokenException"&&!this.isBackTracking()){let n=this.getFollowsForInRuleRecovery(e,r);try{return this.tryInRuleRecovery(e,n)}catch(s){throw s.name===La?i:s}}else throw i}saveRecogState(){let e=this.errors,r=ct(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,r,i){this.RULE_OCCURRENCE_STACK.push(i),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Fe)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var Ms=class{initErrorHandler(e){this._errors=[],this.errorMessageProvider=N(e,"errorMessageProvider")?e.errorMessageProvider:de.errorMessageProvider}SAVE_ERROR(e){if(Cr(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:ct(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return ct(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,r,i){let n=this.getCurrRuleFullName(),s=this.getGAstProductions()[n],o=nn(e,s,r,this.maxLookahead)[0],u=[];for(let h=1;h<=this.maxLookahead;h++)u.push(this.LA(h));let l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:u,previous:this.LA(0),customUserDescription:i,ruleName:n});throw this.SAVE_ERROR(new un(l,this.LA(1),this.LA(0)))}raiseNoAltException(e,r){let i=this.getCurrRuleFullName(),n=this.getGAstProductions()[i],s=rn(e,n,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));let o=this.LA(0),u=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new an(u,this.LA(1),o))}};var Us=class{initContentAssist(){}computeContentAssist(e,r){let i=this.gastProductionsCache[e];if(ue(i))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return Es([i],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let r=Xt(e.ruleStack),n=this.getGAstProductions()[r];return new _s(n,e).startWalking()}};var $s={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze($s);var Ah=!0,Oh=Math.pow(2,8)-1,Rh=U({name:"RECORDING_PHASE_TOKEN",pattern:St.NA});or([Rh]);var Nh=zr(Rh,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Nh);var gb={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},Fs=class{initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let r=e>0?e:"";this[`CONSUME${r}`]=function(i,n){return this.consumeInternalRecord(i,e,n)},this[`SUBRULE${r}`]=function(i,n){return this.subruleInternalRecord(i,e,n)},this[`OPTION${r}`]=function(i){return this.optionInternalRecord(i,e)},this[`OR${r}`]=function(i){return this.orInternalRecord(i,e)},this[`MANY${r}`]=function(i){this.manyInternalRecord(e,i)},this[`MANY_SEP${r}`]=function(i){this.manySepFirstInternalRecord(e,i)},this[`AT_LEAST_ONE${r}`]=function(i){this.atLeastOneInternalRecord(e,i)},this[`AT_LEAST_ONE_SEP${r}`]=function(i){this.atLeastOneSepFirstInternalRecord(e,i)}}this.consume=function(e,r,i){return this.consumeInternalRecord(r,e,i)},this.subrule=function(e,r,i){return this.subruleInternalRecord(r,e,i)},this.option=function(e,r){return this.optionInternalRecord(r,e)},this.or=function(e,r){return this.orInternalRecord(r,e)},this.many=function(e,r){this.manyInternalRecord(e,r)},this.atLeastOne=function(e,r){this.atLeastOneInternalRecord(e,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let r=0;r<10;r++){let i=r>0?r:"";delete e[`CONSUME${i}`],delete e[`SUBRULE${i}`],delete e[`OPTION${i}`],delete e[`OR${i}`],delete e[`MANY${i}`],delete e[`MANY_SEP${i}`],delete e[`AT_LEAST_ONE${i}`],delete e[`AT_LEAST_ONE_SEP${i}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,r){return()=>!0}LA_RECORD(e){return Li}topLevelRuleRecord(e,r){try{let i=new ce({definition:[],name:e});return i.name=e,this.recordingProdStack.push(i),r.call(this),this.recordingProdStack.pop(),i}catch(i){if(i.KNOWN_RECORDER_ERROR!==!0)try{i.message=i.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw i}throw i}}optionInternalRecord(e,r){return hn.call(this,yt,e,r)}atLeastOneInternalRecord(e,r){hn.call(this,kt,r,e)}atLeastOneSepFirstInternalRecord(e,r){hn.call(this,Pt,r,e,Ah)}manyInternalRecord(e,r){hn.call(this,st,r,e)}manySepFirstInternalRecord(e,r){hn.call(this,It,r,e,Ah)}orInternalRecord(e,r){return yb.call(this,e,r)}subruleInternalRecord(e,r,i){if(Bs(r),!e||N(e,"ruleName")===!1){let o=new Error(`<SUBRULE${Sh(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}let n=Ue(this.recordingProdStack),s=e.ruleName,a=new pt({idx:r,nonTerminalName:s,label:i?.LABEL,referencedRule:void 0});return n.definition.push(a),this.outputCst?gb:$s}consumeInternalRecord(e,r,i){if(Bs(r),!Ea(e)){let a=new Error(`<CONSUME${Sh(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}let n=Ue(this.recordingProdStack),s=new J({idx:r,terminalType:e,label:i?.LABEL});return n.definition.push(s),Nh}};function hn(t,e,r,i=!1){Bs(r);let n=Ue(this.recordingProdStack),s=fe(e)?e:e.DEF,a=new t({definition:[],idx:r});return i&&(a.separator=e.SEP),N(e,"MAX_LOOKAHEAD")&&(a.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),n.definition.push(a),this.recordingProdStack.pop(),$s}function yb(t,e){Bs(e);let r=Ue(this.recordingProdStack),i=w(t)===!1,n=i===!1?t:t.DEF,s=new wt({definition:[],idx:e,ignoreAmbiguities:i&&t.IGNORE_AMBIGUITIES===!0});N(t,"MAX_LOOKAHEAD")&&(s.maxLookahead=t.MAX_LOOKAHEAD);let a=Ki(n,o=>fe(o.GATE));return s.hasPredicates=a,r.definition.push(s),S(n,o=>{let u=new dt({definition:[]});s.definition.push(u),N(o,"IGNORE_AMBIGUITIES")?u.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:N(o,"GATE")&&(u.ignoreAmbiguities=!0),this.recordingProdStack.push(u),o.ALT.call(this),this.recordingProdStack.pop()}),$s}function Sh(t){return t===0?"":`${t}`}function Bs(t){if(t<0||t>Oh){let e=new Error(`Invalid DSL Method idx value: <${t}>
	Idx value must be a none negative value smaller than ${Oh+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}var js=class{initPerformanceTracer(e){if(N(e,"traceInitPerf")){let r=e.traceInitPerf,i=typeof r=="number";this.traceInitMaxIdent=i?r:1/0,this.traceInitPerf=i?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=de.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,r){if(this.traceInitPerf===!0){this.traceInitIndent++;let i=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${i}--> <${e}>`);let{time:n,value:s}=qi(r),a=n>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${i}<-- <${e}> time: ${n}ms`),this.traceInitIndent--,s}else return r()}};function Ih(t,e){e.forEach(r=>{let i=r.prototype;Object.getOwnPropertyNames(i).forEach(n=>{if(n==="constructor")return;let s=Object.getOwnPropertyDescriptor(i,n);s&&(s.get||s.set)?Object.defineProperty(t.prototype,n,s):t.prototype[n]=r.prototype[n]})})}var Li=zr(Fe,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Li);var de=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:ds,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),ki=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),qt;(function(t){t[t.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",t[t.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",t[t.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",t[t.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",t[t.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",t[t.LEFT_RECURSION=5]="LEFT_RECURSION",t[t.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",t[t.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",t[t.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",t[t.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",t[t.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",t[t.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",t[t.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",t[t.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(qt||(qt={}));var cn=class t{static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",()=>{Vi(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),S(this.definedRulesNames,n=>{let a=this[n].originalGrammarAction,o;this.TRACE_INIT(`${n} Rule`,()=>{o=this.topLevelRuleRecord(n,a)}),this.gastProductionsCache[n]=o})}finally{this.disableRecording()}});let i=[];if(this.TRACE_INIT("Grammar Resolving",()=>{i=ph({rules:at(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(i)}),this.TRACE_INIT("Grammar Validations",()=>{if(H(i)&&this.skipValidations===!1){let n=dh({rules:at(this.gastProductionsCache),tokenTypes:at(this.tokensMap),errMsgProvider:Be,grammarName:r}),s=ah({lookaheadStrategy:this.lookaheadStrategy,rules:at(this.gastProductionsCache),tokenTypes:at(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(n,s)}}),H(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let n=Tf(at(this.gastProductionsCache));this.resyncFollows=n}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var n,s;(s=(n=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(n,{rules:at(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(at(this.gastProductionsCache))})),!t.DEFER_DEFINITION_ERRORS_HANDLING&&!H(this.definitionErrors))throw e=A(this.definitionErrors,n=>n.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,r){this.definitionErrors=[],this.selfAnalysisDone=!1;let i=this;if(i.initErrorHandler(r),i.initLexerAdapter(),i.initLooksAhead(r),i.initRecognizerEngine(e,r),i.initRecoverable(r),i.initTreeBuilder(r),i.initContentAssist(),i.initGastRecorder(r),i.initPerformanceTracer(r),N(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=N(r,"skipValidations")?r.skipValidations:de.skipValidations}};cn.DEFER_DEFINITION_ERRORS_HANDLING=!1;Ih(cn,[As,Rs,Cs,Ls,Ps,ks,Ms,Us,Fs,js]);var pn=class extends cn{constructor(e,r=de){let i=ct(r);i.outputCst=!0,super(e,i)}};var wh=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",xb=wh+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Tb="["+wh+"]["+xb+"]*",bb=new RegExp("^"+Tb+"$");function Ws(t,e){let r=[],i=e.exec(t);for(;i;){let n=[];n.startIndex=e.lastIndex-i[0].length;let s=i.length;for(let a=0;a<s;a++)n.push(i[a]);r.push(n),i=e.exec(t)}return r}var Pi=function(t){let e=bb.exec(t);return!(e===null||typeof e>"u")};function Ch(t){return typeof t<"u"}var vb={allowBooleanAttributes:!1,unpairedTags:[]};function Uh(t,e){e=Object.assign({},vb,e);let r=[],i=!1,n=!1;t[0]==="\uFEFF"&&(t=t.substr(1));for(let s=0;s<t.length;s++)if(t[s]==="<"&&t[s+1]==="?"){if(s+=2,s=kh(t,s),s.err)return s}else if(t[s]==="<"){let a=s;if(s++,t[s]==="!"){s=Ph(t,s);continue}else{let o=!1;t[s]==="/"&&(o=!0,s++);let u="";for(;s<t.length&&t[s]!==">"&&t[s]!==" "&&t[s]!=="	"&&t[s]!==`
`&&t[s]!=="\r";s++)u+=t[s];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),s--),!Cb(u)){let f;return u.trim().length===0?f="Invalid space after '<'.":f="Tag '"+u+"' is an invalid name.",Mt("InvalidTag",f,_e(t,s))}let l=Sb(t,s);if(l===!1)return Mt("InvalidAttr","Attributes for '"+u+"' have open quote.",_e(t,s));let h=l.value;if(s=l.index,h[h.length-1]==="/"){let f=s-h.length;h=h.substring(0,h.length-1);let d=Mh(h,e);if(d===!0)i=!0;else return Mt(d.err.code,d.err.msg,_e(t,f+d.err.line))}else if(o)if(l.tagClosed){if(h.trim().length>0)return Mt("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",_e(t,a));if(r.length===0)return Mt("InvalidTag","Closing tag '"+u+"' has not been opened.",_e(t,a));{let f=r.pop();if(u!==f.tagName){let d=_e(t,f.tagStartPos);return Mt("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+d.line+", col "+d.col+") instead of closing tag '"+u+"'.",_e(t,a))}r.length==0&&(n=!0)}}else return Mt("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",_e(t,s));else{let f=Mh(h,e);if(f!==!0)return Mt(f.err.code,f.err.msg,_e(t,s-h.length+f.err.line));if(n===!0)return Mt("InvalidXml","Multiple possible root nodes found.",_e(t,s));e.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:a}),i=!0}for(s++;s<t.length;s++)if(t[s]==="<")if(t[s+1]==="!"){s++,s=Ph(t,s);continue}else if(t[s+1]==="?"){if(s=kh(t,++s),s.err)return s}else break;else if(t[s]==="&"){let f=Ib(t,s);if(f==-1)return Mt("InvalidChar","char '&' is not expected.",_e(t,s));s=f}else if(n===!0&&!Lh(t[s]))return Mt("InvalidXml","Extra text at the end",_e(t,s));t[s]==="<"&&s--}}else{if(Lh(t[s]))continue;return Mt("InvalidChar","char '"+t[s]+"' is not expected.",_e(t,s))}if(i){if(r.length==1)return Mt("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",_e(t,r[0].tagStartPos));if(r.length>0)return Mt("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Mt("InvalidXml","Start tag expected.",1);return!0}function Lh(t){return t===" "||t==="	"||t===`
`||t==="\r"}function kh(t,e){let r=e;for(;e<t.length;e++)if(t[e]=="?"||t[e]==" "){let i=t.substr(r,e-r);if(e>5&&i==="xml")return Mt("InvalidXml","XML declaration allowed only at the start of the document.",_e(t,e));if(t[e]=="?"&&t[e+1]==">"){e++;break}else continue}return e}function Ph(t,e){if(t.length>e+5&&t[e+1]==="-"&&t[e+2]==="-"){for(e+=3;e<t.length;e++)if(t[e]==="-"&&t[e+1]==="-"&&t[e+2]===">"){e+=2;break}}else if(t.length>e+8&&t[e+1]==="D"&&t[e+2]==="O"&&t[e+3]==="C"&&t[e+4]==="T"&&t[e+5]==="Y"&&t[e+6]==="P"&&t[e+7]==="E"){let r=1;for(e+=8;e<t.length;e++)if(t[e]==="<")r++;else if(t[e]===">"&&(r--,r===0))break}else if(t.length>e+9&&t[e+1]==="["&&t[e+2]==="C"&&t[e+3]==="D"&&t[e+4]==="A"&&t[e+5]==="T"&&t[e+6]==="A"&&t[e+7]==="["){for(e+=8;e<t.length;e++)if(t[e]==="]"&&t[e+1]==="]"&&t[e+2]===">"){e+=2;break}}return e}var Ab='"',Ob="'";function Sb(t,e){let r="",i="",n=!1;for(;e<t.length;e++){if(t[e]===Ab||t[e]===Ob)i===""?i=t[e]:i!==t[e]||(i="");else if(t[e]===">"&&i===""){n=!0;break}r+=t[e]}return i!==""?!1:{value:r,index:e,tagClosed:n}}var Rb=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Mh(t,e){let r=Ws(t,Rb),i={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return Mt("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",dn(r[n]));if(r[n][3]!==void 0&&r[n][4]===void 0)return Mt("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",dn(r[n]));if(r[n][3]===void 0&&!e.allowBooleanAttributes)return Mt("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",dn(r[n]));let s=r[n][2];if(!wb(s))return Mt("InvalidAttr","Attribute '"+s+"' is an invalid name.",dn(r[n]));if(!i.hasOwnProperty(s))i[s]=1;else return Mt("InvalidAttr","Attribute '"+s+"' is repeated.",dn(r[n]))}return!0}function Nb(t,e){let r=/\d/;for(t[e]==="x"&&(e++,r=/[\da-fA-F]/);e<t.length;e++){if(t[e]===";")return e;if(!t[e].match(r))break}return-1}function Ib(t,e){if(e++,t[e]===";")return-1;if(t[e]==="#")return e++,Nb(t,e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(t[e]===";")break;return-1}return e}function Mt(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function wb(t){return Pi(t)}function Cb(t){return Pi(t)}function _e(t,e){let r=t.substring(0,e).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function dn(t){return t.startIndex+t[1].length}var Lb={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(t,e,r){return t},captureMetaData:!1};function Fh(t){return typeof t=="boolean"?{enabled:t,maxEntitySize:1e4,maxExpansionDepth:10,maxTotalExpansions:1e3,maxExpandedLength:1e5,allowedTags:null,tagFilter:null}:typeof t=="object"&&t!==null?{enabled:t.enabled!==!1,maxEntitySize:t.maxEntitySize??1e4,maxExpansionDepth:t.maxExpansionDepth??10,maxTotalExpansions:t.maxTotalExpansions??1e3,maxExpandedLength:t.maxExpandedLength??1e5,allowedTags:t.allowedTags??null,tagFilter:t.tagFilter??null}:Fh(!0)}var Bh=function(t){let e=Object.assign({},Lb,t);return e.processEntities=Fh(e.processEntities),e};var Ds;typeof Symbol!="function"?Ds="@@xmlMetadata":Ds=Symbol("XML Node Metadata");var Ae=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,r){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:r})}addChild(e,r){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),r!==void 0&&(this.child[this.child.length-1][Ds]={startIndex:r})}static getMetaDataSymbol(){return Ds}};var mn=class{constructor(e){this.suppressValidationErr=!e,this.options=e}readDocType(e,r){let i={};if(e[r+3]==="O"&&e[r+4]==="C"&&e[r+5]==="T"&&e[r+6]==="Y"&&e[r+7]==="P"&&e[r+8]==="E"){r=r+9;let n=1,s=!1,a=!1,o="";for(;r<e.length;r++)if(e[r]==="<"&&!a){if(s&&Vr(e,"!ENTITY",r)){r+=7;let u,l;if([u,l,r]=this.readEntityExp(e,r+1,this.suppressValidationErr),l.indexOf("&")===-1){let h=u.replace(/[.\-+*:]/g,"\\.");i[u]={regx:RegExp(`&${h};`,"g"),val:l}}}else if(s&&Vr(e,"!ELEMENT",r)){r+=8;let{index:u}=this.readElementExp(e,r+1);r=u}else if(s&&Vr(e,"!ATTLIST",r))r+=8;else if(s&&Vr(e,"!NOTATION",r)){r+=9;let{index:u}=this.readNotationExp(e,r+1,this.suppressValidationErr);r=u}else if(Vr(e,"!--",r))a=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(e[r]===">"){if(a?e[r-1]==="-"&&e[r-2]==="-"&&(a=!1,n--):n--,n===0)break}else e[r]==="["?s=!0:o+=e[r];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:i,i:r}}readEntityExp(e,r){r=Te(e,r);let i="";for(;r<e.length&&!/\s/.test(e[r])&&e[r]!=='"'&&e[r]!=="'";)i+=e[r],r++;if(_n(i),r=Te(e,r),!this.suppressValidationErr){if(e.substring(r,r+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(e[r]==="%")throw new Error("Parameter entities are not supported")}let n="";if([r,n]=this.readIdentifierVal(e,r,"entity"),this.options.enabled!==!1&&this.options.maxEntitySize&&n.length>this.options.maxEntitySize)throw new Error(`Entity "${i}" size (${n.length}) exceeds maximum allowed size (${this.options.maxEntitySize})`);return r--,[i,n,r]}readNotationExp(e,r){r=Te(e,r);let i="";for(;r<e.length&&!/\s/.test(e[r]);)i+=e[r],r++;!this.suppressValidationErr&&_n(i),r=Te(e,r);let n=e.substring(r,r+6).toUpperCase();if(!this.suppressValidationErr&&n!=="SYSTEM"&&n!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${n}"`);r+=n.length,r=Te(e,r);let s=null,a=null;if(n==="PUBLIC")[r,s]=this.readIdentifierVal(e,r,"publicIdentifier"),r=Te(e,r),(e[r]==='"'||e[r]==="'")&&([r,a]=this.readIdentifierVal(e,r,"systemIdentifier"));else if(n==="SYSTEM"&&([r,a]=this.readIdentifierVal(e,r,"systemIdentifier"),!this.suppressValidationErr&&!a))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:i,publicIdentifier:s,systemIdentifier:a,index:--r}}readIdentifierVal(e,r,i){let n="",s=e[r];if(s!=='"'&&s!=="'")throw new Error(`Expected quoted string, found "${s}"`);for(r++;r<e.length&&e[r]!==s;)n+=e[r],r++;if(e[r]!==s)throw new Error(`Unterminated ${i} value`);return r++,[r,n]}readElementExp(e,r){r=Te(e,r);let i="";for(;r<e.length&&!/\s/.test(e[r]);)i+=e[r],r++;if(!this.suppressValidationErr&&!Pi(i))throw new Error(`Invalid element name: "${i}"`);r=Te(e,r);let n="";if(e[r]==="E"&&Vr(e,"MPTY",r))r+=4;else if(e[r]==="A"&&Vr(e,"NY",r))r+=2;else if(e[r]==="("){for(r++;r<e.length&&e[r]!==")";)n+=e[r],r++;if(e[r]!==")")throw new Error("Unterminated content model")}else if(!this.suppressValidationErr)throw new Error(`Invalid Element Expression, found "${e[r]}"`);return{elementName:i,contentModel:n.trim(),index:r}}readAttlistExp(e,r){r=Te(e,r);let i="";for(;r<e.length&&!/\s/.test(e[r]);)i+=e[r],r++;_n(i),r=Te(e,r);let n="";for(;r<e.length&&!/\s/.test(e[r]);)n+=e[r],r++;if(!_n(n))throw new Error(`Invalid attribute name: "${n}"`);r=Te(e,r);let s="";if(e.substring(r,r+8).toUpperCase()==="NOTATION"){if(s="NOTATION",r+=8,r=Te(e,r),e[r]!=="(")throw new Error(`Expected '(', found "${e[r]}"`);r++;let o=[];for(;r<e.length&&e[r]!==")";){let u="";for(;r<e.length&&e[r]!=="|"&&e[r]!==")";)u+=e[r],r++;if(u=u.trim(),!_n(u))throw new Error(`Invalid notation name: "${u}"`);o.push(u),e[r]==="|"&&(r++,r=Te(e,r))}if(e[r]!==")")throw new Error("Unterminated list of notations");r++,s+=" ("+o.join("|")+")"}else{for(;r<e.length&&!/\s/.test(e[r]);)s+=e[r],r++;let o=["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"];if(!this.suppressValidationErr&&!o.includes(s.toUpperCase()))throw new Error(`Invalid attribute type: "${s}"`)}r=Te(e,r);let a="";return e.substring(r,r+8).toUpperCase()==="#REQUIRED"?(a="#REQUIRED",r+=8):e.substring(r,r+7).toUpperCase()==="#IMPLIED"?(a="#IMPLIED",r+=7):[r,a]=this.readIdentifierVal(e,r,"ATTLIST"),{elementName:i,attributeName:n,attributeType:s,defaultValue:a,index:r}}},Te=(t,e)=>{for(;e<t.length&&/\s/.test(t[e]);)e++;return e};function Vr(t,e,r){for(let i=0;i<e.length;i++)if(e[i]!==t[r+i+1])return!1;return!0}function _n(t){if(Pi(t))return t;throw new Error(`Invalid entity name ${t}`)}var kb=/^[-+]?0x[a-fA-F0-9]+$/,Pb=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Mb={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Wa(t,e={}){if(e=Object.assign({},Mb,e),!t||typeof t!="string")return t;let r=t.trim();if(e.skipLike!==void 0&&e.skipLike.test(r))return t;if(t==="0")return 0;if(e.hex&&kb.test(r))return $b(r,16);if(r.includes("e")||r.includes("E"))return Fb(t,r,e);{let i=Pb.exec(r);if(i){let n=i[1]||"",s=i[2],a=Bb(i[3]),o=n?t[s.length+1]===".":t[s.length]===".";if(!e.leadingZeros&&(s.length>1||s.length===1&&!o))return t;{let u=Number(r),l=String(u);if(u===0)return u;if(l.search(/[eE]/)!==-1)return e.eNotation?u:t;if(r.indexOf(".")!==-1)return l==="0"||l===a||l===`${n}${a}`?u:t;let h=s?a:r;return s?h===l||n+h===l?u:t:h===l||h===n+l?u:t}}else return t}}var Ub=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Fb(t,e,r){if(!r.eNotation)return t;let i=e.match(Ub);if(i){let n=i[1]||"",s=i[3].indexOf("e")===-1?"E":"e",a=i[2],o=n?t[a.length+1]===s:t[a.length]===s;return a.length>1&&o?t:a.length===1&&(i[3].startsWith(`.${s}`)||i[3][0]===s)?Number(e):r.leadingZeros&&!o?(e=(i[1]||"")+i[3],Number(e)):t}else return t}function Bb(t){return t&&t.indexOf(".")!==-1&&(t=t.replace(/0+$/,""),t==="."?t="0":t[0]==="."?t="0"+t:t[t.length-1]==="."&&(t=t.substring(0,t.length-1))),t}function $b(t,e){if(parseInt)return parseInt(t,e);if(Number.parseInt)return Number.parseInt(t,e);if(window&&window.parseInt)return window.parseInt(t,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function gn(t){return typeof t=="function"?t:Array.isArray(t)?e=>{for(let r of t)if(typeof r=="string"&&e===r||r instanceof RegExp&&r.test(e))return!0}:()=>!1}var yn=class{constructor(e){if(this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,i)=>$h(i,10,"&#")},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,i)=>$h(i,16,"&#x")}},this.addExternalEntities=jb,this.parseXml=zb,this.parseTextData=Wb,this.resolveNameSpace=Db,this.buildAttributesMap=Kb,this.isItStopNode=Xb,this.replaceEntitiesValue=Vb,this.readStopNodeData=Qb,this.saveTextToParentTag=Hb,this.addChild=qb,this.ignoreAttributesFn=gn(this.options.ignoreAttributes),this.entityExpansionCount=0,this.currentExpandedLength=0,this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let r=0;r<this.options.stopNodes.length;r++){let i=this.options.stopNodes[r];typeof i=="string"&&(i.startsWith("*.")?this.stopNodesWildcard.add(i.substring(2)):this.stopNodesExact.add(i))}}}};function jb(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r],n=i.replace(/[.\-+*:]/g,"\\.");this.lastEntities[i]={regex:new RegExp("&"+n+";","g"),val:t[i]}}}function Wb(t,e,r,i,n,s,a){if(t!==void 0&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t,e,r));let o=this.options.tagValueProcessor(e,t,r,n,s);return o==null?t:typeof o!=typeof t||o!==t?o:this.options.trimValues?Ga(t,this.options.parseTagValue,this.options.numberParseOptions):t.trim()===t?Ga(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function Db(t){if(this.options.removeNSPrefix){let e=t.split(":"),r=t.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(t=r+e[1])}return t}var Gb=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Kb(t,e,r){if(this.options.ignoreAttributes!==!0&&typeof t=="string"){let i=Ws(t,Gb),n=i.length,s={};for(let a=0;a<n;a++){let o=this.resolveNameSpace(i[a][1]);if(this.ignoreAttributesFn(o,e))continue;let u=i[a][4],l=this.options.attributeNamePrefix+o;if(o.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),u!==void 0){this.options.trimValues&&(u=u.trim()),u=this.replaceEntitiesValue(u,r,e);let h=this.options.attributeValueProcessor(o,u,e);h==null?s[l]=u:typeof h!=typeof u||h!==u?s[l]=h:s[l]=Ga(u,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[l]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let a={};return a[this.options.attributesGroupName]=s,a}return s}}var zb=function(t){t=t.replace(/\r\n?/g,`
`);let e=new Ae("!xml"),r=e,i="",n="";this.entityExpansionCount=0,this.currentExpandedLength=0;let s=new mn(this.options.processEntities);for(let a=0;a<t.length;a++)if(t[a]==="<")if(t[a+1]==="/"){let u=Hr(t,">",a,"Closing Tag is not closed."),l=t.substring(a+2,u).trim();if(this.options.removeNSPrefix){let d=l.indexOf(":");d!==-1&&(l=l.substr(d+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&(i=this.saveTextToParentTag(i,r,n));let h=n.substring(n.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let f=0;h&&this.options.unpairedTags.indexOf(h)!==-1?(f=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):f=n.lastIndexOf("."),n=n.substring(0,f),r=this.tagsNodeStack.pop(),i="",a=u}else if(t[a+1]==="?"){let u=Da(t,a,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,n),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){let l=new Ae(u.tagName);l.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(l[":@"]=this.buildAttributesMap(u.tagExp,n,u.tagName)),this.addChild(r,l,n,a)}a=u.closeIndex+1}else if(t.substr(a+1,3)==="!--"){let u=Hr(t,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){let l=t.substring(a+4,u-2);i=this.saveTextToParentTag(i,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}a=u}else if(t.substr(a+1,2)==="!D"){let u=s.readDocType(t,a);this.docTypeEntities=u.entities,a=u.i}else if(t.substr(a+1,2)==="!["){let u=Hr(t,"]]>",a,"CDATA is not closed.")-2,l=t.substring(a+9,u);i=this.saveTextToParentTag(i,r,n);let h=this.parseTextData(l,r.tagname,n,!0,!1,!0,!0);h==null&&(h=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):r.add(this.options.textNodeName,h),a=u+2}else{let u=Da(t,a,this.options.removeNSPrefix),l=u.tagName,h=u.rawTagName,f=u.tagExp,d=u.attrExpPresent,m=u.closeIndex;if(this.options.transformTagName){let y=this.options.transformTagName(l);f===l&&(f=y),l=y}r&&i&&r.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,r,n,!1));let g=r;g&&this.options.unpairedTags.indexOf(g.tagname)!==-1&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),l!==e.tagname&&(n+=n?"."+l:l);let E=a;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,n,l)){let y="";if(f.length>0&&f.lastIndexOf("/")===f.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),n=n.substr(0,n.length-1),f=l):f=f.substr(0,f.length-1),a=u.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)a=u.closeIndex;else{let v=this.readStopNodeData(t,h,m+1);if(!v)throw new Error(`Unexpected end of ${h}`);a=v.i,y=v.tagContent}let x=new Ae(l);l!==f&&d&&(x[":@"]=this.buildAttributesMap(f,n,l)),y&&(y=this.parseTextData(y,l,n,!0,d,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),x.add(this.options.textNodeName,y),this.addChild(r,x,n,E)}else{if(f.length>0&&f.lastIndexOf("/")===f.length-1){if(l[l.length-1]==="/"?(l=l.substr(0,l.length-1),n=n.substr(0,n.length-1),f=l):f=f.substr(0,f.length-1),this.options.transformTagName){let x=this.options.transformTagName(l);f===l&&(f=x),l=x}let y=new Ae(l);l!==f&&d&&(y[":@"]=this.buildAttributesMap(f,n,l)),this.addChild(r,y,n,E),n=n.substr(0,n.lastIndexOf("."))}else{let y=new Ae(l);this.tagsNodeStack.push(r),l!==f&&d&&(y[":@"]=this.buildAttributesMap(f,n,l)),this.addChild(r,y,n,E),r=y}i="",a=m}}else i+=t[a];return e.child};function qb(t,e,r,i){this.options.captureMetaData||(i=void 0);let n=this.options.updateTag(e.tagname,r,e[":@"]);n===!1||(typeof n=="string"&&(e.tagname=n),t.addChild(e,i))}var Vb=function(t,e,r){if(t.indexOf("&")===-1)return t;let i=this.options.processEntities;if(!i.enabled||i.allowedTags&&!i.allowedTags.includes(e)||i.tagFilter&&!i.tagFilter(e,r))return t;for(let n in this.docTypeEntities){let s=this.docTypeEntities[n],a=t.match(s.regx);if(a){if(this.entityExpansionCount+=a.length,i.maxTotalExpansions&&this.entityExpansionCount>i.maxTotalExpansions)throw new Error(`Entity expansion limit exceeded: ${this.entityExpansionCount} > ${i.maxTotalExpansions}`);let o=t.length;if(t=t.replace(s.regx,s.val),i.maxExpandedLength&&(this.currentExpandedLength+=t.length-o,this.currentExpandedLength>i.maxExpandedLength))throw new Error(`Total expanded content size exceeded: ${this.currentExpandedLength} > ${i.maxExpandedLength}`)}}if(t.indexOf("&")===-1)return t;for(let n in this.lastEntities){let s=this.lastEntities[n];t=t.replace(s.regex,s.val)}if(t.indexOf("&")===-1)return t;if(this.options.htmlEntities)for(let n in this.htmlEntities){let s=this.htmlEntities[n];t=t.replace(s.regex,s.val)}return t=t.replace(this.ampEntity.regex,this.ampEntity.val),t};function Hb(t,e,r,i){return t&&(i===void 0&&(i=e.child.length===0),t=this.parseTextData(t,e.tagname,r,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,i),t!==void 0&&t!==""&&e.add(this.options.textNodeName,t),t=""),t}function Xb(t,e,r,i){return!!(e&&e.has(i)||t&&t.has(r))}function Yb(t,e,r=">"){let i,n="";for(let s=e;s<t.length;s++){let a=t[s];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===r[0])if(r[1]){if(t[s+1]===r[1])return{data:n,index:s}}else return{data:n,index:s};else a==="	"&&(a=" ");n+=a}}function Hr(t,e,r,i){let n=t.indexOf(e,r);if(n===-1)throw new Error(i);return n+e.length-1}function Da(t,e,r,i=">"){let n=Yb(t,e+1,i);if(!n)return;let s=n.data,a=n.index,o=s.search(/\s/),u=s,l=!0;o!==-1&&(u=s.substring(0,o),s=s.substring(o+1).trimStart());let h=u;if(r){let f=u.indexOf(":");f!==-1&&(u=u.substr(f+1),l=u!==n.data.substr(f+1))}return{tagName:u,tagExp:s,closeIndex:a,attrExpPresent:l,rawTagName:h}}function Qb(t,e,r){let i=r,n=1;for(;r<t.length;r++)if(t[r]==="<")if(t[r+1]==="/"){let s=Hr(t,">",r,`${e} is not closed`);if(t.substring(r+2,s).trim()===e&&(n--,n===0))return{tagContent:t.substring(i,r),i:s};r=s}else if(t[r+1]==="?")r=Hr(t,"?>",r+1,"StopNode is not closed.");else if(t.substr(r+1,3)==="!--")r=Hr(t,"-->",r+3,"StopNode is not closed.");else if(t.substr(r+1,2)==="![")r=Hr(t,"]]>",r,"StopNode is not closed.")-2;else{let s=Da(t,r,">");s&&((s&&s.tagName)===e&&s.tagExp[s.tagExp.length-1]!=="/"&&n++,r=s.closeIndex)}}function Ga(t,e,r){if(e&&typeof t=="string"){let i=t.trim();return i==="true"?!0:i==="false"?!1:Wa(t,r)}else return Ch(t)?t:""}function $h(t,e,r){let i=Number.parseInt(t,e);return i>=0&&i<=1114111?String.fromCodePoint(i):r+t+";"}var Ka=Ae.getMetaDataSymbol();function za(t,e){return jh(t,e)}function jh(t,e,r){let i,n={};for(let s=0;s<t.length;s++){let a=t[s],o=Zb(a),u="";if(r===void 0?u=o:u=r+"."+o,o===e.textNodeName)i===void 0?i=a[o]:i+=""+a[o];else{if(o===void 0)continue;if(a[o]){let l=jh(a[o],e,u),h=tv(l,e);a[Ka]!==void 0&&(l[Ka]=a[Ka]),a[":@"]?Jb(l,a[":@"],u,e):Object.keys(l).length===1&&l[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?l=l[e.textNodeName]:Object.keys(l).length===0&&(e.alwaysCreateTextNode?l[e.textNodeName]="":l=""),n[o]!==void 0&&n.hasOwnProperty(o)?(Array.isArray(n[o])||(n[o]=[n[o]]),n[o].push(l)):e.isArray(o,u,h)?n[o]=[l]:n[o]=l}}}return typeof i=="string"?i.length>0&&(n[e.textNodeName]=i):i!==void 0&&(n[e.textNodeName]=i),n}function Zb(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];if(i!==":@")return i}}function Jb(t,e,r,i){if(e){let n=Object.keys(e),s=n.length;for(let a=0;a<s;a++){let o=n[a];i.isArray(o,r+"."+o,!0,!0)?t[o]=[e[o]]:t[o]=e[o]}}}function tv(t,e){let{textNodeName:r}=e,i=Object.keys(t).length;return!!(i===0||i===1&&(t[r]||typeof t[r]=="boolean"||t[r]===0))}var Mi=class{constructor(e){this.externalEntities={},this.options=Bh(e)}parse(e,r){if(typeof e!="string"&&e.toString)e=e.toString();else if(typeof e!="string")throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=Uh(e,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let i=new yn(this.options);i.addExternalEntities(this.externalEntities);let n=i.parseXml(e);return this.options.preserveOrder||n===void 0?n:za(n,this.options)}addEntity(e,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=r}static getMetaDataSymbol(){return Ae.getMetaDataSymbol()}};function qa(t,e){let r="";return e.format&&e.indentBy.length>0&&(r=`
`),Dh(t,e,"",r)}function Dh(t,e,r,i){let n="",s=!1;for(let a=0;a<t.length;a++){let o=t[a],u=ev(o);if(u===void 0)continue;let l="";if(r.length===0?l=u:l=`${r}.${u}`,u===e.textNodeName){let g=o[u];rv(l,e)||(g=e.tagValueProcessor(u,g),g=Gh(g,e)),s&&(n+=i),n+=g,s=!1;continue}else if(u===e.cdataPropName){s&&(n+=i),n+=`<![CDATA[${o[u][0][e.textNodeName]}]]>`,s=!1;continue}else if(u===e.commentPropName){n+=i+`<!--${o[u][0][e.textNodeName]}-->`,s=!0;continue}else if(u[0]==="?"){let g=Wh(o[":@"],e),E=u==="?xml"?"":i,y=o[u][0][e.textNodeName];y=y.length!==0?" "+y:"",n+=E+`<${u}${y}${g}?>`,s=!0;continue}let h=i;h!==""&&(h+=e.indentBy);let f=Wh(o[":@"],e),d=i+`<${u}${f}`,m=Dh(o[u],e,l,h);e.unpairedTags.indexOf(u)!==-1?e.suppressUnpairedNode?n+=d+">":n+=d+"/>":(!m||m.length===0)&&e.suppressEmptyNode?n+=d+"/>":m&&m.endsWith(">")?n+=d+`>${m}${i}</${u}>`:(n+=d+">",m&&i!==""&&(m.includes("/>")||m.includes("</"))?n+=i+e.indentBy+m+i:n+=m,n+=`</${u}>`),s=!0}return n}function ev(t){let e=Object.keys(t);for(let r=0;r<e.length;r++){let i=e[r];if(t.hasOwnProperty(i)&&i!==":@")return i}}function Wh(t,e){let r="";if(t&&!e.ignoreAttributes)for(let i in t){if(!t.hasOwnProperty(i))continue;let n=e.attributeValueProcessor(i,t[i]);n=Gh(n,e),n===!0&&e.suppressBooleanAttributes?r+=` ${i.substr(e.attributeNamePrefix.length)}`:r+=` ${i.substr(e.attributeNamePrefix.length)}="${n}"`}return r}function rv(t,e){t=t.substr(0,t.length-e.textNodeName.length-1);let r=t.substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+r)return!0;return!1}function Gh(t,e){if(t&&t.length>0&&e.processEntities)for(let r=0;r<e.entities.length;r++){let i=e.entities[r];t=t.replace(i.regex,i.val)}return t}var iv={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function we(t){this.options=Object.assign({},iv,t),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=gn(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=av),this.processTextOrObjNode=nv,this.options.format?(this.indentate=sv,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}we.prototype.build=function(t){return this.options.preserveOrder?qa(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0,[]).val)};we.prototype.j2x=function(t,e,r){let i="",n="",s=r.join(".");for(let a in t)if(Object.prototype.hasOwnProperty.call(t,a))if(typeof t[a]>"u")this.isAttribute(a)&&(n+="");else if(t[a]===null)this.isAttribute(a)||a===this.options.cdataPropName?n+="":a[0]==="?"?n+=this.indentate(e)+"<"+a+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(t[a]instanceof Date)n+=this.buildTextValNode(t[a],a,"",e);else if(typeof t[a]!="object"){let o=this.isAttribute(a);if(o&&!this.ignoreAttributesFn(o,s))i+=this.buildAttrPairStr(o,""+t[a]);else if(!o)if(a===this.options.textNodeName){let u=this.options.tagValueProcessor(a,""+t[a]);n+=this.replaceEntitiesValue(u)}else n+=this.buildTextValNode(t[a],a,"",e)}else if(Array.isArray(t[a])){let o=t[a].length,u="",l="";for(let h=0;h<o;h++){let f=t[a][h];if(!(typeof f>"u"))if(f===null)a[0]==="?"?n+=this.indentate(e)+"<"+a+"?"+this.tagEndChar:n+=this.indentate(e)+"<"+a+"/"+this.tagEndChar;else if(typeof f=="object")if(this.options.oneListGroup){let d=this.j2x(f,e+1,r.concat(a));u+=d.val,this.options.attributesGroupName&&f.hasOwnProperty(this.options.attributesGroupName)&&(l+=d.attrStr)}else u+=this.processTextOrObjNode(f,a,e,r);else if(this.options.oneListGroup){let d=this.options.tagValueProcessor(a,f);d=this.replaceEntitiesValue(d),u+=d}else u+=this.buildTextValNode(f,a,"",e)}this.options.oneListGroup&&(u=this.buildObjectNode(u,a,l,e)),n+=u}else if(this.options.attributesGroupName&&a===this.options.attributesGroupName){let o=Object.keys(t[a]),u=o.length;for(let l=0;l<u;l++)i+=this.buildAttrPairStr(o[l],""+t[a][o[l]])}else n+=this.processTextOrObjNode(t[a],a,e,r);return{attrStr:i,val:n}};we.prototype.buildAttrPairStr=function(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+t:" "+t+'="'+e+'"'};function nv(t,e,r,i){let n=this.j2x(t,r+1,i.concat(e));return t[this.options.textNodeName]!==void 0&&Object.keys(t).length===1?this.buildTextValNode(t[this.options.textNodeName],e,n.attrStr,r):this.buildObjectNode(n.val,e,n.attrStr,r)}we.prototype.buildObjectNode=function(t,e,r,i){if(t==="")return e[0]==="?"?this.indentate(i)+"<"+e+r+"?"+this.tagEndChar:this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar;{let n="</"+e+this.tagEndChar,s="";return e[0]==="?"&&(s="?",n=""),(r||r==="")&&t.indexOf("<")===-1?this.indentate(i)+"<"+e+r+s+">"+t+n:this.options.commentPropName!==!1&&e===this.options.commentPropName&&s.length===0?this.indentate(i)+`<!--${t}-->`+this.newLine:this.indentate(i)+"<"+e+r+s+this.tagEndChar+t+this.indentate(i)+n}};we.prototype.closeTag=function(t){let e="";return this.options.unpairedTags.indexOf(t)!==-1?this.options.suppressUnpairedNode||(e="/"):this.options.suppressEmptyNode?e="/":e=`></${t}`,e};we.prototype.buildTextValNode=function(t,e,r,i){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(i)+`<!--${t}-->`+this.newLine;if(e[0]==="?")return this.indentate(i)+"<"+e+r+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(e,t);return n=this.replaceEntitiesValue(n),n===""?this.indentate(i)+"<"+e+r+this.closeTag(e)+this.tagEndChar:this.indentate(i)+"<"+e+r+">"+n+"</"+e+this.tagEndChar}};we.prototype.replaceEntitiesValue=function(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){let r=this.options.entities[e];t=t.replace(r.regex,r.val)}return t};function sv(t){return this.options.indentBy.repeat(t)}function av(t){return t.startsWith(this.options.attributeNamePrefix)&&t!==this.options.textNodeName?t.substr(this.attrPrefixLen):!1}var Eo=Ro(Kh(),1),Xc=Ro(zc(),1),fA=U({name:"WhiteSpace",pattern:/\s+/,group:St.SKIPPED}),hA=U({name:"LineComment",pattern:/\/\/[^\n\r]*/,group:St.SKIPPED}),cA=U({name:"BlockComment",pattern:/\/\*[\s\S]*?\*\//,group:St.SKIPPED}),Ut=U({name:"Identifier",pattern:/[a-zA-Z_$][a-zA-Z0-9_.[\]]*/}),Yc=U({name:"QuotedIdentifier",pattern:/`([^`\\]|\\.)*`/}),Js=U({name:"From",pattern:/from/i,longer_alt:Ut}),xo=U({name:"To",pattern:/to/i,longer_alt:Ut}),To=U({name:"Transform",pattern:/transform/i,longer_alt:Ut}),Qc=U({name:"Set",pattern:/set/i,longer_alt:Ut}),Zc=U({name:"Section",pattern:/section/i,longer_alt:Ut}),Jc=U({name:"Multiple",pattern:/multiple/i,longer_alt:Ut}),tp=U({name:"Clone",pattern:/clone/i,longer_alt:Ut}),ep=U({name:"Delete",pattern:/delete/i,longer_alt:Ut}),rp=U({name:"Define",pattern:/define/i,longer_alt:Ut}),ip=U({name:"Modify",pattern:/modify/i,longer_alt:Ut}),bo=U({name:"If",pattern:/if/i,longer_alt:Ut}),np=U({name:"Else",pattern:/else/i,longer_alt:Ut}),sp=U({name:"True",pattern:/true/i,longer_alt:Ut}),ap=U({name:"False",pattern:/false/i,longer_alt:Ut}),op=U({name:"Null",pattern:/null/i,longer_alt:Ut}),up=U({name:"Return",pattern:/return/i,longer_alt:Ut}),lp=U({name:"Unsafe",pattern:/unsafe/i,longer_alt:Ut}),fp=U({name:"Where",pattern:/where/i,longer_alt:Ut}),hp=U({name:"EqualsEquals",pattern:/==/}),cp=U({name:"EqualsEqualsEquals",pattern:/===/}),pp=U({name:"NotEquals",pattern:/!=/}),dp=U({name:"NotEqualsEquals",pattern:/!==/}),_p=U({name:"LessThanOrEqual",pattern:/<=/}),mp=U({name:"GreaterThanOrEqual",pattern:/>=/}),gp=U({name:"LessThan",pattern:/</}),yp=U({name:"GreaterThan",pattern:/>/}),Ep=U({name:"And",pattern:/&&/}),xp=U({name:"Or",pattern:/\|\|/}),Tp=U({name:"Not",pattern:/!/}),Ui=U({name:"Equals",pattern:/=/}),bp=U({name:"Plus",pattern:/\+/}),vo=U({name:"Minus",pattern:/-/}),vp=U({name:"Times",pattern:/\*/}),Ap=U({name:"Divide",pattern:/\//}),Op=U({name:"Modulo",pattern:/%/}),tr=U({name:"LParen",pattern:/\(/}),fr=U({name:"RParen",pattern:/\)/}),ta=U({name:"Comma",pattern:/,/}),Sp=U({name:"StringLiteral",pattern:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/}),Rp=U({name:"NumericLiteral",pattern:/-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/}),Np=[fA,hA,cA,Js,xo,To,Qc,Zc,Jc,tp,ep,rp,ip,bo,np,sp,ap,op,up,lp,fp,cp,hp,dp,pp,_p,mp,Ep,xp,Ui,gp,yp,Tp,bp,vo,vp,Ap,Op,tr,fr,ta,Sp,Rp,Yc,Ut],pA=new St(Np),dA=class extends pn{constructor(){super(Np),this.performSelfAnalysis()}query=this.RULE("query",()=>{this.CONSUME(Js),this.SUBRULE(this.typeFormat,{LABEL:"sourceType"}),this.CONSUME(xo),this.SUBRULE1(this.typeFormat,{LABEL:"targetType"}),this.OPTION(()=>{this.CONSUME(To),this.OPTION1(()=>{this.CONSUME(lp)}),this.MANY(()=>{this.SUBRULE(this.action)})})});typeFormat=this.RULE("typeFormat",()=>{this.SUBRULE(this.anyIdentifier,{LABEL:"name"}),this.OPTION(()=>{this.CONSUME(tr),this.MANY_SEP({SEP:ta,DEF:()=>{this.SUBRULE(this.typeFormatParameter,{LABEL:"params"})}}),this.CONSUME(fr)})});typeFormatParameter=this.RULE("typeFormatParameter",()=>{this.OR([{GATE:()=>this.LA(2).tokenType===Ui,ALT:()=>this.SUBRULE(this.namedParameter)},{ALT:()=>this.SUBRULE(this.literal)}])});namedParameter=this.RULE("namedParameter",()=>{this.SUBRULE(this.anyIdentifier,{LABEL:"key"}),this.CONSUME(Ui),this.SUBRULE(this.literal,{LABEL:"value"})});anyIdentifier=this.RULE("anyIdentifier",()=>{this.OR([{ALT:()=>this.CONSUME(Ut)},{ALT:()=>this.CONSUME(Yc)}])});literal=this.RULE("literal",()=>{this.OR([{ALT:()=>this.CONSUME(Sp)},{ALT:()=>this.CONSUME(Rp)},{ALT:()=>this.CONSUME(sp)},{ALT:()=>this.CONSUME(ap)},{ALT:()=>this.CONSUME(op)}])});action=this.RULE("action",()=>{this.OR([{ALT:()=>this.SUBRULE(this.setRule)},{ALT:()=>this.SUBRULE(this.modifyRule)},{ALT:()=>this.SUBRULE(this.sectionRule)},{ALT:()=>this.SUBRULE(this.cloneRule)},{ALT:()=>this.SUBRULE(this.deleteRule)},{ALT:()=>this.SUBRULE(this.ifAction)},{ALT:()=>this.SUBRULE(this.defineRule)},{ALT:()=>this.SUBRULE(this.returnRule)}])});returnRule=this.RULE("returnRule",()=>{this.CONSUME(up),this.SUBRULE(this.expression,{LABEL:"expr"})});deleteRule=this.RULE("deleteRule",()=>{this.CONSUME(ep),this.SUBRULE(this.anyIdentifier,{LABEL:"field"})});ifAction=this.RULE("ifAction",()=>{this.CONSUME(bo),this.CONSUME(tr),this.SUBRULE(this.expression,{LABEL:"condition"}),this.CONSUME(fr),this.CONSUME2(tr),this.MANY(()=>{this.SUBRULE(this.action,{LABEL:"thenActions"})}),this.CONSUME2(fr),this.OPTION(()=>{this.CONSUME(np),this.CONSUME3(tr),this.MANY2(()=>{this.SUBRULE2(this.action,{LABEL:"elseActions"})}),this.CONSUME3(fr)})});cloneRule=this.RULE("cloneRule",()=>{this.CONSUME(tp),this.OPTION(()=>{this.CONSUME(tr),this.MANY_SEP({SEP:ta,DEF:()=>{this.SUBRULE(this.anyIdentifier,{LABEL:"fields"})}}),this.CONSUME(fr)})});setRule=this.RULE("setRule",()=>{this.CONSUME(Qc),this.SUBRULE(this.anyIdentifier,{LABEL:"left"}),this.CONSUME(Ui),this.SUBRULE(this.expression,{LABEL:"right"})});modifyRule=this.RULE("modifyRule",()=>{this.CONSUME(ip),this.SUBRULE(this.anyIdentifier,{LABEL:"left"}),this.CONSUME(Ui),this.SUBRULE(this.expression,{LABEL:"right"})});expression=this.RULE("expression",()=>{this.SUBRULE(this.logicalOr)});logicalOr=this.RULE("logicalOr",()=>{this.SUBRULE(this.logicalAnd,{LABEL:"lhs"}),this.MANY(()=>{this.CONSUME(xp),this.SUBRULE1(this.logicalAnd,{LABEL:"rhs"})})});logicalAnd=this.RULE("logicalAnd",()=>{this.SUBRULE(this.comparison,{LABEL:"lhs"}),this.MANY(()=>{this.CONSUME(Ep),this.SUBRULE1(this.comparison,{LABEL:"rhs"})})});comparison=this.RULE("comparison",()=>{this.SUBRULE(this.addition,{LABEL:"lhs"}),this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(hp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(cp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(pp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(dp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(_p,{LABEL:"ops"})},{ALT:()=>this.CONSUME(mp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(gp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(yp,{LABEL:"ops"})}]),this.SUBRULE1(this.addition,{LABEL:"rhs"})})});addition=this.RULE("addition",()=>{this.SUBRULE(this.multiplication,{LABEL:"lhs"}),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(bp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(vo,{LABEL:"ops"})}]),this.SUBRULE1(this.multiplication,{LABEL:"rhs"})})});multiplication=this.RULE("multiplication",()=>{this.SUBRULE(this.unaryExpression,{LABEL:"lhs"}),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(vp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(Ap,{LABEL:"ops"})},{ALT:()=>this.CONSUME(Op,{LABEL:"ops"})}]),this.SUBRULE1(this.unaryExpression,{LABEL:"rhs"})})});unaryExpression=this.RULE("unaryExpression",()=>{this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(vo,{LABEL:"sign"})},{ALT:()=>this.CONSUME(Tp,{LABEL:"sign"})}])}),this.SUBRULE(this.atomic)});atomic=this.RULE("atomic",()=>{this.OR([{ALT:()=>this.SUBRULE(this.literal)},{GATE:()=>this.LA(2).tokenType===tr,ALT:()=>this.SUBRULE(this.functionCall)},{ALT:()=>this.SUBRULE(this.anyIdentifier)},{ALT:()=>{this.CONSUME(tr),this.SUBRULE(this.expression),this.CONSUME(fr)}}])});functionCall=this.RULE("functionCall",()=>{this.OR([{ALT:()=>this.CONSUME(Ut,{LABEL:"name"})},{ALT:()=>this.CONSUME(bo,{LABEL:"name"})}]),this.CONSUME(tr),this.MANY_SEP({SEP:ta,DEF:()=>{this.SUBRULE(this.expression,{LABEL:"args"})}}),this.CONSUME(fr)});sectionRule=this.RULE("sectionRule",()=>{this.CONSUME(Zc),this.OPTION(()=>{this.CONSUME(Jc)}),this.SUBRULE(this.anyIdentifier,{LABEL:"sectionName"}),this.CONSUME(tr),this.OPTION1(()=>{this.CONSUME(Js,{LABEL:"subqueryFrom"}),this.SUBRULE(this.typeFormat,{LABEL:"subquerySourceType"}),this.CONSUME(xo,{LABEL:"subqueryTo"}),this.SUBRULE1(this.typeFormat,{LABEL:"subqueryTargetType"}),this.OPTION2(()=>{this.CONSUME(To,{LABEL:"subqueryTransform"})})}),this.MANY(()=>{this.SUBRULE(this.action)}),this.CONSUME(fr),this.OPTION3(()=>{this.CONSUME1(Js,{LABEL:"followFrom"}),this.SUBRULE(this.expression,{LABEL:"followExpr"})}),this.OPTION4(()=>{this.CONSUME(fp,{LABEL:"whereClause"}),this.SUBRULE1(this.expression,{LABEL:"whereExpr"})})});defineRule=this.RULE("defineRule",()=>{this.CONSUME(rp),this.SUBRULE(this.anyIdentifier,{LABEL:"left"}),this.CONSUME(Ui),this.SUBRULE(this.expression,{LABEL:"right"})})},Fi=new dA,_A={substring:(t,e)=>{if(t.length<2)throw new Error("substring() requires at least 2 arguments (string, start, [length])");let[r,i,n]=t;return n!==void 0?`String(${r}).slice(${i}, (${i}) + (${n}))`:`String(${r}).slice(${i})`},if:(t,e)=>{if(t.length!==3)throw new Error("if() requires exactly 3 arguments (condition, trueValue, falseValue)");let[r,i,n]=t;return`((${r}) ? (${i}) : (${n}))`},text:(t,e)=>{if(t.length!==1)throw new Error("text() requires exactly 1 argument (string or number)");let[r]=t;return`String(${r})`},replace:(t,e)=>{if(t.length!==3)throw new Error("replace() requires exactly 3 arguments (string, search, replacement)");let[r,i,n]=t;return`String(${r}).replace(${i}, ${n})`},number:(t,e)=>{if(t.length!==1)throw new Error("number() requires exactly 1 argument (string)");let[r]=t;return`Number(${r})`},extractnumber:(t,e)=>{if(t.length!==1)throw new Error("extractNumber() requires exactly 1 argument (string)");let[r]=t;return`(() => { const match = String(${r}).match(/\\d+(\\.\\d+)?/); return match ? Number(match[0]) : null; })()`},uppercase:(t,e)=>{if(t.length!==1)throw new Error("uppercase() requires exactly 1 argument (string)");let[r]=t;return`String(${r}).toUpperCase()`},lowercase:(t,e)=>{if(t.length!==1)throw new Error("lowercase() requires exactly 1 argument (string)");let[r]=t;return`String(${r}).toLowerCase()`},xmlnode:(t,e)=>{if(t.length<1)throw new Error("xmlnode() requires at least 1 argument (string)");let[r,...i]=t,n=i.join(", ");return`env.functions.xmlnode(${r}${n?", "+n:""})`},split:(t,e)=>{if(t.length<1)throw new Error("split() requires at least 1 argument (string)");let[r,i,n]=t,s=i!==void 0?i:'""',a=n!==void 0?`, ${n}`:"";return`String(${r}).split(${s}${a})`},to_base64:(t,e)=>{if(t.length!==1)throw new Error("to_base64() requires exactly 1 argument (string)");let[r]=t;return`env.functions.to_base64(${r})`},from_base64:(t,e)=>{if(t.length!==1)throw new Error("from_base64() requires exactly 1 argument (string)");let[r]=t;return`env.functions.from_base64(${r})`},aslist:(t,e)=>{if(t.length!==1)throw new Error("aslist() requires exactly 1 argument");let[r]=t;return`env.functions.aslist(${r})`},spreadsheet:(t,e)=>{if(t.length!==1)throw new Error("spreadsheet() requires exactly 1 argument");let[r]=t;return`env.functions.spreadsheet(${r})`},unpack:(t,e)=>{if(t.length<2)throw new Error("unpack() requires at least 2 arguments (string, fieldSpec1, [fieldSpec2, ...])");let[r,...i]=t;i.forEach(s=>{let a=s.replace(/^["']|["']$/g,""),o=a.split(":");if(o.length<3)throw new Error(`Invalid field spec for unpack(): ${a}. Expected "name:start:length[:modifier]"`);let[u,l,h]=o;if(!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(u))throw new Error(`Invalid field name in unpack() spec: "${u}". Must be a valid JavaScript identifier.`);let f=parseInt(l,10),d=parseInt(h,10);if(isNaN(f)||isNaN(d))throw new Error(`Invalid character positions in unpack() spec: ${a}`)});let n=i.join(", ");return`env.functions.unpack(${r}, ${n})`},pack:(t,e)=>{if(t.length<2)throw new Error("pack() requires at least 2 arguments (object, fieldSpec1, [fieldSpec2, ...])");let[r,...i]=t;i.forEach(s=>{let a=s.replace(/^["']|["']$/g,""),o=a.split(":");if(o.length<3)throw new Error(`Invalid field spec for pack(): ${a}. Expected "name:start:length[:modifier]"`);let[u,l,h]=o;if(!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(u))throw new Error(`Invalid field name in pack() spec: "${u}". Must be a valid JavaScript identifier.`);let f=parseInt(l,10),d=parseInt(h,10);if(isNaN(f)||isNaN(d))throw new Error(`Invalid character positions in pack() spec: ${a}`)});let n=i.join(", ");return`env.functions.pack(${r}, ${n})`},concat:(t,e)=>`env.functions.concat(${t.join(", ")})`,avg:(t,e)=>{if(t.length!==2)throw new Error("avg() requires exactly 2 arguments (array, valueExpression)");let[r,i]=t,n=`(item) => { const source = _safeSource(item); return ${i}; }`;return`env.functions.avg(${r}, ${n})`},minof:(t,e)=>{if(t.length!==2)throw new Error("minof() requires exactly 2 arguments (array, valueExpression)");let[r,i]=t,n=`(item) => { const source = _safeSource(item); return ${i}; }`;return`env.functions.minof(${r}, ${n})`},maxof:(t,e)=>{if(t.length!==2)throw new Error("maxof() requires exactly 2 arguments (array, valueExpression)");let[r,i]=t,n=`(item) => { const source = _safeSource(item); return ${i}; }`;return`env.functions.maxof(${r}, ${n})`},every:(t,e)=>{if(t.length!==2)throw new Error("every() requires exactly 2 arguments (array, conditionExpression)");let[r,i]=t,n=`(item) => { const source = _safeSource(item); return ${i}; }`;return`env.functions.every(${r}, ${n})`},some:(t,e)=>{if(t.length!==2)throw new Error("some() requires exactly 2 arguments (array, conditionExpression)");let[r,i]=t,n=`(item) => { const source = _safeSource(item); return ${i}; }`;return`env.functions.some(${r}, ${n})`},distinct:(t,e)=>{if(t.length!==2)throw new Error("distinct() requires exactly 2 arguments (array, valueExpression)");let[r,i]=t,n=`(item) => { const source = _safeSource(item); return ${i}; }`;return`env.functions.distinct(${r}, ${n})`},sum:(t,e)=>{if(t.length!==2)throw new Error("sum() requires exactly 2 arguments (array, valueExpression)");let[r,i]=t,n=`(item) => { const source = _safeSource(item); return ${i}; }`;return`env.functions.sum(${r}, ${n})`},groupby:(t,e)=>{if(t.length!==2)throw new Error("groupby() requires exactly 2 arguments (array, keyExpression)");let[r,i]=t,n=`(item) => { const source = _safeSource(item); return ${i}; }`;return`env.functions.groupby(${r}, ${n})`},transpose:(t,e)=>{if(t.length<2)throw new Error("transpose() requires at least 2 arguments (source, key1, [key2, ...])");return`env.functions.transpose(${t.join(", ")})`},list:(t,e)=>`[${t.join(", ")}]`,array:(t,e)=>`[${t.join(", ")}]`,extract:(t,e)=>{if(t.length<2)throw new Error("extract() requires at least 2 arguments (source, key1, [key2, ...])");let[r,...i]=t;return`env.functions.extract(${r}, ${e.safeMode}, ${i.join(", ")})`},floor:(t,e)=>{if(t.length!==1)throw new Error("floor() requires exactly 1 argument");return`Math.floor(${t[0]})`},ceil:(t,e)=>{if(t.length!==1)throw new Error("ceil() requires exactly 1 argument");return`Math.ceil(${t[0]})`},round:(t,e)=>{if(t.length<1||t.length>2)throw new Error("round() requires 1 or 2 arguments (value, [mode])");return`env.functions.round(${t.join(", ")})`},abs:(t,e)=>{if(t.length!==1)throw new Error("abs() requires exactly 1 argument");return`Math.abs(${t[0]})`},fixed:(t,e)=>{if(t.length<1||t.length>3)throw new Error("fixed() requires 1 to 3 arguments (value, [decimals], [mode])");return`env.functions.fixed(${t.join(", ")})`},min:(t,e)=>{if(t.length<2)throw new Error("min() requires at least 2 arguments");return`Math.min(${t.join(", ")})`},max:(t,e)=>{if(t.length<2)throw new Error("max() requires at least 2 arguments");return`Math.max(${t.join(", ")})`},trim:(t,e)=>{if(t.length!==1)throw new Error("trim() requires exactly 1 argument");return`String(${t[0]}).trim()`},padstart:(t,e)=>{if(t.length<2)throw new Error("padstart() requires at least 2 arguments (str, length, [char])");let[r,i,n]=t;return n!==void 0?`String(${r}).padStart(${i}, ${n})`:`String(${r}).padStart(${i})`},padend:(t,e)=>{if(t.length<2)throw new Error("padend() requires at least 2 arguments (str, length, [char])");let[r,i,n]=t;return n!==void 0?`String(${r}).padEnd(${i}, ${n})`:`String(${r}).padEnd(${i})`},indexof:(t,e)=>{if(t.length!==2)throw new Error("indexof() requires exactly 2 arguments (str, search)");return`String(${t[0]}).indexOf(${t[1]})`},startswith:(t,e)=>{if(t.length!==2)throw new Error("startswith() requires exactly 2 arguments (str, prefix)");return`String(${t[0]}).startsWith(${t[1]})`},endswith:(t,e)=>{if(t.length!==2)throw new Error("endswith() requires exactly 2 arguments (str, suffix)");return`String(${t[0]}).endsWith(${t[1]})`}},yo=class{sourceRoot={type:"object",properties:{}};targetRoot={type:"object",properties:{}};sourceStack=[this.sourceRoot];targetStack=[this.targetRoot];getCurrentSource(){return this.sourceStack[this.sourceStack.length-1]}getCurrentTarget(){return this.targetStack[this.targetStack.length-1]}recordAccess(t,e="any",r=!1){let i=r?this.getCurrentTarget():this.getCurrentSource();this.setInNode(i,t,e)}recordAssignment(t,e="any"){this.setInNode(this.getCurrentTarget(),t,e)}recordClone(t){let e=this.getCurrentTarget();t?t.forEach(r=>{this.setInNode(this.getCurrentSource(),r,"any"),this.setInNode(e,r,"any")}):e.isOpen=!0}recordDelete(t){let e=this.getCurrentTarget();this.deleteInNode(e,t)}pushSection(t,e,r){e!=="parent"&&this.setInNode(this.getCurrentSource(),e,r?"array":"object");let i={type:r?"array":"object"};r?i.items={type:"object",properties:{}}:i.properties={};let n={type:"object",properties:{}};this.setInNodeExplicit(this.getCurrentTarget(),t,i),this.targetStack.push(r?i.items:i),this.sourceStack.push(n)}popSection(t,e){let r=this.sourceStack.pop();this.targetStack.pop();let i=this.getCurrentSource();if(t!=="parent"){let n=this.getOrSetNode(i,t,e?"array":"object"),s=e?n.items:n;s&&(s.properties||(s.properties={}),Object.assign(s.properties,r.properties||{}))}else i.properties||(i.properties={}),Object.assign(i.properties,r.properties||{})}parsePath(t){if(!t)return[];let e=[],r=t.split(".");for(let i of r){let n=i.match(/^([^[\]]*)((?:\[\d+\])*)$/);if(n){n[1]&&e.push(n[1]);let s=n[2].match(/\[\d+\]/g);if(s)for(let a of s)e.push("[]")}else e.push(i)}return e}setInNode(t,e,r){let i=this.parsePath(e),n=t;for(let s=0;s<i.length;s++){let a=i[s],o=s===i.length-1;if(a==="[]"){n.type="array",n.items||(n.items={type:o?r:"object",properties:{}}),n=n.items;continue}n.properties||(n.properties={}),o?(!n.properties[a]||n.properties[a].type==="any")&&(n.properties[a]={type:r},r==="object"?n.properties[a].properties={}:r==="array"&&(n.properties[a].items={type:"object",properties:{}})):(n.properties[a]||(n.properties[a]={type:"object",properties:{}}),n=n.properties[a])}}setInNodeExplicit(t,e,r){let i=this.parsePath(e),n=t;for(let s=0;s<i.length;s++){let a=i[s],o=s===i.length-1;if(a==="[]"){n.type="array",n.items||(n.items={type:o?r.type:"object",properties:{}}),o?n.items=r:n=n.items;continue}n.properties||(n.properties={}),o?n.properties[a]=r:(n.properties[a]||(n.properties[a]={type:"object",properties:{}}),n=n.properties[a])}}deleteInNode(t,e){let r=this.parsePath(e),i=t;for(let n=0;n<r.length;n++){let s=r[n],a=n===r.length-1;if(s==="[]"){if(!i.items)return;a?(delete i.items,i.type="any"):i=i.items;continue}if(!i.properties)return;if(a)delete i.properties[s];else if(i=i.properties[s],!i)return}}getOrSetNode(t,e,r){let i=this.parsePath(e),n=t;for(let s=0;s<i.length;s++){let a=i[s],o=s===i.length-1;if(a==="[]"){if(n.type="array",!n.items){let l=o?r:"object";n.items={type:l},l==="object"?n.items.properties={}:l==="array"&&(n.items.items={type:"object",properties:{}})}n=n.items;continue}let u=o?r:"object";n.properties||(n.properties={}),n.properties[a]||(n.properties[a]={type:u},u==="object"?n.properties[a].properties={}:u==="array"&&(n.properties[a].items={type:"object",properties:{}})),n=n.properties[a]}return n}getResult(){return{source:this.sourceRoot,target:this.targetRoot}}},mA=Fi.getBaseCstVisitorConstructor(),gA=class extends mA{readFrom="source";scopeStack=[];safeMode=!0;isAnalyzing=!1;tracker=new yo;lastInferredType="any";constructor(){super(),this.validateVisitor()}reset(){this.readFrom="source",this.scopeStack=[],this.tracker=new yo,this.lastInferredType="any"}visitWithContext(t,e){let r=this.readFrom;this.readFrom=e.readFrom;try{return this.visit(t)}finally{this.readFrom=r}}query(t){this.reset(),this.isAnalyzing&&(this.tracker=new yo);let e=this.visit(t.sourceType),r=this.visit(t.targetType),i=!!t.Unsafe;this.safeMode=!i,this.scopeStack.push({format:r.name,options:r.options,isSerializationScope:!0});try{let n=t.action?t.action.map(h=>this.visit(h)):[];t.Transform||n.push("Object.assign(target, source);");let s=e.name,a=r.name,o=JSON.stringify(e.options),u=JSON.stringify(r.options),l=n.some(h=>typeof h=="string"&&h.trim().startsWith("return "));return{code:`
      return function(input, env) {
        // 1. Parse Input
        const _safeSource = (v) => (typeof v === 'object' && v !== null) ? (Array.isArray(v) ? [...v] : { ...v }) : (v || {});
        const _parsedSource = env.parse('${s}', input, ${o});
        const source = _safeSource(_parsedSource);
        const _rootSource = source;
        
        // 2. Transform
        const target = {};
        const _rootTarget = target;
        ${n.join(`
        `)}

        // 3. Serialize Output
        ${l?"":`return env.serialize('${a}', target, ${u});`}
      }
    `,sourceType:e,targetType:r,analysis:this.isAnalyzing?this.tracker.getResult():void 0}}finally{this.scopeStack.pop()}}typeFormat(t){let e=this.visit(t.name),r={params:[]};return t.params&&t.params.forEach(i=>{let n=this.visit(i);typeof n=="object"&&"key"in n?r[n.key]=this.parseLiteral(n.value):r.params.push(this.parseLiteral(n))}),{name:e.name,options:r}}typeFormatParameter(t){if(t.namedParameter)return this.visit(t.namedParameter);if(t.literal)return this.visit(t.literal)}namedParameter(t){let e=this.visit(t.key).name,r=this.visit(t.value);return{key:e,value:r}}parseLiteral(t){if(t==="true")return!0;if(t==="false")return!1;if(t==="null")return null;if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);let e=Number(t);return isNaN(e)?t:e}isSimplePath(t){return t?!/[()+*/-]/.test(t)&&!t.includes(" "):!1}safify(t){return this.safeMode?t.replace(/\.(?!\?)/g,"?.").replace(/\[/g,"?.["):t}genAccess(t,e,r=!1){if(!this.safeMode||r)return e.quoted||e.name.includes("-")&&!e.name.includes(".")&&!e.name.includes("[")?`${t}["${e.name}"]`:`${t}.${e.name}`;if(e.quoted)return`${t}?.[${JSON.stringify(e.name)}]`;let i=this.safify(e.name);return`${t}?.${i}`}anyIdentifier(t){if(t.Identifier)return{name:t.Identifier[0].image,quoted:!1};if(t.QuotedIdentifier)return{name:t.QuotedIdentifier[0].image.slice(1,-1).replace(/\\(.)/g,"$1"),quoted:!0}}literal(t){if(t.StringLiteral)return this.lastInferredType="string",t.StringLiteral[0].image;if(t.NumericLiteral)return this.lastInferredType="number",t.NumericLiteral[0].image;if(t.True)return this.lastInferredType="boolean","true";if(t.False)return this.lastInferredType="boolean","false";if(t.Null)return this.lastInferredType="null","null"}action(t){if(t.setRule)return this.visit(t.setRule);if(t.modifyRule)return this.visit(t.modifyRule);if(t.sectionRule)return this.visit(t.sectionRule);if(t.cloneRule)return this.visit(t.cloneRule);if(t.ifAction)return this.visit(t.ifAction);if(t.deleteRule)return this.visit(t.deleteRule);if(t.defineRule)return this.visit(t.defineRule);if(t.returnRule)return this.visit(t.returnRule)}deleteRule(t){let e=this.visit(t.field);return this.isAnalyzing&&this.tracker.recordDelete(e.name),`delete ${this.genAccess("target",e,!0)};`}ifAction(t){let e=this.visit(t.condition),r=t.thenActions?t.thenActions.map(n=>this.visit(n)).join(`
`):"",i=t.elseActions?`else { ${t.elseActions.map(n=>this.visit(n)).join(`
`)} }`:"";return`if (${e}) {
       ${r}
     } ${i}`}cloneRule(t){if(t.fields){let e=t.fields.map(r=>this.visit(r));return this.isAnalyzing&&this.tracker.recordClone(e.map(r=>r.name)),e.map(r=>`${this.genAccess("target",r,!0)} = ${this.genAccess("source",r)};`).join(`
        `)}return this.isAnalyzing&&this.tracker.recordClone(),"Object.assign(target, source);"}setRule(t){let e=this.visit(t.left);this.lastInferredType="any";let r=this.visit(t.right);return this.isAnalyzing&&this.tracker.recordAssignment(e.name,this.lastInferredType),`${this.genAccess("target",e,!0)} = ${r};`}modifyRule(t){let e=this.visit(t.left);this.lastInferredType="any";let r=this.visitWithContext(t.right,{readFrom:"target"});return this.isAnalyzing&&this.tracker.recordAssignment(e.name,this.lastInferredType),`${this.genAccess("target",e,!0)} = ${r};`}defineRule(t){let e=this.visit(t.left);this.lastInferredType="any";let r=this.visit(t.right);return this.isAnalyzing&&this.tracker.recordAssignment(e.name,this.lastInferredType),`${this.genAccess("source",e,!0)} = ${r};`}returnRule(t){let e=this.visitWithContext(t.expr,{readFrom:"target"}),r=this.scopeStack[this.scopeStack.length-1];if(r&&r.isSerializationScope){let i=JSON.stringify(r.options);return`return env.serialize('${r.format}', ${e}, ${i});`}return`return ${e};`}expression(t){return this.visit(t.logicalOr)}logicalOr(t){let e=this.visit(t.lhs);if(t.rhs&&t.rhs.length>0){this.lastInferredType="boolean";for(let r=0;r<t.rhs.length;r++){let i=this.visit(t.rhs[r]);e=`${e} || ${i}`}}return e}logicalAnd(t){let e=this.visit(t.lhs);if(t.rhs&&t.rhs.length>0){this.lastInferredType="boolean";for(let r=0;r<t.rhs.length;r++){let i=this.visit(t.rhs[r]);e=`${e} && ${i}`}}return e}comparison(t){let e=this.visit(t.lhs);if(t.rhs){this.lastInferredType="boolean";let r=t.ops[0].image,i=this.visit(t.rhs[0]);e=`${e} ${r} ${i}`}return e}addition(t){let e=this.visit(t.lhs),r=this.lastInferredType,i=e;if(t.rhs&&t.rhs.length>0){let n=r==="string",s=r==="number";for(let a=0;a<t.rhs.length;a++){let o=t.ops[a].image,u=this.visit(t.rhs[a]);this.lastInferredType==="string"&&(n=!0),this.lastInferredType!=="number"&&(s=!1),i=`${i} ${o} ${u}`}n?this.lastInferredType="string":s?this.lastInferredType="number":this.lastInferredType="any"}else this.lastInferredType=r;return i}multiplication(t){let e=this.visit(t.lhs);if(t.rhs&&t.rhs.length>0){this.lastInferredType="number";for(let r=0;r<t.rhs.length;r++){let i=t.ops[r].image,n=this.visit(t.rhs[r]);e=`${e} ${i} ${n}`}}return e}unaryExpression(t){let e=this.visit(t.atomic);if(t.sign){let r=t.sign[0].image;return r==="!"&&(this.lastInferredType="boolean"),r==="-"&&(this.lastInferredType="number"),`${r}${e}`}return e}atomic(t){if(t.literal)return this.visit(t.literal);if(t.functionCall)return this.visit(t.functionCall);if(t.anyIdentifier){this.lastInferredType="any";let e=this.visit(t.anyIdentifier);if(["true","false","null"].includes(e.name)&&!e.quoted)return e.name;if(e.name==="_key"&&!e.quoted)return"_key";if(!e.quoted){if(e.name.startsWith("source.")||e.name.startsWith("source[")){let r=e.name.startsWith("source.")?e.name.substring(7):e.name.substring(6);return this.isAnalyzing&&r&&this.tracker.recordAccess(r,"any",!1),this.safeMode?this.safify(e.name):e.name}if(e.name.startsWith("target.")||e.name.startsWith("target[")){let r=e.name.startsWith("target.")?e.name.substring(7):e.name.substring(6);return this.isAnalyzing&&r&&this.tracker.recordAccess(r,"any",!0),this.safeMode?this.safify(e.name):e.name}if(e.name==="target")return"target";if(e.name==="source")return"source";if(e.name==="_source"||e.name.startsWith("_source.")||e.name.startsWith("_source[")){let r=e.name.substring(7);if(this.isAnalyzing){let i=r.startsWith(".")?r.substring(1):r;i&&this.tracker.recordAccess(i,"any",!1)}return`_rootSource${this.safeMode?this.safify(r):r}`}if(e.name==="_target"||e.name.startsWith("_target.")||e.name.startsWith("_target[")){let r=e.name.substring(7);if(this.isAnalyzing){let i=r.startsWith(".")?r.substring(1):r;i&&this.tracker.recordAccess(i,"any",!0)}return`_rootTarget${this.safeMode?this.safify(r):r}`}}return this.isAnalyzing&&this.tracker.recordAccess(e.name,"any",this.readFrom==="target"),this.genAccess(this.readFrom,e)}if(t.expression)return`(${this.visit(t.expression)})`}functionCall(t){let e=t.name[0].image,r=(e.startsWith("`")?e.slice(1,-1):e).toLowerCase(),i=t.args?t.args.map(s=>this.visit(s)):[],n=_A[r];if(n)return["substring","text","replace","uppercase","lowercase","to_base64","from_base64","trim","padstart","padend","fixed"].includes(r)?this.lastInferredType="string":["number","extractnumber","floor","ceil","round","abs","min","max","indexof"].includes(r)?this.lastInferredType="number":["startswith","endswith"].includes(r)?this.lastInferredType="boolean":["aslist","transpose","list","array"].includes(r)?this.lastInferredType="array":r==="asobject"&&(this.lastInferredType="object"),n(i,this);throw new Error(`Unknown function: ${e}`)}sectionRule(t){let e=this.visit(t.sectionName),r=e.name,i=this.genAccess("target",e,!0),n,s;if(t.followExpr){let l=this.visit(t.followExpr),h=l.replace(/\?\./g,".");h==="source.parent"||h==="this.source.parent"||h===`${this.readFrom.replace(/\?\./g,".")}.parent`?(n="source",s="parent"):(n=l,s=n)}else n=this.genAccess("source",e),s=e.name;let a=!!t.Multiple,o=!!t.whereExpr,u="";if(o&&(u=this.visit(t.whereExpr)),!!t.subqueryFrom){let l=this.visit(t.subquerySourceType),h=this.visit(t.subqueryTargetType);this.scopeStack.push({format:h.name,options:h.options,isSerializationScope:!0});try{let f=!!t.subqueryTransform,d=t.action?t.action.map(x=>this.visit(x)):[];f||d.push("Object.assign(target, source);");let m=JSON.stringify(l.options),g=JSON.stringify(h.options),E=n.includes("(")||n.includes("[")||n.includes(" ")?"_sectionSource":n,y=E==="_sectionSource"?`const _sectionSource = ${n};
`:"";if(a){let x=o?`.filter((item, index) => { const source = item; const _key = index; return ${u}; })`:"";return`
        {
          ${y}if (${E} && Array.isArray(${E})) {
            ${i} = ${E}${x}.map((item, index) => {
              const subSource = env.parse('${l.name}', item, ${m});
              const source = _safeSource(subSource);
              const _key = index;
              const target = {};
              ${d.join(`
              `)}
              return env.serialize('${h.name}', target, ${g});
            });
          }
        }
        `}else return o?`
        {
          ${y}if (${E} && Array.isArray(${E})) {
            const _filtered = ${E}.find((item, index) => { const source = item; const _key = index; return ${u}; });
            if (_filtered) {
              ${i} = (function(innerSource, innerIndex) {
                const subSource = env.parse('${l.name}', innerSource, ${m});
                const source = _safeSource(subSource);
                const _key = innerIndex;
                const target = {};
                ${d.join(`
                `)}
                return env.serialize('${h.name}', target, ${g});
              })(_filtered, ${E}.indexOf(_filtered));
            }
          }
        }
        `:`
        {
          ${y}if (${E}) {
            ${i} = (function(innerSource) {
              const subSource = env.parse('${l.name}', innerSource, ${m});
              const source = _safeSource(subSource);
              const _key = 0; // Single section without where, index is effectively 0 if we consider it an "iteration"
              const target = {};
              ${d.join(`
              `)}
              return env.serialize('${h.name}', target, ${g});
            })(${E});
          }
        }
        `}finally{this.scopeStack.pop()}}this.scopeStack.push({format:"object",options:{},isSerializationScope:!1});try{let l=s;l!=="parent"&&(l=l.replace(/^source\??\./,"").replace(/^this\.source\??\./,"").replace(/\?\./g,".")),this.isAnalyzing&&(l==="parent"||this.isSimplePath(l)?this.tracker.pushSection(r,l,a):this.tracker.pushSection(r,"parent",a));try{let h=t.action?t.action.map(m=>this.visit(m)):[],f=n.includes("(")||n.includes("[")||n.includes(" ")?"_sectionSource":n,d=f==="_sectionSource"?`const _sectionSource = ${n};
`:"";if(a){let m=o?`.filter((item, index) => { const source = _safeSource(item); const _key = index; return ${u}; })`:"";return`
      {
        ${d}if (${f} && Array.isArray(${f})) {
          ${i} = ${f}${m}.map((item, index) => {
            const source = _safeSource(item);
            const _key = index;
            const target = {};
            ${h.join(`
            `)}
            return target;
          });
        }
      }
      `}else return o?`
      {
        ${d}if (${f} && Array.isArray(${f})) {
          const _filtered = ${f}.find((item, index) => { const source = _safeSource(item); const _key = index; return ${u}; });
          if (_filtered) {
            ${i} = (function(innerSource, innerIndex) {
              const source = _safeSource(innerSource);
              const _key = innerIndex;
              const target = {};
              ${h.join(`
              `)}
              return target;
            })(_filtered, ${f}.indexOf(_filtered));
          }
        }
      }
      `:`
      {
        ${d}if (${f}) {
          ${i} = (function(innerSource) {
            const source = _safeSource(innerSource);
            const _key = 0;
            const target = {};
            ${h.join(`
            `)}
            return target;
          })(${f});
        }
      }
      `}finally{if(this.isAnalyzing){let h=l==="parent"||this.isSimplePath(l)?l:"parent";this.tracker.popSection(h,a)}}}finally{this.scopeStack.pop()}}},qc=new gA,yA=Fi.getBaseCstVisitorConstructor(),EA=class extends yA{constructor(){super(),this.validateVisitor()}query(t){let e=this.visit(t.sourceType),r=this.visit(t.targetType),i=!!t.Unsafe,n=t.action?t.action.map(a=>this.visit(a)):[],s={from:e,to:r,actions:n};return i&&(s.unsafe=!0),s}typeFormat(t){return this.visit(t.name).name}typeFormatParameter(t){}namedParameter(t){}anyIdentifier(t){if(t.Identifier){let r=t.Identifier[0].image;return{name:r,quoted:!1,raw:r}}let e=t.QuotedIdentifier[0].image;return{name:e.slice(1,-1).replace(/\\(.)/g,"$1"),quoted:!0,raw:e}}literal(t){return t.StringLiteral?t.StringLiteral[0].image:t.NumericLiteral?t.NumericLiteral[0].image:t.True?"true":t.False?"false":t.Null?"null":""}action(t){if(t.setRule)return this.visit(t.setRule);if(t.modifyRule)return this.visit(t.modifyRule);if(t.sectionRule)return this.visit(t.sectionRule);if(t.cloneRule)return this.visit(t.cloneRule);if(t.ifAction)return this.visit(t.ifAction);if(t.deleteRule)return this.visit(t.deleteRule);if(t.defineRule)return this.visit(t.defineRule);if(t.returnRule)return this.visit(t.returnRule);throw new Error("Unknown action type in CST")}setRule(t){let e=this.visit(t.left),r=this.visit(t.right);return{type:"set",target:e.name,expression:r}}modifyRule(t){let e=this.visit(t.left),r=this.visit(t.right);return{type:"modify",target:e.name,expression:r}}deleteRule(t){return{type:"delete",field:this.visit(t.field).name}}defineRule(t){let e=this.visit(t.left),r=this.visit(t.right);return{type:"define",variable:e.name,expression:r}}cloneRule(t){return t.fields&&t.fields.length>0?{type:"clone",fields:t.fields.map(e=>this.visit(e).name)}:{type:"clone"}}returnRule(t){return{type:"return",expression:this.visit(t.expr)}}ifAction(t){let e=this.visit(t.condition),r=t.thenActions?t.thenActions.map(s=>this.visit(s)):[],i=t.elseActions&&t.elseActions.length>0?t.elseActions.map(s=>this.visit(s)):void 0,n={type:"if",condition:e,thenActions:r};return i!==void 0&&(n.elseActions=i),n}sectionRule(t){let e=this.visit(t.sectionName).name,r=!!t.Multiple,i=!!t.subqueryFrom,n=t.action?t.action.map(u=>this.visit(u)):[],s=t.followExpr?this.visit(t.followExpr):void 0,a=t.whereExpr?this.visit(t.whereExpr):void 0,o={type:"section",name:e,actions:n};return r&&(o.multiple=!0),s!==void 0&&(o.from=s),a!==void 0&&(o.where=a),i&&(o.isSubquery=!0,o.sourceFormat=this.visit(t.subquerySourceType),o.targetFormat=this.visit(t.subqueryTargetType)),o}expression(t){return this.visit(t.logicalOr)}logicalOr(t){let e=this.visit(t.lhs);if(t.rhs&&t.rhs.length>0)for(let r=0;r<t.rhs.length;r++)e+=` || ${this.visit(t.rhs[r])}`;return e}logicalAnd(t){let e=this.visit(t.lhs);if(t.rhs&&t.rhs.length>0)for(let r=0;r<t.rhs.length;r++)e+=` && ${this.visit(t.rhs[r])}`;return e}comparison(t){let e=this.visit(t.lhs);if(t.rhs&&t.rhs.length>0){let r=t.ops[0].image;e+=` ${r} ${this.visit(t.rhs[0])}`}return e}addition(t){let e=this.visit(t.lhs);if(t.rhs&&t.rhs.length>0)for(let r=0;r<t.rhs.length;r++){let i=t.ops[r].image;e+=` ${i} ${this.visit(t.rhs[r])}`}return e}multiplication(t){let e=this.visit(t.lhs);if(t.rhs&&t.rhs.length>0)for(let r=0;r<t.rhs.length;r++){let i=t.ops[r].image;e+=` ${i} ${this.visit(t.rhs[r])}`}return e}unaryExpression(t){let e=this.visit(t.atomic);return t.sign&&t.sign.length>0?`${t.sign[0].image}${e}`:e}atomic(t){return t.literal?this.visit(t.literal):t.functionCall?this.visit(t.functionCall):t.anyIdentifier?this.visit(t.anyIdentifier).raw:t.expression?`(${this.visit(t.expression)})`:""}functionCall(t){let e=t.name[0].image,r=t.args?t.args.map(i=>this.visit(i)):[];return`${e}(${r.join(", ")})`}},R$=new EA,Ip={};function Bi(t,e){Ip[t.toLowerCase()]=e}function Vc(t){let e=Ip[t.toLowerCase()];if(!e)throw new Error(`No adapter found for format: ${t}`);return e}function xA(t){let e="";for(;t>=0;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e}Bi("json",{parse:t=>typeof t!="string"?t:JSON.parse(t),serialize:t=>JSON.stringify(t,null,2)});var TA=new we({ignoreAttributes:!1,attributeNamePrefix:"$",textNodeName:"_",format:!0});Bi("xml",{parse:(t,e)=>typeof t!="string"?t:new Mi({ignoreAttributes:!1,removeNSPrefix:!0,...e}).parse(t),serialize:(t,e)=>{let r=e?.rootGenerated??e?.params?.[0]??"root";return(e?new we({ignoreAttributes:!1,attributeNamePrefix:"$",textNodeName:"_",format:!0,...e}):TA).build({[r]:t})}});Bi("csv",{parse:(t,e)=>{if(typeof t!="string")return t;let r=e?.delimiter??e?.params?.[0]??",";return{rows:Eo.default.parse(t,{delimiter:r,skipEmptyLines:!0,...e}).data.map(i=>{let n={};return Array.isArray(i)&&i.forEach((s,a)=>{n[xA(a)]=s}),n})}},serialize:(t,e)=>{if(!t||!Array.isArray(t.rows))return"";let r=e?.delimiter??e?.params?.[0]??",",i=t.rows.map(n=>Object.keys(n).filter(s=>/^[A-Z]+$/.test(s)).sort((s,a)=>s.length!==a.length?s.length-a.length:s.localeCompare(a)).map(s=>n[s]));return Eo.default.unparse(i,{delimiter:r,...e})}});Bi("edifact",{parse:(t,e)=>{if(typeof t!="string")return t;let r="'",i="+",n=":",s="?",a=t.trim();if(a.startsWith("UNA")){let f=a.substring(3,9);n=f[0],i=f[1],s=f[3],r=f[5],a=a.substring(9).trim()}e&&(e.segmentTerminator&&(r=e.segmentTerminator),e.elementSeparator&&(i=e.elementSeparator),e.componentSeparator&&(n=e.componentSeparator),e.releaseChar&&(s=e.releaseChar));let o={},u=(f,d,m)=>{let g=[],E="";for(let y=0;y<f.length;y++){let x=f[y];x===m&&y+1<f.length?E+=m+f[++y]:x===d?(g.push(E),E=""):E+=x}return g.push(E),g},l=(f,d)=>{let m="";for(let g=0;g<f.length;g++)f[g]===d&&g+1<f.length?m+=f[++g]:m+=f[g];return m},h=u(a,r,s).map(f=>f.trim()).filter(f=>f.length>0);for(let f of h){let d=u(f,i,s),m=l(d[0],s),g=d.slice(1).map(E=>{let y=u(E,n,s).map(x=>l(x,s));return y.length>1?y:y[0]});o[m]||(o[m]=[]),o[m].push(g)}return o},serialize:(t,e)=>{if(!t||typeof t!="object")return"";let r=e?.segmentTerminator??"'",i=e?.elementSeparator??"+",n=e?.componentSeparator??":",s=e?.releaseChar??"?",a=u=>{if(u==null)return"";let l=String(u),h="";for(let f of l)(f===r||f===i||f===n||f===s)&&(h+=s),h+=f;return h},o="";e?.includeUNA&&(o+=`UNA${n}${i}.${s} ${r}`);for(let u in t){let l=Array.isArray(t[u])?t[u]:[t[u]];for(let h of l){if(o+=u,Array.isArray(h))for(let f of h)o+=i,Array.isArray(f)?o+=f.map(a).join(n):o+=a(f);o+=r}}return o}});Bi("object",{parse:t=>{if(typeof t=="string"&&(t.trim().startsWith("{")||t.trim().startsWith("[")))try{return JSON.parse(t)}catch{return t}return t},serialize:t=>t});Bi("plaintext",{parse:(t,e)=>{if(typeof t!="string")return t;let r=e?.separator??e?.params?.[0]??/\r?\n/;return{rows:t.split(r).filter(i=>i.length>0)}},serialize:(t,e)=>{if(!t||!Array.isArray(t.rows))return"";let r=e?.separator??e?.params?.[0]??`
`;return t.rows.join(r)}});var bA={spreadsheet:t=>{let e=Array.isArray(t)?t:t==null?[]:[t];if(!Array.isArray(t)&&t&&typeof t=="object"&&Array.isArray(t.rows)&&(e=t.rows),e.length===0)return[];let r=[],i=[],n=[];for(let s=0;s<e.length;s++){let a=e[s];if(!(!a||typeof a!="object"))if(s===0){n=Object.keys(a);for(let o of n)i.push(String(a[o]))}else{let o={};for(let u=0;u<n.length;u++){let l=n[u],h=i[u];o[h]=a[l]}r.push(o)}}return r},aslist:t=>Array.isArray(t)?t:t==null?[]:[t],to_base64:t=>{let e=String(t);return typeof btoa=="function"?btoa(unescape(encodeURIComponent(e))):Buffer.from(e,"utf-8").toString("base64")},from_base64:t=>{let e=String(t);return typeof atob=="function"?decodeURIComponent(escape(atob(e))):Buffer.from(e,"base64").toString("utf-8")},xmlnode:(t,...e)=>{if(e.length>0){let r=[];for(let s=0;s<e.length;s+=2)r.push([e[s],e[s+1]]);let i=r.map(([s,a])=>[`$${s}`,a]),n=Object.fromEntries(i);return{_:t,...n}}return t},unpack:(t,...e)=>{let r=String(t||""),i={};for(let n of e){let s=n.split(":");if(s.length<3)continue;let[a,o,u,l]=s,h=parseInt(o,10),f=parseInt(u,10);if(isNaN(h)||isNaN(f))continue;let d=r.substring(h,h+f);l!=="raw"&&(d=d.trim()),i[a]=d}return i},pack:(t,...e)=>{let r=t||{},i=e.map(a=>{let o=a.split(":");if(o.length<3)return null;let[u,l,h,f]=o;return{name:u,start:parseInt(l,10),length:parseInt(h,10),left:f==="left"}}).filter(a=>a!==null),n=i.reduce((a,o)=>Math.max(a,o.start+o.length),0),s=" ".repeat(n);for(let a of i){let o=String(r[a.name]??""),u=(a.left?o.padStart(a.length):o.padEnd(a.length)).substring(0,a.length);s=s.substring(0,a.start)+u+s.substring(a.start+a.length)}return s},sum:(t,e)=>Array.isArray(t)?t.reduce((r,i)=>{let n=Number(e(i));return r+(isNaN(n)?0:n)},0):0,avg:(t,e)=>{if(!Array.isArray(t)||t.length===0)return 0;let r=0,i=0;for(let n of t){let s=e(n);if(s==null)continue;let a=Number(s);isNaN(a)||(r+=a,i++)}return i===0?0:r/i},minof:(t,e)=>{if(!Array.isArray(t))return null;let r=null;for(let i of t){let n=e(i);if(n==null)continue;let s=Number(n);!isNaN(s)&&(r===null||s<r)&&(r=s)}return r},maxof:(t,e)=>{if(!Array.isArray(t))return null;let r=null;for(let i of t){let n=e(i);if(n==null)continue;let s=Number(n);!isNaN(s)&&(r===null||s>r)&&(r=s)}return r},every:(t,e)=>Array.isArray(t)?t.every(r=>!!e(r)):!0,some:(t,e)=>Array.isArray(t)?t.some(r=>!!e(r)):!1,distinct:(t,e)=>{if(!Array.isArray(t))return[];let r=new Set,i=[];for(let n of t){let s=e(n),a=String(s);r.has(a)||(r.add(a),i.push(s))}return i},groupby:(t,e)=>{if(!Array.isArray(t))return[];let r=new Map;for(let i of t){let n=e(i),s=String(n);r.has(s)||r.set(s,{key:n,items:[]}),r.get(s).items.push(i)}return Array.from(r.values())},concat:(...t)=>t.reduce((e,r)=>e.concat(Array.isArray(r)?r:r==null?[]:[r]),[]),transpose:(t,...e)=>{if(!t||typeof t!="object"||e.length===0)return[];let r=0;for(let n of e){let s=t[n];Array.isArray(s)?r=Math.max(r,s.length):s!=null&&(r=Math.max(r,1))}let i=[];for(let n=0;n<r;n++){let s={};for(let a of e){let o=t[a];Array.isArray(o)?s[a]=o[n]:s[a]=n===0?o:void 0}i.push(s)}return i},extract:(t,e,...r)=>{if(!t||typeof t!="object")return{};let i=(s,a,o)=>{if(!a)return s;let u=a.split("."),l=s;for(let h of u)if(o){if(l==null)return;l=l[h]}else l=l[h];return l},n={};for(let s of r){let a=s.indexOf(":"),o,u;a!==-1?(o=s.substring(0,a),u=s.substring(a+1)):(o=s,u=s),n[o]=i(t,u,e)}return n},round:(t,e="half-up")=>{let r=Number(t);if(e==="half-even"){let i=Math.floor(r);return r-i===.5?i%2===0?i:i+1:Math.round(r)}return Math.round(r)},fixed:(t,e=2,r="half-up")=>{let i=Number(t),n=Math.max(0,Math.floor(Number(e))),s=Math.pow(10,n),a;if(r==="half-even"){let o=Math.abs(i)*s,u=Math.floor(o);a=(o-u===.5?u%2===0?u:u+1:Math.round(o))/s*Math.sign(i||1)}else a=Math.round(Math.abs(i)*s)/s*Math.sign(i||1);return a.toFixed(n)}};async function wp(t,e){if(e?.cache){let h=await e.cache.retrieve(t);if(h)return Hc(h)}let r=pA.tokenize(t);if(r.errors.length>0)throw new Error(`Lexing errors: ${r.errors[0].message}`);Fi.input=r.tokens;let i=Fi.query();if(Fi.errors.length>0)throw new Error(`Parsing errors: ${Fi.errors[0].message}`);qc.isAnalyzing=!!e?.analyze;let{code:n,analysis:s,sourceType:a,targetType:o}=qc.visit(i),u=Xc.default.js(n,{indent_size:2,space_in_empty_paren:!0,end_with_newline:!0});e?.cache&&await e.cache.save(t,u);let l=Hc(u);return s&&(s.sourceFormat=a.name,s.targetFormat=o.name,l.analysis=s),l}function Hc(t){let e=new Function(t)(),r={parse:(n,s,a)=>Vc(n).parse(s,a),serialize:(n,s,a)=>Vc(n).serialize(s,a),functions:bA},i=(n=>e(n,r));return i.code=t,i}var Mr=globalThis.scriptArgs||globalThis.os?.args||[];typeof btoa>"u"&&(globalThis.btoa=t=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="";for(let i=0,n,s=0,a=e;t.charAt(s|0)||(a="=",s%1);r+=a.charAt(63&i>>8-s%1*8)){if(n=t.charCodeAt(s+=3/4),n>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|n}return r});typeof atob>"u"&&(globalThis.atob=t=>{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=t.replace(/[=]+$/,""),i="";if(r.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let n=0,s=0,a,o=0;a=r.charAt(o++);~a&&(n=n%4,s=s%4)?i+=String.fromCharCode(255&n>>(-2*s&6)):0)a=e.indexOf(a);return i});typeof Buffer>"u"&&(globalThis.Buffer={from:(t,e)=>e==="base64"?{toString:r=>r==="utf-8"?atob(t):""}:{toString:r=>r==="base64"?btoa(t):""}});async function vA(){let t={};for(let e=0;e<Mr.length;e++){let r=Mr[e];(r==="-q"||r==="--query")&&(t.query=Mr[++e]),(r==="-Q"||r==="--query-file")&&(t.queryFile=Mr[++e]),(r==="-i"||r==="--input")&&(t.input=Mr[++e]),(r==="-f"||r==="--from")&&(t.from=Mr[++e]),(r==="-t"||r==="--to")&&(t.to=Mr[++e]),r==="--cache-dir"&&(t.cacheDir=Mr[++e])}try{let e=t.query;!e&&t.queryFile&&(e=std.loadFile(t.queryFile)),e||(std.err.printf(`Error: No query provided (-q or -Q)
`),std.exit(1));let r=t.input;!r&&t.from&&(r=std.loadFile(t.from)),r||(r=std.in.readAsString()),r||(std.err.printf(`Error: No input provided (-i, -f or stdin)
`),std.exit(1));let n=await(await wp(e))(r);if(t.to){let s=std.open(t.to,"w");s.puts(n),s.close()}else std.out.puts(n+`
`);std.exit(0)}catch(e){std.err.printf(`Error: %s
`,e.message),std.exit(1)}}vA();
/*! Bundled license information:

papaparse/papaparse.js:
  (* @license
  Papa Parse
  v5.5.3
  https://github.com/mholt/PapaParse
  License: MIT
  *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/

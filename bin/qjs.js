var Ip=Object.create;var So=Object.defineProperty;var wp=Object.getOwnPropertyDescriptor;var Cp=Object.getOwnPropertyNames;var Lp=Object.getPrototypeOf,kp=Object.prototype.hasOwnProperty;var Pp=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var mt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Mp=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Cp(t))!kp.call(e,n)&&n!==r&&So(e,n,{get:()=>t[n],enumerable:!(i=wp(t,n))||i.enumerable});return e};var Ro=(e,t,r)=>(r=e!=null?Ip(Lp(e)):{},Mp(t||!e||!e.__esModule?So(r,"default",{value:e,enumerable:!0}):r,e));var Gh=mt((Va,Ha)=>{(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof Ha=="object"&&typeof Va<"u"?Ha.exports=t():e.Papa=t()})(Va,function e(){"use strict";var t=(function(){return typeof self<"u"?self:typeof window<"u"?window:typeof t<"u"?t:{}})();function r(){var c=t.URL||t.webkitURL||null,p=e.toString();return o.BLOB_URL||(o.BLOB_URL=c.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",p,")();"],{type:"text/javascript"})))}var i=!t.document&&!!t.postMessage,n=t.IS_PAPA_WORKER||!1,s={},a=0,o={};if(o.parse=l,o.unparse=h,o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!i&&!!t.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=1024*1024*10,o.RemoteChunkSize=1024*1024*5,o.DefaultDelimiter=",",o.Parser=T,o.ParserHandle=x,o.NetworkStreamer=d,o.FileStreamer=m,o.StringStreamer=g,o.ReadableStreamStreamer=y,typeof PAPA_BROWSER_CONTEXT>"u"&&(o.DuplexStreamStreamer=E),t.jQuery){var u=t.jQuery;u.fn.parse=function(c){var p=c.config||{},b=[];return this.each(function(L){var I=u(this).prop("tagName").toUpperCase()==="INPUT"&&u(this).attr("type").toLowerCase()==="file"&&t.FileReader;if(!I||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)b.push({file:this.files[V],inputElem:this,instanceConfig:u.extend({},p)})}),O(),this;function O(){if(b.length===0){X(c.complete)&&c.complete();return}var L=b[0];if(X(c.before)){var I=c.before(L.file,L.inputElem);if(typeof I=="object")if(I.action==="abort"){R("AbortError",L.file,L.inputElem,I.reason);return}else if(I.action==="skip"){D();return}else typeof I.config=="object"&&(L.instanceConfig=u.extend(L.instanceConfig,I.config));else if(I==="skip"){D();return}}var V=L.instanceConfig.complete;L.instanceConfig.complete=function(lt){X(V)&&V(lt,L.file,L.inputElem),D()},o.parse(L.file,L.instanceConfig)}function R(L,I,V,lt){X(c.error)&&c.error({name:L},I,V,lt)}function D(){b.splice(0,1),O()}}}n&&(t.onmessage=Se);function l(c,p){p=p||{};var b=p.dynamicTyping||!1;if(X(b)&&(p.dynamicTypingFunction=b,b={}),p.dynamicTyping=b,p.transform=X(p.transform)?p.transform:!1,p.worker&&o.WORKERS_SUPPORTED){var O=$();O.userStep=p.step,O.userChunk=p.chunk,O.userComplete=p.complete,O.userError=p.error,p.step=X(p.step),p.chunk=X(p.chunk),p.complete=X(p.complete),p.error=X(p.error),delete p.worker,O.postMessage({input:c,config:p,workerId:O.id});return}var R=null;if(c===o.NODE_STREAM_INPUT&&typeof PAPA_BROWSER_CONTEXT>"u")return R=new E(p),R.getStream();return typeof c=="string"?(c=D(c),p.download?R=new d(p):R=new g(p)):c.readable===!0&&X(c.read)&&X(c.on)?R=new y(p):(t.File&&c instanceof File||c instanceof Object)&&(R=new m(p)),R.stream(c);function D(L){return L.charCodeAt(0)===65279?L.slice(1):L}}function h(c,p){var b=!1,O=!0,R=",",D=`\r
`,L='"',I=L+L,V=!1,lt=null,yt=!1;te();var K=new RegExp(A(L),"g");if(typeof c=="string"&&(c=JSON.parse(c)),Array.isArray(c)){if(!c.length||Array.isArray(c[0]))return C(null,c,V);if(typeof c[0]=="object")return C(lt||Object.keys(c[0]),c,V)}else if(typeof c=="object")return typeof c.data=="string"&&(c.data=JSON.parse(c.data)),Array.isArray(c.data)&&(c.fields||(c.fields=c.meta&&c.meta.fields||lt),c.fields||(c.fields=Array.isArray(c.data[0])?c.fields:typeof c.data[0]=="object"?Object.keys(c.data[0]):[]),!Array.isArray(c.data[0])&&typeof c.data[0]!="object"&&(c.data=[c.data])),C(c.fields||[],c.data||[],V);throw new Error("Unable to serialize unrecognized input");function te(){if(typeof p=="object"){if(typeof p.delimiter=="string"&&!o.BAD_DELIMITERS.filter(function(G){return p.delimiter.indexOf(G)!==-1}).length&&(R=p.delimiter),(typeof p.quotes=="boolean"||typeof p.quotes=="function"||Array.isArray(p.quotes))&&(b=p.quotes),(typeof p.skipEmptyLines=="boolean"||typeof p.skipEmptyLines=="string")&&(V=p.skipEmptyLines),typeof p.newline=="string"&&(D=p.newline),typeof p.quoteChar=="string"&&(L=p.quoteChar),typeof p.header=="boolean"&&(O=p.header),Array.isArray(p.columns)){if(p.columns.length===0)throw new Error("Option columns is empty");lt=p.columns}p.escapeChar!==void 0&&(I=p.escapeChar+L),p.escapeFormulae instanceof RegExp?yt=p.escapeFormulae:typeof p.escapeFormulae=="boolean"&&p.escapeFormulae&&(yt=/^[=+\-@\t\r].*$/)}}function C(G,Z,Y){var tt="";typeof G=="string"&&(G=JSON.parse(G)),typeof Z=="string"&&(Z=JSON.parse(Z));var Nt=Array.isArray(G)&&G.length>0,ot=!Array.isArray(Z[0]);if(Nt&&O){for(var Bt=0;Bt<G.length;Bt++)Bt>0&&(tt+=R),tt+=z(G[Bt],Bt);Z.length>0&&(tt+=D)}for(var et=0;et<Z.length;et++){var ke=Nt?G.length:Z[et].length,Pe=!1,F=Nt?Object.keys(Z[et]).length===0:Z[et].length===0;if(Y&&!Nt&&(Pe=Y==="greedy"?Z[et].join("").trim()==="":Z[et].length===1&&Z[et][0].length===0),Y==="greedy"&&Nt){for(var j=[],Q=0;Q<ke;Q++){var At=ot?G[Q]:Q;j.push(Z[et][At])}Pe=j.join("").trim()===""}if(!Pe){for(var k=0;k<ke;k++){k>0&&!F&&(tt+=R);var _t=Nt&&ot?G[k]:k;tt+=z(Z[et][_t],k)}et<Z.length-1&&(!Y||ke>0&&!F)&&(tt+=D)}}return tt}function z(G,Z){if(typeof G>"u"||G===null)return"";if(G.constructor===Date)return JSON.stringify(G).slice(1,25);var Y=!1;yt&&typeof G=="string"&&yt.test(G)&&(G="'"+G,Y=!0);var tt=G.toString().replace(K,I);return Y=Y||b===!0||typeof b=="function"&&b(G,Z)||Array.isArray(b)&&b[Z]||xt(tt,o.BAD_DELIMITERS)||tt.indexOf(R)>-1||tt.charAt(0)===" "||tt.charAt(tt.length-1)===" ",Y?L+tt+L:tt}function xt(G,Z){for(var Y=0;Y<Z.length;Y++)if(G.indexOf(Z[Y])>-1)return!0;return!1}}function f(c){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},p.call(this,c),this.parseChunk=function(b,O){let R=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&R>0){let yt=this._config.newline;if(!yt){let te=this._config.quoteChar||'"';yt=this._handle.guessLineEndings(b,te)}b=[...b.split(yt).slice(R)].join(yt)}if(this.isFirstChunk&&X(this._config.beforeFirstChunk)){var D=this._config.beforeFirstChunk(b);D!==void 0&&(b=D)}this.isFirstChunk=!1,this._halted=!1;var L=this._partialLine+b;this._partialLine="";var I=this._handle.parse(L,this._baseIndex,!this._finished);if(this._handle.paused()||this._handle.aborted()){this._halted=!0;return}var V=I.meta.cursor;this._finished||(this._partialLine=L.substring(V-this._baseIndex),this._baseIndex=V),I&&I.data&&(this._rowCount+=I.data.length);var lt=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(n)t.postMessage({results:I,workerId:o.WORKER_ID,finished:lt});else if(X(this._config.chunk)&&!O){if(this._config.chunk(I,this._handle),this._handle.paused()||this._handle.aborted()){this._halted=!0;return}I=void 0,this._completeResults=void 0}return!this._config.step&&!this._config.chunk&&(this._completeResults.data=this._completeResults.data.concat(I.data),this._completeResults.errors=this._completeResults.errors.concat(I.errors),this._completeResults.meta=I.meta),!this._completed&&lt&&X(this._config.complete)&&(!I||!I.meta.aborted)&&(this._config.complete(this._completeResults,this._input),this._completed=!0),!lt&&(!I||!I.meta.paused)&&this._nextChunk(),I},this._sendError=function(b){X(this._config.error)?this._config.error(b):n&&this._config.error&&t.postMessage({workerId:o.WORKER_ID,error:b,finished:!1})};function p(b){var O=hr(b);O.chunkSize=parseInt(O.chunkSize),!b.step&&!b.chunk&&(O.chunkSize=null),this._handle=new x(O),this._handle.streamer=this,this._config=O}}function d(c){c=c||{},c.chunkSize||(c.chunkSize=o.RemoteChunkSize),f.call(this,c);var p;i?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(O){this._input=O,this._nextChunk()},this._readChunk=function(){if(this._finished){this._chunkLoaded();return}if(p=new XMLHttpRequest,this._config.withCredentials&&(p.withCredentials=this._config.withCredentials),i||(p.onload=Ft(this._chunkLoaded,this),p.onerror=Ft(this._chunkError,this)),p.open(this._config.downloadRequestBody?"POST":"GET",this._input,!i),this._config.downloadRequestHeaders){var O=this._config.downloadRequestHeaders;for(var R in O)p.setRequestHeader(R,O[R])}if(this._config.chunkSize){var D=this._start+this._config.chunkSize-1;p.setRequestHeader("Range","bytes="+this._start+"-"+D)}try{p.send(this._config.downloadRequestBody)}catch(L){this._chunkError(L.message)}i&&p.status===0&&this._chunkError()},this._chunkLoaded=function(){if(p.readyState===4){if(p.status<200||p.status>=400){this._chunkError();return}this._start+=this._config.chunkSize?this._config.chunkSize:p.responseText.length,this._finished=!this._config.chunkSize||this._start>=b(p),this.parseChunk(p.responseText)}},this._chunkError=function(O){var R=p.statusText||O;this._sendError(new Error(R))};function b(O){var R=O.getResponseHeader("Content-Range");return R===null?-1:parseInt(R.substring(R.lastIndexOf("/")+1))}}d.prototype=Object.create(f.prototype),d.prototype.constructor=d;function m(c){c=c||{},c.chunkSize||(c.chunkSize=o.LocalChunkSize),f.call(this,c);var p,b,O=typeof FileReader<"u";this.stream=function(R){this._input=R,b=R.slice||R.webkitSlice||R.mozSlice,O?(p=new FileReader,p.onload=Ft(this._chunkLoaded,this),p.onerror=Ft(this._chunkError,this)):p=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){!this._finished&&(!this._config.preview||this._rowCount<this._config.preview)&&this._readChunk()},this._readChunk=function(){var R=this._input;if(this._config.chunkSize){var D=Math.min(this._start+this._config.chunkSize,this._input.size);R=b.call(R,this._start,D)}var L=p.readAsText(R,this._config.encoding);O||this._chunkLoaded({target:{result:L}})},this._chunkLoaded=function(R){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(R.target.result)},this._chunkError=function(){this._sendError(p.error)}}m.prototype=Object.create(f.prototype),m.prototype.constructor=m;function g(c){c=c||{},f.call(this,c);var p;this.stream=function(b){return p=b,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var b=this._config.chunkSize,O;return b?(O=p.substring(0,b),p=p.substring(b)):(O=p,p=""),this._finished=!p,this.parseChunk(O)}}}g.prototype=Object.create(g.prototype),g.prototype.constructor=g;function y(c){c=c||{},f.call(this,c);var p=[],b=!0,O=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(R){this._input=R,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){O&&p.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),p.length?this.parseChunk(p.shift()):b=!0},this._streamData=Ft(function(R){try{p.push(typeof R=="string"?R:R.toString(this._config.encoding)),b&&(b=!1,this._checkIsFinished(),this.parseChunk(p.shift()))}catch(D){this._streamError(D)}},this),this._streamError=Ft(function(R){this._streamCleanUp(),this._sendError(R)},this),this._streamEnd=Ft(function(){this._streamCleanUp(),O=!0,this._streamData("")},this),this._streamCleanUp=Ft(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}y.prototype=Object.create(f.prototype),y.prototype.constructor=y;function E(c){var p=Pp("stream").Duplex,b=hr(c),O=!0,R=!1,D=[],L=null;this._onCsvData=function(I){var V=I.data;!L.push(V)&&!this._handle.paused()&&this._handle.pause()},this._onCsvComplete=function(){L.push(null)},b.step=Ft(this._onCsvData,this),b.complete=Ft(this._onCsvComplete,this),f.call(this,b),this._nextChunk=function(){R&&D.length===1&&(this._finished=!0),D.length?D.shift()():O=!0},this._addToParseQueue=function(I,V){D.push(Ft(function(){if(this.parseChunk(typeof I=="string"?I:I.toString(b.encoding)),X(V))return V()},this)),O&&(O=!1,this._nextChunk())},this._onRead=function(){this._handle.paused()&&this._handle.resume()},this._onWrite=function(I,V,lt){this._addToParseQueue(I,lt)},this._onWriteComplete=function(){R=!0,this._addToParseQueue("")},this.getStream=function(){return L},L=new p({readableObjectMode:!0,decodeStrings:!1,read:Ft(this._onRead,this),write:Ft(this._onWrite,this)}),L.once("finish",Ft(this._onWriteComplete,this))}typeof PAPA_BROWSER_CONTEXT>"u"&&(E.prototype=Object.create(f.prototype),E.prototype.constructor=E);function x(c){var p=Math.pow(2,53),b=-p,O=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,R=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,D=this,L=0,I=0,V,lt,yt=!1,K=!1,te,C=[],z={data:[],errors:[],meta:{}};if(X(c.step)){var xt=c.step;c.step=function(F){if(z=F,tt())Y();else{if(Y(),z.data.length===0)return;L+=F.data.length,c.preview&&L>c.preview?lt.abort():(z.data=z.data[0],xt(z,D))}}}this.parse=function(F,j,Q){var At=c.quoteChar||'"';if(c.newline||(c.newline=this.guessLineEndings(F,At)),te=!1,c.delimiter)X(c.delimiter)&&(c.delimiter=c.delimiter(F),z.meta.delimiter=c.delimiter);else{var k=ke(F,c.newline,c.skipEmptyLines,c.comments,c.delimitersToGuess);k.successful?c.delimiter=k.bestDelimiter:(te=!0,c.delimiter=o.DefaultDelimiter),z.meta.delimiter=c.delimiter}var _t=hr(c);return c.preview&&c.header&&_t.preview++,V=F,lt=new T(_t),z=lt.parse(V,j,Q),Y(),yt?{meta:{paused:!0}}:z||{meta:{paused:!1}}},this.paused=function(){return yt},this.pause=function(){yt=!0,lt.abort(),V=X(c.chunk)?"":V.substring(lt.getCharIndex())},this.resume=function(){D.streamer._halted?(yt=!1,D.streamer.parseChunk(V,!0)):setTimeout(D.resume,3)},this.aborted=function(){return K},this.abort=function(){K=!0,lt.abort(),z.meta.aborted=!0,X(c.complete)&&c.complete(z),V=""},this.guessLineEndings=function(F,j){F=F.substring(0,1024*1024);var Q=new RegExp(A(j)+"([^]*?)"+A(j),"gm");F=F.replace(Q,"");var At=F.split("\r"),k=F.split(`
`),_t=k.length>1&&k[0].length<At[0].length;if(At.length===1||_t)return`
`;for(var ee=0,$t=0;$t<At.length;$t++)At[$t][0]===`
`&&ee++;return ee>=At.length/2?`\r
`:"\r"};function G(F){return c.skipEmptyLines==="greedy"?F.join("").trim()==="":F.length===1&&F[0].length===0}function Z(F){if(O.test(F)){var j=parseFloat(F);if(j>b&&j<p)return!0}return!1}function Y(){return z&&te&&(Pe("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),te=!1),c.skipEmptyLines&&(z.data=z.data.filter(function(F){return!G(F)})),tt()&&Nt(),et()}function tt(){return c.header&&C.length===0}function Nt(){if(!z)return;function F(Q,At){X(c.transformHeader)&&(Q=c.transformHeader(Q,At)),C.push(Q)}if(Array.isArray(z.data[0])){for(var j=0;tt()&&j<z.data.length;j++)z.data[j].forEach(F);z.data.splice(0,1)}else z.data.forEach(F)}function ot(F){return c.dynamicTypingFunction&&c.dynamicTyping[F]===void 0&&(c.dynamicTyping[F]=c.dynamicTypingFunction(F)),(c.dynamicTyping[F]||c.dynamicTyping)===!0}function Bt(F,j){return ot(F)?j==="true"||j==="TRUE"?!0:j==="false"||j==="FALSE"?!1:Z(j)?parseFloat(j):R.test(j)?new Date(j):j===""?null:j:j}function et(){if(!z||!c.header&&!c.dynamicTyping&&!c.transform)return z;function F(Q,At){var k=c.header?{}:[],_t;for(_t=0;_t<Q.length;_t++){var ee=_t,$t=Q[_t];c.header&&(ee=_t>=C.length?"__parsed_extra":C[_t]),c.transform&&($t=c.transform($t,ee)),$t=Bt(ee,$t),ee==="__parsed_extra"?(k[ee]=k[ee]||[],k[ee].push($t)):k[ee]=$t}return c.header&&(_t>C.length?Pe("FieldMismatch","TooManyFields","Too many fields: expected "+C.length+" fields but parsed "+_t,I+At):_t<C.length&&Pe("FieldMismatch","TooFewFields","Too few fields: expected "+C.length+" fields but parsed "+_t,I+At)),k}var j=1;return!z.data.length||Array.isArray(z.data[0])?(z.data=z.data.map(F),j=z.data.length):z.data=F(z.data,0),c.header&&z.meta&&(z.meta.fields=C),I+=j,z}function ke(F,j,Q,At,k){var _t,ee,$t,Ur;k=k||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var cr=0;cr<k.length;cr++){var Bi=k[cr],Fr=0,pr=0,se=0;$t=void 0;for(var je=new T({comments:At,delimiter:Bi,newline:j,preview:10}).parse(F),re=0;re<je.data.length;re++){if(Q&&G(je.data[re])){se++;continue}var me=je.data[re].length;if(pr+=me,typeof $t>"u"){$t=me;continue}else me>0&&(Fr+=Math.abs(me-$t),$t=me)}je.data.length>0&&(pr/=je.data.length-se),(typeof ee>"u"||Fr<=ee)&&(typeof Ur>"u"||pr>Ur)&&pr>1.99&&(ee=Fr,_t=Bi,Ur=pr)}return c.delimiter=_t,{successful:!!_t,bestDelimiter:_t}}function Pe(F,j,Q,At){var k={type:F,code:j,message:Q};At!==void 0&&(k.row=At),z.errors.push(k)}}function A(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function T(c){c=c||{};var p=c.delimiter,b=c.newline,O=c.comments,R=c.step,D=c.preview,L=c.fastMode,I,V=null,lt=!1;c.quoteChar===void 0||c.quoteChar===null?I='"':I=c.quoteChar;var yt=I;if(c.escapeChar!==void 0&&(yt=c.escapeChar),(typeof p!="string"||o.BAD_DELIMITERS.indexOf(p)>-1)&&(p=","),O===p)throw new Error("Comment character same as delimiter");O===!0?O="#":(typeof O!="string"||o.BAD_DELIMITERS.indexOf(O)>-1)&&(O=!1),b!==`
`&&b!=="\r"&&b!==`\r
`&&(b=`
`);var K=0,te=!1;this.parse=function(C,z,xt){if(typeof C!="string")throw new Error("Input must be a string");var G=C.length,Z=p.length,Y=b.length,tt=O.length,Nt=X(R);K=0;var ot=[],Bt=[],et=[],ke=0;if(!C)return se();if(L||L!==!1&&C.indexOf(I)===-1){for(var Pe=C.split(b),F=0;F<Pe.length;F++){if(et=Pe[F],K+=et.length,F!==Pe.length-1)K+=b.length;else if(xt)return se();if(!(O&&et.substring(0,tt)===O)){if(Nt){if(ot=[],cr(et.split(p)),je(),te)return se()}else cr(et.split(p));if(D&&F>=D)return ot=ot.slice(0,D),se(!0)}}return se()}for(var j=C.indexOf(p,K),Q=C.indexOf(b,K),At=new RegExp(A(yt)+A(I),"g"),k=C.indexOf(I,K);;){if(C[K]===I){for(k=K,K++;;){if(k=C.indexOf(I,k+1),k===-1)return xt||Bt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ot.length,index:K}),Fr();if(k===G-1){var _t=C.substring(K,k).replace(At,I);return Fr(_t)}if(I===yt&&C[k+1]===yt){k++;continue}if(!(I!==yt&&k!==0&&C[k-1]===yt)){j!==-1&&j<k+1&&(j=C.indexOf(p,k+1)),Q!==-1&&Q<k+1&&(Q=C.indexOf(b,k+1));var ee=Q===-1?j:Math.min(j,Q),$t=Bi(ee);if(C.substr(k+1+$t,Z)===p){et.push(C.substring(K,k).replace(At,I)),K=k+1+$t+Z,C[k+1+$t+Z]!==I&&(k=C.indexOf(I,K)),j=C.indexOf(p,K),Q=C.indexOf(b,K);break}var Ur=Bi(Q);if(C.substring(k+1+Ur,k+1+Ur+Y)===b){if(et.push(C.substring(K,k).replace(At,I)),pr(k+1+Ur+Y),j=C.indexOf(p,K),k=C.indexOf(I,K),Nt&&(je(),te))return se();if(D&&ot.length>=D)return se(!0);break}Bt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ot.length,index:K}),k++}}continue}if(O&&et.length===0&&C.substring(K,K+tt)===O){if(Q===-1)return se();K=Q+Y,Q=C.indexOf(b,K),j=C.indexOf(p,K);continue}if(j!==-1&&(j<Q||Q===-1)){et.push(C.substring(K,j)),K=j+Z,j=C.indexOf(p,K);continue}if(Q!==-1){if(et.push(C.substring(K,Q)),pr(Q+Y),Nt&&(je(),te))return se();if(D&&ot.length>=D)return se(!0);continue}break}return Fr();function cr(re){ot.push(re),ke=K}function Bi(re){var me=0;if(re!==-1){var dr=C.substring(k+1,re);dr&&dr.trim()===""&&(me=dr.length)}return me}function Fr(re){return xt||(typeof re>"u"&&(re=C.substring(K)),et.push(re),K=G,cr(et),Nt&&je()),se()}function pr(re){K=re,cr(et),et=[],Q=C.indexOf(b,K)}function se(re){if(c.header&&!z&&ot.length&&!lt){let me=ot[0],dr=Object.create(null),ea=new Set(me),vo=!1;for(let Jr=0;Jr<me.length;Jr++){let We=me[Jr];if(X(c.transformHeader)&&(We=c.transformHeader(We,Jr)),!dr[We])dr[We]=1,me[Jr]=We;else{let $i,Oo=dr[We];do $i=`${We}_${Oo}`,Oo++;while(ea.has($i));ea.add($i),me[Jr]=$i,dr[We]++,vo=!0,V===null&&(V={}),V[$i]=We}ea.add(We)}vo&&console.warn("Duplicate headers found and renamed."),lt=!0}return{data:ot,errors:Bt,meta:{delimiter:p,linebreak:b,aborted:te,truncated:!!re,cursor:ke+(z||0),renamedHeaders:V}}}function je(){R(se()),ot=[],Bt=[]}},this.abort=function(){te=!0},this.getCharIndex=function(){return K}}function $(){if(!o.WORKERS_SUPPORTED)return!1;var c=r(),p=new t.Worker(c);return p.onmessage=W,p.id=a++,s[p.id]=p,p}function W(c){var p=c.data,b=s[p.workerId],O=!1;if(p.error)b.userError(p.error,p.file);else if(p.results&&p.results.data){var R=function(){O=!0,Vt(p.workerId,{data:[],errors:[],meta:{aborted:!0}})},D={abort:R,pause:Zr,resume:Zr};if(X(b.userStep)){for(var L=0;L<p.results.data.length&&(b.userStep({data:p.results.data[L],errors:p.results.errors,meta:p.results.meta},D),!O);L++);delete p.results}else X(b.userChunk)&&(b.userChunk(p.results,D,p.file),delete p.results)}p.finished&&!O&&Vt(p.workerId,p.results)}function Vt(c,p){var b=s[c];X(b.userComplete)&&b.userComplete(p),b.terminate(),delete s[c]}function Zr(){throw new Error("Not implemented.")}function Se(c){var p=c.data;if(typeof o.WORKER_ID>"u"&&p&&(o.WORKER_ID=p.workerId),typeof p.input=="string")t.postMessage({workerId:o.WORKER_ID,results:o.parse(p.input,p.config),finished:!0});else if(t.File&&p.input instanceof File||p.input instanceof Object){var b=o.parse(p.input,p.config);b&&t.postMessage({workerId:o.WORKER_ID,results:b,finished:!0})}}function hr(c){if(typeof c!="object"||c===null)return c;var p=Array.isArray(c)?[]:{};for(var b in c)p[b]=hr(c[b]);return p}function Ft(c,p){return function(){c.apply(p,arguments)}}function X(c){return typeof c=="function"}return o})});var Gs=mt((QB,Kh)=>{"use strict";function Yt(e){this.__parent=e,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}Yt.prototype.clone_empty=function(){var e=new Yt(this.__parent);return e.set_indent(this.__indent_count,this.__alignment_count),e};Yt.prototype.item=function(e){return e<0?this.__items[this.__items.length+e]:this.__items[e]};Yt.prototype.has_match=function(e){for(var t=this.__items.length-1;t>=0;t--)if(this.__items[t].match(e))return!0;return!1};Yt.prototype.set_indent=function(e,t){this.is_empty()&&(this.__indent_count=e||0,this.__alignment_count=t||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))};Yt.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)};Yt.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count};Yt.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var e=this.__parent.current_line;return e.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),e.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),e.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count,e.__items[0]===" "&&(e.__items.splice(0,1),e.__character_count-=1),!0}return!1};Yt.prototype.is_empty=function(){return this.__items.length===0};Yt.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]};Yt.prototype.push=function(e){this.__items.push(e);var t=e.lastIndexOf(`
`);t!==-1?this.__character_count=e.length-t:this.__character_count+=e.length};Yt.prototype.pop=function(){var e=null;return this.is_empty()||(e=this.__items.pop(),this.__character_count-=e.length),e};Yt.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)};Yt.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)};Yt.prototype.trim=function(){for(;this.last()===" ";)this.__items.pop(),this.__character_count-=1};Yt.prototype.toString=function(){var e="";return this.is_empty()?this.__parent.indent_empty_lines&&(e=this.__parent.get_indent_string(this.__indent_count)):(e=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),e+=this.__items.join("")),e};function En(e,t){this.__cache=[""],this.__indent_size=e.indent_size,this.__indent_string=e.indent_char,e.indent_with_tabs||(this.__indent_string=new Array(e.indent_size+1).join(e.indent_char)),t=t||"",e.indent_level>0&&(t=new Array(e.indent_level+1).join(this.__indent_string)),this.__base_string=t,this.__base_string_length=t.length}En.prototype.get_indent_size=function(e,t){var r=this.__base_string_length;return t=t||0,e<0&&(r=0),r+=e*this.__indent_size,r+=t,r};En.prototype.get_indent_string=function(e,t){var r=this.__base_string;return t=t||0,e<0&&(e=0,r=""),t+=e*this.__indent_size,this.__ensure_cache(t),r+=this.__cache[t],r};En.prototype.__ensure_cache=function(e){for(;e>=this.__cache.length;)this.__add_column()};En.prototype.__add_column=function(){var e=this.__cache.length,t=0,r="";this.__indent_size&&e>=this.__indent_size&&(t=Math.floor(e/this.__indent_size),e-=t*this.__indent_size,r=new Array(t+1).join(this.__indent_string)),e&&(r+=new Array(e+1).join(" ")),this.__cache.push(r)};function Qt(e,t){this.__indent_cache=new En(e,t),this.raw=!1,this._end_with_newline=e.end_with_newline,this.indent_size=e.indent_size,this.wrap_line_length=e.wrap_line_length,this.indent_empty_lines=e.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new Yt(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}Qt.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)};Qt.prototype.get_line_number=function(){return this.__lines.length};Qt.prototype.get_indent_string=function(e,t){return this.__indent_cache.get_indent_string(e,t)};Qt.prototype.get_indent_size=function(e,t){return this.__indent_cache.get_indent_size(e,t)};Qt.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()};Qt.prototype.add_new_line=function(e){return this.is_empty()||!e&&this.just_added_newline()?!1:(this.raw||this.__add_outputline(),!0)};Qt.prototype.get_code=function(e){this.trim(!0);var t=this.current_line.pop();t&&(t[t.length-1]===`
`&&(t=t.replace(/\n+$/g,"")),this.current_line.push(t)),this._end_with_newline&&this.__add_outputline();var r=this.__lines.join(`
`);return e!==`
`&&(r=r.replace(/[\n]/g,e)),r};Qt.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()};Qt.prototype.set_indent=function(e,t){return e=e||0,t=t||0,this.next_line.set_indent(e,t),this.__lines.length>1?(this.current_line.set_indent(e,t),!0):(this.current_line.set_indent(),!1)};Qt.prototype.add_raw_token=function(e){for(var t=0;t<e.newlines;t++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(e.whitespace_before),this.current_line.push(e.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1};Qt.prototype.add_token=function(e){this.__add_space_before_token(),this.current_line.push(e),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()};Qt.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(" "))};Qt.prototype.remove_indent=function(e){for(var t=this.__lines.length;e<t;)this.__lines[e]._remove_indent(),e++;this.current_line._remove_wrap_indent()};Qt.prototype.trim=function(e){for(e=e===void 0?!1:e,this.current_line.trim();e&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null};Qt.prototype.just_added_newline=function(){return this.current_line.is_empty()};Qt.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()};Qt.prototype.ensure_empty_line_above=function(e,t){for(var r=this.__lines.length-2;r>=0;){var i=this.__lines[r];if(i.is_empty())break;if(i.item(0).indexOf(e)!==0&&i.item(-1)!==t){this.__lines.splice(r+1,0,new Yt(this)),this.previous_line=this.__lines[this.__lines.length-2];break}r--}};Kh.exports.Output=Qt});var Xa=mt((ZB,zh)=>{"use strict";function sA(e,t,r,i){this.type=e,this.text=t,this.comments_before=null,this.newlines=r||0,this.whitespace_before=i||"",this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}zh.exports.Token=sA});var Za=mt(ur=>{"use strict";var aA="\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a",qh="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",Ya="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",Vh="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",Qa="\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}",Hh="(?:"+Qa+"|["+aA+Ya+"])",oA="(?:"+Qa+"|["+qh+Ya+Vh+"])*";ur.identifier=new RegExp(Hh+oA,"g");ur.identifierStart=new RegExp(Hh);ur.identifierMatch=new RegExp("(?:"+Qa+"|["+qh+Ya+Vh+"])+");ur.newline=/[\n\r\u2028\u2029]/;ur.lineBreak=new RegExp(`\r
|`+ur.newline.source);ur.allLineBreaks=new RegExp(ur.lineBreak.source,"g")});var zs=mt((t$,Ks)=>{"use strict";function Lr(e,t){this.raw_options=Xh(e,t),this.disabled=this._get_boolean("disabled"),this.eol=this._get_characters("eol","auto"),this.end_with_newline=this._get_boolean("end_with_newline"),this.indent_size=this._get_number("indent_size",4),this.indent_char=this._get_characters("indent_char"," "),this.indent_level=this._get_number("indent_level"),this.preserve_newlines=this._get_boolean("preserve_newlines",!0),this.max_preserve_newlines=this._get_number("max_preserve_newlines",32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean("indent_with_tabs",this.indent_char==="	"),this.indent_with_tabs&&(this.indent_char="	",this.indent_size===1&&(this.indent_size=4)),this.wrap_line_length=this._get_number("wrap_line_length",this._get_number("max_char")),this.indent_empty_lines=this._get_boolean("indent_empty_lines"),this.templating=this._get_selection_list("templating",["auto","none","angular","django","erb","handlebars","php","smarty"],["auto"])}Lr.prototype._get_array=function(e,t){var r=this.raw_options[e],i=t||[];return typeof r=="object"?r!==null&&typeof r.concat=="function"&&(i=r.concat()):typeof r=="string"&&(i=r.split(/[^a-zA-Z0-9_\/\-]+/)),i};Lr.prototype._get_boolean=function(e,t){var r=this.raw_options[e],i=r===void 0?!!t:!!r;return i};Lr.prototype._get_characters=function(e,t){var r=this.raw_options[e],i=t||"";return typeof r=="string"&&(i=r.replace(/\\r/,"\r").replace(/\\n/,`
`).replace(/\\t/,"	")),i};Lr.prototype._get_number=function(e,t){var r=this.raw_options[e];t=parseInt(t,10),isNaN(t)&&(t=0);var i=parseInt(r,10);return isNaN(i)&&(i=t),i};Lr.prototype._get_selection=function(e,t,r){var i=this._get_selection_list(e,t,r);if(i.length!==1)throw new Error("Invalid Option Value: The option '"+e+`' can only be one of the following values:
`+t+`
You passed in: '`+this.raw_options[e]+"'");return i[0]};Lr.prototype._get_selection_list=function(e,t,r){if(!t||t.length===0)throw new Error("Selection list cannot be empty.");if(r=r||[t[0]],!this._is_valid_selection(r,t))throw new Error("Invalid Default Value!");var i=this._get_array(e,r);if(!this._is_valid_selection(i,t))throw new Error("Invalid Option Value: The option '"+e+`' can contain only the following values:
`+t+`
You passed in: '`+this.raw_options[e]+"'");return i};Lr.prototype._is_valid_selection=function(e,t){return e.length&&t.length&&!e.some(function(r){return t.indexOf(r)===-1})};function Xh(e,t){var r={};e=Yh(e);var i;for(i in e)i!==t&&(r[i]=e[i]);if(t&&e[t])for(i in e[t])r[i]=e[t][i];return r}function Yh(e){var t={},r;for(r in e){var i=r.replace(/-/g,"_");t[i]=e[r]}return t}Ks.exports.Options=Lr;Ks.exports.normalizeOpts=Yh;Ks.exports.mergeOpts=Xh});var Ja=mt((e$,Jh)=>{"use strict";var Qh=zs().Options,uA=["before-newline","after-newline","preserve-newline"];function Zh(e){Qh.call(this,e,"js");var t=this.raw_options.brace_style||null;t==="expand-strict"?this.raw_options.brace_style="expand":t==="collapse-preserve-inline"?this.raw_options.brace_style="collapse,preserve-inline":this.raw_options.braces_on_own_line!==void 0&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var r=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var i=0;i<r.length;i++)r[i]==="preserve-inline"?this.brace_preserve_inline=!0:this.brace_style=r[i];this.unindent_chained_methods=this._get_boolean("unindent_chained_methods"),this.break_chained_methods=this._get_boolean("break_chained_methods"),this.space_in_paren=this._get_boolean("space_in_paren"),this.space_in_empty_paren=this._get_boolean("space_in_empty_paren"),this.jslint_happy=this._get_boolean("jslint_happy"),this.space_after_anon_function=this._get_boolean("space_after_anon_function"),this.space_after_named_function=this._get_boolean("space_after_named_function"),this.keep_array_indentation=this._get_boolean("keep_array_indentation"),this.space_before_conditional=this._get_boolean("space_before_conditional",!0),this.unescape_strings=this._get_boolean("unescape_strings"),this.e4x=this._get_boolean("e4x"),this.comma_first=this._get_boolean("comma_first"),this.operator_position=this._get_selection("operator_position",uA),this.test_output_raw=this._get_boolean("test_output_raw"),this.jslint_happy&&(this.space_after_anon_function=!0)}Zh.prototype=new Qh;Jh.exports.Options=Zh});var qs=mt((r$,ec)=>{"use strict";var tc=RegExp.prototype.hasOwnProperty("sticky");function ne(e){this.__input=e||"",this.__input_length=this.__input.length,this.__position=0}ne.prototype.restart=function(){this.__position=0};ne.prototype.back=function(){this.__position>0&&(this.__position-=1)};ne.prototype.hasNext=function(){return this.__position<this.__input_length};ne.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__input.charAt(this.__position),this.__position+=1),e};ne.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__input_length&&(t=this.__input.charAt(e)),t};ne.prototype.__match=function(e,t){e.lastIndex=t;var r=e.exec(this.__input);return r&&!(tc&&e.sticky)&&r.index!==t&&(r=null),r};ne.prototype.test=function(e,t){return t=t||0,t+=this.__position,t>=0&&t<this.__input_length?!!this.__match(e,t):!1};ne.prototype.testChar=function(e,t){var r=this.peek(t);return e.lastIndex=0,r!==null&&e.test(r)};ne.prototype.match=function(e){var t=this.__match(e,this.__position);return t?this.__position+=t[0].length:t=null,t};ne.prototype.read=function(e,t,r){var i="",n;return e&&(n=this.match(e),n&&(i+=n[0])),t&&(n||!e)&&(i+=this.readUntil(t,r)),i};ne.prototype.readUntil=function(e,t){var r="",i=this.__position;e.lastIndex=this.__position;var n=e.exec(this.__input);return n?(i=n.index,t&&(i+=n[0].length)):i=this.__input_length,r=this.__input.substring(this.__position,i),this.__position=i,r};ne.prototype.readUntilAfter=function(e){return this.readUntil(e,!0)};ne.prototype.get_regexp=function(e,t){var r=null,i="g";return t&&tc&&(i="y"),typeof e=="string"&&e!==""?r=new RegExp(e,i):e&&(r=new RegExp(e.source,i)),r};ne.prototype.get_literal_regexp=function(e){return RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))};ne.prototype.peekUntilAfter=function(e){var t=this.__position,r=this.readUntilAfter(e);return this.__position=t,r};ne.prototype.lookBack=function(e){var t=this.__position-1;return t>=e.length&&this.__input.substring(t-e.length,t).toLowerCase()===e};ec.exports.InputScanner=ne});var ic=mt((i$,rc)=>{"use strict";function Xr(e){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=e}Xr.prototype.restart=function(){this.__position=0};Xr.prototype.isEmpty=function(){return this.__tokens_length===0};Xr.prototype.hasNext=function(){return this.__position<this.__tokens_length};Xr.prototype.next=function(){var e=null;return this.hasNext()&&(e=this.__tokens[this.__position],this.__position+=1),e};Xr.prototype.peek=function(e){var t=null;return e=e||0,e+=this.__position,e>=0&&e<this.__tokens_length&&(t=this.__tokens[e]),t};Xr.prototype.add=function(e){this.__parent_token&&(e.parent=this.__parent_token),this.__tokens.push(e),this.__tokens_length+=1};rc.exports.TokenStream=Xr});var yn=mt((n$,nc)=>{"use strict";function Ze(e,t){this._input=e,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,t&&(this._starting_pattern=this._input.get_regexp(t._starting_pattern,!0),this._match_pattern=this._input.get_regexp(t._match_pattern,!0),this._until_pattern=this._input.get_regexp(t._until_pattern),this._until_after=t._until_after)}Ze.prototype.read=function(){var e=this._input.read(this._starting_pattern);return(!this._starting_pattern||e)&&(e+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),e};Ze.prototype.read_match=function(){return this._input.match(this._match_pattern)};Ze.prototype.until_after=function(e){var t=this._create();return t._until_after=!0,t._until_pattern=this._input.get_regexp(e),t._update(),t};Ze.prototype.until=function(e){var t=this._create();return t._until_after=!1,t._until_pattern=this._input.get_regexp(e),t._update(),t};Ze.prototype.starting_with=function(e){var t=this._create();return t._starting_pattern=this._input.get_regexp(e,!0),t._update(),t};Ze.prototype.matching=function(e){var t=this._create();return t._match_pattern=this._input.get_regexp(e,!0),t._update(),t};Ze.prototype._create=function(){return new Ze(this._input,this)};Ze.prototype._update=function(){};nc.exports.Pattern=Ze});var oc=mt((s$,ac)=>{"use strict";var sc=yn().Pattern;function kr(e,t){sc.call(this,e,t),t?this._line_regexp=this._input.get_regexp(t._line_regexp):this.__set_whitespace_patterns("",""),this.newline_count=0,this.whitespace_before_token=""}kr.prototype=new sc;kr.prototype.__set_whitespace_patterns=function(e,t){e+="\\t ",t+="\\n\\r",this._match_pattern=this._input.get_regexp("["+e+t+"]+",!0),this._newline_regexp=this._input.get_regexp("\\r\\n|["+t+"]")};kr.prototype.read=function(){this.newline_count=0,this.whitespace_before_token="";var e=this._input.read(this._match_pattern);if(e===" ")this.whitespace_before_token=" ";else if(e){var t=this.__split(this._newline_regexp,e);this.newline_count=t.length-1,this.whitespace_before_token=t[this.newline_count]}return e};kr.prototype.matching=function(e,t){var r=this._create();return r.__set_whitespace_patterns(e,t),r._update(),r};kr.prototype._create=function(){return new kr(this._input,this)};kr.prototype.__split=function(e,t){e.lastIndex=0;for(var r=0,i=[],n=e.exec(t);n;)i.push(t.substring(r,n.index)),r=n.index+n[0].length,n=e.exec(t);return r<t.length?i.push(t.substring(r,t.length)):i.push(""),i};ac.exports.WhitespacePattern=kr});var Tn=mt((a$,eo)=>{"use strict";var lA=qs().InputScanner,uc=Xa().Token,to=ic().TokenStream,fA=oc().WhitespacePattern,xn={START:"TK_START",RAW:"TK_RAW",EOF:"TK_EOF"},Je=function(e,t){this._input=new lA(e),this._options=t||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new fA(this._input)};Je.prototype.tokenize=function(){this._input.restart(),this.__tokens=new to,this._reset();for(var e,t=new uc(xn.START,""),r=null,i=[],n=new to;t.type!==xn.EOF;){for(e=this._get_next_token(t,r);this._is_comment(e);)n.add(e),e=this._get_next_token(t,r);n.isEmpty()||(e.comments_before=n,n=new to),e.parent=r,this._is_opening(e)?(i.push(r),r=e):r&&this._is_closing(e,r)&&(e.opened=r,r.closed=e,r=i.pop(),e.parent=r),e.previous=t,t.next=e,this.__tokens.add(e),t=e}return this.__tokens};Je.prototype._is_first_token=function(){return this.__tokens.isEmpty()};Je.prototype._reset=function(){};Je.prototype._get_next_token=function(e,t){this._readWhitespace();var r=this._input.read(/.+/g);return r?this._create_token(xn.RAW,r):this._create_token(xn.EOF,"")};Je.prototype._is_comment=function(e){return!1};Je.prototype._is_opening=function(e){return!1};Je.prototype._is_closing=function(e,t){return!1};Je.prototype._create_token=function(e,t){var r=new uc(e,t,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token);return r};Je.prototype._readWhitespace=function(){return this._patterns.whitespace.read()};eo.exports.Tokenizer=Je;eo.exports.TOKEN=xn});var Vs=mt((o$,lc)=>{"use strict";function ro(e,t){e=typeof e=="string"?e:e.source,t=typeof t=="string"?t:t.source,this.__directives_block_pattern=new RegExp(e+/ beautify( \w+[:]\w+)+ /.source+t,"g"),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(e+/\sbeautify\signore:end\s/.source+t,"g")}ro.prototype.get_directives=function(e){if(!e.match(this.__directives_block_pattern))return null;var t={};this.__directive_pattern.lastIndex=0;for(var r=this.__directive_pattern.exec(e);r;)t[r[1]]=r[2],r=this.__directive_pattern.exec(e);return t};ro.prototype.readIgnored=function(e){return e.readUntilAfter(this.__directives_end_ignore_pattern)};lc.exports.Directives=ro});var so=mt((u$,fc)=>{"use strict";var io=yn().Pattern,no={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1,angular:!1};function $e(e,t){io.call(this,e,t),this.__template_pattern=null,this._disabled=Object.assign({},no),this._excluded=Object.assign({},no),t&&(this.__template_pattern=this._input.get_regexp(t.__template_pattern),this._excluded=Object.assign(this._excluded,t._excluded),this._disabled=Object.assign(this._disabled,t._disabled));var r=new io(e);this.__patterns={handlebars_comment:r.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:r.starting_with(/{{{/).until_after(/}}}/),handlebars:r.starting_with(/{{/).until_after(/}}/),php:r.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:r.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:r.starting_with(/{%/).until_after(/%}/),django_value:r.starting_with(/{{/).until_after(/}}/),django_comment:r.starting_with(/{#/).until_after(/#}/),smarty:r.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:r.starting_with(/{\*/).until_after(/\*}/),smarty_literal:r.starting_with(/{literal}/).until_after(/{\/literal}/)}}$e.prototype=new io;$e.prototype._create=function(){return new $e(this._input,this)};$e.prototype._update=function(){this.__set_templated_pattern()};$e.prototype.disable=function(e){var t=this._create();return t._disabled[e]=!0,t._update(),t};$e.prototype.read_options=function(e){var t=this._create();for(var r in no)t._disabled[r]=e.templating.indexOf(r)===-1;return t._update(),t};$e.prototype.exclude=function(e){var t=this._create();return t._excluded[e]=!0,t._update(),t};$e.prototype.read=function(){var e="";this._match_pattern?e=this._input.read(this._starting_pattern):e=this._input.read(this._starting_pattern,this.__template_pattern);for(var t=this._read_template();t;)this._match_pattern?t+=this._input.read(this._match_pattern):t+=this._input.readUntil(this.__template_pattern),e+=t,t=this._read_template();return this._until_after&&(e+=this._input.readUntilAfter(this._until_pattern)),e};$e.prototype.__set_templated_pattern=function(){var e=[];this._disabled.php||e.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.angular||e.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||e.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(e.push(this.__patterns.django._starting_pattern.source),e.push(this.__patterns.django_value._starting_pattern.source),e.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||e.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&e.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp("(?:"+e.join("|")+")")};$e.prototype._read_template=function(){var e="",t=this._input.peek();if(t==="<"){var r=this._input.peek(1);!this._disabled.php&&!this._excluded.php&&r==="?"&&(e=e||this.__patterns.php.read()),!this._disabled.erb&&!this._excluded.erb&&r==="%"&&(e=e||this.__patterns.erb.read())}else t==="{"&&(!this._disabled.handlebars&&!this._excluded.handlebars&&(e=e||this.__patterns.handlebars_comment.read(),e=e||this.__patterns.handlebars_unescaped.read(),e=e||this.__patterns.handlebars.read()),this._disabled.django||(!this._excluded.django&&!this._excluded.handlebars&&(e=e||this.__patterns.django_value.read()),this._excluded.django||(e=e||this.__patterns.django_comment.read(),e=e||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(e=e||this.__patterns.smarty_comment.read(),e=e||this.__patterns.smarty_literal.read(),e=e||this.__patterns.smarty.read()));return e};fc.exports.TemplatablePattern=$e});var An=mt((l$,bn)=>{"use strict";var hA=qs().InputScanner,cc=Tn().Tokenizer,ao=Tn().TOKEN,cA=Vs().Directives,Ce=Za(),pA=yn().Pattern,dA=so().TemplatablePattern;function oo(e,t){return t.indexOf(e)!==-1}var P={START_EXPR:"TK_START_EXPR",END_EXPR:"TK_END_EXPR",START_BLOCK:"TK_START_BLOCK",END_BLOCK:"TK_END_BLOCK",WORD:"TK_WORD",RESERVED:"TK_RESERVED",SEMICOLON:"TK_SEMICOLON",STRING:"TK_STRING",EQUALS:"TK_EQUALS",OPERATOR:"TK_OPERATOR",COMMA:"TK_COMMA",BLOCK_COMMENT:"TK_BLOCK_COMMENT",COMMENT:"TK_COMMENT",DOT:"TK_DOT",UNKNOWN:"TK_UNKNOWN",START:ao.START,RAW:ao.RAW,EOF:ao.EOF},hc=new cA(/\/\*/,/\*\//),_A=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,mA=/[0-9]/,gA=/[^\d\.]/,EA=">>> === !== &&= ??= ||= << && >= ** != == <= >> || ?? |> < / - + > : & % ? ^ | *".split(" "),Yr=">>>= ... >>= <<= === >>> !== **= &&= ??= ||= => ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> = ! ? > < : / ^ - + * & % ~ |";Yr=Yr.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&");Yr="\\?\\.(?!\\d) "+Yr;Yr=Yr.replace(/ /g,"|");var yA=new RegExp(Yr),pc="continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export".split(","),xA=pc.concat(["do","in","of","else","get","set","new","catch","finally","typeof","yield","async","await","from","as","class","extends"]),TA=new RegExp("^(?:"+xA.join("|")+")$"),Hs,Zt=function(e,t){cc.call(this,e,t),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var r=new pA(this._input),i=new dA(this._input).read_options(this._options);this.__patterns={template:i,identifier:i.starting_with(Ce.identifier).matching(Ce.identifierMatch),number:r.matching(_A),punct:r.matching(yA),comment:r.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:r.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:r.matching(/<!--/),html_comment_end:r.matching(/-->/),include:r.starting_with(/#include/).until_after(Ce.lineBreak),shebang:r.starting_with(/#!/).until_after(Ce.lineBreak),xml:r.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:i.until(/['\\\n\r\u2028\u2029]/),double_quote:i.until(/["\\\n\r\u2028\u2029]/),template_text:i.until(/[`\\$]/),template_expression:i.until(/[`}\\]/)}};Zt.prototype=new cc;Zt.prototype._is_comment=function(e){return e.type===P.COMMENT||e.type===P.BLOCK_COMMENT||e.type===P.UNKNOWN};Zt.prototype._is_opening=function(e){return e.type===P.START_BLOCK||e.type===P.START_EXPR};Zt.prototype._is_closing=function(e,t){return(e.type===P.END_BLOCK||e.type===P.END_EXPR)&&t&&(e.text==="]"&&t.text==="["||e.text===")"&&t.text==="("||e.text==="}"&&t.text==="{")};Zt.prototype._reset=function(){Hs=!1};Zt.prototype._get_next_token=function(e,t){var r=null;this._readWhitespace();var i=this._input.peek();return i===null?this._create_token(P.EOF,""):(r=r||this._read_non_javascript(i),r=r||this._read_string(i),r=r||this._read_pair(i,this._input.peek(1)),r=r||this._read_word(e),r=r||this._read_singles(i),r=r||this._read_comment(i),r=r||this._read_regexp(i,e),r=r||this._read_xml(i,e),r=r||this._read_punctuation(),r=r||this._create_token(P.UNKNOWN,this._input.next()),r)};Zt.prototype._read_word=function(e){var t;if(t=this.__patterns.identifier.read(),t!=="")return t=t.replace(Ce.allLineBreaks,`
`),!(e.type===P.DOT||e.type===P.RESERVED&&(e.text==="set"||e.text==="get"))&&TA.test(t)?(t==="in"||t==="of")&&(e.type===P.WORD||e.type===P.STRING)?this._create_token(P.OPERATOR,t):this._create_token(P.RESERVED,t):this._create_token(P.WORD,t);if(t=this.__patterns.number.read(),t!=="")return this._create_token(P.WORD,t)};Zt.prototype._read_singles=function(e){var t=null;return e==="("||e==="["?t=this._create_token(P.START_EXPR,e):e===")"||e==="]"?t=this._create_token(P.END_EXPR,e):e==="{"?t=this._create_token(P.START_BLOCK,e):e==="}"?t=this._create_token(P.END_BLOCK,e):e===";"?t=this._create_token(P.SEMICOLON,e):e==="."&&gA.test(this._input.peek(1))?t=this._create_token(P.DOT,e):e===","&&(t=this._create_token(P.COMMA,e)),t&&this._input.next(),t};Zt.prototype._read_pair=function(e,t){var r=null;return e==="#"&&t==="{"&&(r=this._create_token(P.START_BLOCK,e+t)),r&&(this._input.next(),this._input.next()),r};Zt.prototype._read_punctuation=function(){var e=this.__patterns.punct.read();if(e!=="")return e==="="?this._create_token(P.EQUALS,e):e==="?."?this._create_token(P.DOT,e):this._create_token(P.OPERATOR,e)};Zt.prototype._read_non_javascript=function(e){var t="";if(e==="#"){if(this._is_first_token()&&(t=this.__patterns.shebang.read(),t))return this._create_token(P.UNKNOWN,t.trim()+`
`);if(t=this.__patterns.include.read(),t)return this._create_token(P.UNKNOWN,t.trim()+`
`);e=this._input.next();var r="#";if(this._input.hasNext()&&this._input.testChar(mA)){do e=this._input.next(),r+=e;while(this._input.hasNext()&&e!=="#"&&e!=="=");return e==="#"||(this._input.peek()==="["&&this._input.peek(1)==="]"?(r+="[]",this._input.next(),this._input.next()):this._input.peek()==="{"&&this._input.peek(1)==="}"&&(r+="{}",this._input.next(),this._input.next())),this._create_token(P.WORD,r)}this._input.back()}else if(e==="<"&&this._is_first_token()){if(t=this.__patterns.html_comment_start.read(),t){for(;this._input.hasNext()&&!this._input.testChar(Ce.newline);)t+=this._input.next();return Hs=!0,this._create_token(P.COMMENT,t)}}else if(Hs&&e==="-"&&(t=this.__patterns.html_comment_end.read(),t))return Hs=!1,this._create_token(P.COMMENT,t);return null};Zt.prototype._read_comment=function(e){var t=null;if(e==="/"){var r="";if(this._input.peek(1)==="*"){r=this.__patterns.block_comment.read();var i=hc.get_directives(r);i&&i.ignore==="start"&&(r+=hc.readIgnored(this._input)),r=r.replace(Ce.allLineBreaks,`
`),t=this._create_token(P.BLOCK_COMMENT,r),t.directives=i}else this._input.peek(1)==="/"&&(r=this.__patterns.comment.read(),t=this._create_token(P.COMMENT,r))}return t};Zt.prototype._read_string=function(e){if(e==="`"||e==="'"||e==='"'){var t=this._input.next();return this.has_char_escapes=!1,e==="`"?t+=this._read_string_recursive("`",!0,"${"):t+=this._read_string_recursive(e),this.has_char_escapes&&this._options.unescape_strings&&(t=bA(t)),this._input.peek()===e&&(t+=this._input.next()),t=t.replace(Ce.allLineBreaks,`
`),this._create_token(P.STRING,t)}return null};Zt.prototype._allow_regexp_or_xml=function(e){return e.type===P.RESERVED&&oo(e.text,["return","case","throw","else","do","typeof","yield"])||e.type===P.END_EXPR&&e.text===")"&&e.opened.previous.type===P.RESERVED&&oo(e.opened.previous.text,["if","while","for"])||oo(e.type,[P.COMMENT,P.START_EXPR,P.START_BLOCK,P.START,P.END_BLOCK,P.OPERATOR,P.EQUALS,P.EOF,P.SEMICOLON,P.COMMA])};Zt.prototype._read_regexp=function(e,t){if(e==="/"&&this._allow_regexp_or_xml(t)){for(var r=this._input.next(),i=!1,n=!1;this._input.hasNext()&&(i||n||this._input.peek()!==e)&&!this._input.testChar(Ce.newline);)r+=this._input.peek(),i?i=!1:(i=this._input.peek()==="\\",this._input.peek()==="["?n=!0:this._input.peek()==="]"&&(n=!1)),this._input.next();return this._input.peek()===e&&(r+=this._input.next(),r+=this._input.read(Ce.identifier)),this._create_token(P.STRING,r)}return null};Zt.prototype._read_xml=function(e,t){if(this._options.e4x&&e==="<"&&this._allow_regexp_or_xml(t)){var r="",i=this.__patterns.xml.read_match();if(i){for(var n=i[2].replace(/^{\s+/,"{").replace(/\s+}$/,"}"),s=n.indexOf("{")===0,a=0;i;){var o=!!i[1],u=i[2],l=!!i[i.length-1]||u.slice(0,8)==="![CDATA[";if(!l&&(u===n||s&&u.replace(/^{\s+/,"{").replace(/\s+}$/,"}"))&&(o?--a:++a),r+=i[0],a<=0)break;i=this.__patterns.xml.read_match()}return i||(r+=this._input.match(/[\s\S]*/g)[0]),r=r.replace(Ce.allLineBreaks,`
`),this._create_token(P.STRING,r)}}return null};function bA(e){for(var t="",r=0,i=new hA(e),n=null;i.hasNext();)if(n=i.match(/([\s]|[^\\]|\\\\)+/g),n&&(t+=n[0]),i.peek()==="\\"){if(i.next(),i.peek()==="x")n=i.match(/x([0-9A-Fa-f]{2})/g);else if(i.peek()==="u")n=i.match(/u([0-9A-Fa-f]{4})/g),n||(n=i.match(/u\{([0-9A-Fa-f]+)\}/g));else{t+="\\",i.hasNext()&&(t+=i.next());continue}if(!n||(r=parseInt(n[1],16),r>126&&r<=255&&n[0].indexOf("x")===0))return e;r>=0&&r<32||r>1114111?t+="\\"+n[0]:r===34||r===39||r===92?t+="\\"+String.fromCharCode(r):t+=String.fromCharCode(r)}return t}Zt.prototype._read_string_recursive=function(e,t,r){var i,n;e==="'"?n=this.__patterns.single_quote:e==='"'?n=this.__patterns.double_quote:e==="`"?n=this.__patterns.template_text:e==="}"&&(n=this.__patterns.template_expression);for(var s=n.read(),a="";this._input.hasNext();){if(a=this._input.next(),a===e||!t&&Ce.newline.test(a)){this._input.back();break}else a==="\\"&&this._input.hasNext()?(i=this._input.peek(),i==="x"||i==="u"?this.has_char_escapes=!0:i==="\r"&&this._input.peek(1)===`
`&&this._input.next(),a+=this._input.next()):r&&(r==="${"&&a==="$"&&this._input.peek()==="{"&&(a+=this._input.next()),r===a&&(e==="`"?a+=this._read_string_recursive("}",t,"`"):a+=this._read_string_recursive("`",t,"${"),this._input.hasNext()&&(a+=this._input.next())));a+=n.read(),s+=a}return s};bn.exports.Tokenizer=Zt;bn.exports.TOKEN=P;bn.exports.positionable_operators=EA.slice();bn.exports.line_starters=pc.slice()});var gc=mt((f$,mc)=>{"use strict";var AA=Gs().Output,vA=Xa().Token,Xs=Za(),OA=Ja().Options,SA=An().Tokenizer,Rn=An().line_starters,vn=An().positionable_operators,_=An().TOKEN;function q(e,t){return t.indexOf(e)!==-1}function RA(e){return e.replace(/^\s+/g,"")}function NA(e){for(var t={},r=0;r<e.length;r++)t[e[r].replace(/-/g,"_")]=e[r];return t}function Le(e,t){return e&&e.type===_.RESERVED&&e.text===t}function ut(e,t){return e&&e.type===_.RESERVED&&q(e.text,t)}var Ys=["case","return","do","if","throw","else","await","break","continue","async"],IA=["before-newline","after-newline","preserve-newline"],On=NA(IA),dc=[On.before_newline,On.preserve_newline],U={BlockStatement:"BlockStatement",Statement:"Statement",ObjectLiteral:"ObjectLiteral",ArrayLiteral:"ArrayLiteral",ForInitializer:"ForInitializer",Conditional:"Conditional",Expression:"Expression"};function _c(e,t){t.multiline_frame||t.mode===U.ForInitializer||t.mode===U.Conditional||e.remove_indent(t.start_line_index)}function wA(e){e=e.replace(Xs.allLineBreaks,`
`);for(var t=[],r=e.indexOf(`
`);r!==-1;)t.push(e.substring(0,r)),e=e.substring(r+1),r=e.indexOf(`
`);return e.length&&t.push(e),t}function Pr(e){return e===U.ArrayLiteral}function Sn(e){return q(e,[U.Expression,U.ForInitializer,U.Conditional])}function CA(e,t){for(var r=0;r<e.length;r++){var i=e[r].trim();if(i.charAt(0)!==t)return!1}return!0}function LA(e,t){for(var r=0,i=e.length,n;r<i;r++)if(n=e[r],n&&n.indexOf(t)!==0)return!1;return!0}function rt(e,t){t=t||{},this._source_text=e||"",this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new OA(t)}rt.prototype.create_flags=function(e,t){var r=0;e&&(r=e.indentation_level,!this._output.just_added_newline()&&e.line_indent_level>r&&(r=e.line_indent_level));var i={mode:t,parent:e,last_token:e?e.last_token:new vA(_.START_BLOCK,""),last_word:e?e.last_word:"",declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:r,alignment:0,line_indent_level:e?e.line_indent_level:r,start_line_index:this._output.get_line_number(),ternary_depth:0};return i};rt.prototype._reset=function(e){var t=e.match(/^[\t ]*/)[0];this._last_last_text="",this._output=new AA(this._options,t),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(U.BlockStatement);var r=new SA(e,this._options);return this._tokens=r.tokenize(),e};rt.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e,t=this._reset(this._source_text),r=this._options.eol;this._options.eol==="auto"&&(r=`
`,t&&Xs.lineBreak.test(t||"")&&(r=t.match(Xs.lineBreak)[0]));for(var i=this._tokens.next();i;)this.handle_token(i),this._last_last_text=this._flags.last_token.text,this._flags.last_token=i,i=this._tokens.next();return e=this._output.get_code(r),e};rt.prototype.handle_token=function(e,t){e.type===_.START_EXPR?this.handle_start_expr(e):e.type===_.END_EXPR?this.handle_end_expr(e):e.type===_.START_BLOCK?this.handle_start_block(e):e.type===_.END_BLOCK?this.handle_end_block(e):e.type===_.WORD?this.handle_word(e):e.type===_.RESERVED?this.handle_word(e):e.type===_.SEMICOLON?this.handle_semicolon(e):e.type===_.STRING?this.handle_string(e):e.type===_.EQUALS?this.handle_equals(e):e.type===_.OPERATOR?this.handle_operator(e):e.type===_.COMMA?this.handle_comma(e):e.type===_.BLOCK_COMMENT?this.handle_block_comment(e,t):e.type===_.COMMENT?this.handle_comment(e,t):e.type===_.DOT?this.handle_dot(e):e.type===_.EOF?this.handle_eof(e):e.type===_.UNKNOWN?this.handle_unknown(e,t):this.handle_unknown(e,t)};rt.prototype.handle_whitespace_and_comments=function(e,t){var r=e.newlines,i=this._options.keep_array_indentation&&Pr(this._flags.mode);if(e.comments_before)for(var n=e.comments_before.next();n;)this.handle_whitespace_and_comments(n,t),this.handle_token(n,t),n=e.comments_before.next();if(i)for(var s=0;s<r;s+=1)this.print_newline(s>0,t);else if(this._options.max_preserve_newlines&&r>this._options.max_preserve_newlines&&(r=this._options.max_preserve_newlines),this._options.preserve_newlines&&r>1){this.print_newline(!1,t);for(var a=1;a<r;a+=1)this.print_newline(!0,t)}};var uo=["async","break","continue","return","throw","yield"];rt.prototype.allow_wrap_or_preserved_newline=function(e,t){if(t=t===void 0?!1:t,!this._output.just_added_newline()){var r=this._options.preserve_newlines&&e.newlines||t,i=q(this._flags.last_token.text,vn)||q(e.text,vn);if(i){var n=q(this._flags.last_token.text,vn)&&q(this._options.operator_position,dc)||q(e.text,vn);r=r&&n}if(r)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(ut(this._flags.last_token,uo))return;this._output.set_wrap_point()}}};rt.prototype.print_newline=function(e,t){if(!t&&this._flags.last_token.text!==";"&&this._flags.last_token.text!==","&&this._flags.last_token.text!=="="&&(this._flags.last_token.type!==_.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++"))for(var r=this._tokens.peek();this._flags.mode===U.Statement&&!(this._flags.if_block&&Le(r,"else"))&&!this._flags.do_block;)this.restore_mode();this._output.add_new_line(e)&&(this._flags.multiline_frame=!0)};rt.prototype.print_token_line_indentation=function(e){this._output.just_added_newline()&&(this._options.keep_array_indentation&&e.newlines&&(e.text==="["||Pr(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(e.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))};rt.prototype.print_token=function(e){if(this._output.raw){this._output.add_raw_token(e);return}if(this._options.comma_first&&e.previous&&e.previous.type===_.COMMA&&this._output.just_added_newline()&&this._output.previous_line.last()===","){var t=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(t),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(e),this._output.add_token(","),this._output.space_before_token=!0}this.print_token_line_indentation(e),this._output.non_breaking_space=!0,this._output.add_token(e.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)};rt.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};rt.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};rt.prototype.set_mode=function(e){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,e),this._flags=this.create_flags(this._previous_flags,e),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)};rt.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===U.Statement&&_c(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))};rt.prototype.start_of_object_property=function(){return this._flags.parent.mode===U.ObjectLiteral&&this._flags.mode===U.Statement&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||ut(this._flags.last_token,["get","set"]))};rt.prototype.start_of_statement=function(e){var t=!1;return t=t||ut(this._flags.last_token,["var","let","const"])&&e.type===_.WORD,t=t||Le(this._flags.last_token,"do"),t=t||!(this._flags.parent.mode===U.ObjectLiteral&&this._flags.mode===U.Statement)&&ut(this._flags.last_token,uo)&&!e.newlines,t=t||Le(this._flags.last_token,"else")&&!(Le(e,"if")&&!e.comments_before),t=t||this._flags.last_token.type===_.END_EXPR&&(this._previous_flags.mode===U.ForInitializer||this._previous_flags.mode===U.Conditional),t=t||this._flags.last_token.type===_.WORD&&this._flags.mode===U.BlockStatement&&!this._flags.in_case&&!(e.text==="--"||e.text==="++")&&this._last_last_text!=="function"&&e.type!==_.WORD&&e.type!==_.RESERVED,t=t||this._flags.mode===U.ObjectLiteral&&(this._flags.last_token.text===":"&&this._flags.ternary_depth===0||ut(this._flags.last_token,["get","set"])),t?(this.set_mode(U.Statement),this.indent(),this.handle_whitespace_and_comments(e,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e,ut(e,["do","for","if","while"])),!0):!1};rt.prototype.handle_start_expr=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e);var t=U.Expression;if(e.text==="["){if(this._flags.last_token.type===_.WORD||this._flags.last_token.text===")"){ut(this._flags.last_token,Rn)&&(this._output.space_before_token=!0),this.print_token(e),this.set_mode(t),this.indent(),this._options.space_in_paren&&(this._output.space_before_token=!0);return}t=U.ArrayLiteral,Pr(this._flags.mode)&&(this._flags.last_token.text==="["||this._flags.last_token.text===","&&(this._last_last_text==="]"||this._last_last_text==="}"))&&(this._options.keep_array_indentation||this.print_newline()),q(this._flags.last_token.type,[_.START_EXPR,_.END_EXPR,_.WORD,_.OPERATOR,_.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===_.RESERVED)this._flags.last_token.text==="for"?(this._output.space_before_token=this._options.space_before_conditional,t=U.ForInitializer):q(this._flags.last_token.text,["if","while","switch"])?(this._output.space_before_token=this._options.space_before_conditional,t=U.Conditional):q(this._flags.last_word,["await","async"])?this._output.space_before_token=!0:this._flags.last_token.text==="import"&&e.whitespace_before===""?this._output.space_before_token=!1:(q(this._flags.last_token.text,Rn)||this._flags.last_token.text==="catch")&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===_.EQUALS||this._flags.last_token.type===_.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e);else if(this._flags.last_token.type===_.WORD){this._output.space_before_token=!1;var r=this._tokens.peek(-3);if(this._options.space_after_named_function&&r){var i=this._tokens.peek(-4);ut(r,["async","function"])||r.text==="*"&&ut(i,["async","function"])?this._output.space_before_token=!0:this._flags.mode===U.ObjectLiteral?(r.text==="{"||r.text===","||r.text==="*"&&(i.text==="{"||i.text===","))&&(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(e);(this._flags.last_token.type===_.RESERVED&&(this._flags.last_word==="function"||this._flags.last_word==="typeof")||this._flags.last_token.text==="*"&&(q(this._last_last_text,["function","yield"])||this._flags.mode===U.ObjectLiteral&&q(this._last_last_text,["{",","])))&&(this._output.space_before_token=this._options.space_after_anon_function)}this._flags.last_token.text===";"||this._flags.last_token.type===_.START_BLOCK?this.print_newline():(this._flags.last_token.type===_.END_EXPR||this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.END_BLOCK||this._flags.last_token.text==="."||this._flags.last_token.type===_.COMMA)&&this.allow_wrap_or_preserved_newline(e,e.newlines),this.print_token(e),this.set_mode(t),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()};rt.prototype.handle_end_expr=function(e){for(;this._flags.mode===U.Statement;)this.restore_mode();this.handle_whitespace_and_comments(e),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(e,e.text==="]"&&Pr(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type===_.START_EXPR&&!this._options.space_in_empty_paren?(this._output.trim(),this._output.space_before_token=!1):this._output.space_before_token=!0),this.deindent(),this.print_token(e),this.restore_mode(),_c(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===U.Conditional&&(this._previous_flags.mode=U.Expression,this._flags.do_block=!1,this._flags.do_while=!1)};rt.prototype.handle_start_block=function(e){this.handle_whitespace_and_comments(e);var t=this._tokens.peek(),r=this._tokens.peek(1);this._flags.last_word==="switch"&&this._flags.last_token.type===_.END_EXPR?(this.set_mode(U.BlockStatement),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(U.BlockStatement):r&&(q(r.text,[":",","])&&q(t.type,[_.STRING,_.WORD,_.RESERVED])||q(t.text,["get","set","..."])&&q(r.type,[_.WORD,_.RESERVED]))?q(this._last_last_text,["class","interface"])&&!q(r.text,[":",","])?this.set_mode(U.BlockStatement):this.set_mode(U.ObjectLiteral):this._flags.last_token.type===_.OPERATOR&&this._flags.last_token.text==="=>"?this.set_mode(U.BlockStatement):q(this._flags.last_token.type,[_.EQUALS,_.START_EXPR,_.COMMA,_.OPERATOR])||ut(this._flags.last_token,["return","throw","import","default"])?this.set_mode(U.ObjectLiteral):this.set_mode(U.BlockStatement),this._flags.last_token&&ut(this._flags.last_token.previous,["class","extends"])&&(this._flags.class_start_block=!0);var i=!t.comments_before&&t.text==="}",n=i&&this._flags.last_word==="function"&&this._flags.last_token.type===_.END_EXPR;if(this._options.brace_preserve_inline){var s=0,a=null;this._flags.inline_frame=!0;do if(s+=1,a=this._tokens.peek(s-1),a.newlines){this._flags.inline_frame=!1;break}while(a.type!==_.EOF&&!(a.type===_.END_BLOCK&&a.opened===e))}(this._options.brace_style==="expand"||this._options.brace_style==="none"&&e.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==_.OPERATOR&&(n||this._flags.last_token.type===_.EQUALS||ut(this._flags.last_token,Ys)&&this._flags.last_token.text!=="else")?this._output.space_before_token=!0:this.print_newline(!1,!0):(Pr(this._previous_flags.mode)&&(this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.COMMA)&&((this._flags.last_token.type===_.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(e),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==_.OPERATOR&&this._flags.last_token.type!==_.START_EXPR&&(q(this._flags.last_token.type,[_.START_BLOCK,_.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(e),this.indent(),!i&&!(this._options.brace_preserve_inline&&this._flags.inline_frame)&&this.print_newline()};rt.prototype.handle_end_block=function(e){for(this.handle_whitespace_and_comments(e);this._flags.mode===U.Statement;)this.restore_mode();var t=this._flags.last_token.type===_.START_BLOCK;this._flags.inline_frame&&!t?this._output.space_before_token=!0:this._options.brace_style==="expand"?t||this.print_newline():t||(Pr(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(e)};rt.prototype.handle_word=function(e){if(e.type===_.RESERVED){if(q(e.text,["set","get"])&&this._flags.mode!==U.ObjectLiteral)e.type=_.WORD;else if(e.text==="import"&&q(this._tokens.peek().text,["(","."]))e.type=_.WORD;else if(q(e.text,["as","from"])&&!this._flags.import_block)e.type=_.WORD;else if(this._flags.mode===U.ObjectLiteral){var t=this._tokens.peek();t.text===":"&&(e.type=_.WORD)}}if(this.start_of_statement(e)?ut(this._flags.last_token,["var","let","const"])&&e.type===_.WORD&&(this._flags.declaration_statement=!0):e.newlines&&!Sn(this._flags.mode)&&(this._flags.last_token.type!==_.OPERATOR||this._flags.last_token.text==="--"||this._flags.last_token.text==="++")&&this._flags.last_token.type!==_.EQUALS&&(this._options.preserve_newlines||!ut(this._flags.last_token,["var","let","const","set","get"]))?(this.handle_whitespace_and_comments(e),this.print_newline()):this.handle_whitespace_and_comments(e),this._flags.do_block&&!this._flags.do_while)if(Le(e,"while")){this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0,this._flags.do_while=!0;return}else this.print_newline(),this._flags.do_block=!1;if(this._flags.if_block)if(!this._flags.else_block&&Le(e,"else"))this._flags.else_block=!0;else{for(;this._flags.mode===U.Statement;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&ut(e,["case","default"])){this.print_newline(),!this._flags.case_block&&(this._flags.case_body||this._options.jslint_happy)&&this.deindent(),this._flags.case_body=!1,this.print_token(e),this._flags.in_case=!0;return}if((this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.EQUALS||this._flags.last_token.type===_.OPERATOR)&&!this.start_of_object_property()&&!(q(this._flags.last_token.text,["+","-"])&&this._last_last_text===":"&&this._flags.parent.mode===U.ObjectLiteral)&&this.allow_wrap_or_preserved_newline(e),Le(e,"function")){(q(this._flags.last_token.text,["}",";"])||this._output.just_added_newline()&&!(q(this._flags.last_token.text,["(","[","{",":","=",","])||this._flags.last_token.type===_.OPERATOR))&&!this._output.just_added_blankline()&&!e.comments_before&&(this.print_newline(),this.print_newline(!0)),this._flags.last_token.type===_.RESERVED||this._flags.last_token.type===_.WORD?ut(this._flags.last_token,["get","set","new","export"])||ut(this._flags.last_token,uo)?this._output.space_before_token=!0:Le(this._flags.last_token,"default")&&this._last_last_text==="export"?this._output.space_before_token=!0:this._flags.last_token.text==="declare"?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===_.OPERATOR||this._flags.last_token.text==="="?this._output.space_before_token=!0:!this._flags.multiline_frame&&(Sn(this._flags.mode)||Pr(this._flags.mode))||this.print_newline(),this.print_token(e),this._flags.last_word=e.text;return}var r="NONE";if(this._flags.last_token.type===_.END_BLOCK?this._previous_flags.inline_frame?r="SPACE":ut(e,["else","catch","finally","from"])?this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&e.newlines?r="NEWLINE":(r="SPACE",this._output.space_before_token=!0):r="NEWLINE":this._flags.last_token.type===_.SEMICOLON&&this._flags.mode===U.BlockStatement?r="NEWLINE":this._flags.last_token.type===_.SEMICOLON&&Sn(this._flags.mode)?r="SPACE":this._flags.last_token.type===_.STRING?r="NEWLINE":this._flags.last_token.type===_.RESERVED||this._flags.last_token.type===_.WORD||this._flags.last_token.text==="*"&&(q(this._last_last_text,["function","yield"])||this._flags.mode===U.ObjectLiteral&&q(this._last_last_text,["{",","]))?r="SPACE":this._flags.last_token.type===_.START_BLOCK?this._flags.inline_frame?r="SPACE":r="NEWLINE":this._flags.last_token.type===_.END_EXPR&&(this._output.space_before_token=!0,r="NEWLINE"),ut(e,Rn)&&this._flags.last_token.text!==")"&&(this._flags.inline_frame||this._flags.last_token.text==="else"||this._flags.last_token.text==="export"?r="SPACE":r="NEWLINE"),ut(e,["else","catch","finally"]))if((!(this._flags.last_token.type===_.END_BLOCK&&this._previous_flags.mode===U.BlockStatement)||this._options.brace_style==="expand"||this._options.brace_style==="end-expand"||this._options.brace_style==="none"&&e.newlines)&&!this._flags.inline_frame)this.print_newline();else{this._output.trim(!0);var i=this._output.current_line;i.last()!=="}"&&this.print_newline(),this._output.space_before_token=!0}else r==="NEWLINE"?ut(this._flags.last_token,Ys)?this._output.space_before_token=!0:this._flags.last_token.text==="declare"&&ut(e,["var","let","const"])?this._output.space_before_token=!0:this._flags.last_token.type!==_.END_EXPR?(this._flags.last_token.type!==_.START_EXPR||!ut(e,["var","let","const"]))&&this._flags.last_token.text!==":"&&(Le(e,"if")&&Le(e.previous,"else")?this._output.space_before_token=!0:this.print_newline()):ut(e,Rn)&&this._flags.last_token.text!==")"&&this.print_newline():this._flags.multiline_frame&&Pr(this._flags.mode)&&this._flags.last_token.text===","&&this._last_last_text==="}"?this.print_newline():r==="SPACE"&&(this._output.space_before_token=!0);e.previous&&(e.previous.type===_.WORD||e.previous.type===_.RESERVED)&&(this._output.space_before_token=!0),this.print_token(e),this._flags.last_word=e.text,e.type===_.RESERVED&&(e.text==="do"?this._flags.do_block=!0:e.text==="if"?this._flags.if_block=!0:e.text==="import"?this._flags.import_block=!0:this._flags.import_block&&Le(e,"from")&&(this._flags.import_block=!1))};rt.prototype.handle_semicolon=function(e){this.start_of_statement(e)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(e);for(var t=this._tokens.peek();this._flags.mode===U.Statement&&!(this._flags.if_block&&Le(t,"else"))&&!this._flags.do_block;)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(e)};rt.prototype.handle_string=function(e){e.text.startsWith("`")&&e.newlines===0&&e.whitespace_before===""&&(e.previous.text===")"||this._flags.last_token.type===_.WORD)||(this.start_of_statement(e)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(e),this._flags.last_token.type===_.RESERVED||this._flags.last_token.type===_.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR||this._flags.last_token.type===_.EQUALS||this._flags.last_token.type===_.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(e):e.text.startsWith("`")&&this._flags.last_token.type===_.END_EXPR&&(e.previous.text==="]"||e.previous.text===")")&&e.newlines===0?this._output.space_before_token=!0:this.print_newline())),this.print_token(e)};rt.prototype.handle_equals=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0};rt.prototype.handle_comma=function(e){this.handle_whitespace_and_comments(e,!0),this.print_token(e),this._output.space_before_token=!0,this._flags.declaration_statement?(Sn(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)):this._flags.mode===U.ObjectLiteral||this._flags.mode===U.Statement&&this._flags.parent.mode===U.ObjectLiteral?(this._flags.mode===U.Statement&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(e)};rt.prototype.handle_operator=function(e){var t=e.text==="*"&&(ut(this._flags.last_token,["function","yield"])||q(this._flags.last_token.type,[_.START_BLOCK,_.COMMA,_.END_BLOCK,_.SEMICOLON])),r=q(e.text,["-","+"])&&(q(this._flags.last_token.type,[_.START_BLOCK,_.START_EXPR,_.EQUALS,_.OPERATOR])||q(this._flags.last_token.text,Rn)||this._flags.last_token.text===",");if(!this.start_of_statement(e)){var i=!t;this.handle_whitespace_and_comments(e,i)}if(e.text==="*"&&this._flags.last_token.type===_.DOT){this.print_token(e);return}if(e.text==="::"){this.print_token(e);return}if(q(e.text,["-","+"])&&this.start_of_object_property()){this.print_token(e);return}if(this._flags.last_token.type===_.OPERATOR&&q(this._options.operator_position,dc)&&this.allow_wrap_or_preserved_newline(e),e.text===":"&&this._flags.in_case){this.print_token(e),this._flags.in_case=!1,this._flags.case_body=!0,this._tokens.peek().type!==_.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0);return}var n=!0,s=!0,a=!1;if(e.text===":"?this._flags.ternary_depth===0?n=!1:(this._flags.ternary_depth-=1,a=!0):e.text==="?"&&(this._flags.ternary_depth+=1),!r&&!t&&this._options.preserve_newlines&&q(e.text,vn)){var o=e.text===":",u=o&&a,l=o&&!a;switch(this._options.operator_position){case On.before_newline:this._output.space_before_token=!l,this.print_token(e),(!o||u)&&this.allow_wrap_or_preserved_newline(e),this._output.space_before_token=!0;return;case On.after_newline:this._output.space_before_token=!0,!o||u?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(e):this._output.space_before_token=!1,this.print_token(e),this._output.space_before_token=!0;return;case On.preserve_newline:l||this.allow_wrap_or_preserved_newline(e),n=!(this._output.just_added_newline()||l),this._output.space_before_token=n,this.print_token(e),this._output.space_before_token=!0;return}}if(t){this.allow_wrap_or_preserved_newline(e),n=!1;var h=this._tokens.peek();s=h&&q(h.type,[_.WORD,_.RESERVED])}else if(e.text==="...")this.allow_wrap_or_preserved_newline(e),n=this._flags.last_token.type===_.START_BLOCK,s=!1;else if(q(e.text,["--","++","!","~"])||r){if((this._flags.last_token.type===_.COMMA||this._flags.last_token.type===_.START_EXPR)&&this.allow_wrap_or_preserved_newline(e),n=!1,s=!1,e.newlines&&(e.text==="--"||e.text==="++"||e.text==="~")){var f=ut(this._flags.last_token,Ys)&&e.newlines;f&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(f,!0)}this._flags.last_token.text===";"&&Sn(this._flags.mode)&&(n=!0),this._flags.last_token.type===_.RESERVED?n=!0:this._flags.last_token.type===_.END_EXPR?n=!(this._flags.last_token.text==="]"&&(e.text==="--"||e.text==="++")):this._flags.last_token.type===_.OPERATOR&&(n=q(e.text,["--","-","++","+"])&&q(this._flags.last_token.text,["--","-","++","+"]),q(e.text,["+","-"])&&q(this._flags.last_token.text,["--","++"])&&(s=!0)),(this._flags.mode===U.BlockStatement&&!this._flags.inline_frame||this._flags.mode===U.Statement)&&(this._flags.last_token.text==="{"||this._flags.last_token.text===";")&&this.print_newline()}this._output.space_before_token=this._output.space_before_token||n,this.print_token(e),this._output.space_before_token=s};rt.prototype.handle_block_comment=function(e,t){if(this._output.raw){this._output.add_raw_token(e),e.directives&&e.directives.preserve==="end"&&(this._output.raw=this._options.test_output_raw);return}if(e.directives){this.print_newline(!1,t),this.print_token(e),e.directives.preserve==="start"&&(this._output.raw=!0),this.print_newline(!1,!0);return}if(!Xs.newline.test(e.text)&&!e.newlines){this._output.space_before_token=!0,this.print_token(e),this._output.space_before_token=!0;return}else this.print_block_commment(e,t)};rt.prototype.print_block_commment=function(e,t){var r=wA(e.text),i,n=!1,s=!1,a=e.whitespace_before,o=a.length;if(this.print_newline(!1,t),this.print_token_line_indentation(e),this._output.add_token(r[0]),this.print_newline(!1,t),r.length>1){for(r=r.slice(1),n=CA(r,"*"),s=LA(r,a),n&&(this._flags.alignment=1),i=0;i<r.length;i++)n?(this.print_token_line_indentation(e),this._output.add_token(RA(r[i]))):s&&r[i]?(this.print_token_line_indentation(e),this._output.add_token(r[i].substring(o))):(this._output.current_line.set_indent(-1),this._output.add_token(r[i])),this.print_newline(!1,t);this._flags.alignment=0}};rt.prototype.handle_comment=function(e,t){e.newlines?this.print_newline(!1,t):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(e),this.print_newline(!1,t)};rt.prototype.handle_dot=function(e){this.start_of_statement(e)||this.handle_whitespace_and_comments(e,!0),this._flags.last_token.text.match("^[0-9]+$")&&(this._output.space_before_token=!0),ut(this._flags.last_token,Ys)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(e,this._flags.last_token.text===")"&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(e)};rt.prototype.handle_unknown=function(e,t){this.print_token(e),e.text[e.text.length-1]===`
`&&this.print_newline(!1,t)};rt.prototype.handle_eof=function(e){for(;this._flags.mode===U.Statement;)this.restore_mode();this.handle_whitespace_and_comments(e)};mc.exports.Beautifier=rt});var Ec=mt((h$,lo)=>{"use strict";var kA=gc().Beautifier,PA=Ja().Options;function MA(e,t){var r=new kA(e,t);return r.beautify()}lo.exports=MA;lo.exports.defaultOptions=function(){return new PA}});var fo=mt((c$,Tc)=>{"use strict";var yc=zs().Options;function xc(e){yc.call(this,e,"css"),this.selector_separator_newline=this._get_boolean("selector_separator_newline",!0),this.newline_between_rules=this._get_boolean("newline_between_rules",!0);var t=this._get_boolean("space_around_selector_separator");this.space_around_combinator=this._get_boolean("space_around_combinator")||t;var r=this._get_selection_list("brace_style",["collapse","expand","end-expand","none","preserve-inline"]);this.brace_style="collapse";for(var i=0;i<r.length;i++)r[i]!=="expand"?this.brace_style="collapse":this.brace_style=r[i]}xc.prototype=new yc;Tc.exports.Options=xc});var Oc=mt((p$,vc)=>{"use strict";var UA=fo().Options,FA=Gs().Output,BA=qs().InputScanner,$A=Vs().Directives,bc=new $A(/\/\*/,/\*\//),Ac=/\r\n|[\r\n]/,jA=/\r\n|[\r\n]/g,Qs=/\s/,WA=/(?:\s|\n)+/g,DA=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,GA=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function lr(e,t){this._source_text=e||"",this._options=new UA(t),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}lr.prototype.eatString=function(e){var t="";for(this._ch=this._input.next();this._ch;){if(t+=this._ch,this._ch==="\\")t+=this._input.next();else if(e.indexOf(this._ch)!==-1||this._ch===`
`)break;this._ch=this._input.next()}return t};lr.prototype.eatWhitespace=function(e){for(var t=Qs.test(this._input.peek()),r=0;Qs.test(this._input.peek());)this._ch=this._input.next(),e&&this._ch===`
`&&(r===0||r<this._options.max_preserve_newlines)&&(r++,this._output.add_new_line(!0));return t};lr.prototype.foundNestedPseudoClass=function(){for(var e=0,t=1,r=this._input.peek(t);r;){if(r==="{")return!0;if(r==="(")e+=1;else if(r===")"){if(e===0)return!1;e-=1}else if(r===";"||r==="}")return!1;t++,r=this._input.peek(t)}return!1};lr.prototype.print_string=function(e){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(e)};lr.prototype.preserveSingleSpace=function(e){e&&(this._output.space_before_token=!0)};lr.prototype.indent=function(){this._indentLevel++};lr.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--};lr.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;t==="auto"&&(t=`
`,e&&Ac.test(e||"")&&(t=e.match(Ac)[0])),e=e.replace(jA,`
`);var r=e.match(/^[\t ]*/)[0];this._output=new FA(this._options,r),this._input=new BA(e),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var i=0,n=!1,s=!1,a=!1,o=!1,u=!1,l=this._ch,h=!1,f,d,m;f=this._input.read(WA),d=f!=="",m=l,this._ch=this._input.next(),this._ch==="\\"&&this._input.hasNext()&&(this._ch+=this._input.next()),l=this._ch,this._ch;)if(this._ch==="/"&&this._input.peek()==="*"){this._output.add_new_line(),this._input.back();var g=this._input.read(DA),y=bc.get_directives(g);y&&y.ignore==="start"&&(g+=bc.readIgnored(this._input)),this.print_string(g),this.eatWhitespace(!0),this._output.add_new_line()}else if(this._ch==="/"&&this._input.peek()==="/")this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(GA)),this.eatWhitespace(!0);else if(this._ch==="$"){this.preserveSingleSpace(d),this.print_string(this._ch);var E=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);E.match(/[ :]$/)&&(E=this.eatString(": ").replace(/\s+$/,""),this.print_string(E),this._output.space_before_token=!0),i===0&&E.indexOf(":")!==-1&&(s=!0,this.indent())}else if(this._ch==="@")if(this.preserveSingleSpace(d),this._input.peek()==="{")this.print_string(this._ch+this.eatString("}"));else{this.print_string(this._ch);var x=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);x.match(/[ :]$/)&&(x=this.eatString(": ").replace(/\s+$/,""),this.print_string(x),this._output.space_before_token=!0),i===0&&x.indexOf(":")!==-1?(s=!0,this.indent()):x in this.NESTED_AT_RULE?(this._nestedLevel+=1,x in this.CONDITIONAL_GROUP_RULE&&(a=!0)):i===0&&!s&&(o=!0)}else if(this._ch==="#"&&this._input.peek()==="{")this.preserveSingleSpace(d),this.print_string(this._ch+this.eatString("}"));else if(this._ch==="{")s&&(s=!1,this.outdent()),o=!1,a?(a=!1,n=this._indentLevel>=this._nestedLevel):n=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&n&&this._output.previous_line&&this._output.previous_line.item(-1)!=="{"&&this._output.ensure_empty_line_above("/",","),this._output.space_before_token=!0,this._options.brace_style==="expand"?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):(m==="("?this._output.space_before_token=!1:m!==","&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if(this._ch==="}")this.outdent(),this._output.add_new_line(),m==="{"&&this._output.trim(!0),s&&(this.outdent(),s=!1),this.print_string(this._ch),n=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&this._input.peek()!=="}"&&this._output.add_new_line(!0),this._input.peek()===")"&&(this._output.trim(!0),this._options.brace_style==="expand"&&this._output.add_new_line(!0));else if(this._ch===":"){for(var A=0;A<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;A++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[A])){h=!0;break}(n||a)&&!(this._input.lookBack("&")||this.foundNestedPseudoClass())&&!this._input.lookBack("(")&&!o&&i===0?(this.print_string(":"),s||(s=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent())):(this._input.lookBack(" ")&&(this._output.space_before_token=!0),this._input.peek()===":"?(this._ch=this._input.next(),this.print_string("::")):this.print_string(":"))}else if(this._ch==='"'||this._ch==="'"){var T=m==='"'||m==="'";this.preserveSingleSpace(T||d),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(this._ch===";")h=!1,i===0?(s&&(this.outdent(),s=!1),o=!1,this.print_string(this._ch),this.eatWhitespace(!0),this._input.peek()!=="/"&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if(this._ch==="(")if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),i++,this.indent(),this._ch=this._input.next(),this._ch===")"||this._ch==='"'||this._ch==="'"?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(")")),i&&(i--,this.outdent()));else{var $=!1;this._input.lookBack("with")&&($=!0),this.preserveSingleSpace(d||$),this.print_string(this._ch),s&&m==="$"&&this._options.selector_separator_newline?(this._output.add_new_line(),u=!0):(this.eatWhitespace(),i++,this.indent())}else if(this._ch===")")i&&(i--,this.outdent()),u&&this._input.peek()===";"&&this._options.selector_separator_newline&&(u=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(this._ch===",")this.print_string(this._ch),this.eatWhitespace(!0),this._options.selector_separator_newline&&(!s||u)&&i===0&&!o?this._output.add_new_line():this._output.space_before_token=!0;else if((this._ch===">"||this._ch==="+"||this._ch==="~")&&!s&&i===0)this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&Qs.test(this._ch)&&(this._ch=""));else if(this._ch==="]")this.print_string(this._ch);else if(this._ch==="[")this.preserveSingleSpace(d),this.print_string(this._ch);else if(this._ch==="=")this.eatWhitespace(),this.print_string("="),Qs.test(this._ch)&&(this._ch="");else if(this._ch==="!"&&!this._input.lookBack("\\"))this._output.space_before_token=!0,this.print_string(this._ch);else{var W=m==='"'||m==="'";this.preserveSingleSpace(W||d),this.print_string(this._ch),!this._output.just_added_newline()&&this._input.peek()===`
`&&h&&this._output.add_new_line()}var Vt=this._output.get_code(t);return Vt};vc.exports.Beautifier=lr});var Sc=mt((d$,ho)=>{"use strict";var KA=Oc().Beautifier,zA=fo().Options;function qA(e,t){var r=new KA(e,t);return r.beautify()}ho.exports=qA;ho.exports.defaultOptions=function(){return new zA}});var co=mt((_$,Ic)=>{"use strict";var Rc=zs().Options;function Nc(e){Rc.call(this,e,"html"),this.templating.length===1&&this.templating[0]==="auto"&&(this.templating=["django","erb","handlebars","php"]),this.indent_inner_html=this._get_boolean("indent_inner_html"),this.indent_body_inner_html=this._get_boolean("indent_body_inner_html",!0),this.indent_head_inner_html=this._get_boolean("indent_head_inner_html",!0),this.indent_handlebars=this._get_boolean("indent_handlebars",!0),this.wrap_attributes=this._get_selection("wrap_attributes",["auto","force","force-aligned","force-expand-multiline","aligned-multiple","preserve","preserve-aligned"]),this.wrap_attributes_min_attrs=this._get_number("wrap_attributes_min_attrs",2),this.wrap_attributes_indent_size=this._get_number("wrap_attributes_indent_size",this.indent_size),this.extra_liners=this._get_array("extra_liners",["head","body","/html"]),this.inline=this._get_array("inline",["a","abbr","area","audio","b","bdi","bdo","br","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","img","input","ins","kbd","keygen","label","map","mark","math","meter","noscript","object","output","progress","q","ruby","s","samp","select","small","span","strong","sub","sup","svg","template","textarea","time","u","var","video","wbr","text","acronym","big","strike","tt"]),this.inline_custom_elements=this._get_boolean("inline_custom_elements",!0),this.void_elements=this._get_array("void_elements",["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr","!doctype","?xml","basefont","isindex"]),this.unformatted=this._get_array("unformatted",[]),this.content_unformatted=this._get_array("content_unformatted",["pre","textarea"]),this.unformatted_content_delimiter=this._get_characters("unformatted_content_delimiter"),this.indent_scripts=this._get_selection("indent_scripts",["normal","keep","separate"])}Nc.prototype=new Rc;Ic.exports.Options=Nc});var mo=mt((m$,_o)=>{"use strict";var Cc=Tn().Tokenizer,po=Tn().TOKEN,VA=Vs().Directives,HA=so().TemplatablePattern,XA=yn().Pattern,it={TAG_OPEN:"TK_TAG_OPEN",TAG_CLOSE:"TK_TAG_CLOSE",CONTROL_FLOW_OPEN:"TK_CONTROL_FLOW_OPEN",CONTROL_FLOW_CLOSE:"TK_CONTROL_FLOW_CLOSE",ATTRIBUTE:"TK_ATTRIBUTE",EQUALS:"TK_EQUALS",VALUE:"TK_VALUE",COMMENT:"TK_COMMENT",TEXT:"TK_TEXT",UNKNOWN:"TK_UNKNOWN",START:po.START,RAW:po.RAW,EOF:po.EOF},wc=new VA(/<\!--/,/-->/),Jt=function(e,t){Cc.call(this,e,t),this._current_tag_name="";var r=new HA(this._input).read_options(this._options),i=new XA(this._input);if(this.__patterns={word:r.until(/[\n\r\t <]/),word_control_flow_close_excluded:r.until(/[\n\r\t <}]/),single_quote:r.until_after(/'/),double_quote:r.until_after(/"/),attribute:r.until(/[\n\r\t =>]|\/>/),element_name:r.until(/[\n\r\t >\/]/),angular_control_flow_start:i.matching(/\@[a-zA-Z]+[^({]*[({]/),handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),handlebars_open:i.until(/[\n\r\t }]/),handlebars_raw_close:i.until(/}}/),comment:i.starting_with(/<!--/).until_after(/-->/),cdata:i.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:i.starting_with(/<!\[/).until_after(/]>/),processing:i.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude("handlebars"),this.__patterns.word_control_flow_close_excluded=this.__patterns.word_control_flow_close_excluded.exclude("handlebars")),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var n=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=i.matching(n).until_after(n)}};Jt.prototype=new Cc;Jt.prototype._is_comment=function(e){return!1};Jt.prototype._is_opening=function(e){return e.type===it.TAG_OPEN||e.type===it.CONTROL_FLOW_OPEN};Jt.prototype._is_closing=function(e,t){return e.type===it.TAG_CLOSE&&t&&((e.text===">"||e.text==="/>")&&t.text[0]==="<"||e.text==="}}"&&t.text[0]==="{"&&t.text[1]==="{")||e.type===it.CONTROL_FLOW_CLOSE&&e.text==="}"&&t.text.endsWith("{")};Jt.prototype._reset=function(){this._current_tag_name=""};Jt.prototype._get_next_token=function(e,t){var r=null;this._readWhitespace();var i=this._input.peek();return i===null?this._create_token(it.EOF,""):(r=r||this._read_open_handlebars(i,t),r=r||this._read_attribute(i,e,t),r=r||this._read_close(i,t),r=r||this._read_script_and_style(i,e),r=r||this._read_control_flows(i,t),r=r||this._read_raw_content(i,e,t),r=r||this._read_content_word(i,t),r=r||this._read_comment_or_cdata(i),r=r||this._read_processing(i),r=r||this._read_open(i,t),r=r||this._create_token(it.UNKNOWN,this._input.next()),r)};Jt.prototype._read_comment_or_cdata=function(e){var t=null,r=null,i=null;if(e==="<"){var n=this._input.peek(1);n==="!"&&(r=this.__patterns.comment.read(),r?(i=wc.get_directives(r),i&&i.ignore==="start"&&(r+=wc.readIgnored(this._input))):r=this.__patterns.cdata.read()),r&&(t=this._create_token(it.COMMENT,r),t.directives=i)}return t};Jt.prototype._read_processing=function(e){var t=null,r=null,i=null;if(e==="<"){var n=this._input.peek(1);(n==="!"||n==="?")&&(r=this.__patterns.conditional_comment.read(),r=r||this.__patterns.processing.read()),r&&(t=this._create_token(it.COMMENT,r),t.directives=i)}return t};Jt.prototype._read_open=function(e,t){var r=null,i=null;return(!t||t.type===it.CONTROL_FLOW_OPEN)&&e==="<"&&(r=this._input.next(),this._input.peek()==="/"&&(r+=this._input.next()),r+=this.__patterns.element_name.read(),i=this._create_token(it.TAG_OPEN,r)),i};Jt.prototype._read_open_handlebars=function(e,t){var r=null,i=null;return(!t||t.type===it.CONTROL_FLOW_OPEN)&&(this._options.templating.includes("angular")||this._options.indent_handlebars)&&e==="{"&&this._input.peek(1)==="{"&&(this._options.indent_handlebars&&this._input.peek(2)==="!"?(r=this.__patterns.handlebars_comment.read(),r=r||this.__patterns.handlebars.read(),i=this._create_token(it.COMMENT,r)):(r=this.__patterns.handlebars_open.read(),i=this._create_token(it.TAG_OPEN,r))),i};Jt.prototype._read_control_flows=function(e,t){var r="",i=null;if(!this._options.templating.includes("angular"))return i;if(e==="@"){if(r=this.__patterns.angular_control_flow_start.read(),r==="")return i;for(var n=r.endsWith("(")?1:0,s=0;!(r.endsWith("{")&&n===s);){var a=this._input.next();if(a===null)break;a==="("?n++:a===")"&&s++,r+=a}i=this._create_token(it.CONTROL_FLOW_OPEN,r)}else e==="}"&&t&&t.type===it.CONTROL_FLOW_OPEN&&(r=this._input.next(),i=this._create_token(it.CONTROL_FLOW_CLOSE,r));return i};Jt.prototype._read_close=function(e,t){var r=null,i=null;return t&&t.type===it.TAG_OPEN&&(t.text[0]==="<"&&(e===">"||e==="/"&&this._input.peek(1)===">")?(r=this._input.next(),e==="/"&&(r+=this._input.next()),i=this._create_token(it.TAG_CLOSE,r)):t.text[0]==="{"&&e==="}"&&this._input.peek(1)==="}"&&(this._input.next(),this._input.next(),i=this._create_token(it.TAG_CLOSE,"}}"))),i};Jt.prototype._read_attribute=function(e,t,r){var i=null,n="";if(r&&r.text[0]==="<")if(e==="=")i=this._create_token(it.EQUALS,this._input.next());else if(e==='"'||e==="'"){var s=this._input.next();e==='"'?s+=this.__patterns.double_quote.read():s+=this.__patterns.single_quote.read(),i=this._create_token(it.VALUE,s)}else n=this.__patterns.attribute.read(),n&&(t.type===it.EQUALS?i=this._create_token(it.VALUE,n):i=this._create_token(it.ATTRIBUTE,n));return i};Jt.prototype._is_content_unformatted=function(e){return this._options.void_elements.indexOf(e)===-1&&(this._options.content_unformatted.indexOf(e)!==-1||this._options.unformatted.indexOf(e)!==-1)};Jt.prototype._read_raw_content=function(e,t,r){var i="";if(r&&r.text[0]==="{")i=this.__patterns.handlebars_raw_close.read();else if(t.type===it.TAG_CLOSE&&t.opened.text[0]==="<"&&t.text[0]!=="/"){var n=t.opened.text.substr(1).toLowerCase();this._is_content_unformatted(n)&&(i=this._input.readUntil(new RegExp("</"+n+"[\\n\\r\\t ]*?>","ig")))}return i?this._create_token(it.TEXT,i):null};Jt.prototype._read_script_and_style=function(e,t){if(t.type===it.TAG_CLOSE&&t.opened.text[0]==="<"&&t.text[0]!=="/"){var r=t.opened.text.substr(1).toLowerCase();if(r==="script"||r==="style"){var i=this._read_comment_or_cdata(e);if(i)return i.type=it.TEXT,i;var n=this._input.readUntil(new RegExp("</"+r+"[\\n\\r\\t ]*?>","ig"));if(n)return this._create_token(it.TEXT,n)}}return null};Jt.prototype._read_content_word=function(e,t){var r="";return this._options.unformatted_content_delimiter&&e===this._options.unformatted_content_delimiter[0]&&(r=this.__patterns.unformatted_content_delimiter.read()),r||(r=t&&t.type===it.CONTROL_FLOW_OPEN?this.__patterns.word_control_flow_close_excluded.read():this.__patterns.word.read()),r?this._create_token(it.TEXT,r):null};_o.exports.Tokenizer=Jt;_o.exports.TOKEN=it});var Mc=mt((g$,Pc)=>{"use strict";var YA=co().Options,QA=Gs().Output,ZA=mo().Tokenizer,nt=mo().TOKEN,Lc=/\r\n|[\r\n]/,JA=/\r\n|[\r\n]/g,Oe=function(e,t){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=e.max_preserve_newlines,this.preserve_newlines=e.preserve_newlines,this._output=new QA(e,t)};Oe.prototype.current_line_has_match=function(e){return this._output.current_line.has_match(e)};Oe.prototype.set_space_before_token=function(e,t){this._output.space_before_token=e,this._output.non_breaking_space=t};Oe.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()};Oe.prototype.add_raw_token=function(e){this._output.add_raw_token(e)};Oe.prototype.print_preserved_newlines=function(e){var t=0;e.type!==nt.TEXT&&e.previous.type!==nt.TEXT&&(t=e.newlines?1:0),this.preserve_newlines&&(t=e.newlines<this.max_preserve_newlines+1?e.newlines:this.max_preserve_newlines+1);for(var r=0;r<t;r++)this.print_newline(r>0);return t!==0};Oe.prototype.traverse_whitespace=function(e){return e.whitespace_before||e.newlines?(this.print_preserved_newlines(e)||(this._output.space_before_token=!0),!0):!1};Oe.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped};Oe.prototype.print_newline=function(e){this._output.add_new_line(e)};Oe.prototype.print_token=function(e){e.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(e.text))};Oe.prototype.indent=function(){this.indent_level++};Oe.prototype.deindent=function(){this.indent_level>0&&(this.indent_level--,this._output.set_indent(this.indent_level,this.alignment_size))};Oe.prototype.get_full_indent=function(e){return e=this.indent_level+(e||0),e<1?"":this._output.get_indent_string(e)};var tv=function(e){for(var t=null,r=e.next;r.type!==nt.EOF&&e.closed!==r;){if(r.type===nt.ATTRIBUTE&&r.text==="type"){r.next&&r.next.type===nt.EQUALS&&r.next.next&&r.next.next.type===nt.VALUE&&(t=r.next.next.text);break}r=r.next}return t},ev=function(e,t){var r=null,i=null;return t.closed?(e==="script"?r="text/javascript":e==="style"&&(r="text/css"),r=tv(t)||r,r.search("text/css")>-1?i="css":r.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?i="javascript":r.search(/(text|application|dojo)\/(x-)?(html)/)>-1?i="html":r.search(/test\/null/)>-1&&(i="null"),i):null};function Nn(e,t){return t.indexOf(e)!==-1}function rv(e,t,r){this.parent=e||null,this.tag=t?t.tag_name:"",this.indent_level=r||0,this.parser_token=t||null}function Qr(e){this._printer=e,this._current_frame=null}Qr.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null};Qr.prototype.record_tag=function(e){var t=new rv(this._current_frame,e,this._printer.indent_level);this._current_frame=t};Qr.prototype._try_pop_frame=function(e){var t=null;return e&&(t=e.parser_token,this._printer.indent_level=e.indent_level,this._current_frame=e.parent),t};Qr.prototype._get_frame=function(e,t){for(var r=this._current_frame;r&&e.indexOf(r.tag)===-1;){if(t&&t.indexOf(r.tag)!==-1){r=null;break}r=r.parent}return r};Qr.prototype.try_pop=function(e,t){var r=this._get_frame([e],t);return this._try_pop_frame(r)};Qr.prototype.indent_to_tag=function(e){var t=this._get_frame(e);t&&(this._printer.indent_level=t.indent_level)};function be(e,t,r,i){this._source_text=e||"",t=t||{},this._js_beautify=r,this._css_beautify=i,this._tag_stack=null;var n=new YA(t,"html");this._options=n,this._is_wrap_attributes_force=this._options.wrap_attributes.substr(0,5)==="force",this._is_wrap_attributes_force_expand_multiline=this._options.wrap_attributes==="force-expand-multiline",this._is_wrap_attributes_force_aligned=this._options.wrap_attributes==="force-aligned",this._is_wrap_attributes_aligned_multiple=this._options.wrap_attributes==="aligned-multiple",this._is_wrap_attributes_preserve=this._options.wrap_attributes.substr(0,8)==="preserve",this._is_wrap_attributes_preserve_aligned=this._options.wrap_attributes==="preserve-aligned"}be.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var e=this._source_text,t=this._options.eol;this._options.eol==="auto"&&(t=`
`,e&&Lc.test(e)&&(t=e.match(Lc)[0])),e=e.replace(JA,`
`);var r=e.match(/^[\t ]*/)[0],i={text:"",type:""},n=new kc(this._options),s=new Oe(this._options,r),a=new ZA(e,this._options).tokenize();this._tag_stack=new Qr(s);for(var o=null,u=a.next();u.type!==nt.EOF;)u.type===nt.TAG_OPEN||u.type===nt.COMMENT?(o=this._handle_tag_open(s,u,n,i,a),n=o):u.type===nt.ATTRIBUTE||u.type===nt.EQUALS||u.type===nt.VALUE||u.type===nt.TEXT&&!n.tag_complete?o=this._handle_inside_tag(s,u,n,i):u.type===nt.TAG_CLOSE?o=this._handle_tag_close(s,u,n):u.type===nt.TEXT?o=this._handle_text(s,u,n):u.type===nt.CONTROL_FLOW_OPEN?o=this._handle_control_flow_open(s,u):u.type===nt.CONTROL_FLOW_CLOSE?o=this._handle_control_flow_close(s,u):s.add_raw_token(u),i=o,u=a.next();var l=s._output.get_code(t);return l};be.prototype._handle_control_flow_open=function(e,t){var r={text:t.text,type:t.type};return e.set_space_before_token(t.newlines||t.whitespace_before!=="",!0),t.newlines?e.print_preserved_newlines(t):e.set_space_before_token(t.newlines||t.whitespace_before!=="",!0),e.print_token(t),e.indent(),r};be.prototype._handle_control_flow_close=function(e,t){var r={text:t.text,type:t.type};return e.deindent(),t.newlines?e.print_preserved_newlines(t):e.set_space_before_token(t.newlines||t.whitespace_before!=="",!0),e.print_token(t),r};be.prototype._handle_tag_close=function(e,t,r){var i={text:t.text,type:t.type};return e.alignment_size=0,r.tag_complete=!0,e.set_space_before_token(t.newlines||t.whitespace_before!=="",!0),r.is_unformatted?e.add_raw_token(t):(r.tag_start_char==="<"&&(e.set_space_before_token(t.text[0]==="/",!0),this._is_wrap_attributes_force_expand_multiline&&r.has_wrapped_attrs&&e.print_newline(!1)),e.print_token(t)),r.indent_content&&!(r.is_unformatted||r.is_content_unformatted)&&(e.indent(),r.indent_content=!1),!r.is_inline_element&&!(r.is_unformatted||r.is_content_unformatted)&&e.set_wrap_point(),i};be.prototype._handle_inside_tag=function(e,t,r,i){var n=r.has_wrapped_attrs,s={text:t.text,type:t.type};return e.set_space_before_token(t.newlines||t.whitespace_before!=="",!0),r.is_unformatted?e.add_raw_token(t):r.tag_start_char==="{"&&t.type===nt.TEXT?e.print_preserved_newlines(t)?(t.newlines=0,e.add_raw_token(t)):e.print_token(t):(t.type===nt.ATTRIBUTE?e.set_space_before_token(!0):(t.type===nt.EQUALS||t.type===nt.VALUE&&t.previous.type===nt.EQUALS)&&e.set_space_before_token(!1),t.type===nt.ATTRIBUTE&&r.tag_start_char==="<"&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(e.traverse_whitespace(t),n=n||t.newlines!==0),this._is_wrap_attributes_force&&r.attr_count>=this._options.wrap_attributes_min_attrs&&(i.type!==nt.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(e.print_newline(!1),n=!0)),e.print_token(t),n=n||e.previous_token_wrapped(),r.has_wrapped_attrs=n),s};be.prototype._handle_text=function(e,t,r){var i={text:t.text,type:"TK_CONTENT"};return r.custom_beautifier_name?this._print_custom_beatifier_text(e,t,r):r.is_unformatted||r.is_content_unformatted?e.add_raw_token(t):(e.traverse_whitespace(t),e.print_token(t)),i};be.prototype._print_custom_beatifier_text=function(e,t,r){var i=this;if(t.text!==""){var n=t.text,s,a=1,o="",u="";r.custom_beautifier_name==="javascript"&&typeof this._js_beautify=="function"?s=this._js_beautify:r.custom_beautifier_name==="css"&&typeof this._css_beautify=="function"?s=this._css_beautify:r.custom_beautifier_name==="html"&&(s=function(g,y){var E=new be(g,y,i._js_beautify,i._css_beautify);return E.beautify()}),this._options.indent_scripts==="keep"?a=0:this._options.indent_scripts==="separate"&&(a=-e.indent_level);var l=e.get_full_indent(a);if(n=n.replace(/\n[ \t]*$/,""),r.custom_beautifier_name!=="html"&&n[0]==="<"&&n.match(/^(<!--|<!\[CDATA\[)/)){var h=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(n);if(!h){e.add_raw_token(t);return}o=l+h[1]+`
`,n=h[4],h[5]&&(u=l+h[5]),n=n.replace(/\n[ \t]*$/,""),(h[2]||h[3].indexOf(`
`)!==-1)&&(h=h[3].match(/[ \t]+$/),h&&(t.whitespace_before=h[0]))}if(n)if(s){var f=function(){this.eol=`
`};f.prototype=this._options.raw_options;var d=new f;n=s(l+n,d)}else{var m=t.whitespace_before;m&&(n=n.replace(new RegExp(`
(`+m+")?","g"),`
`)),n=l+n.replace(/\n/g,`
`+l)}o&&(n?n=o+n+`
`+u:n=o+u),e.print_newline(!1),n&&(t.text=n,t.whitespace_before="",t.newlines=0,e.add_raw_token(t),e.print_newline(!0))}};be.prototype._handle_tag_open=function(e,t,r,i,n){var s=this._get_tag_open_token(t);if((r.is_unformatted||r.is_content_unformatted)&&!r.is_empty_element&&t.type===nt.TAG_OPEN&&!s.is_start_tag?(e.add_raw_token(t),s.start_tag_token=this._tag_stack.try_pop(s.tag_name)):(e.traverse_whitespace(t),this._set_tag_position(e,t,s,r,i),s.is_inline_element||e.set_wrap_point(),e.print_token(t)),s.is_start_tag&&this._is_wrap_attributes_force){var a=0,o;do o=n.peek(a),o.type===nt.ATTRIBUTE&&(s.attr_count+=1),a+=1;while(o.type!==nt.EOF&&o.type!==nt.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(s.alignment_size=t.text.length+1),!s.tag_complete&&!s.is_unformatted&&(e.alignment_size=s.alignment_size),s};var kc=function(e,t,r){if(this.parent=t||null,this.text="",this.type="TK_TAG_OPEN",this.tag_name="",this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char="",this.tag_check="",!r)this.tag_complete=!0;else{var i;this.tag_start_char=r.text[0],this.text=r.text,this.tag_start_char==="<"?(i=r.text.match(/^<([^\s>]*)/),this.tag_check=i?i[1]:""):(i=r.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=i?i[1]:"",(r.text.startsWith("{{#>")||r.text.startsWith("{{~#>"))&&this.tag_check[0]===">"&&(this.tag_check===">"&&r.next!==null?this.tag_check=r.next.text.split(" ")[0]:this.tag_check=r.text.split(">")[1])),this.tag_check=this.tag_check.toLowerCase(),r.type===nt.COMMENT&&(this.tag_complete=!0),this.is_start_tag=this.tag_check.charAt(0)!=="/",this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||r.closed&&r.closed.text==="/>";var n=2;this.tag_start_char==="{"&&this.text.length>=3&&this.text.charAt(2)==="~"&&(n=3),this.is_end_tag=this.is_end_tag||this.tag_start_char==="{"&&(!e.indent_handlebars||this.text.length<3||/[^#\^]/.test(this.text.charAt(n)))}};be.prototype._get_tag_open_token=function(e){var t=new kc(this._options,this._tag_stack.get_parser_token(),e);return t.alignment_size=this._options.wrap_attributes_indent_size,t.is_end_tag=t.is_end_tag||Nn(t.tag_check,this._options.void_elements),t.is_empty_element=t.tag_complete||t.is_start_tag&&t.is_end_tag,t.is_unformatted=!t.tag_complete&&Nn(t.tag_check,this._options.unformatted),t.is_content_unformatted=!t.is_empty_element&&Nn(t.tag_check,this._options.content_unformatted),t.is_inline_element=Nn(t.tag_name,this._options.inline)||this._options.inline_custom_elements&&t.tag_name.includes("-")||t.tag_start_char==="{",t};be.prototype._set_tag_position=function(e,t,r,i,n){if(r.is_empty_element||(r.is_end_tag?r.start_tag_token=this._tag_stack.try_pop(r.tag_name):(this._do_optional_end_element(r)&&(r.is_inline_element||e.print_newline(!1)),this._tag_stack.record_tag(r),(r.tag_name==="script"||r.tag_name==="style")&&!(r.is_unformatted||r.is_content_unformatted)&&(r.custom_beautifier_name=ev(r.tag_check,t)))),Nn(r.tag_check,this._options.extra_liners)&&(e.print_newline(!1),e._output.just_added_blankline()||e.print_newline(!0)),r.is_empty_element){if(r.tag_start_char==="{"&&r.tag_check==="else"){this._tag_stack.indent_to_tag(["if","unless","each"]),r.indent_content=!0;var s=e.current_line_has_match(/{{#if/);s||e.print_newline(!1)}r.tag_name==="!--"&&n.type===nt.TAG_CLOSE&&i.is_end_tag&&r.text.indexOf(`
`)===-1||(r.is_inline_element||r.is_unformatted||e.print_newline(!1),this._calcluate_parent_multiline(e,r))}else if(r.is_end_tag){var a=!1;a=r.start_tag_token&&r.start_tag_token.multiline_content,a=a||!r.is_inline_element&&!(i.is_inline_element||i.is_unformatted)&&!(n.type===nt.TAG_CLOSE&&r.start_tag_token===i)&&n.type!=="TK_CONTENT",(r.is_content_unformatted||r.is_unformatted)&&(a=!1),a&&e.print_newline(!1)}else r.indent_content=!r.custom_beautifier_name,r.tag_start_char==="<"&&(r.tag_name==="html"?r.indent_content=this._options.indent_inner_html:r.tag_name==="head"?r.indent_content=this._options.indent_head_inner_html:r.tag_name==="body"&&(r.indent_content=this._options.indent_body_inner_html)),!(r.is_inline_element||r.is_unformatted)&&(n.type!=="TK_CONTENT"||r.is_content_unformatted)&&e.print_newline(!1),this._calcluate_parent_multiline(e,r)};be.prototype._calcluate_parent_multiline=function(e,t){t.parent&&e._output.just_added_newline()&&!((t.is_inline_element||t.is_unformatted)&&t.parent.is_inline_element)&&(t.parent.multiline_content=!0)};var iv=["address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hr","main","menu","nav","ol","p","pre","section","table","ul"],nv=["a","audio","del","ins","map","noscript","video"];be.prototype._do_optional_end_element=function(e){var t=null;if(!(e.is_empty_element||!e.is_start_tag||!e.parent)){if(e.tag_name==="body")t=t||this._tag_stack.try_pop("head");else if(e.tag_name==="li")t=t||this._tag_stack.try_pop("li",["ol","ul","menu"]);else if(e.tag_name==="dd"||e.tag_name==="dt")t=t||this._tag_stack.try_pop("dt",["dl"]),t=t||this._tag_stack.try_pop("dd",["dl"]);else if(e.parent.tag_name==="p"&&iv.indexOf(e.tag_name)!==-1){var r=e.parent.parent;(!r||nv.indexOf(r.tag_name)===-1)&&(t=t||this._tag_stack.try_pop("p"))}else e.tag_name==="rp"||e.tag_name==="rt"?(t=t||this._tag_stack.try_pop("rt",["ruby","rtc"]),t=t||this._tag_stack.try_pop("rp",["ruby","rtc"])):e.tag_name==="optgroup"?t=t||this._tag_stack.try_pop("optgroup",["select"]):e.tag_name==="option"?t=t||this._tag_stack.try_pop("option",["select","datalist","optgroup"]):e.tag_name==="colgroup"?t=t||this._tag_stack.try_pop("caption",["table"]):e.tag_name==="thead"?(t=t||this._tag_stack.try_pop("caption",["table"]),t=t||this._tag_stack.try_pop("colgroup",["table"])):e.tag_name==="tbody"||e.tag_name==="tfoot"?(t=t||this._tag_stack.try_pop("caption",["table"]),t=t||this._tag_stack.try_pop("colgroup",["table"]),t=t||this._tag_stack.try_pop("thead",["table"]),t=t||this._tag_stack.try_pop("tbody",["table"])):e.tag_name==="tr"?(t=t||this._tag_stack.try_pop("caption",["table"]),t=t||this._tag_stack.try_pop("colgroup",["table"]),t=t||this._tag_stack.try_pop("tr",["table","thead","tbody","tfoot"])):(e.tag_name==="th"||e.tag_name==="td")&&(t=t||this._tag_stack.try_pop("td",["table","thead","tbody","tfoot","tr"]),t=t||this._tag_stack.try_pop("th",["table","thead","tbody","tfoot","tr"]));return e.parent=this._tag_stack.get_parser_token(),t}};Pc.exports.Beautifier=be});var Uc=mt((E$,go)=>{"use strict";var sv=Mc().Beautifier,av=co().Options;function ov(e,t,r,i){var n=new sv(e,t,r,i);return n.beautify()}go.exports=ov;go.exports.defaultOptions=function(){return new av}});var Wc=mt((y$,Zs)=>{"use strict";var Fc=Ec(),Bc=Sc(),$c=Uc();function jc(e,t,r,i){return r=r||Fc,i=i||Bc,$c(e,t,r,i)}jc.defaultOptions=$c.defaultOptions;Zs.exports.js=Fc;Zs.exports.css=Bc;Zs.exports.html=jc});var Kc=mt((x$,Gc)=>{"use strict";function Dc(e,t,r){var i=function(n,s){return e.js_beautify(n,s)};return i.js=e.js_beautify,i.css=t.css_beautify,i.html=r.html_beautify,i.js_beautify=e.js_beautify,i.css_beautify=t.css_beautify,i.html_beautify=r.html_beautify,i}typeof define=="function"&&define.amd?define(["./lib/beautify","./lib/beautify-css","./lib/beautify-html"],function(e,t,r){return Dc(e,t,r)}):(function(e){var t=Wc();t.js_beautify=t.js,t.css_beautify=t.css,t.html_beautify=t.html,e.exports=Dc(t,t,t)})(Gc)});var Up=typeof global=="object"&&global&&global.Object===Object&&global,wn=Up;var Fp=typeof self=="object"&&self&&self.Object===Object&&self,Bp=wn||Fp||Function("return this")(),jt=Bp;var $p=jt.Symbol,Ht=$p;var No=Object.prototype,jp=No.hasOwnProperty,Wp=No.toString,ji=Ht?Ht.toStringTag:void 0;function Dp(e){var t=jp.call(e,ji),r=e[ji];try{e[ji]=void 0;var i=!0}catch{}var n=Wp.call(e);return i&&(t?e[ji]=r:delete e[ji]),n}var Io=Dp;var Gp=Object.prototype,Kp=Gp.toString;function zp(e){return Kp.call(e)}var wo=zp;var qp="[object Null]",Vp="[object Undefined]",Co=Ht?Ht.toStringTag:void 0;function Hp(e){return e==null?e===void 0?Vp:qp:Co&&Co in Object(e)?Io(e):wo(e)}var le=Hp;function Xp(e){return e!=null&&typeof e=="object"}var Ct=Xp;var Yp="[object Symbol]";function Qp(e){return typeof e=="symbol"||Ct(e)&&le(e)==Yp}var _r=Qp;function Zp(e,t){for(var r=-1,i=e==null?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n}var De=Zp;var Jp=Array.isArray,w=Jp;var td=1/0,Lo=Ht?Ht.prototype:void 0,ko=Lo?Lo.toString:void 0;function Po(e){if(typeof e=="string")return e;if(w(e))return De(e,Po)+"";if(_r(e))return ko?ko.call(e):"";var t=e+"";return t=="0"&&1/e==-td?"-0":t}var Mo=Po;var ed=/\s/;function rd(e){for(var t=e.length;t--&&ed.test(e.charAt(t)););return t}var Uo=rd;var id=/^\s+/;function nd(e){return e&&e.slice(0,Uo(e)+1).replace(id,"")}var Fo=nd;function sd(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var vt=sd;var Bo=NaN,ad=/^[-+]0x[0-9a-f]+$/i,od=/^0b[01]+$/i,ud=/^0o[0-7]+$/i,ld=parseInt;function fd(e){if(typeof e=="number")return e;if(_r(e))return Bo;if(vt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=vt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Fo(e);var r=od.test(e);return r||ud.test(e)?ld(e.slice(2),r?2:8):ad.test(e)?Bo:+e}var $o=fd;var jo=1/0,hd=17976931348623157e292;function cd(e){if(!e)return e===0?e:0;if(e=$o(e),e===jo||e===-jo){var t=e<0?-1:1;return t*hd}return e===e?e:0}var Wo=cd;function pd(e){var t=Wo(e),r=t%1;return t===t?r?t-r:t:0}var Ge=pd;function dd(e){return e}var Re=dd;var _d="[object AsyncFunction]",md="[object Function]",gd="[object GeneratorFunction]",Ed="[object Proxy]";function yd(e){if(!vt(e))return!1;var t=le(e);return t==md||t==gd||t==_d||t==Ed}var fe=yd;var xd=jt["__core-js_shared__"],Cn=xd;var Do=(function(){var e=/[^.]+$/.exec(Cn&&Cn.keys&&Cn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function Td(e){return!!Do&&Do in e}var Go=Td;var bd=Function.prototype,Ad=bd.toString;function vd(e){if(e!=null){try{return Ad.call(e)}catch{}try{return e+""}catch{}}return""}var er=vd;var Od=/[\\^$.*+?()[\]{}|]/g,Sd=/^\[object .+?Constructor\]$/,Rd=Function.prototype,Nd=Object.prototype,Id=Rd.toString,wd=Nd.hasOwnProperty,Cd=RegExp("^"+Id.call(wd).replace(Od,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ld(e){if(!vt(e)||Go(e))return!1;var t=fe(e)?Cd:Sd;return t.test(er(e))}var Ko=Ld;function kd(e,t){return e?.[t]}var zo=kd;function Pd(e,t){var r=zo(e,t);return Ko(r)?r:void 0}var ge=Pd;var Md=ge(jt,"WeakMap"),Ln=Md;var qo=Object.create,Ud=(function(){function e(){}return function(t){if(!vt(t))return{};if(qo)return qo(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})(),Vo=Ud;function Fd(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Ho=Fd;function Bd(){}var Ot=Bd;function $d(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var Xo=$d;var jd=800,Wd=16,Dd=Date.now;function Gd(e){var t=0,r=0;return function(){var i=Dd(),n=Wd-(i-r);if(r=i,n>0){if(++t>=jd)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Yo=Gd;function Kd(e){return function(){return e}}var Qo=Kd;var zd=(function(){try{var e=ge(Object,"defineProperty");return e({},"",{}),e}catch{}})(),ti=zd;var qd=ti?function(e,t){return ti(e,"toString",{configurable:!0,enumerable:!1,value:Qo(t),writable:!0})}:Re,Zo=qd;var Vd=Yo(Zo),Jo=Vd;function Hd(e,t){for(var r=-1,i=e==null?0:e.length;++r<i&&t(e[r],r,e)!==!1;);return e}var kn=Hd;function Xd(e,t,r,i){for(var n=e.length,s=r+(i?1:-1);i?s--:++s<n;)if(t(e[s],s,e))return s;return-1}var Pn=Xd;function Yd(e){return e!==e}var tu=Yd;function Qd(e,t,r){for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}var eu=Qd;function Zd(e,t,r){return t===t?eu(e,t,r):Pn(e,tu,r)}var ei=Zd;function Jd(e,t){var r=e==null?0:e.length;return!!r&&ei(e,t,0)>-1}var Mn=Jd;var t_=9007199254740991,e_=/^(?:0|[1-9]\d*)$/;function r_(e,t){var r=typeof e;return t=t??t_,!!t&&(r=="number"||r!="symbol"&&e_.test(e))&&e>-1&&e%1==0&&e<t}var mr=r_;function i_(e,t,r){t=="__proto__"&&ti?ti(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var ri=i_;function n_(e,t){return e===t||e!==e&&t!==t}var Ke=n_;var s_=Object.prototype,a_=s_.hasOwnProperty;function o_(e,t,r){var i=e[t];(!(a_.call(e,t)&&Ke(i,r))||r===void 0&&!(t in e))&&ri(e,t,r)}var gr=o_;function u_(e,t,r,i){var n=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var o=t[s],u=i?i(r[o],e[o],o,r,e):void 0;u===void 0&&(u=e[o]),n?ri(r,o,u):gr(r,o,u)}return r}var ze=u_;var ru=Math.max;function l_(e,t,r){return t=ru(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=ru(i.length-t,0),a=Array(s);++n<s;)a[n]=i[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=i[n];return o[t]=r(a),Ho(e,this,o)}}var iu=l_;function f_(e,t){return Jo(iu(e,t,Re),e+"")}var ii=f_;var h_=9007199254740991;function c_(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=h_}var ni=c_;function p_(e){return e!=null&&ni(e.length)&&!fe(e)}var Wt=p_;function d_(e,t,r){if(!vt(r))return!1;var i=typeof t;return(i=="number"?Wt(r)&&mr(t,r.length):i=="string"&&t in r)?Ke(r[t],e):!1}var Er=d_;function __(e){return ii(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&Er(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,s)}return t})}var nu=__;var m_=Object.prototype;function g_(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||m_;return e===r}var qe=g_;function E_(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var su=E_;var y_="[object Arguments]";function x_(e){return Ct(e)&&le(e)==y_}var ra=x_;var au=Object.prototype,T_=au.hasOwnProperty,b_=au.propertyIsEnumerable,A_=ra((function(){return arguments})())?ra:function(e){return Ct(e)&&T_.call(e,"callee")&&!b_.call(e,"callee")},yr=A_;function v_(){return!1}var ou=v_;var fu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,uu=fu&&typeof module=="object"&&module&&!module.nodeType&&module,O_=uu&&uu.exports===fu,lu=O_?jt.Buffer:void 0,S_=lu?lu.isBuffer:void 0,R_=S_||ou,rr=R_;var N_="[object Arguments]",I_="[object Array]",w_="[object Boolean]",C_="[object Date]",L_="[object Error]",k_="[object Function]",P_="[object Map]",M_="[object Number]",U_="[object Object]",F_="[object RegExp]",B_="[object Set]",$_="[object String]",j_="[object WeakMap]",W_="[object ArrayBuffer]",D_="[object DataView]",G_="[object Float32Array]",K_="[object Float64Array]",z_="[object Int8Array]",q_="[object Int16Array]",V_="[object Int32Array]",H_="[object Uint8Array]",X_="[object Uint8ClampedArray]",Y_="[object Uint16Array]",Q_="[object Uint32Array]",gt={};gt[G_]=gt[K_]=gt[z_]=gt[q_]=gt[V_]=gt[H_]=gt[X_]=gt[Y_]=gt[Q_]=!0;gt[N_]=gt[I_]=gt[W_]=gt[w_]=gt[D_]=gt[C_]=gt[L_]=gt[k_]=gt[P_]=gt[M_]=gt[U_]=gt[F_]=gt[B_]=gt[$_]=gt[j_]=!1;function Z_(e){return Ct(e)&&ni(e.length)&&!!gt[le(e)]}var hu=Z_;function J_(e){return function(t){return e(t)}}var Ve=J_;var cu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wi=cu&&typeof module=="object"&&module&&!module.nodeType&&module,tm=Wi&&Wi.exports===cu,ia=tm&&wn.process,em=(function(){try{var e=Wi&&Wi.require&&Wi.require("util").types;return e||ia&&ia.binding&&ia.binding("util")}catch{}})(),Ne=em;var pu=Ne&&Ne.isTypedArray,rm=pu?Ve(pu):hu,si=rm;var im=Object.prototype,nm=im.hasOwnProperty;function sm(e,t){var r=w(e),i=!r&&yr(e),n=!r&&!i&&rr(e),s=!r&&!i&&!n&&si(e),a=r||i||n||s,o=a?su(e.length,String):[],u=o.length;for(var l in e)(t||nm.call(e,l))&&!(a&&(l=="length"||n&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||mr(l,u)))&&o.push(l);return o}var Un=sm;function am(e,t){return function(r){return e(t(r))}}var Fn=am;var om=Fn(Object.keys,Object),du=om;var um=Object.prototype,lm=um.hasOwnProperty;function fm(e){if(!qe(e))return du(e);var t=[];for(var r in Object(e))lm.call(e,r)&&r!="constructor"&&t.push(r);return t}var Bn=fm;function hm(e){return Wt(e)?Un(e):Bn(e)}var ft=hm;var cm=Object.prototype,pm=cm.hasOwnProperty,dm=nu(function(e,t){if(qe(t)||Wt(t)){ze(t,ft(t),e);return}for(var r in t)pm.call(t,r)&&gr(e,r,t[r])}),ie=dm;function _m(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var _u=_m;var mm=Object.prototype,gm=mm.hasOwnProperty;function Em(e){if(!vt(e))return _u(e);var t=qe(e),r=[];for(var i in e)i=="constructor"&&(t||!gm.call(e,i))||r.push(i);return r}var mu=Em;function ym(e){return Wt(e)?Un(e,!0):mu(e)}var xr=ym;var xm=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Tm=/^\w*$/;function bm(e,t){if(w(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||_r(e)?!0:Tm.test(e)||!xm.test(e)||t!=null&&e in Object(t)}var ai=bm;var Am=ge(Object,"create"),ir=Am;function vm(){this.__data__=ir?ir(null):{},this.size=0}var gu=vm;function Om(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Eu=Om;var Sm="__lodash_hash_undefined__",Rm=Object.prototype,Nm=Rm.hasOwnProperty;function Im(e){var t=this.__data__;if(ir){var r=t[e];return r===Sm?void 0:r}return Nm.call(t,e)?t[e]:void 0}var yu=Im;var wm=Object.prototype,Cm=wm.hasOwnProperty;function Lm(e){var t=this.__data__;return ir?t[e]!==void 0:Cm.call(t,e)}var xu=Lm;var km="__lodash_hash_undefined__";function Pm(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ir&&t===void 0?km:t,this}var Tu=Pm;function oi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}oi.prototype.clear=gu;oi.prototype.delete=Eu;oi.prototype.get=yu;oi.prototype.has=xu;oi.prototype.set=Tu;var na=oi;function Mm(){this.__data__=[],this.size=0}var bu=Mm;function Um(e,t){for(var r=e.length;r--;)if(Ke(e[r][0],t))return r;return-1}var Tr=Um;var Fm=Array.prototype,Bm=Fm.splice;function $m(e){var t=this.__data__,r=Tr(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():Bm.call(t,r,1),--this.size,!0}var Au=$m;function jm(e){var t=this.__data__,r=Tr(t,e);return r<0?void 0:t[r][1]}var vu=jm;function Wm(e){return Tr(this.__data__,e)>-1}var Ou=Wm;function Dm(e,t){var r=this.__data__,i=Tr(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var Su=Dm;function ui(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}ui.prototype.clear=bu;ui.prototype.delete=Au;ui.prototype.get=vu;ui.prototype.has=Ou;ui.prototype.set=Su;var br=ui;var Gm=ge(jt,"Map"),Ar=Gm;function Km(){this.size=0,this.__data__={hash:new na,map:new(Ar||br),string:new na}}var Ru=Km;function zm(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Nu=zm;function qm(e,t){var r=e.__data__;return Nu(t)?r[typeof t=="string"?"string":"hash"]:r.map}var vr=qm;function Vm(e){var t=vr(this,e).delete(e);return this.size-=t?1:0,t}var Iu=Vm;function Hm(e){return vr(this,e).get(e)}var wu=Hm;function Xm(e){return vr(this,e).has(e)}var Cu=Xm;function Ym(e,t){var r=vr(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var Lu=Ym;function li(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}li.prototype.clear=Ru;li.prototype.delete=Iu;li.prototype.get=wu;li.prototype.has=Cu;li.prototype.set=Lu;var Br=li;var Qm="Expected a function";function sa(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Qm);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=e.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(sa.Cache||Br),r}sa.Cache=Br;var ku=sa;var Zm=500;function Jm(e){var t=ku(e,function(i){return r.size===Zm&&r.clear(),i}),r=t.cache;return t}var Pu=Jm;var tg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,eg=/\\(\\)?/g,rg=Pu(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(tg,function(r,i,n,s){t.push(n?s.replace(eg,"$1"):i||r)}),t}),Mu=rg;function ig(e){return e==null?"":Mo(e)}var Uu=ig;function ng(e,t){return w(e)?e:ai(e,t)?[e]:Mu(Uu(e))}var Or=ng;var sg=1/0;function ag(e){if(typeof e=="string"||_r(e))return e;var t=e+"";return t=="0"&&1/e==-sg?"-0":t}var He=ag;function og(e,t){t=Or(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[He(t[r++])];return r&&r==i?e:void 0}var fi=og;function ug(e,t,r){var i=e==null?void 0:fi(e,t);return i===void 0?r:i}var Fu=ug;function lg(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e}var hi=lg;var Bu=Ht?Ht.isConcatSpreadable:void 0;function fg(e){return w(e)||yr(e)||!!(Bu&&e&&e[Bu])}var $u=fg;function ju(e,t,r,i,n){var s=-1,a=e.length;for(r||(r=$u),n||(n=[]);++s<a;){var o=e[s];t>0&&r(o)?t>1?ju(o,t-1,r,i,n):hi(n,o):i||(n[n.length]=o)}return n}var ci=ju;function hg(e){var t=e==null?0:e.length;return t?ci(e,1):[]}var Kt=hg;var cg=Fn(Object.getPrototypeOf,Object),$n=cg;function pg(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++i<n;)s[i]=e[i+t];return s}var jn=pg;function dg(e,t,r,i){var n=-1,s=e==null?0:e.length;for(i&&s&&(r=e[++n]);++n<s;)r=t(r,e[n],n,e);return r}var Wu=dg;function _g(){this.__data__=new br,this.size=0}var Du=_g;function mg(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var Gu=mg;function gg(e){return this.__data__.get(e)}var Ku=gg;function Eg(e){return this.__data__.has(e)}var zu=Eg;var yg=200;function xg(e,t){var r=this.__data__;if(r instanceof br){var i=r.__data__;if(!Ar||i.length<yg-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Br(i)}return r.set(e,t),this.size=r.size,this}var qu=xg;function pi(e){var t=this.__data__=new br(e);this.size=t.size}pi.prototype.clear=Du;pi.prototype.delete=Gu;pi.prototype.get=Ku;pi.prototype.has=zu;pi.prototype.set=qu;var Sr=pi;function Tg(e,t){return e&&ze(t,ft(t),e)}var Vu=Tg;function bg(e,t){return e&&ze(t,xr(t),e)}var Hu=bg;var Zu=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xu=Zu&&typeof module=="object"&&module&&!module.nodeType&&module,Ag=Xu&&Xu.exports===Zu,Yu=Ag?jt.Buffer:void 0,Qu=Yu?Yu.allocUnsafe:void 0;function vg(e,t){if(t)return e.slice();var r=e.length,i=Qu?Qu(r):new e.constructor(r);return e.copy(i),i}var Ju=vg;function Og(e,t){for(var r=-1,i=e==null?0:e.length,n=0,s=[];++r<i;){var a=e[r];t(a,r,e)&&(s[n++]=a)}return s}var di=Og;function Sg(){return[]}var Wn=Sg;var Rg=Object.prototype,Ng=Rg.propertyIsEnumerable,tl=Object.getOwnPropertySymbols,Ig=tl?function(e){return e==null?[]:(e=Object(e),di(tl(e),function(t){return Ng.call(e,t)}))}:Wn,_i=Ig;function wg(e,t){return ze(e,_i(e),t)}var el=wg;var Cg=Object.getOwnPropertySymbols,Lg=Cg?function(e){for(var t=[];e;)hi(t,_i(e)),e=$n(e);return t}:Wn,Dn=Lg;function kg(e,t){return ze(e,Dn(e),t)}var rl=kg;function Pg(e,t,r){var i=t(e);return w(e)?i:hi(i,r(e))}var Gn=Pg;function Mg(e){return Gn(e,ft,_i)}var Di=Mg;function Ug(e){return Gn(e,xr,Dn)}var Kn=Ug;var Fg=ge(jt,"DataView"),zn=Fg;var Bg=ge(jt,"Promise"),qn=Bg;var $g=ge(jt,"Set"),Rr=$g;var il="[object Map]",jg="[object Object]",nl="[object Promise]",sl="[object Set]",al="[object WeakMap]",ol="[object DataView]",Wg=er(zn),Dg=er(Ar),Gg=er(qn),Kg=er(Rr),zg=er(Ln),$r=le;(zn&&$r(new zn(new ArrayBuffer(1)))!=ol||Ar&&$r(new Ar)!=il||qn&&$r(qn.resolve())!=nl||Rr&&$r(new Rr)!=sl||Ln&&$r(new Ln)!=al)&&($r=function(e){var t=le(e),r=t==jg?e.constructor:void 0,i=r?er(r):"";if(i)switch(i){case Wg:return ol;case Dg:return il;case Gg:return nl;case Kg:return sl;case zg:return al}return t});var Me=$r;var qg=Object.prototype,Vg=qg.hasOwnProperty;function Hg(e){var t=e.length,r=new e.constructor(t);return t&&typeof e[0]=="string"&&Vg.call(e,"index")&&(r.index=e.index,r.input=e.input),r}var ul=Hg;var Xg=jt.Uint8Array,mi=Xg;function Yg(e){var t=new e.constructor(e.byteLength);return new mi(t).set(new mi(e)),t}var gi=Yg;function Qg(e,t){var r=t?gi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}var ll=Qg;var Zg=/\w*$/;function Jg(e){var t=new e.constructor(e.source,Zg.exec(e));return t.lastIndex=e.lastIndex,t}var fl=Jg;var hl=Ht?Ht.prototype:void 0,cl=hl?hl.valueOf:void 0;function tE(e){return cl?Object(cl.call(e)):{}}var pl=tE;function eE(e,t){var r=t?gi(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}var dl=eE;var rE="[object Boolean]",iE="[object Date]",nE="[object Map]",sE="[object Number]",aE="[object RegExp]",oE="[object Set]",uE="[object String]",lE="[object Symbol]",fE="[object ArrayBuffer]",hE="[object DataView]",cE="[object Float32Array]",pE="[object Float64Array]",dE="[object Int8Array]",_E="[object Int16Array]",mE="[object Int32Array]",gE="[object Uint8Array]",EE="[object Uint8ClampedArray]",yE="[object Uint16Array]",xE="[object Uint32Array]";function TE(e,t,r){var i=e.constructor;switch(t){case fE:return gi(e);case rE:case iE:return new i(+e);case hE:return ll(e,r);case cE:case pE:case dE:case _E:case mE:case gE:case EE:case yE:case xE:return dl(e,r);case nE:return new i;case sE:case uE:return new i(e);case aE:return fl(e);case oE:return new i;case lE:return pl(e)}}var _l=TE;function bE(e){return typeof e.constructor=="function"&&!qe(e)?Vo($n(e)):{}}var ml=bE;var AE="[object Map]";function vE(e){return Ct(e)&&Me(e)==AE}var gl=vE;var El=Ne&&Ne.isMap,OE=El?Ve(El):gl,yl=OE;var SE="[object Set]";function RE(e){return Ct(e)&&Me(e)==SE}var xl=RE;var Tl=Ne&&Ne.isSet,NE=Tl?Ve(Tl):xl,bl=NE;var IE=1,wE=2,CE=4,Al="[object Arguments]",LE="[object Array]",kE="[object Boolean]",PE="[object Date]",ME="[object Error]",vl="[object Function]",UE="[object GeneratorFunction]",FE="[object Map]",BE="[object Number]",Ol="[object Object]",$E="[object RegExp]",jE="[object Set]",WE="[object String]",DE="[object Symbol]",GE="[object WeakMap]",KE="[object ArrayBuffer]",zE="[object DataView]",qE="[object Float32Array]",VE="[object Float64Array]",HE="[object Int8Array]",XE="[object Int16Array]",YE="[object Int32Array]",QE="[object Uint8Array]",ZE="[object Uint8ClampedArray]",JE="[object Uint16Array]",ty="[object Uint32Array]",ht={};ht[Al]=ht[LE]=ht[KE]=ht[zE]=ht[kE]=ht[PE]=ht[qE]=ht[VE]=ht[HE]=ht[XE]=ht[YE]=ht[FE]=ht[BE]=ht[Ol]=ht[$E]=ht[jE]=ht[WE]=ht[DE]=ht[QE]=ht[ZE]=ht[JE]=ht[ty]=!0;ht[ME]=ht[vl]=ht[GE]=!1;function Vn(e,t,r,i,n,s){var a,o=t&IE,u=t&wE,l=t&CE;if(r&&(a=n?r(e,i,n,s):r(e)),a!==void 0)return a;if(!vt(e))return e;var h=w(e);if(h){if(a=ul(e),!o)return Xo(e,a)}else{var f=Me(e),d=f==vl||f==UE;if(rr(e))return Ju(e,o);if(f==Ol||f==Al||d&&!n){if(a=u||d?{}:ml(e),!o)return u?rl(e,Hu(a,e)):el(e,Vu(a,e))}else{if(!ht[f])return n?e:{};a=_l(e,f,o)}}s||(s=new Sr);var m=s.get(e);if(m)return m;s.set(e,a),bl(e)?e.forEach(function(E){a.add(Vn(E,t,r,E,e,s))}):yl(e)&&e.forEach(function(E,x){a.set(x,Vn(E,t,r,x,e,s))});var g=l?u?Kn:Di:u?xr:ft,y=h?void 0:g(e);return kn(y||e,function(E,x){y&&(x=E,E=e[x]),gr(a,x,Vn(E,t,r,x,e,s))}),a}var Sl=Vn;var ey=4;function ry(e){return Sl(e,ey)}var ct=ry;function iy(e){for(var t=-1,r=e==null?0:e.length,i=0,n=[];++t<r;){var s=e[t];s&&(n[i++]=s)}return n}var Xe=iy;var ny="__lodash_hash_undefined__";function sy(e){return this.__data__.set(e,ny),this}var Rl=sy;function ay(e){return this.__data__.has(e)}var Nl=ay;function Hn(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new Br;++t<r;)this.add(e[t])}Hn.prototype.add=Hn.prototype.push=Rl;Hn.prototype.has=Nl;var Ei=Hn;function oy(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var Xn=oy;function uy(e,t){return e.has(t)}var yi=uy;var ly=1,fy=2;function hy(e,t,r,i,n,s){var a=r&ly,o=e.length,u=t.length;if(o!=u&&!(a&&u>o))return!1;var l=s.get(e),h=s.get(t);if(l&&h)return l==t&&h==e;var f=-1,d=!0,m=r&fy?new Ei:void 0;for(s.set(e,t),s.set(t,e);++f<o;){var g=e[f],y=t[f];if(i)var E=a?i(y,g,f,t,e,s):i(g,y,f,e,t,s);if(E!==void 0){if(E)continue;d=!1;break}if(m){if(!Xn(t,function(x,A){if(!yi(m,A)&&(g===x||n(g,x,r,i,s)))return m.push(A)})){d=!1;break}}else if(!(g===y||n(g,y,r,i,s))){d=!1;break}}return s.delete(e),s.delete(t),d}var Yn=hy;function cy(e){var t=-1,r=Array(e.size);return e.forEach(function(i,n){r[++t]=[n,i]}),r}var Il=cy;function py(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var xi=py;var dy=1,_y=2,my="[object Boolean]",gy="[object Date]",Ey="[object Error]",yy="[object Map]",xy="[object Number]",Ty="[object RegExp]",by="[object Set]",Ay="[object String]",vy="[object Symbol]",Oy="[object ArrayBuffer]",Sy="[object DataView]",wl=Ht?Ht.prototype:void 0,aa=wl?wl.valueOf:void 0;function Ry(e,t,r,i,n,s,a){switch(r){case Sy:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Oy:return!(e.byteLength!=t.byteLength||!s(new mi(e),new mi(t)));case my:case gy:case xy:return Ke(+e,+t);case Ey:return e.name==t.name&&e.message==t.message;case Ty:case Ay:return e==t+"";case yy:var o=Il;case by:var u=i&dy;if(o||(o=xi),e.size!=t.size&&!u)return!1;var l=a.get(e);if(l)return l==t;i|=_y,a.set(e,t);var h=Yn(o(e),o(t),i,n,s,a);return a.delete(e),h;case vy:if(aa)return aa.call(e)==aa.call(t)}return!1}var Cl=Ry;var Ny=1,Iy=Object.prototype,wy=Iy.hasOwnProperty;function Cy(e,t,r,i,n,s){var a=r&Ny,o=Di(e),u=o.length,l=Di(t),h=l.length;if(u!=h&&!a)return!1;for(var f=u;f--;){var d=o[f];if(!(a?d in t:wy.call(t,d)))return!1}var m=s.get(e),g=s.get(t);if(m&&g)return m==t&&g==e;var y=!0;s.set(e,t),s.set(t,e);for(var E=a;++f<u;){d=o[f];var x=e[d],A=t[d];if(i)var T=a?i(A,x,d,t,e,s):i(x,A,d,e,t,s);if(!(T===void 0?x===A||n(x,A,r,i,s):T)){y=!1;break}E||(E=d=="constructor")}if(y&&!E){var $=e.constructor,W=t.constructor;$!=W&&"constructor"in e&&"constructor"in t&&!(typeof $=="function"&&$ instanceof $&&typeof W=="function"&&W instanceof W)&&(y=!1)}return s.delete(e),s.delete(t),y}var Ll=Cy;var Ly=1,kl="[object Arguments]",Pl="[object Array]",Qn="[object Object]",ky=Object.prototype,Ml=ky.hasOwnProperty;function Py(e,t,r,i,n,s){var a=w(e),o=w(t),u=a?Pl:Me(e),l=o?Pl:Me(t);u=u==kl?Qn:u,l=l==kl?Qn:l;var h=u==Qn,f=l==Qn,d=u==l;if(d&&rr(e)){if(!rr(t))return!1;a=!0,h=!1}if(d&&!h)return s||(s=new Sr),a||si(e)?Yn(e,t,r,i,n,s):Cl(e,t,u,r,i,n,s);if(!(r&Ly)){var m=h&&Ml.call(e,"__wrapped__"),g=f&&Ml.call(t,"__wrapped__");if(m||g){var y=m?e.value():e,E=g?t.value():t;return s||(s=new Sr),n(y,E,r,i,s)}}return d?(s||(s=new Sr),Ll(e,t,r,i,n,s)):!1}var Ul=Py;function Fl(e,t,r,i,n){return e===t?!0:e==null||t==null||!Ct(e)&&!Ct(t)?e!==e&&t!==t:Ul(e,t,r,i,Fl,n)}var Zn=Fl;var My=1,Uy=2;function Fy(e,t,r,i){var n=r.length,s=n,a=!i;if(e==null)return!s;for(e=Object(e);n--;){var o=r[n];if(a&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++n<s;){o=r[n];var u=o[0],l=e[u],h=o[1];if(a&&o[2]){if(l===void 0&&!(u in e))return!1}else{var f=new Sr;if(i)var d=i(l,h,u,e,t,f);if(!(d===void 0?Zn(h,l,My|Uy,i,f):d))return!1}}return!0}var Bl=Fy;function By(e){return e===e&&!vt(e)}var Jn=By;function $y(e){for(var t=ft(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,Jn(n)]}return t}var $l=$y;function jy(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var ts=jy;function Wy(e){var t=$l(e);return t.length==1&&t[0][2]?ts(t[0][0],t[0][1]):function(r){return r===e||Bl(r,e,t)}}var jl=Wy;function Dy(e,t){return e!=null&&t in Object(e)}var Wl=Dy;function Gy(e,t,r){t=Or(t,e);for(var i=-1,n=t.length,s=!1;++i<n;){var a=He(t[i]);if(!(s=e!=null&&r(e,a)))break;e=e[a]}return s||++i!=n?s:(n=e==null?0:e.length,!!n&&ni(n)&&mr(a,n)&&(w(e)||yr(e)))}var es=Gy;function Ky(e,t){return e!=null&&es(e,t,Wl)}var Dl=Ky;var zy=1,qy=2;function Vy(e,t){return ai(e)&&Jn(t)?ts(He(e),t):function(r){var i=Fu(r,e);return i===void 0&&i===t?Dl(r,e):Zn(t,i,zy|qy)}}var Gl=Vy;function Hy(e){return function(t){return t?.[e]}}var Kl=Hy;function Xy(e){return function(t){return fi(t,e)}}var zl=Xy;function Yy(e){return ai(e)?Kl(He(e)):zl(e)}var ql=Yy;function Qy(e){return typeof e=="function"?e:e==null?Re:typeof e=="object"?w(e)?Gl(e[0],e[1]):jl(e):ql(e)}var Dt=Qy;function Zy(e,t,r,i){for(var n=-1,s=e==null?0:e.length;++n<s;){var a=e[n];t(i,a,r(a),e)}return i}var Vl=Zy;function Jy(e){return function(t,r,i){for(var n=-1,s=Object(t),a=i(t),o=a.length;o--;){var u=a[e?o:++n];if(r(s[u],u,s)===!1)break}return t}}var Hl=Jy;var tx=Hl(),Xl=tx;function ex(e,t){return e&&Xl(e,t,ft)}var Yl=ex;function rx(e,t){return function(r,i){if(r==null)return r;if(!Wt(r))return e(r,i);for(var n=r.length,s=t?n:-1,a=Object(r);(t?s--:++s<n)&&i(a[s],s,a)!==!1;);return r}}var Ql=rx;var ix=Ql(Yl),Ee=ix;function nx(e,t,r,i){return Ee(e,function(n,s,a){t(i,n,r(n),a)}),i}var Zl=nx;function sx(e,t){return function(r,i){var n=w(r)?Vl:Zl,s=t?t():{};return n(r,e,Dt(i,2),s)}}var Jl=sx;var tf=Object.prototype,ax=tf.hasOwnProperty,ox=ii(function(e,t){e=Object(e);var r=-1,i=t.length,n=i>2?t[2]:void 0;for(n&&Er(t[0],t[1],n)&&(i=1);++r<i;)for(var s=t[r],a=xr(s),o=-1,u=a.length;++o<u;){var l=a[o],h=e[l];(h===void 0||Ke(h,tf[l])&&!ax.call(e,l))&&(e[l]=s[l])}return e}),Ti=ox;function ux(e){return Ct(e)&&Wt(e)}var oa=ux;function lx(e,t,r){for(var i=-1,n=e==null?0:e.length;++i<n;)if(r(t,e[i]))return!0;return!1}var rs=lx;var fx=200;function hx(e,t,r,i){var n=-1,s=Mn,a=!0,o=e.length,u=[],l=t.length;if(!o)return u;r&&(t=De(t,Ve(r))),i?(s=rs,a=!1):t.length>=fx&&(s=yi,a=!1,t=new Ei(t));t:for(;++n<o;){var h=e[n],f=r==null?h:r(h);if(h=i||h!==0?h:0,a&&f===f){for(var d=l;d--;)if(t[d]===f)continue t;u.push(h)}else s(t,f,i)||u.push(h)}return u}var ef=hx;var cx=ii(function(e,t){return oa(e)?ef(e,ci(t,1,oa,!0)):[]}),Nr=cx;function px(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ue=px;function dx(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===void 0?1:Ge(t),jn(e,t<0?0:t,i)):[]}var Lt=dx;function _x(e,t,r){var i=e==null?0:e.length;return i?(t=r||t===void 0?1:Ge(t),t=i-t,jn(e,0,t<0?0:t)):[]}var nr=_x;function mx(e){return typeof e=="function"?e:Re}var rf=mx;function gx(e,t){var r=w(e)?kn:Ee;return r(e,rf(t))}var S=gx;function Ex(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}var nf=Ex;function yx(e,t){var r=!0;return Ee(e,function(i,n,s){return r=!!t(i,n,s),r}),r}var sf=yx;function xx(e,t,r){var i=w(e)?nf:sf;return r&&Er(e,t,r)&&(t=void 0),i(e,Dt(t,3))}var ae=xx;function Tx(e,t){var r=[];return Ee(e,function(i,n,s){t(i,n,s)&&r.push(i)}),r}var is=Tx;function bx(e,t){var r=w(e)?di:is;return r(e,Dt(t,3))}var oe=bx;function Ax(e){return function(t,r,i){var n=Object(t);if(!Wt(t)){var s=Dt(r,3);t=ft(t),r=function(o){return s(n[o],o,n)}}var a=e(t,r,i);return a>-1?n[s?t[a]:a]:void 0}}var af=Ax;var vx=Math.max;function Ox(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var n=r==null?0:Ge(r);return n<0&&(n=vx(i+n,0)),Pn(e,Dt(t,3),n)}var of=Ox;var Sx=af(of),Ye=Sx;function Rx(e){return e&&e.length?e[0]:void 0}var Xt=Rx;function Nx(e,t){var r=-1,i=Wt(e)?Array(e.length):[];return Ee(e,function(n,s,a){i[++r]=t(n,s,a)}),i}var uf=Nx;function Ix(e,t){var r=w(e)?De:uf;return r(e,Dt(t,3))}var v=Ix;function wx(e,t){return ci(v(e,t),1)}var he=wx;var Cx=Object.prototype,Lx=Cx.hasOwnProperty,kx=Jl(function(e,t,r){Lx.call(e,r)?e[r].push(t):ri(e,r,[t])}),ua=kx;var Px=Object.prototype,Mx=Px.hasOwnProperty;function Ux(e,t){return e!=null&&Mx.call(e,t)}var lf=Ux;function Fx(e,t){return e!=null&&es(e,t,lf)}var N=Fx;var Bx="[object String]";function $x(e){return typeof e=="string"||!w(e)&&Ct(e)&&le(e)==Bx}var zt=$x;function jx(e,t){return De(t,function(r){return e[r]})}var ff=jx;function Wx(e){return e==null?[]:ff(e,ft(e))}var at=Wx;var Dx=Math.max;function Gx(e,t,r,i){e=Wt(e)?e:at(e),r=r&&!i?Ge(r):0;var n=e.length;return r<0&&(r=Dx(n+r,0)),zt(e)?r<=n&&e.indexOf(t,r)>-1:!!n&&ei(e,t,r)>-1}var Tt=Gx;var Kx=Math.max;function zx(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var n=r==null?0:Ge(r);return n<0&&(n=Kx(i+n,0)),ei(e,t,n)}var ns=zx;var qx="[object Map]",Vx="[object Set]",Hx=Object.prototype,Xx=Hx.hasOwnProperty;function Yx(e){if(e==null)return!0;if(Wt(e)&&(w(e)||typeof e=="string"||typeof e.splice=="function"||rr(e)||si(e)||yr(e)))return!e.length;var t=Me(e);if(t==qx||t==Vx)return!e.size;if(qe(e))return!Bn(e).length;for(var r in e)if(Xx.call(e,r))return!1;return!0}var H=Yx;var Qx="[object RegExp]";function Zx(e){return Ct(e)&&le(e)==Qx}var hf=Zx;var cf=Ne&&Ne.isRegExp,Jx=cf?Ve(cf):hf,Ie=Jx;function tT(e){return e===void 0}var ue=tT;var eT="Expected a function";function rT(e){if(typeof e!="function")throw new TypeError(eT);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var pf=rT;function iT(e,t,r,i){if(!vt(e))return e;t=Or(t,e);for(var n=-1,s=t.length,a=s-1,o=e;o!=null&&++n<s;){var u=He(t[n]),l=r;if(u==="__proto__"||u==="constructor"||u==="prototype")return e;if(n!=a){var h=o[u];l=i?i(h,u,o):void 0,l===void 0&&(l=vt(h)?h:mr(t[n+1])?[]:{})}gr(o,u,l),o=o[u]}return e}var df=iT;function nT(e,t,r){for(var i=-1,n=t.length,s={};++i<n;){var a=t[i],o=fi(e,a);r(o,a)&&df(s,Or(a,e),o)}return s}var _f=nT;function sT(e,t){if(e==null)return{};var r=De(Kn(e),function(i){return[i]});return t=Dt(t),_f(e,r,function(i,n){return t(i,n[0])})}var ye=sT;function aT(e,t,r,i,n){return n(e,function(s,a,o){r=i?(i=!1,s):t(r,s,a,o)}),r}var mf=aT;function oT(e,t,r){var i=w(e)?Wu:mf,n=arguments.length<3;return i(e,Dt(t,4),r,n,Ee)}var Gt=oT;function uT(e,t){var r=w(e)?di:is;return r(e,pf(Dt(t,3)))}var Ir=uT;function lT(e,t){var r;return Ee(e,function(i,n,s){return r=t(i,n,s),!r}),!!r}var gf=lT;function fT(e,t,r){var i=w(e)?Xn:gf;return r&&Er(e,t,r)&&(t=void 0),i(e,Dt(t,3))}var Gi=fT;var hT=1/0,cT=Rr&&1/xi(new Rr([,-0]))[1]==hT?function(e){return new Rr(e)}:Ot,Ef=cT;var pT=200;function dT(e,t,r){var i=-1,n=Mn,s=e.length,a=!0,o=[],u=o;if(r)a=!1,n=rs;else if(s>=pT){var l=t?null:Ef(e);if(l)return xi(l);a=!1,n=yi,u=new Ei}else u=t?[]:o;t:for(;++i<s;){var h=e[i],f=t?t(h):h;if(h=r||h!==0?h:0,a&&f===f){for(var d=u.length;d--;)if(u[d]===f)continue t;t&&u.push(f),o.push(h)}else n(u,f,r)||(u!==o&&u.push(f),o.push(h))}return o}var yf=dT;function _T(e){return e&&e.length?yf(e):[]}var bi=_T;function Ai(e){console&&console.error&&console.error(`Error: ${e}`)}function Ki(e){console&&console.warn&&console.warn(`Warning: ${e}`)}function zi(e){let t=new Date().getTime(),r=e();return{time:new Date().getTime()-t,value:r}}function qi(e){function t(){}t.prototype=e;let r=new t;function i(){return typeof r.bar}return i(),i(),e;(0,eval)(e)}function mT(e){return gT(e)?e.LABEL:e.name}function gT(e){return zt(e.LABEL)&&e.LABEL!==""}var Ae=class{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){this._definition=t}accept(t){t.visit(this),S(this.definition,r=>{r.accept(t)})}},pt=class extends Ae{constructor(t){super([]),this.idx=1,ie(this,ye(t,r=>r!==void 0))}set definition(t){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(t){t.visit(this)}},ce=class extends Ae{constructor(t){super(t.definition),this.orgText="",ie(this,ye(t,r=>r!==void 0))}},dt=class extends Ae{constructor(t){super(t.definition),this.ignoreAmbiguities=!1,ie(this,ye(t,r=>r!==void 0))}},Et=class extends Ae{constructor(t){super(t.definition),this.idx=1,ie(this,ye(t,r=>r!==void 0))}},kt=class extends Ae{constructor(t){super(t.definition),this.idx=1,ie(this,ye(t,r=>r!==void 0))}},Pt=class extends Ae{constructor(t){super(t.definition),this.idx=1,ie(this,ye(t,r=>r!==void 0))}},st=class extends Ae{constructor(t){super(t.definition),this.idx=1,ie(this,ye(t,r=>r!==void 0))}},It=class extends Ae{constructor(t){super(t.definition),this.idx=1,ie(this,ye(t,r=>r!==void 0))}},wt=class extends Ae{get definition(){return this._definition}set definition(t){this._definition=t}constructor(t){super(t.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,ie(this,ye(t,r=>r!==void 0))}},J=class{constructor(t){this.idx=1,ie(this,ye(t,r=>r!==void 0))}accept(t){t.visit(this)}};function ss(e){return v(e,vi)}function vi(e){function t(r){return v(r,vi)}if(e instanceof pt){let r={type:"NonTerminal",name:e.nonTerminalName,idx:e.idx};return zt(e.label)&&(r.label=e.label),r}else{if(e instanceof dt)return{type:"Alternative",definition:t(e.definition)};if(e instanceof Et)return{type:"Option",idx:e.idx,definition:t(e.definition)};if(e instanceof kt)return{type:"RepetitionMandatory",idx:e.idx,definition:t(e.definition)};if(e instanceof Pt)return{type:"RepetitionMandatoryWithSeparator",idx:e.idx,separator:vi(new J({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof It)return{type:"RepetitionWithSeparator",idx:e.idx,separator:vi(new J({terminalType:e.separator})),definition:t(e.definition)};if(e instanceof st)return{type:"Repetition",idx:e.idx,definition:t(e.definition)};if(e instanceof wt)return{type:"Alternation",idx:e.idx,definition:t(e.definition)};if(e instanceof J){let r={type:"Terminal",name:e.terminalType.name,label:mT(e.terminalType),idx:e.idx};zt(e.label)&&(r.terminalLabel=e.label);let i=e.terminalType.PATTERN;return e.terminalType.PATTERN&&(r.pattern=Ie(i)?i.source:i),r}else{if(e instanceof ce)return{type:"Rule",name:e.name,orgText:e.orgText,definition:t(e.definition)};throw Error("non exhaustive match")}}}var pe=class{visit(t){let r=t;switch(r.constructor){case pt:return this.visitNonTerminal(r);case dt:return this.visitAlternative(r);case Et:return this.visitOption(r);case kt:return this.visitRepetitionMandatory(r);case Pt:return this.visitRepetitionMandatoryWithSeparator(r);case It:return this.visitRepetitionWithSeparator(r);case st:return this.visitRepetition(r);case wt:return this.visitAlternation(r);case J:return this.visitTerminal(r);case ce:return this.visitRule(r);default:throw Error("non exhaustive match")}}visitNonTerminal(t){}visitAlternative(t){}visitOption(t){}visitRepetition(t){}visitRepetitionMandatory(t){}visitRepetitionMandatoryWithSeparator(t){}visitRepetitionWithSeparator(t){}visitAlternation(t){}visitTerminal(t){}visitRule(t){}};function la(e){return e instanceof dt||e instanceof Et||e instanceof st||e instanceof kt||e instanceof Pt||e instanceof It||e instanceof J||e instanceof ce}function jr(e,t=[]){return e instanceof Et||e instanceof st||e instanceof It?!0:e instanceof wt?Gi(e.definition,i=>jr(i,t)):e instanceof pt&&Tt(t,e)?!1:e instanceof Ae?(e instanceof pt&&t.push(e),ae(e.definition,i=>jr(i,t))):!1}function fa(e){return e instanceof wt}function xe(e){if(e instanceof pt)return"SUBRULE";if(e instanceof Et)return"OPTION";if(e instanceof wt)return"OR";if(e instanceof kt)return"AT_LEAST_ONE";if(e instanceof Pt)return"AT_LEAST_ONE_SEP";if(e instanceof It)return"MANY_SEP";if(e instanceof st)return"MANY";if(e instanceof J)return"CONSUME";throw Error("non exhaustive match")}var sr=class{walk(t,r=[]){S(t.definition,(i,n)=>{let s=Lt(t.definition,n+1);if(i instanceof pt)this.walkProdRef(i,s,r);else if(i instanceof J)this.walkTerminal(i,s,r);else if(i instanceof dt)this.walkFlat(i,s,r);else if(i instanceof Et)this.walkOption(i,s,r);else if(i instanceof kt)this.walkAtLeastOne(i,s,r);else if(i instanceof Pt)this.walkAtLeastOneSep(i,s,r);else if(i instanceof It)this.walkManySep(i,s,r);else if(i instanceof st)this.walkMany(i,s,r);else if(i instanceof wt)this.walkOr(i,s,r);else throw Error("non exhaustive match")})}walkTerminal(t,r,i){}walkProdRef(t,r,i){}walkFlat(t,r,i){let n=r.concat(i);this.walk(t,n)}walkOption(t,r,i){let n=r.concat(i);this.walk(t,n)}walkAtLeastOne(t,r,i){let n=[new Et({definition:t.definition})].concat(r,i);this.walk(t,n)}walkAtLeastOneSep(t,r,i){let n=xf(t,r,i);this.walk(t,n)}walkMany(t,r,i){let n=[new Et({definition:t.definition})].concat(r,i);this.walk(t,n)}walkManySep(t,r,i){let n=xf(t,r,i);this.walk(t,n)}walkOr(t,r,i){let n=r.concat(i);S(t.definition,s=>{let a=new dt({definition:[s]});this.walk(a,n)})}};function xf(e,t,r){return[new Et({definition:[new J({terminalType:e.separator})].concat(e.definition)})].concat(t,r)}function Wr(e){if(e instanceof pt)return Wr(e.referencedRule);if(e instanceof J)return xT(e);if(la(e))return ET(e);if(fa(e))return yT(e);throw Error("non exhaustive match")}function ET(e){let t=[],r=e.definition,i=0,n=r.length>i,s,a=!0;for(;n&&a;)s=r[i],a=jr(s),t=t.concat(Wr(s)),i=i+1,n=r.length>i;return bi(t)}function yT(e){let t=v(e.definition,r=>Wr(r));return bi(Kt(t))}function xT(e){return[e.terminalType]}var as="_~IN~_";var ha=class extends sr{constructor(t){super(),this.topProd=t,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(t,r,i){}walkProdRef(t,r,i){let n=TT(t.referencedRule,t.idx)+this.topProd.name,s=r.concat(i),a=new dt({definition:s}),o=Wr(a);this.follows[n]=o}};function Tf(e){let t={};return S(e,r=>{let i=new ha(r).startWalking();ie(t,i)}),t}function TT(e,t){return e.name+t+as}function M(e){return e.charCodeAt(0)}function os(e,t){Array.isArray(e)?e.forEach(function(r){t.push(r)}):t.push(e)}function Oi(e,t){if(e[t]===!0)throw"duplicate flag "+t;let r=e[t];e[t]=!0}function Dr(e){if(e===void 0)throw Error("Internal Error - Should never get here!");return!0}function Vi(){throw Error("Internal Error - Should never get here!")}function ca(e){return e.type==="Character"}var Hi=[];for(let e=M("0");e<=M("9");e++)Hi.push(e);var Xi=[M("_")].concat(Hi);for(let e=M("a");e<=M("z");e++)Xi.push(e);for(let e=M("A");e<=M("Z");e++)Xi.push(e);var pa=[M(" "),M("\f"),M(`
`),M("\r"),M("	"),M("\v"),M("	"),M("\xA0"),M("\u1680"),M("\u2000"),M("\u2001"),M("\u2002"),M("\u2003"),M("\u2004"),M("\u2005"),M("\u2006"),M("\u2007"),M("\u2008"),M("\u2009"),M("\u200A"),M("\u2028"),M("\u2029"),M("\u202F"),M("\u205F"),M("\u3000"),M("\uFEFF")];var bT=/[0-9a-fA-F]/,us=/[0-9]/,AT=/[1-9]/,Yi=class{constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(t){this.idx=t.idx,this.input=t.input,this.groupIdx=t.groupIdx}pattern(t){this.idx=0,this.input=t,this.groupIdx=0,this.consumeChar("/");let r=this.disjunction();this.consumeChar("/");let i={type:"Flags",loc:{begin:this.idx,end:t.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":Oi(i,"global");break;case"i":Oi(i,"ignoreCase");break;case"m":Oi(i,"multiLine");break;case"u":Oi(i,"unicode");break;case"y":Oi(i,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:i,value:r,loc:this.loc(0)}}disjunction(){let t=[],r=this.idx;for(t.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),t.push(this.alternative());return{type:"Disjunction",value:t,loc:this.loc(r)}}alternative(){let t=[],r=this.idx;for(;this.isTerm();)t.push(this.term());return{type:"Alternative",value:t,loc:this.loc(r)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let t=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(t)};case"$":return{type:"EndAnchor",loc:this.loc(t)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(t)};case"B":return{type:"NonWordBoundary",loc:this.loc(t)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let r;switch(this.popChar()){case"=":r="Lookahead";break;case"!":r="NegativeLookahead";break;case"<":{switch(this.popChar()){case"=":r="Lookbehind";break;case"!":r="NegativeLookbehind"}break}}Dr(r);let i=this.disjunction();return this.consumeChar(")"),{type:r,value:i,loc:this.loc(t)}}return Vi()}quantifier(t=!1){let r,i=this.idx;switch(this.popChar()){case"*":r={atLeast:0,atMost:1/0};break;case"+":r={atLeast:1,atMost:1/0};break;case"?":r={atLeast:0,atMost:1};break;case"{":let n=this.integerIncludingZero();switch(this.popChar()){case"}":r={atLeast:n,atMost:n};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),r={atLeast:n,atMost:s}):r={atLeast:n,atMost:1/0},this.consumeChar("}");break}if(t===!0&&r===void 0)return;Dr(r);break}if(!(t===!0&&r===void 0)&&Dr(r))return this.peekChar(0)==="?"?(this.consumeChar("?"),r.greedy=!1):r.greedy=!0,r.type="Quantifier",r.loc=this.loc(i),r}atom(){let t,r=this.idx;switch(this.peekChar()){case".":t=this.dotAll();break;case"\\":t=this.atomEscape();break;case"[":t=this.characterClass();break;case"(":t=this.group();break}return t===void 0&&this.isPatternCharacter()&&(t=this.patternCharacter()),Dr(t)?(t.loc=this.loc(r),this.isQuantifier()&&(t.quantifier=this.quantifier()),t):Vi()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[M(`
`),M("\r"),M("\u2028"),M("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let t,r=!1;switch(this.popChar()){case"d":t=Hi;break;case"D":t=Hi,r=!0;break;case"s":t=pa;break;case"S":t=pa,r=!0;break;case"w":t=Xi;break;case"W":t=Xi,r=!0;break}return Dr(t)?{type:"Set",value:t,complement:r}:Vi()}controlEscapeAtom(){let t;switch(this.popChar()){case"f":t=M("\f");break;case"n":t=M(`
`);break;case"r":t=M("\r");break;case"t":t=M("	");break;case"v":t=M("\v");break}return Dr(t)?{type:"Character",value:t}:Vi()}controlLetterEscapeAtom(){this.consumeChar("c");let t=this.popChar();if(/[a-zA-Z]/.test(t)===!1)throw Error("Invalid ");return{type:"Character",value:t.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:M("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let t=this.popChar();return{type:"Character",value:M(t)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let t=this.popChar();return{type:"Character",value:M(t)}}}characterClass(){let t=[],r=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),r=!0);this.isClassAtom();){let i=this.classAtom(),n=i.type==="Character";if(ca(i)&&this.isRangeDash()){this.consumeChar("-");let s=this.classAtom(),a=s.type==="Character";if(ca(s)){if(s.value<i.value)throw Error("Range out of order in character class");t.push({from:i.value,to:s.value})}else os(i.value,t),t.push(M("-")),os(s.value,t)}else os(i.value,t)}return this.consumeChar("]"),{type:"Set",complement:r,value:t}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:M("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let t=!0;this.consumeChar("("),this.peekChar(0)==="?"?(this.consumeChar("?"),this.consumeChar(":"),t=!1):this.groupIdx++;let r=this.disjunction();this.consumeChar(")");let i={type:"Group",capturing:t,value:r};return t&&(i.idx=this.groupIdx),i}positiveInteger(){let t=this.popChar();if(AT.test(t)===!1)throw Error("Expecting a positive integer");for(;us.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}integerIncludingZero(){let t=this.popChar();if(us.test(t)===!1)throw Error("Expecting an integer");for(;us.test(this.peekChar(0));)t+=this.popChar();return parseInt(t,10)}patternCharacter(){let t=this.popChar();switch(t){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:M(t)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return us.test(this.peekChar(0))}isClassAtom(t=0){switch(this.peekChar(t)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!"||this.peekChar(2)==="<"&&(this.peekChar(3)==="="||this.peekChar(3)==="!"));default:return!1}}isQuantifier(){let t=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(t)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(t){let r="";for(let n=0;n<t;n++){let s=this.popChar();if(bT.test(s)===!1)throw Error("Expecting a HexDecimal digits");r+=s}return{type:"Character",value:parseInt(r,16)}}peekChar(t=0){return this.input[this.idx+t]}popChar(){let t=this.peekChar(0);return this.consumeChar(void 0),t}consumeChar(t){if(t!==void 0&&this.input[this.idx]!==t)throw Error("Expected: '"+t+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(t){return{begin:t,end:this.idx}}};var wr=class{visitChildren(t){for(let r in t){let i=t[r];t.hasOwnProperty(r)&&(i.type!==void 0?this.visit(i):Array.isArray(i)&&i.forEach(n=>{this.visit(n)},this))}}visit(t){switch(t.type){case"Pattern":this.visitPattern(t);break;case"Flags":this.visitFlags(t);break;case"Disjunction":this.visitDisjunction(t);break;case"Alternative":this.visitAlternative(t);break;case"StartAnchor":this.visitStartAnchor(t);break;case"EndAnchor":this.visitEndAnchor(t);break;case"WordBoundary":this.visitWordBoundary(t);break;case"NonWordBoundary":this.visitNonWordBoundary(t);break;case"Lookahead":this.visitLookahead(t);break;case"NegativeLookahead":this.visitNegativeLookahead(t);break;case"Lookbehind":this.visitLookbehind(t);break;case"NegativeLookbehind":this.visitNegativeLookbehind(t);break;case"Character":this.visitCharacter(t);break;case"Set":this.visitSet(t);break;case"Group":this.visitGroup(t);break;case"GroupBackReference":this.visitGroupBackReference(t);break;case"Quantifier":this.visitQuantifier(t);break}this.visitChildren(t)}visitPattern(t){}visitFlags(t){}visitDisjunction(t){}visitAlternative(t){}visitStartAnchor(t){}visitEndAnchor(t){}visitWordBoundary(t){}visitNonWordBoundary(t){}visitLookahead(t){}visitNegativeLookahead(t){}visitLookbehind(t){}visitNegativeLookbehind(t){}visitCharacter(t){}visitSet(t){}visitGroup(t){}visitGroupBackReference(t){}visitQuantifier(t){}};var ls={},vT=new Yi;function Si(e){let t=e.toString();if(ls.hasOwnProperty(t))return ls[t];{let r=vT.pattern(t);return ls[t]=r,r}}function bf(){ls={}}var vf="Complement Sets are not supported for first char optimization",Qi=`Unable to use "first char" lexer optimizations:
`;function Of(e,t=!1){try{let r=Si(e);return da(r.value,{},r.flags.ignoreCase)}catch(r){if(r.message===vf)t&&Ki(`${Qi}	Unable to optimize: < ${e.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let i="";t&&(i=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),Ai(`${Qi}
	Failed parsing: < ${e.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+i)}}return[]}function da(e,t,r){switch(e.type){case"Disjunction":for(let n=0;n<e.value.length;n++)da(e.value[n],t,r);break;case"Alternative":let i=e.value;for(let n=0;n<i.length;n++){let s=i[n];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"Lookbehind":case"NegativeLookbehind":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let a=s;switch(a.type){case"Character":fs(a.value,t,r);break;case"Set":if(a.complement===!0)throw Error(vf);S(a.value,u=>{if(typeof u=="number")fs(u,t,r);else{let l=u;if(r===!0)for(let h=l.from;h<=l.to;h++)fs(h,t,r);else{for(let h=l.from;h<=l.to&&h<Ri;h++)fs(h,t,r);if(l.to>=Ri){let h=l.from>=Ri?l.from:Ri,f=l.to,d=Qe(h),m=Qe(f);for(let g=d;g<=m;g++)t[g]=g}}}});break;case"Group":da(a.value,t,r);break;default:throw Error("Non Exhaustive Match")}let o=a.quantifier!==void 0&&a.quantifier.atLeast===0;if(a.type==="Group"&&_a(a)===!1||a.type!=="Group"&&o===!1)break}break;default:throw Error("non exhaustive match!")}return at(t)}function fs(e,t,r){let i=Qe(e);t[i]=i,r===!0&&OT(e,t)}function OT(e,t){let r=String.fromCharCode(e),i=r.toUpperCase();if(i!==r){let n=Qe(i.charCodeAt(0));t[n]=n}else{let n=r.toLowerCase();if(n!==r){let s=Qe(n.charCodeAt(0));t[s]=s}}}function Af(e,t){return Ye(e.value,r=>{if(typeof r=="number")return Tt(t,r);{let i=r;return Ye(t,n=>i.from<=n&&n<=i.to)!==void 0}})}function _a(e){let t=e.quantifier;return t&&t.atLeast===0?!0:e.value?w(e.value)?ae(e.value,_a):_a(e.value):!1}var ma=class extends wr{constructor(t){super(),this.targetCharCodes=t,this.found=!1}visitChildren(t){if(this.found!==!0){switch(t.type){case"Lookahead":this.visitLookahead(t);return;case"NegativeLookahead":this.visitNegativeLookahead(t);return;case"Lookbehind":this.visitLookbehind(t);return;case"NegativeLookbehind":this.visitNegativeLookbehind(t);return}super.visitChildren(t)}}visitCharacter(t){Tt(this.targetCharCodes,t.value)&&(this.found=!0)}visitSet(t){t.complement?Af(t,this.targetCharCodes)===void 0&&(this.found=!0):Af(t,this.targetCharCodes)!==void 0&&(this.found=!0)}};function hs(e,t){if(t instanceof RegExp){let r=Si(t),i=new ma(e);return i.visit(r),i.found}else return Ye(t,r=>Tt(e,r.charCodeAt(0)))!==void 0}var Gr="PATTERN",Ni="defaultMode",cs="modes",Ea=typeof new RegExp("(?:)").sticky=="boolean";function Nf(e,t){t=Ti(t,{useSticky:Ea,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(A,T)=>T()});let r=t.tracer;r("initCharCodeToOptimizedIndexMap",()=>{KT()});let i;r("Reject Lexer.NA",()=>{i=Ir(e,A=>A[Gr]===St.NA)});let n=!1,s;r("Transform Patterns",()=>{n=!1,s=v(i,A=>{let T=A[Gr];if(Ie(T)){let $=T.source;return $.length===1&&$!=="^"&&$!=="$"&&$!=="."&&!T.ignoreCase?$:$.length===2&&$[0]==="\\"&&!Tt(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],$[1])?$[1]:t.useSticky?Rf(T):Sf(T)}else{if(fe(T))return n=!0,{exec:T};if(typeof T=="object")return n=!0,T;if(typeof T=="string"){if(T.length===1)return T;{let $=T.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),W=new RegExp($);return t.useSticky?Rf(W):Sf(W)}}else throw Error("non exhaustive match")}})});let a,o,u,l,h;r("misc mapping",()=>{a=v(i,A=>A.tokenTypeIdx),o=v(i,A=>{let T=A.GROUP;if(T!==St.SKIPPED){if(zt(T))return T;if(ue(T))return!1;throw Error("non exhaustive match")}}),u=v(i,A=>{let T=A.LONGER_ALT;if(T)return w(T)?v(T,W=>ns(i,W)):[ns(i,T)]}),l=v(i,A=>A.PUSH_MODE),h=v(i,A=>N(A,"POP_MODE"))});let f;r("Line Terminator Handling",()=>{let A=Uf(t.lineTerminatorCharacters);f=v(i,T=>!1),t.positionTracking!=="onlyOffset"&&(f=v(i,T=>N(T,"LINE_BREAKS")?!!T.LINE_BREAKS:Mf(T,A)===!1&&hs(A,T.PATTERN)))});let d,m,g,y;r("Misc Mapping #2",()=>{d=v(i,kf),m=v(s,DT),g=Gt(i,(A,T)=>{let $=T.GROUP;return zt($)&&$!==St.SKIPPED&&(A[$]=[]),A},{}),y=v(s,(A,T)=>({pattern:s[T],longerAlt:u[T],canLineTerminator:f[T],isCustom:d[T],short:m[T],group:o[T],push:l[T],pop:h[T],tokenTypeIdx:a[T],tokenType:i[T]}))});let E=!0,x=[];return t.safeMode||r("First Char Optimization",()=>{x=Gt(i,(A,T,$)=>{if(typeof T.PATTERN=="string"){let W=T.PATTERN.charCodeAt(0),Vt=Qe(W);ga(A,Vt,y[$])}else if(w(T.START_CHARS_HINT)){let W;S(T.START_CHARS_HINT,Vt=>{let Zr=typeof Vt=="string"?Vt.charCodeAt(0):Vt,Se=Qe(Zr);W!==Se&&(W=Se,ga(A,Se,y[$]))})}else if(Ie(T.PATTERN))if(T.PATTERN.unicode)E=!1,t.ensureOptimizations&&Ai(`${Qi}	Unable to analyze < ${T.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let W=Of(T.PATTERN,t.ensureOptimizations);H(W)&&(E=!1),S(W,Vt=>{ga(A,Vt,y[$])})}else t.ensureOptimizations&&Ai(`${Qi}	TokenType: <${T.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),E=!1;return A},[])}),{emptyGroups:g,patternIdxToConfig:y,charCodeToPatternIdxToConfig:x,hasCustom:n,canBeOptimized:E}}function If(e,t){let r=[],i=RT(e);r=r.concat(i.errors);let n=NT(i.valid),s=n.valid;return r=r.concat(n.errors),r=r.concat(ST(s)),r=r.concat(UT(s)),r=r.concat(FT(s,t)),r=r.concat(BT(s)),r}function ST(e){let t=[],r=oe(e,i=>Ie(i[Gr]));return t=t.concat(wT(r)),t=t.concat(kT(r)),t=t.concat(PT(r)),t=t.concat(MT(r)),t=t.concat(CT(r)),t}function RT(e){let t=oe(e,n=>!N(n,Gr)),r=v(t,n=>({message:"Token Type: ->"+n.name+"<- missing static 'PATTERN' property",type:bt.MISSING_PATTERN,tokenTypes:[n]})),i=Nr(e,t);return{errors:r,valid:i}}function NT(e){let t=oe(e,n=>{let s=n[Gr];return!Ie(s)&&!fe(s)&&!N(s,"exec")&&!zt(s)}),r=v(t,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:bt.INVALID_PATTERN,tokenTypes:[n]})),i=Nr(e,t);return{errors:r,valid:i}}var IT=/[^\\][$]/;function wT(e){class t extends wr{constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}let r=oe(e,n=>{let s=n.PATTERN;try{let a=Si(s),o=new t;return o.visit(a),o.found}catch{return IT.test(s.source)}});return v(r,n=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:bt.EOI_ANCHOR_FOUND,tokenTypes:[n]}))}function CT(e){let t=oe(e,i=>i.PATTERN.test(""));return v(t,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' must not match an empty string",type:bt.EMPTY_MATCH_PATTERN,tokenTypes:[i]}))}var LT=/[^\\[][\^]|^\^/;function kT(e){class t extends wr{constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}let r=oe(e,n=>{let s=n.PATTERN;try{let a=Si(s),o=new t;return o.visit(a),o.found}catch{return LT.test(s.source)}});return v(r,n=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+n.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:bt.SOI_ANCHOR_FOUND,tokenTypes:[n]}))}function PT(e){let t=oe(e,i=>{let n=i[Gr];return n instanceof RegExp&&(n.multiline||n.global)});return v(t,i=>({message:"Token Type: ->"+i.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:bt.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[i]}))}function MT(e){let t=[],r=v(e,s=>Gt(e,(a,o)=>(s.PATTERN.source===o.PATTERN.source&&!Tt(t,o)&&o.PATTERN!==St.NA&&(t.push(o),a.push(o)),a),[]));r=Xe(r);let i=oe(r,s=>s.length>1);return v(i,s=>{let a=v(s,u=>u.name);return{message:`The same RegExp pattern ->${Xt(s).PATTERN}<-has been used in all of the following Token Types: ${a.join(", ")} <-`,type:bt.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}function UT(e){let t=oe(e,i=>{if(!N(i,"GROUP"))return!1;let n=i.GROUP;return n!==St.SKIPPED&&n!==St.NA&&!zt(n)});return v(t,i=>({message:"Token Type: ->"+i.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:bt.INVALID_GROUP_TYPE_FOUND,tokenTypes:[i]}))}function FT(e,t){let r=oe(e,n=>n.PUSH_MODE!==void 0&&!Tt(t,n.PUSH_MODE));return v(r,n=>({message:`Token Type: ->${n.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${n.PUSH_MODE}<-which does not exist`,type:bt.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[n]}))}function BT(e){let t=[],r=Gt(e,(i,n,s)=>{let a=n.PATTERN;return a===St.NA||(zt(a)?i.push({str:a,idx:s,tokenType:n}):Ie(a)&&jT(a)&&i.push({str:a.source,idx:s,tokenType:n})),i},[]);return S(e,(i,n)=>{S(r,({str:s,idx:a,tokenType:o})=>{if(n<a&&$T(s,i.PATTERN)){let u=`Token: ->${o.name}<- can never be matched.
Because it appears AFTER the Token Type ->${i.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;t.push({message:u,type:bt.UNREACHABLE_PATTERN,tokenTypes:[i,o]})}})}),t}function $T(e,t){if(Ie(t)){if(WT(t))return!1;let r=t.exec(e);return r!==null&&r.index===0}else{if(fe(t))return t(e,0,[],{});if(N(t,"exec"))return t.exec(e,0,[],{});if(typeof t=="string")return t===e;throw Error("non exhaustive match")}}function jT(e){return Ye([".","\\","[","]","|","^","$","(",")","?","*","+","{"],r=>e.source.indexOf(r)!==-1)===void 0}function WT(e){return/(\(\?=)|(\(\?!)|(\(\?<=)|(\(\?<!)/.test(e.source)}function Sf(e){let t=e.ignoreCase?"i":"";return new RegExp(`^(?:${e.source})`,t)}function Rf(e){let t=e.ignoreCase?"iy":"y";return new RegExp(`${e.source}`,t)}function wf(e,t,r){let i=[];return N(e,Ni)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+Ni+`> property in its definition
`,type:bt.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),N(e,cs)||i.push({message:"A MultiMode Lexer cannot be initialized without a <"+cs+`> property in its definition
`,type:bt.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),N(e,cs)&&N(e,Ni)&&!N(e.modes,e.defaultMode)&&i.push({message:`A MultiMode Lexer cannot be initialized with a ${Ni}: <${e.defaultMode}>which does not exist
`,type:bt.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),N(e,cs)&&S(e.modes,(n,s)=>{S(n,(a,o)=>{if(ue(a))i.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${o}>
`,type:bt.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(N(a,"LONGER_ALT")){let u=w(a.LONGER_ALT)?a.LONGER_ALT:[a.LONGER_ALT];S(u,l=>{!ue(l)&&!Tt(n,l)&&i.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${l.name}> on token <${a.name}> outside of mode <${s}>
`,type:bt.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),i}function Cf(e,t,r){let i=[],n=!1,s=Xe(Kt(at(e.modes))),a=Ir(s,u=>u[Gr]===St.NA),o=Uf(r);return t&&S(a,u=>{let l=Mf(u,o);if(l!==!1){let f={message:GT(u,l),type:l.issue,tokenType:u};i.push(f)}else N(u,"LINE_BREAKS")?u.LINE_BREAKS===!0&&(n=!0):hs(o,u.PATTERN)&&(n=!0)}),t&&!n&&i.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:bt.NO_LINE_BREAKS_FLAGS}),i}function Lf(e){let t={},r=ft(e);return S(r,i=>{let n=e[i];if(w(n))t[i]=[];else throw Error("non exhaustive match")}),t}function kf(e){let t=e.PATTERN;if(Ie(t))return!1;if(fe(t))return!0;if(N(t,"exec"))return!0;if(zt(t))return!1;throw Error("non exhaustive match")}function DT(e){return zt(e)&&e.length===1?e.charCodeAt(0):!1}var Pf={test:function(e){let t=e.length;for(let r=this.lastIndex;r<t;r++){let i=e.charCodeAt(r);if(i===10)return this.lastIndex=r+1,!0;if(i===13)return e.charCodeAt(r+1)===10?this.lastIndex=r+2:this.lastIndex=r+1,!0}return!1},lastIndex:0};function Mf(e,t){if(N(e,"LINE_BREAKS"))return!1;if(Ie(e.PATTERN)){try{hs(t,e.PATTERN)}catch(r){return{issue:bt.IDENTIFY_TERMINATOR,errMsg:r.message}}return!1}else{if(zt(e.PATTERN))return!1;if(kf(e))return{issue:bt.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function GT(e,t){if(t.issue===bt.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${e.name}> Token Type
	 Root cause: ${t.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(t.issue===bt.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${e.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}function Uf(e){return v(e,r=>zt(r)?r.charCodeAt(0):r)}function ga(e,t,r){e[t]===void 0?e[t]=[r]:e[t].push(r)}var Ri=256,ps=[];function Qe(e){return e<Ri?e:ps[e]}function KT(){if(H(ps)){ps=new Array(65536);for(let e=0;e<65536;e++)ps[e]=e>255?255+~~(e/255):e}}function ar(e,t){let r=e.tokenTypeIdx;return r===t.tokenTypeIdx?!0:t.isParent===!0&&t.categoryMatchesMap[r]===!0}function Ii(e,t){return e.tokenTypeIdx===t.tokenTypeIdx}var Ff=1,$f={};function or(e){let t=zT(e);qT(t),HT(t),VT(t),S(t,r=>{r.isParent=r.categoryMatches.length>0})}function zT(e){let t=ct(e),r=e,i=!0;for(;i;){r=Xe(Kt(v(r,s=>s.CATEGORIES)));let n=Nr(r,t);t=t.concat(n),H(n)?i=!1:r=n}return t}function qT(e){S(e,t=>{ya(t)||($f[Ff]=t,t.tokenTypeIdx=Ff++),Bf(t)&&!w(t.CATEGORIES)&&(t.CATEGORIES=[t.CATEGORIES]),Bf(t)||(t.CATEGORIES=[]),XT(t)||(t.categoryMatches=[]),YT(t)||(t.categoryMatchesMap={})})}function VT(e){S(e,t=>{t.categoryMatches=[],S(t.categoryMatchesMap,(r,i)=>{t.categoryMatches.push($f[i].tokenTypeIdx)})})}function HT(e){S(e,t=>{jf([],t)})}function jf(e,t){S(e,r=>{t.categoryMatchesMap[r.tokenTypeIdx]=!0}),S(t.CATEGORIES,r=>{let i=e.concat(t);Tt(i,r)||jf(i,r)})}function ya(e){return N(e,"tokenTypeIdx")}function Bf(e){return N(e,"CATEGORIES")}function XT(e){return N(e,"categoryMatches")}function YT(e){return N(e,"categoryMatchesMap")}function Wf(e){return N(e,"tokenTypeIdx")}var xa={buildUnableToPopLexerModeMessage(e){return`Unable to pop Lexer Mode after encountering Token ->${e.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(e,t,r,i,n,s){return`unexpected character: ->${e.charAt(t)}<- at offset: ${t}, skipped ${r} characters.`}};var bt;(function(e){e[e.MISSING_PATTERN=0]="MISSING_PATTERN",e[e.INVALID_PATTERN=1]="INVALID_PATTERN",e[e.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",e[e.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",e[e.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",e[e.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",e[e.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",e[e.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",e[e.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",e[e.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",e[e.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",e[e.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",e[e.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",e[e.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",e[e.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",e[e.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",e[e.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",e[e.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(bt||(bt={}));var Zi={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:xa,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Zi);var St=class{constructor(t,r=Zi){if(this.lexerDefinition=t,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(n,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let a=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${a}--> <${n}>`);let{time:o,value:u}=zi(s),l=o>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&l(`${a}<-- <${n}> time: ${o}ms`),this.traceInitIndent--,u}else return s()},typeof r=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=ie({},Zi,r);let i=this.config.traceInitPerf;i===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof i=="number"&&(this.traceInitMaxIdent=i,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let n,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Zi.lineTerminatorsPattern)this.config.lineTerminatorsPattern=Pf;else if(this.config.lineTerminatorCharacters===Zi.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(r.safeMode&&r.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),w(t)?n={modes:{defaultMode:ct(t)},defaultMode:Ni}:(s=!1,n=ct(t))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(wf(n,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(Cf(n,this.trackStartLines,this.config.lineTerminatorCharacters))})),n.modes=n.modes?n.modes:{},S(n.modes,(o,u)=>{n.modes[u]=Ir(o,l=>ue(l))});let a=ft(n.modes);if(S(n.modes,(o,u)=>{this.TRACE_INIT(`Mode: <${u}> processing`,()=>{if(this.modes.push(u),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(If(o,a))}),H(this.lexerDefinitionErrors)){or(o);let l;this.TRACE_INIT("analyzeTokenTypes",()=>{l=Nf(o,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:r.positionTracking,ensureOptimizations:r.ensureOptimizations,safeMode:r.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[u]=l.patternIdxToConfig,this.charCodeToPatternIdxToConfig[u]=l.charCodeToPatternIdxToConfig,this.emptyGroups=ie({},this.emptyGroups,l.emptyGroups),this.hasCustom=l.hasCustom||this.hasCustom,this.canModeBeOptimized[u]=l.canBeOptimized}})}),this.defaultMode=n.defaultMode,!H(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let u=v(this.lexerDefinitionErrors,l=>l.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+u)}S(this.lexerDefinitionWarning,o=>{Ki(o.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Ea?(this.chopInput=Re,this.match=this.matchWithTest):(this.updateLastIndex=Ot,this.match=this.matchWithExec),s&&(this.handleModes=Ot),this.trackStartLines===!1&&(this.computeNewColumn=Re),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Ot),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let o=Gt(this.canModeBeOptimized,(u,l,h)=>(l===!1&&u.push(h),u),[]);if(r.ensureOptimizations&&!H(o))throw Error(`Lexer Modes: < ${o.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{bf()}),this.TRACE_INIT("toFastProperties",()=>{qi(this)})})}tokenize(t,r=this.defaultMode){if(!H(this.lexerDefinitionErrors)){let n=v(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+n)}return this.tokenizeInternal(t,r)}tokenizeInternal(t,r){let i,n,s,a,o,u,l,h,f,d,m,g,y,E,x,A,T=t,$=T.length,W=0,Vt=0,Zr=this.hasCustom?0:Math.floor(t.length/10),Se=new Array(Zr),hr=[],Ft=this.trackStartLines?1:void 0,X=this.trackStartLines?1:void 0,c=Lf(this.emptyGroups),p=this.trackStartLines,b=this.config.lineTerminatorsPattern,O=0,R=[],D=[],L=[],I=[];Object.freeze(I);let V;function lt(){return R}function yt(xt){let G=Qe(xt),Z=D[G];return Z===void 0?I:Z}let K=xt=>{if(L.length===1&&xt.tokenType.PUSH_MODE===void 0){let G=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(xt);hr.push({offset:xt.startOffset,line:xt.startLine,column:xt.startColumn,length:xt.image.length,message:G})}else{L.pop();let G=Ue(L);R=this.patternIdxToConfig[G],D=this.charCodeToPatternIdxToConfig[G],O=R.length;let Z=this.canModeBeOptimized[G]&&this.config.safeMode===!1;D&&Z?V=yt:V=lt}};function te(xt){L.push(xt),D=this.charCodeToPatternIdxToConfig[xt],R=this.patternIdxToConfig[xt],O=R.length,O=R.length;let G=this.canModeBeOptimized[xt]&&this.config.safeMode===!1;D&&G?V=yt:V=lt}te.call(this,r);let C,z=this.config.recoveryEnabled;for(;W<$;){u=null;let xt=T.charCodeAt(W),G=V(xt),Z=G.length;for(i=0;i<Z;i++){C=G[i];let Y=C.pattern;l=null;let tt=C.short;if(tt!==!1?xt===tt&&(u=Y):C.isCustom===!0?(A=Y.exec(T,W,Se,c),A!==null?(u=A[0],A.payload!==void 0&&(l=A.payload)):u=null):(this.updateLastIndex(Y,W),u=this.match(Y,t,W)),u!==null){if(o=C.longerAlt,o!==void 0){let Nt=o.length;for(s=0;s<Nt;s++){let ot=R[o[s]],Bt=ot.pattern;if(h=null,ot.isCustom===!0?(A=Bt.exec(T,W,Se,c),A!==null?(a=A[0],A.payload!==void 0&&(h=A.payload)):a=null):(this.updateLastIndex(Bt,W),a=this.match(Bt,t,W)),a&&a.length>u.length){u=a,l=h,C=ot;break}}}break}}if(u!==null){if(f=u.length,d=C.group,d!==void 0&&(m=C.tokenTypeIdx,g=this.createTokenInstance(u,W,m,C.tokenType,Ft,X,f),this.handlePayload(g,l),d===!1?Vt=this.addToken(Se,Vt,g):c[d].push(g)),t=this.chopInput(t,f),W=W+f,X=this.computeNewColumn(X,f),p===!0&&C.canLineTerminator===!0){let Y=0,tt,Nt;b.lastIndex=0;do tt=b.test(u),tt===!0&&(Nt=b.lastIndex-1,Y++);while(tt===!0);Y!==0&&(Ft=Ft+Y,X=f-Nt,this.updateTokenEndLineColumnLocation(g,d,Nt,Y,Ft,X,f))}this.handleModes(C,K,te,g)}else{let Y=W,tt=Ft,Nt=X,ot=z===!1;for(;ot===!1&&W<$;)for(t=this.chopInput(t,1),W++,n=0;n<O;n++){let Bt=R[n],et=Bt.pattern,ke=Bt.short;if(ke!==!1?T.charCodeAt(W)===ke&&(ot=!0):Bt.isCustom===!0?ot=et.exec(T,W,Se,c)!==null:(this.updateLastIndex(et,W),ot=et.exec(t)!==null),ot===!0)break}if(y=W-Y,X=this.computeNewColumn(X,y),x=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(T,Y,y,tt,Nt,Ue(L)),hr.push({offset:Y,line:tt,column:Nt,length:y,message:x}),z===!1)break}}return this.hasCustom||(Se.length=Vt),{tokens:Se,groups:c,errors:hr}}handleModes(t,r,i,n){if(t.pop===!0){let s=t.push;r(n),s!==void 0&&i.call(this,s)}else t.push!==void 0&&i.call(this,t.push)}chopInput(t,r){return t.substring(r)}updateLastIndex(t,r){t.lastIndex=r}updateTokenEndLineColumnLocation(t,r,i,n,s,a,o){let u,l;r!==void 0&&(u=i===o-1,l=u?-1:0,n===1&&u===!0||(t.endLine=s+l,t.endColumn=a-1+-l))}computeNewColumn(t,r){return t+r}createOffsetOnlyToken(t,r,i,n){return{image:t,startOffset:r,tokenTypeIdx:i,tokenType:n}}createStartOnlyToken(t,r,i,n,s,a){return{image:t,startOffset:r,startLine:s,startColumn:a,tokenTypeIdx:i,tokenType:n}}createFullToken(t,r,i,n,s,a,o){return{image:t,startOffset:r,endOffset:r+o-1,startLine:s,endLine:s,startColumn:a,endColumn:a+o-1,tokenTypeIdx:i,tokenType:n}}addTokenUsingPush(t,r,i){return t.push(i),r}addTokenUsingMemberAccess(t,r,i){return t[r]=i,r++,r}handlePayloadNoCustom(t,r){}handlePayloadWithCustom(t,r){r!==null&&(t.payload=r)}matchWithTest(t,r,i){return t.test(r)===!0?r.substring(i,t.lastIndex):null}matchWithExec(t,r){let i=t.exec(r);return i!==null?i[0]:null}};St.SKIPPED="This marks a skipped Token pattern, this means each token identified by it will be consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";St.NA=/NOT_APPLICABLE/;function Kr(e){return Ta(e)?e.LABEL:e.name}function Ta(e){return zt(e.LABEL)&&e.LABEL!==""}var QT="parent",Df="categories",Gf="label",Kf="group",zf="push_mode",qf="pop_mode",Vf="longer_alt",Hf="line_breaks",Xf="start_chars_hint";function B(e){return ZT(e)}function ZT(e){let t=e.pattern,r={};if(r.name=e.name,ue(t)||(r.PATTERN=t),N(e,QT))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return N(e,Df)&&(r.CATEGORIES=e[Df]),or([r]),N(e,Gf)&&(r.LABEL=e[Gf]),N(e,Kf)&&(r.GROUP=e[Kf]),N(e,qf)&&(r.POP_MODE=e[qf]),N(e,zf)&&(r.PUSH_MODE=e[zf]),N(e,Vf)&&(r.LONGER_ALT=e[Vf]),N(e,Hf)&&(r.LINE_BREAKS=e[Hf]),N(e,Xf)&&(r.START_CHARS_HINT=e[Xf]),r}var Fe=B({name:"EOF",pattern:St.NA});or([Fe]);function zr(e,t,r,i,n,s,a,o){return{image:t,startOffset:r,endOffset:i,startLine:n,endLine:s,startColumn:a,endColumn:o,tokenTypeIdx:e.tokenTypeIdx,tokenType:e}}function ba(e,t){return ar(e,t)}var ds={buildMismatchTokenMessage({expected:e,actual:t,previous:r,ruleName:i}){return`Expecting ${Ta(e)?`--> ${Kr(e)} <--`:`token of type --> ${e.name} <--`} but found --> '${t.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:e,ruleName:t}){return"Redundant input, expecting EOF but found: "+e.image},buildNoViableAltMessage({expectedPathsPerAlt:e,actual:t,previous:r,customUserDescription:i,ruleName:n}){let s="Expecting: ",o=`
but found: '`+Xt(t).image+"'";if(i)return s+i+o;{let u=Gt(e,(d,m)=>d.concat(m),[]),l=v(u,d=>`[${v(d,m=>Kr(m)).join(", ")}]`),f=`one of these possible Token sequences:
${v(l,(d,m)=>`  ${m+1}. ${d}`).join(`
`)}`;return s+f+o}},buildEarlyExitMessage({expectedIterationPaths:e,actual:t,customUserDescription:r,ruleName:i}){let n="Expecting: ",a=`
but found: '`+Xt(t).image+"'";if(r)return n+r+a;{let u=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${v(e,l=>`[${v(l,h=>Kr(h)).join(",")}]`).join(" ,")}>`;return n+u+a}}};Object.freeze(ds);var Yf={buildRuleNotFoundError(e,t){return"Invalid grammar, reference to a rule which is not defined: ->"+t.nonTerminalName+`<-
inside top level rule: ->`+e.name+"<-"}},Be={buildDuplicateFoundError(e,t){function r(h){return h instanceof J?h.terminalType.name:h instanceof pt?h.nonTerminalName:""}let i=e.name,n=Xt(t),s=n.idx,a=xe(n),o=r(n),u=s>0,l=`->${a}${u?s:""}<- ${o?`with argument: ->${o}<-`:""}
                  appears more than once (${t.length} times) in the top level rule: ->${i}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return l=l.replace(/[ \t]+/g," "),l=l.replace(/\s\s+/g,`
`),l},buildNamespaceConflictError(e){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${e.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(e){let t=v(e.prefixPath,n=>Kr(n)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx;return`Ambiguous alternatives: <${e.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(e){let t=v(e.prefixPath,n=>Kr(n)).join(", "),r=e.alternation.idx===0?"":e.alternation.idx,i=`Ambiguous Alternatives Detected: <${e.ambiguityIndices.join(" ,")}> in <OR${r}> inside <${e.topLevelRule.name}> Rule,
<${t}> may appears as a prefix path in all these alternatives.
`;return i=i+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,i},buildEmptyRepetitionError(e){let t=xe(e.repetition);return e.repetition.idx!==0&&(t+=e.repetition.idx),`The repetition <${t}> within Rule <${e.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(e){return"deprecated"},buildEmptyAlternationError(e){return`Ambiguous empty alternative: <${e.emptyChoiceIdx+1}> in <OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(e){return`An Alternation cannot have more than 256 alternatives:
<OR${e.alternation.idx}> inside <${e.topLevelRule.name}> Rule.
 has ${e.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(e){let t=e.topLevelRule.name,r=v(e.leftRecursionPath,s=>s.name),i=`${t} --> ${r.concat([t]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${t}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${i}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(e){return"deprecated"},buildDuplicateRuleNameError(e){let t;return e.topLevelRule instanceof ce?t=e.topLevelRule.name:t=e.topLevelRule,`Duplicate definition, rule: ->${t}<- is already defined in the grammar: ->${e.grammarName}<-`}};function Qf(e,t){let r=new Aa(e,t);return r.resolveRefs(),r.errors}var Aa=class extends pe{constructor(t,r){super(),this.nameToTopRule=t,this.errMsgProvider=r,this.errors=[]}resolveRefs(){S(at(this.nameToTopRule),t=>{this.currTopLevel=t,t.accept(this)})}visitNonTerminal(t){let r=this.nameToTopRule[t.nonTerminalName];if(r)t.referencedRule=r;else{let i=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,t);this.errors.push({message:i,type:qt.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:t.nonTerminalName})}}};var va=class extends sr{constructor(t,r){super(),this.topProd=t,this.path=r,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=ct(this.path.ruleStack).reverse(),this.occurrenceStack=ct(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(t,r=[]){this.found||super.walk(t,r)}walkProdRef(t,r,i){if(t.referencedRule.name===this.nextProductionName&&t.idx===this.nextProductionOccurrence){let n=r.concat(i);this.updateExpectedNext(),this.walk(t.referencedRule,n)}}updateExpectedNext(){H(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},_s=class extends va{constructor(t,r){super(t,r),this.path=r,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(t,r,i){if(this.isAtEndOfPath&&t.terminalType.name===this.nextTerminalName&&t.idx===this.nextTerminalOccurrence&&!this.found){let n=r.concat(i),s=new dt({definition:n});this.possibleTokTypes=Wr(s),this.found=!0}}},wi=class extends sr{constructor(t,r){super(),this.topRule=t,this.occurrence=r,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},ms=class extends wi{walkMany(t,r,i){if(t.idx===this.occurrence){let n=Xt(r.concat(i));this.result.isEndOfRule=n===void 0,n instanceof J&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else super.walkMany(t,r,i)}},Ji=class extends wi{walkManySep(t,r,i){if(t.idx===this.occurrence){let n=Xt(r.concat(i));this.result.isEndOfRule=n===void 0,n instanceof J&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else super.walkManySep(t,r,i)}},gs=class extends wi{walkAtLeastOne(t,r,i){if(t.idx===this.occurrence){let n=Xt(r.concat(i));this.result.isEndOfRule=n===void 0,n instanceof J&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else super.walkAtLeastOne(t,r,i)}},tn=class extends wi{walkAtLeastOneSep(t,r,i){if(t.idx===this.occurrence){let n=Xt(r.concat(i));this.result.isEndOfRule=n===void 0,n instanceof J&&(this.result.token=n.terminalType,this.result.occurrence=n.idx)}else super.walkAtLeastOneSep(t,r,i)}};function Es(e,t,r=[]){r=ct(r);let i=[],n=0;function s(o){return o.concat(Lt(e,n+1))}function a(o){let u=Es(s(o),t,r);return i.concat(u)}for(;r.length<t&&n<e.length;){let o=e[n];if(o instanceof dt)return a(o.definition);if(o instanceof pt)return a(o.definition);if(o instanceof Et)i=a(o.definition);else if(o instanceof kt){let u=o.definition.concat([new st({definition:o.definition})]);return a(u)}else if(o instanceof Pt){let u=[new dt({definition:o.definition}),new st({definition:[new J({terminalType:o.separator})].concat(o.definition)})];return a(u)}else if(o instanceof It){let u=o.definition.concat([new st({definition:[new J({terminalType:o.separator})].concat(o.definition)})]);i=a(u)}else if(o instanceof st){let u=o.definition.concat([new st({definition:o.definition})]);i=a(u)}else{if(o instanceof wt)return S(o.definition,u=>{H(u.definition)===!1&&(i=a(u.definition))}),i;if(o instanceof J)r.push(o.terminalType);else throw Error("non exhaustive match")}n++}return i.push({partialPath:r,suffixDef:Lt(e,n)}),i}function ys(e,t,r,i){let n="EXIT_NONE_TERMINAL",s=[n],a="EXIT_ALTERNATIVE",o=!1,u=t.length,l=u-i-1,h=[],f=[];for(f.push({idx:-1,def:e,ruleStack:[],occurrenceStack:[]});!H(f);){let d=f.pop();if(d===a){o&&Ue(f).idx<=l&&f.pop();continue}let m=d.def,g=d.idx,y=d.ruleStack,E=d.occurrenceStack;if(H(m))continue;let x=m[0];if(x===n){let A={idx:g,def:Lt(m),ruleStack:nr(y),occurrenceStack:nr(E)};f.push(A)}else if(x instanceof J)if(g<u-1){let A=g+1,T=t[A];if(r(T,x.terminalType)){let $={idx:A,def:Lt(m),ruleStack:y,occurrenceStack:E};f.push($)}}else if(g===u-1)h.push({nextTokenType:x.terminalType,nextTokenOccurrence:x.idx,ruleStack:y,occurrenceStack:E}),o=!0;else throw Error("non exhaustive match");else if(x instanceof pt){let A=ct(y);A.push(x.nonTerminalName);let T=ct(E);T.push(x.idx);let $={idx:g,def:x.definition.concat(s,Lt(m)),ruleStack:A,occurrenceStack:T};f.push($)}else if(x instanceof Et){let A={idx:g,def:Lt(m),ruleStack:y,occurrenceStack:E};f.push(A),f.push(a);let T={idx:g,def:x.definition.concat(Lt(m)),ruleStack:y,occurrenceStack:E};f.push(T)}else if(x instanceof kt){let A=new st({definition:x.definition,idx:x.idx}),T=x.definition.concat([A],Lt(m)),$={idx:g,def:T,ruleStack:y,occurrenceStack:E};f.push($)}else if(x instanceof Pt){let A=new J({terminalType:x.separator}),T=new st({definition:[A].concat(x.definition),idx:x.idx}),$=x.definition.concat([T],Lt(m)),W={idx:g,def:$,ruleStack:y,occurrenceStack:E};f.push(W)}else if(x instanceof It){let A={idx:g,def:Lt(m),ruleStack:y,occurrenceStack:E};f.push(A),f.push(a);let T=new J({terminalType:x.separator}),$=new st({definition:[T].concat(x.definition),idx:x.idx}),W=x.definition.concat([$],Lt(m)),Vt={idx:g,def:W,ruleStack:y,occurrenceStack:E};f.push(Vt)}else if(x instanceof st){let A={idx:g,def:Lt(m),ruleStack:y,occurrenceStack:E};f.push(A),f.push(a);let T=new st({definition:x.definition,idx:x.idx}),$=x.definition.concat([T],Lt(m)),W={idx:g,def:$,ruleStack:y,occurrenceStack:E};f.push(W)}else if(x instanceof wt)for(let A=x.definition.length-1;A>=0;A--){let T=x.definition[A],$={idx:g,def:T.definition.concat(Lt(m)),ruleStack:y,occurrenceStack:E};f.push($),f.push(a)}else if(x instanceof dt)f.push({idx:g,def:x.definition.concat(Lt(m)),ruleStack:y,occurrenceStack:E});else if(x instanceof ce)f.push(JT(x,g,y,E));else throw Error("non exhaustive match")}return h}function JT(e,t,r,i){let n=ct(r);n.push(e.name);let s=ct(i);return s.push(1),{idx:t,def:e.definition,ruleStack:n,occurrenceStack:s}}var Rt;(function(e){e[e.OPTION=0]="OPTION",e[e.REPETITION=1]="REPETITION",e[e.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",e[e.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",e[e.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",e[e.ALTERNATION=5]="ALTERNATION"})(Rt||(Rt={}));function Ts(e){if(e instanceof Et||e==="Option")return Rt.OPTION;if(e instanceof st||e==="Repetition")return Rt.REPETITION;if(e instanceof kt||e==="RepetitionMandatory")return Rt.REPETITION_MANDATORY;if(e instanceof Pt||e==="RepetitionMandatoryWithSeparator")return Rt.REPETITION_MANDATORY_WITH_SEPARATOR;if(e instanceof It||e==="RepetitionWithSeparator")return Rt.REPETITION_WITH_SEPARATOR;if(e instanceof wt||e==="Alternation")return Rt.ALTERNATION;throw Error("non exhaustive match")}function Jf(e,t,r,i,n,s){let a=en(e,t,r),o=sh(a)?Ii:ar;return s(a,i,o,n)}function th(e,t,r,i,n,s){let a=rn(e,t,n,r),o=sh(a)?Ii:ar;return s(a[0],o,i)}function eh(e,t,r,i){let n=e.length,s=ae(e,a=>ae(a,o=>o.length===1));if(t)return function(a){let o=v(a,u=>u.GATE);for(let u=0;u<n;u++){let l=e[u],h=l.length,f=o[u];if(!(f!==void 0&&f.call(this)===!1))t:for(let d=0;d<h;d++){let m=l[d],g=m.length;for(let y=0;y<g;y++){let E=this.LA(y+1);if(r(E,m[y])===!1)continue t}return u}}};if(s&&!i){let a=v(e,u=>Kt(u)),o=Gt(a,(u,l,h)=>(S(l,f=>{N(u,f.tokenTypeIdx)||(u[f.tokenTypeIdx]=h),S(f.categoryMatches,d=>{N(u,d)||(u[d]=h)})}),u),{});return function(){let u=this.LA(1);return o[u.tokenTypeIdx]}}else return function(){for(let a=0;a<n;a++){let o=e[a],u=o.length;t:for(let l=0;l<u;l++){let h=o[l],f=h.length;for(let d=0;d<f;d++){let m=this.LA(d+1);if(r(m,h[d])===!1)continue t}return a}}}}function rh(e,t,r){let i=ae(e,s=>s.length===1),n=e.length;if(i&&!r){let s=Kt(e);if(s.length===1&&H(s[0].categoryMatches)){let o=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===o}}else{let a=Gt(s,(o,u,l)=>(o[u.tokenTypeIdx]=!0,S(u.categoryMatches,h=>{o[h]=!0}),o),[]);return function(){let o=this.LA(1);return a[o.tokenTypeIdx]===!0}}}else return function(){t:for(let s=0;s<n;s++){let a=e[s],o=a.length;for(let u=0;u<o;u++){let l=this.LA(u+1);if(t(l,a[u])===!1)continue t}return!0}return!1}}var Sa=class extends sr{constructor(t,r,i){super(),this.topProd=t,this.targetOccurrence=r,this.targetProdType=i}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(t,r,i,n){return t.idx===this.targetOccurrence&&this.targetProdType===r?(this.restDef=i.concat(n),!0):!1}walkOption(t,r,i){this.checkIsTarget(t,Rt.OPTION,r,i)||super.walkOption(t,r,i)}walkAtLeastOne(t,r,i){this.checkIsTarget(t,Rt.REPETITION_MANDATORY,r,i)||super.walkOption(t,r,i)}walkAtLeastOneSep(t,r,i){this.checkIsTarget(t,Rt.REPETITION_MANDATORY_WITH_SEPARATOR,r,i)||super.walkOption(t,r,i)}walkMany(t,r,i){this.checkIsTarget(t,Rt.REPETITION,r,i)||super.walkOption(t,r,i)}walkManySep(t,r,i){this.checkIsTarget(t,Rt.REPETITION_WITH_SEPARATOR,r,i)||super.walkOption(t,r,i)}},xs=class extends pe{constructor(t,r,i){super(),this.targetOccurrence=t,this.targetProdType=r,this.targetRef=i,this.result=[]}checkIsTarget(t,r){t.idx===this.targetOccurrence&&this.targetProdType===r&&(this.targetRef===void 0||t===this.targetRef)&&(this.result=t.definition)}visitOption(t){this.checkIsTarget(t,Rt.OPTION)}visitRepetition(t){this.checkIsTarget(t,Rt.REPETITION)}visitRepetitionMandatory(t){this.checkIsTarget(t,Rt.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(t){this.checkIsTarget(t,Rt.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(t){this.checkIsTarget(t,Rt.REPETITION_WITH_SEPARATOR)}visitAlternation(t){this.checkIsTarget(t,Rt.ALTERNATION)}};function Zf(e){let t=new Array(e);for(let r=0;r<e;r++)t[r]=[];return t}function Oa(e){let t=[""];for(let r=0;r<e.length;r++){let i=e[r],n=[];for(let s=0;s<t.length;s++){let a=t[s];n.push(a+"_"+i.tokenTypeIdx);for(let o=0;o<i.categoryMatches.length;o++){let u="_"+i.categoryMatches[o];n.push(a+u)}}t=n}return t}function tb(e,t,r){for(let i=0;i<e.length;i++){if(i===r)continue;let n=e[i];for(let s=0;s<t.length;s++){let a=t[s];if(n[a]===!0)return!1}}return!0}function ih(e,t){let r=v(e,a=>Es([a],1)),i=Zf(r.length),n=v(r,a=>{let o={};return S(a,u=>{let l=Oa(u.partialPath);S(l,h=>{o[h]=!0})}),o}),s=r;for(let a=1;a<=t;a++){let o=s;s=Zf(o.length);for(let u=0;u<o.length;u++){let l=o[u];for(let h=0;h<l.length;h++){let f=l[h].partialPath,d=l[h].suffixDef,m=Oa(f);if(tb(n,m,u)||H(d)||f.length===t){let y=i[u];if(bs(y,f)===!1){y.push(f);for(let E=0;E<m.length;E++){let x=m[E];n[u][x]=!0}}}else{let y=Es(d,a+1,f);s[u]=s[u].concat(y),S(y,E=>{let x=Oa(E.partialPath);S(x,A=>{n[u][A]=!0})})}}}}return i}function en(e,t,r,i){let n=new xs(e,Rt.ALTERNATION,i);return t.accept(n),ih(n.result,r)}function rn(e,t,r,i){let n=new xs(e,r);t.accept(n);let s=n.result,o=new Sa(t,e,r).startWalking(),u=new dt({definition:s}),l=new dt({definition:o});return ih([u,l],i)}function bs(e,t){t:for(let r=0;r<e.length;r++){let i=e[r];if(i.length===t.length){for(let n=0;n<i.length;n++){let s=t[n],a=i[n];if((s===a||a.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue t}return!0}}return!1}function nh(e,t){return e.length<t.length&&ae(e,(r,i)=>{let n=t[i];return r===n||n.categoryMatchesMap[r.tokenTypeIdx]})}function sh(e){return ae(e,t=>ae(t,r=>ae(r,i=>H(i.categoryMatches))))}function ah(e){let t=e.lookaheadStrategy.validate({rules:e.rules,tokenTypes:e.tokenTypes,grammarName:e.grammarName});return v(t,r=>Object.assign({type:qt.CUSTOM_LOOKAHEAD_VALIDATION},r))}function oh(e,t,r,i){let n=he(e,u=>eb(u,r)),s=ob(e,t,r),a=he(e,u=>nb(u,r)),o=he(e,u=>ib(u,e,i,r));return n.concat(s,a,o)}function eb(e,t){let r=new Ra;e.accept(r);let i=r.allProductions,n=ua(i,rb),s=ye(n,o=>o.length>1);return v(at(s),o=>{let u=Xt(o),l=t.buildDuplicateFoundError(e,o),h=xe(u),f={message:l,type:qt.DUPLICATE_PRODUCTIONS,ruleName:e.name,dslName:h,occurrence:u.idx},d=uh(u);return d&&(f.parameter=d),f})}function rb(e){return`${xe(e)}_#_${e.idx}_#_${uh(e)}`}function uh(e){return e instanceof J?e.terminalType.name:e instanceof pt?e.nonTerminalName:""}var Ra=class extends pe{constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(t){this.allProductions.push(t)}visitOption(t){this.allProductions.push(t)}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}visitAlternation(t){this.allProductions.push(t)}visitTerminal(t){this.allProductions.push(t)}};function ib(e,t,r,i){let n=[];if(Gt(t,(a,o)=>o.name===e.name?a+1:a,0)>1){let a=i.buildDuplicateRuleNameError({topLevelRule:e,grammarName:r});n.push({message:a,type:qt.DUPLICATE_RULE_NAME,ruleName:e.name})}return n}function lh(e,t,r){let i=[],n;return Tt(t,e)||(n=`Invalid rule override, rule: ->${e}<- cannot be overridden in the grammar: ->${r}<-as it is not defined in any of the super grammars `,i.push({message:n,type:qt.INVALID_RULE_OVERRIDE,ruleName:e})),i}function Ia(e,t,r,i=[]){let n=[],s=As(t.definition);if(H(s))return[];{let a=e.name;Tt(s,e)&&n.push({message:r.buildLeftRecursionError({topLevelRule:e,leftRecursionPath:i}),type:qt.LEFT_RECURSION,ruleName:a});let u=Nr(s,i.concat([e])),l=he(u,h=>{let f=ct(i);return f.push(h),Ia(e,h,r,f)});return n.concat(l)}}function As(e){let t=[];if(H(e))return t;let r=Xt(e);if(r instanceof pt)t.push(r.referencedRule);else if(r instanceof dt||r instanceof Et||r instanceof kt||r instanceof Pt||r instanceof It||r instanceof st)t=t.concat(As(r.definition));else if(r instanceof wt)t=Kt(v(r.definition,s=>As(s.definition)));else if(!(r instanceof J))throw Error("non exhaustive match");let i=jr(r),n=e.length>1;if(i&&n){let s=Lt(e);return t.concat(As(s))}else return t}var nn=class extends pe{constructor(){super(...arguments),this.alternations=[]}visitAlternation(t){this.alternations.push(t)}};function fh(e,t){let r=new nn;e.accept(r);let i=r.alternations;return he(i,s=>{let a=nr(s.definition);return he(a,(o,u)=>{let l=ys([o],[],ar,1);return H(l)?[{message:t.buildEmptyAlternationError({topLevelRule:e,alternation:s,emptyChoiceIdx:u}),type:qt.NONE_LAST_EMPTY_ALT,ruleName:e.name,occurrence:s.idx,alternative:u+1}]:[]})})}function hh(e,t,r){let i=new nn;e.accept(i);let n=i.alternations;return n=Ir(n,a=>a.ignoreAmbiguities===!0),he(n,a=>{let o=a.idx,u=a.maxLookahead||t,l=en(o,e,u,a),h=sb(l,a,e,r),f=ab(l,a,e,r);return h.concat(f)})}var Na=class extends pe{constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(t){this.allProductions.push(t)}visitRepetitionMandatory(t){this.allProductions.push(t)}visitRepetitionMandatoryWithSeparator(t){this.allProductions.push(t)}visitRepetition(t){this.allProductions.push(t)}};function nb(e,t){let r=new nn;e.accept(r);let i=r.alternations;return he(i,s=>s.definition.length>255?[{message:t.buildTooManyAlternativesError({topLevelRule:e,alternation:s}),type:qt.TOO_MANY_ALTS,ruleName:e.name,occurrence:s.idx}]:[])}function ch(e,t,r){let i=[];return S(e,n=>{let s=new Na;n.accept(s);let a=s.allProductions;S(a,o=>{let u=Ts(o),l=o.maxLookahead||t,h=o.idx,d=rn(h,n,u,l)[0];if(H(Kt(d))){let m=r.buildEmptyRepetitionError({topLevelRule:n,repetition:o});i.push({message:m,type:qt.NO_NON_EMPTY_LOOKAHEAD,ruleName:n.name})}})}),i}function sb(e,t,r,i){let n=[],s=Gt(e,(o,u,l)=>(t.definition[l].ignoreAmbiguities===!0||S(u,h=>{let f=[l];S(e,(d,m)=>{l!==m&&bs(d,h)&&t.definition[m].ignoreAmbiguities!==!0&&f.push(m)}),f.length>1&&!bs(n,h)&&(n.push(h),o.push({alts:f,path:h}))}),o),[]);return v(s,o=>{let u=v(o.alts,h=>h+1);return{message:i.buildAlternationAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:u,prefixPath:o.path}),type:qt.AMBIGUOUS_ALTS,ruleName:r.name,occurrence:t.idx,alternatives:o.alts}})}function ab(e,t,r,i){let n=Gt(e,(a,o,u)=>{let l=v(o,h=>({idx:u,path:h}));return a.concat(l)},[]);return Xe(he(n,a=>{if(t.definition[a.idx].ignoreAmbiguities===!0)return[];let u=a.idx,l=a.path,h=oe(n,d=>t.definition[d.idx].ignoreAmbiguities!==!0&&d.idx<u&&nh(d.path,l));return v(h,d=>{let m=[d.idx+1,u+1],g=t.idx===0?"":t.idx;return{message:i.buildAlternationPrefixAmbiguityError({topLevelRule:r,alternation:t,ambiguityIndices:m,prefixPath:d.path}),type:qt.AMBIGUOUS_PREFIX_ALTS,ruleName:r.name,occurrence:g,alternatives:m}})}))}function ob(e,t,r){let i=[],n=v(t,s=>s.name);return S(e,s=>{let a=s.name;if(Tt(n,a)){let o=r.buildNamespaceConflictError(s);i.push({message:o,type:qt.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:a})}}),i}function ph(e){let t=Ti(e,{errMsgProvider:Yf}),r={};return S(e.rules,i=>{r[i.name]=i}),Qf(r,t.errMsgProvider)}function dh(e){return e=Ti(e,{errMsgProvider:Be}),oh(e.rules,e.tokenTypes,e.errMsgProvider,e.grammarName)}var _h="MismatchedTokenException",mh="NoViableAltException",gh="EarlyExitException",Eh="NotAllInputParsedException",yh=[_h,mh,gh,Eh];Object.freeze(yh);function Cr(e){return Tt(yh,e.name)}var Ci=class extends Error{constructor(t,r){super(t),this.token=r,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},qr=class extends Ci{constructor(t,r,i){super(t,r),this.previousToken=i,this.name=_h}},sn=class extends Ci{constructor(t,r,i){super(t,r),this.previousToken=i,this.name=mh}},an=class extends Ci{constructor(t,r){super(t,r),this.name=Eh}},on=class extends Ci{constructor(t,r,i){super(t,r),this.previousToken=i,this.name=gh}};var wa={},La="InRuleRecoveryException",Ca=class extends Error{constructor(t){super(t),this.name=La}},vs=class{initRecoverable(t){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=N(t,"recoveryEnabled")?t.recoveryEnabled:de.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=ub)}getTokenToInsert(t){let r=zr(t,"",NaN,NaN,NaN,NaN,NaN,NaN);return r.isInsertedInRecovery=!0,r}canTokenTypeBeInsertedInRecovery(t){return!0}canTokenTypeBeDeletedInRecovery(t){return!0}tryInRepetitionRecovery(t,r,i,n){let s=this.findReSyncTokenType(),a=this.exportLexerState(),o=[],u=!1,l=this.LA(1),h=this.LA(1),f=()=>{let d=this.LA(0),m=this.errorMessageProvider.buildMismatchTokenMessage({expected:n,actual:l,previous:d,ruleName:this.getCurrRuleFullName()}),g=new qr(m,l,this.LA(0));g.resyncedTokens=nr(o),this.SAVE_ERROR(g)};for(;!u;)if(this.tokenMatcher(h,n)){f();return}else if(i.call(this)){f(),t.apply(this,r);return}else this.tokenMatcher(h,s)?u=!0:(h=this.SKIP_TOKEN(),this.addToResyncTokens(h,o));this.importLexerState(a)}shouldInRepetitionRecoveryBeTried(t,r,i){return!(i===!1||this.tokenMatcher(this.LA(1),t)||this.isBackTracking()||this.canPerformInRuleRecovery(t,this.getFollowsForInRuleRecovery(t,r)))}getFollowsForInRuleRecovery(t,r){let i=this.getCurrentGrammarPath(t,r);return this.getNextPossibleTokenTypes(i)}tryInRuleRecovery(t,r){if(this.canRecoverWithSingleTokenInsertion(t,r))return this.getTokenToInsert(t);if(this.canRecoverWithSingleTokenDeletion(t)){let i=this.SKIP_TOKEN();return this.consumeToken(),i}throw new Ca("sad sad panda")}canPerformInRuleRecovery(t,r){return this.canRecoverWithSingleTokenInsertion(t,r)||this.canRecoverWithSingleTokenDeletion(t)}canRecoverWithSingleTokenInsertion(t,r){if(!this.canTokenTypeBeInsertedInRecovery(t)||H(r))return!1;let i=this.LA(1);return Ye(r,s=>this.tokenMatcher(i,s))!==void 0}canRecoverWithSingleTokenDeletion(t){return this.canTokenTypeBeDeletedInRecovery(t)?this.tokenMatcher(this.LA(2),t):!1}isInCurrentRuleReSyncSet(t){let r=this.getCurrFollowKey(),i=this.getFollowSetFromFollowKey(r);return Tt(i,t)}findReSyncTokenType(){let t=this.flattenFollowSet(),r=this.LA(1),i=2;for(;;){let n=Ye(t,s=>ba(r,s));if(n!==void 0)return n;r=this.LA(i),i++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return wa;let t=this.getLastExplicitRuleShortName(),r=this.getLastExplicitRuleOccurrenceIndex(),i=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(t),idxInCallingRule:r,inRule:this.shortRuleNameToFullName(i)}}buildFullFollowKeyStack(){let t=this.RULE_STACK,r=this.RULE_OCCURRENCE_STACK;return v(t,(i,n)=>n===0?wa:{ruleName:this.shortRuleNameToFullName(i),idxInCallingRule:r[n],inRule:this.shortRuleNameToFullName(t[n-1])})}flattenFollowSet(){let t=v(this.buildFullFollowKeyStack(),r=>this.getFollowSetFromFollowKey(r));return Kt(t)}getFollowSetFromFollowKey(t){if(t===wa)return[Fe];let r=t.ruleName+t.idxInCallingRule+as+t.inRule;return this.resyncFollows[r]}addToResyncTokens(t,r){return this.tokenMatcher(t,Fe)||r.push(t),r}reSyncTo(t){let r=[],i=this.LA(1);for(;this.tokenMatcher(i,t)===!1;)i=this.SKIP_TOKEN(),this.addToResyncTokens(i,r);return nr(r)}attemptInRepetitionRecovery(t,r,i,n,s,a,o){}getCurrentGrammarPath(t,r){let i=this.getHumanReadableRuleStack(),n=ct(this.RULE_OCCURRENCE_STACK);return{ruleStack:i,occurrenceStack:n,lastTok:t,lastTokOccurrence:r}}getHumanReadableRuleStack(){return v(this.RULE_STACK,t=>this.shortRuleNameToFullName(t))}};function ub(e,t,r,i,n,s,a){let o=this.getKeyForAutomaticLookahead(i,n),u=this.firstAfterRepMap[o];if(u===void 0){let d=this.getCurrRuleFullName(),m=this.getGAstProductions()[d];u=new s(m,n).startWalking(),this.firstAfterRepMap[o]=u}let l=u.token,h=u.occurrence,f=u.isEndOfRule;this.RULE_STACK.length===1&&f&&l===void 0&&(l=Fe,h=1),!(l===void 0||h===void 0)&&this.shouldInRepetitionRecoveryBeTried(l,h,a)&&this.tryInRepetitionRecovery(e,t,r,l)}function Os(e,t,r){return r|t|e}var un=class{constructor(t){var r;this.maxLookahead=(r=t?.maxLookahead)!==null&&r!==void 0?r:de.maxLookahead}validate(t){let r=this.validateNoLeftRecursion(t.rules);if(H(r)){let i=this.validateEmptyOrAlternatives(t.rules),n=this.validateAmbiguousAlternationAlternatives(t.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(t.rules,this.maxLookahead);return[...r,...i,...n,...s]}return r}validateNoLeftRecursion(t){return he(t,r=>Ia(r,r,Be))}validateEmptyOrAlternatives(t){return he(t,r=>fh(r,Be))}validateAmbiguousAlternationAlternatives(t,r){return he(t,i=>hh(i,r,Be))}validateSomeNonEmptyLookaheadPath(t,r){return ch(t,r,Be)}buildLookaheadForAlternation(t){return Jf(t.prodOccurrence,t.rule,t.maxLookahead,t.hasPredicates,t.dynamicTokensEnabled,eh)}buildLookaheadForOptional(t){return th(t.prodOccurrence,t.rule,t.maxLookahead,t.dynamicTokensEnabled,Ts(t.prodType),rh)}};var Rs=class{initLooksAhead(t){this.dynamicTokensEnabled=N(t,"dynamicTokensEnabled")?t.dynamicTokensEnabled:de.dynamicTokensEnabled,this.maxLookahead=N(t,"maxLookahead")?t.maxLookahead:de.maxLookahead,this.lookaheadStrategy=N(t,"lookaheadStrategy")?t.lookaheadStrategy:new un({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(t){S(t,r=>{this.TRACE_INIT(`${r.name} Rule Lookahead`,()=>{let{alternation:i,repetition:n,option:s,repetitionMandatory:a,repetitionMandatoryWithSeparator:o,repetitionWithSeparator:u}=lb(r);S(i,l=>{let h=l.idx===0?"":l.idx;this.TRACE_INIT(`${xe(l)}${h}`,()=>{let f=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:l.idx,rule:r,maxLookahead:l.maxLookahead||this.maxLookahead,hasPredicates:l.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),d=Os(this.fullRuleNameToShort[r.name],256,l.idx);this.setLaFuncCache(d,f)})}),S(n,l=>{this.computeLookaheadFunc(r,l.idx,768,"Repetition",l.maxLookahead,xe(l))}),S(s,l=>{this.computeLookaheadFunc(r,l.idx,512,"Option",l.maxLookahead,xe(l))}),S(a,l=>{this.computeLookaheadFunc(r,l.idx,1024,"RepetitionMandatory",l.maxLookahead,xe(l))}),S(o,l=>{this.computeLookaheadFunc(r,l.idx,1536,"RepetitionMandatoryWithSeparator",l.maxLookahead,xe(l))}),S(u,l=>{this.computeLookaheadFunc(r,l.idx,1280,"RepetitionWithSeparator",l.maxLookahead,xe(l))})})})}computeLookaheadFunc(t,r,i,n,s,a){this.TRACE_INIT(`${a}${r===0?"":r}`,()=>{let o=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:r,rule:t,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:n}),u=Os(this.fullRuleNameToShort[t.name],i,r);this.setLaFuncCache(u,o)})}getKeyForAutomaticLookahead(t,r){let i=this.getLastExplicitRuleShortName();return Os(i,t,r)}getLaFuncFromCache(t){return this.lookAheadFuncsCache.get(t)}setLaFuncCache(t,r){this.lookAheadFuncsCache.set(t,r)}},ka=class extends pe{constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(t){this.dslMethods.option.push(t)}visitRepetitionWithSeparator(t){this.dslMethods.repetitionWithSeparator.push(t)}visitRepetitionMandatory(t){this.dslMethods.repetitionMandatory.push(t)}visitRepetitionMandatoryWithSeparator(t){this.dslMethods.repetitionMandatoryWithSeparator.push(t)}visitRepetition(t){this.dslMethods.repetition.push(t)}visitAlternation(t){this.dslMethods.alternation.push(t)}},Ss=new ka;function lb(e){Ss.reset(),e.accept(Ss);let t=Ss.dslMethods;return Ss.reset(),t}function Ua(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.endOffset=t.endOffset):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset)}function Fa(e,t){isNaN(e.startOffset)===!0?(e.startOffset=t.startOffset,e.startColumn=t.startColumn,e.startLine=t.startLine,e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine):e.endOffset<t.endOffset&&(e.endOffset=t.endOffset,e.endColumn=t.endColumn,e.endLine=t.endLine)}function xh(e,t,r){e.children[r]===void 0?e.children[r]=[t]:e.children[r].push(t)}function Th(e,t,r){e.children[t]===void 0?e.children[t]=[r]:e.children[t].push(r)}var fb="name";function Ba(e,t){Object.defineProperty(e,fb,{enumerable:!1,configurable:!0,writable:!1,value:t})}function hb(e,t){let r=ft(e),i=r.length;for(let n=0;n<i;n++){let s=r[n],a=e[s],o=a.length;for(let u=0;u<o;u++){let l=a[u];l.tokenTypeIdx===void 0&&this[l.name](l.children,t)}}}function bh(e,t){let r=function(){};Ba(r,e+"BaseSemantics");let i={visit:function(n,s){if(w(n)&&(n=n[0]),!ue(n))return this[n.name](n.children,s)},validateVisitor:function(){let n=cb(this,t);if(!H(n)){let s=v(n,a=>a.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return r.prototype=i,r.prototype.constructor=r,r._RULE_NAMES=t,r}function Ah(e,t,r){let i=function(){};Ba(i,e+"BaseSemanticsWithDefaults");let n=Object.create(r.prototype);return S(t,s=>{n[s]=hb}),i.prototype=n,i.prototype.constructor=i,i}var $a;(function(e){e[e.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",e[e.MISSING_METHOD=1]="MISSING_METHOD"})($a||($a={}));function cb(e,t){return pb(e,t)}function pb(e,t){let r=oe(t,n=>fe(e[n])===!1),i=v(r,n=>({msg:`Missing visitor method: <${n}> on ${e.constructor.name} CST Visitor.`,type:$a.MISSING_METHOD,methodName:n}));return Xe(i)}var Cs=class{initTreeBuilder(t){if(this.CST_STACK=[],this.outputCst=t.outputCst,this.nodeLocationTracking=N(t,"nodeLocationTracking")?t.nodeLocationTracking:de.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Ot,this.cstFinallyStateUpdate=Ot,this.cstPostTerminal=Ot,this.cstPostNonTerminal=Ot,this.cstPostRule=Ot;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Fa,this.setNodeLocationFromNode=Fa,this.cstPostRule=Ot,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Ot,this.setNodeLocationFromNode=Ot,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=Ua,this.setNodeLocationFromNode=Ua,this.cstPostRule=Ot,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Ot,this.setNodeLocationFromNode=Ot,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Ot,this.setNodeLocationFromNode=Ot,this.cstPostRule=Ot,this.setInitialNodeLocation=Ot;else throw Error(`Invalid <nodeLocationTracking> config option: "${t.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(t){t.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(t){t.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(t){t.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(t){let r=this.LA(1);t.location={startOffset:r.startOffset,startLine:r.startLine,startColumn:r.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(t){let r={name:t,children:Object.create(null)};this.setInitialNodeLocation(r),this.CST_STACK.push(r)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(t){let r=this.LA(0),i=t.location;i.startOffset<=r.startOffset?(i.endOffset=r.endOffset,i.endLine=r.endLine,i.endColumn=r.endColumn):(i.startOffset=NaN,i.startLine=NaN,i.startColumn=NaN)}cstPostRuleOnlyOffset(t){let r=this.LA(0),i=t.location;i.startOffset<=r.startOffset?i.endOffset=r.endOffset:i.startOffset=NaN}cstPostTerminal(t,r){let i=this.CST_STACK[this.CST_STACK.length-1];xh(i,r,t),this.setNodeLocationFromToken(i.location,r)}cstPostNonTerminal(t,r){let i=this.CST_STACK[this.CST_STACK.length-1];Th(i,r,t),this.setNodeLocationFromNode(i.location,t.location)}getBaseCstVisitorConstructor(){if(ue(this.baseCstVisitorConstructor)){let t=bh(this.className,ft(this.gastProductionsCache));return this.baseCstVisitorConstructor=t,t}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(ue(this.baseCstVisitorWithDefaultsConstructor)){let t=Ah(this.className,ft(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=t,t}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let t=this.RULE_STACK;return t[t.length-1]}getPreviousExplicitRuleShortName(){let t=this.RULE_STACK;return t[t.length-2]}getLastExplicitRuleOccurrenceIndex(){let t=this.RULE_OCCURRENCE_STACK;return t[t.length-1]}};var Ls=class{initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(t){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=t,this.tokVectorLength=t.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):Li}LA(t){let r=this.currIdx+t;return r<0||this.tokVectorLength<=r?Li:this.tokVector[r]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(t){this.currIdx=t}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var ks=class{ACTION(t){return t.call(this)}consume(t,r,i){return this.consumeInternal(r,t,i)}subrule(t,r,i){return this.subruleInternal(r,t,i)}option(t,r){return this.optionInternal(r,t)}or(t,r){return this.orInternal(r,t)}many(t,r){return this.manyInternal(t,r)}atLeastOne(t,r){return this.atLeastOneInternal(t,r)}CONSUME(t,r){return this.consumeInternal(t,0,r)}CONSUME1(t,r){return this.consumeInternal(t,1,r)}CONSUME2(t,r){return this.consumeInternal(t,2,r)}CONSUME3(t,r){return this.consumeInternal(t,3,r)}CONSUME4(t,r){return this.consumeInternal(t,4,r)}CONSUME5(t,r){return this.consumeInternal(t,5,r)}CONSUME6(t,r){return this.consumeInternal(t,6,r)}CONSUME7(t,r){return this.consumeInternal(t,7,r)}CONSUME8(t,r){return this.consumeInternal(t,8,r)}CONSUME9(t,r){return this.consumeInternal(t,9,r)}SUBRULE(t,r){return this.subruleInternal(t,0,r)}SUBRULE1(t,r){return this.subruleInternal(t,1,r)}SUBRULE2(t,r){return this.subruleInternal(t,2,r)}SUBRULE3(t,r){return this.subruleInternal(t,3,r)}SUBRULE4(t,r){return this.subruleInternal(t,4,r)}SUBRULE5(t,r){return this.subruleInternal(t,5,r)}SUBRULE6(t,r){return this.subruleInternal(t,6,r)}SUBRULE7(t,r){return this.subruleInternal(t,7,r)}SUBRULE8(t,r){return this.subruleInternal(t,8,r)}SUBRULE9(t,r){return this.subruleInternal(t,9,r)}OPTION(t){return this.optionInternal(t,0)}OPTION1(t){return this.optionInternal(t,1)}OPTION2(t){return this.optionInternal(t,2)}OPTION3(t){return this.optionInternal(t,3)}OPTION4(t){return this.optionInternal(t,4)}OPTION5(t){return this.optionInternal(t,5)}OPTION6(t){return this.optionInternal(t,6)}OPTION7(t){return this.optionInternal(t,7)}OPTION8(t){return this.optionInternal(t,8)}OPTION9(t){return this.optionInternal(t,9)}OR(t){return this.orInternal(t,0)}OR1(t){return this.orInternal(t,1)}OR2(t){return this.orInternal(t,2)}OR3(t){return this.orInternal(t,3)}OR4(t){return this.orInternal(t,4)}OR5(t){return this.orInternal(t,5)}OR6(t){return this.orInternal(t,6)}OR7(t){return this.orInternal(t,7)}OR8(t){return this.orInternal(t,8)}OR9(t){return this.orInternal(t,9)}MANY(t){this.manyInternal(0,t)}MANY1(t){this.manyInternal(1,t)}MANY2(t){this.manyInternal(2,t)}MANY3(t){this.manyInternal(3,t)}MANY4(t){this.manyInternal(4,t)}MANY5(t){this.manyInternal(5,t)}MANY6(t){this.manyInternal(6,t)}MANY7(t){this.manyInternal(7,t)}MANY8(t){this.manyInternal(8,t)}MANY9(t){this.manyInternal(9,t)}MANY_SEP(t){this.manySepFirstInternal(0,t)}MANY_SEP1(t){this.manySepFirstInternal(1,t)}MANY_SEP2(t){this.manySepFirstInternal(2,t)}MANY_SEP3(t){this.manySepFirstInternal(3,t)}MANY_SEP4(t){this.manySepFirstInternal(4,t)}MANY_SEP5(t){this.manySepFirstInternal(5,t)}MANY_SEP6(t){this.manySepFirstInternal(6,t)}MANY_SEP7(t){this.manySepFirstInternal(7,t)}MANY_SEP8(t){this.manySepFirstInternal(8,t)}MANY_SEP9(t){this.manySepFirstInternal(9,t)}AT_LEAST_ONE(t){this.atLeastOneInternal(0,t)}AT_LEAST_ONE1(t){return this.atLeastOneInternal(1,t)}AT_LEAST_ONE2(t){this.atLeastOneInternal(2,t)}AT_LEAST_ONE3(t){this.atLeastOneInternal(3,t)}AT_LEAST_ONE4(t){this.atLeastOneInternal(4,t)}AT_LEAST_ONE5(t){this.atLeastOneInternal(5,t)}AT_LEAST_ONE6(t){this.atLeastOneInternal(6,t)}AT_LEAST_ONE7(t){this.atLeastOneInternal(7,t)}AT_LEAST_ONE8(t){this.atLeastOneInternal(8,t)}AT_LEAST_ONE9(t){this.atLeastOneInternal(9,t)}AT_LEAST_ONE_SEP(t){this.atLeastOneSepFirstInternal(0,t)}AT_LEAST_ONE_SEP1(t){this.atLeastOneSepFirstInternal(1,t)}AT_LEAST_ONE_SEP2(t){this.atLeastOneSepFirstInternal(2,t)}AT_LEAST_ONE_SEP3(t){this.atLeastOneSepFirstInternal(3,t)}AT_LEAST_ONE_SEP4(t){this.atLeastOneSepFirstInternal(4,t)}AT_LEAST_ONE_SEP5(t){this.atLeastOneSepFirstInternal(5,t)}AT_LEAST_ONE_SEP6(t){this.atLeastOneSepFirstInternal(6,t)}AT_LEAST_ONE_SEP7(t){this.atLeastOneSepFirstInternal(7,t)}AT_LEAST_ONE_SEP8(t){this.atLeastOneSepFirstInternal(8,t)}AT_LEAST_ONE_SEP9(t){this.atLeastOneSepFirstInternal(9,t)}RULE(t,r,i=ki){if(Tt(this.definedRulesNames,t)){let a={message:Be.buildDuplicateRuleNameError({topLevelRule:t,grammarName:this.className}),type:qt.DUPLICATE_RULE_NAME,ruleName:t};this.definitionErrors.push(a)}this.definedRulesNames.push(t);let n=this.defineRule(t,r,i);return this[t]=n,n}OVERRIDE_RULE(t,r,i=ki){let n=lh(t,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(n);let s=this.defineRule(t,r,i);return this[t]=s,s}BACKTRACK(t,r){return function(){this.isBackTrackingStack.push(1);let i=this.saveRecogState();try{return t.apply(this,r),!0}catch(n){if(Cr(n))return!1;throw n}finally{this.reloadRecogState(i),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return ss(at(this.gastProductionsCache))}};var Ps=class{initRecognizerEngine(t,r){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=Ii,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},N(r,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if(w(t)){if(H(t))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof t[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if(w(t))this.tokensMap=Gt(t,(s,a)=>(s[a.name]=a,s),{});else if(N(t,"modes")&&ae(Kt(at(t.modes)),Wf)){let s=Kt(at(t.modes)),a=bi(s);this.tokensMap=Gt(a,(o,u)=>(o[u.name]=u,o),{})}else if(vt(t))this.tokensMap=ct(t);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Fe;let i=N(t,"modes")?Kt(at(t.modes)):at(t),n=ae(i,s=>H(s.categoryMatches));this.tokenMatcher=n?Ii:ar,or(at(this.tokensMap))}defineRule(t,r,i){if(this.selfAnalysisDone)throw Error(`Grammar rule <${t}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let n=N(i,"resyncEnabled")?i.resyncEnabled:ki.resyncEnabled,s=N(i,"recoveryValueFunc")?i.recoveryValueFunc:ki.recoveryValueFunc,a=this.ruleShortNameIdx<<12;this.ruleShortNameIdx++,this.shortRuleNameToFull[a]=t,this.fullRuleNameToShort[t]=a;let o;return this.outputCst===!0?o=function(...h){try{this.ruleInvocationStateUpdate(a,t,this.subruleIdx),r.apply(this,h);let f=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(f),f}catch(f){return this.invokeRuleCatch(f,n,s)}finally{this.ruleFinallyStateUpdate()}}:o=function(...h){try{return this.ruleInvocationStateUpdate(a,t,this.subruleIdx),r.apply(this,h)}catch(f){return this.invokeRuleCatch(f,n,s)}finally{this.ruleFinallyStateUpdate()}},Object.assign(o,{ruleName:t,originalGrammarAction:r})}invokeRuleCatch(t,r,i){let n=this.RULE_STACK.length===1,s=r&&!this.isBackTracking()&&this.recoveryEnabled;if(Cr(t)){let a=t;if(s){let o=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(o))if(a.resyncedTokens=this.reSyncTo(o),this.outputCst){let u=this.CST_STACK[this.CST_STACK.length-1];return u.recoveredNode=!0,u}else return i(t);else{if(this.outputCst){let u=this.CST_STACK[this.CST_STACK.length-1];u.recoveredNode=!0,a.partialCstResult=u}throw a}}else{if(n)return this.moveToTerminatedState(),i(t);throw a}}else throw t}optionInternal(t,r){let i=this.getKeyForAutomaticLookahead(512,r);return this.optionInternalLogic(t,r,i)}optionInternalLogic(t,r,i){let n=this.getLaFuncFromCache(i),s;if(typeof t!="function"){s=t.DEF;let a=t.GATE;if(a!==void 0){let o=n;n=()=>a.call(this)&&o.call(this)}}else s=t;if(n.call(this)===!0)return s.call(this)}atLeastOneInternal(t,r){let i=this.getKeyForAutomaticLookahead(1024,t);return this.atLeastOneInternalLogic(t,r,i)}atLeastOneInternalLogic(t,r,i){let n=this.getLaFuncFromCache(i),s;if(typeof r!="function"){s=r.DEF;let a=r.GATE;if(a!==void 0){let o=n;n=()=>a.call(this)&&o.call(this)}}else s=r;if(n.call(this)===!0){let a=this.doSingleRepetition(s);for(;n.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(t,Rt.REPETITION_MANDATORY,r.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[t,r],n,1024,t,gs)}atLeastOneSepFirstInternal(t,r){let i=this.getKeyForAutomaticLookahead(1536,t);this.atLeastOneSepFirstInternalLogic(t,r,i)}atLeastOneSepFirstInternalLogic(t,r,i){let n=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){n.call(this);let o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,s,o,n,tn],o,1536,t,tn)}else throw this.raiseEarlyExitException(t,Rt.REPETITION_MANDATORY_WITH_SEPARATOR,r.ERR_MSG)}manyInternal(t,r){let i=this.getKeyForAutomaticLookahead(768,t);return this.manyInternalLogic(t,r,i)}manyInternalLogic(t,r,i){let n=this.getLaFuncFromCache(i),s;if(typeof r!="function"){s=r.DEF;let o=r.GATE;if(o!==void 0){let u=n;n=()=>o.call(this)&&u.call(this)}}else s=r;let a=!0;for(;n.call(this)===!0&&a===!0;)a=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[t,r],n,768,t,ms,a)}manySepFirstInternal(t,r){let i=this.getKeyForAutomaticLookahead(1280,t);this.manySepFirstInternalLogic(t,r,i)}manySepFirstInternalLogic(t,r,i){let n=r.DEF,s=r.SEP;if(this.getLaFuncFromCache(i).call(this)===!0){n.call(this);let o=()=>this.tokenMatcher(this.LA(1),s);for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,s,o,n,Ji],o,1280,t,Ji)}}repetitionSepSecondInternal(t,r,i,n,s){for(;i();)this.CONSUME(r),n.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[t,r,i,n,s],i,1536,t,s)}doSingleRepetition(t){let r=this.getLexerPosition();return t.call(this),this.getLexerPosition()>r}orInternal(t,r){let i=this.getKeyForAutomaticLookahead(256,r),n=w(t)?t:t.DEF,a=this.getLaFuncFromCache(i).call(this,n);if(a!==void 0)return n[a].ALT.call(this);this.raiseNoAltException(r,t.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let t=this.LA(1),r=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:t,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new an(r,t))}}subruleInternal(t,r,i){let n;try{let s=i!==void 0?i.ARGS:void 0;return this.subruleIdx=r,n=t.apply(this,s),this.cstPostNonTerminal(n,i!==void 0&&i.LABEL!==void 0?i.LABEL:t.ruleName),n}catch(s){throw this.subruleInternalError(s,i,t.ruleName)}}subruleInternalError(t,r,i){throw Cr(t)&&t.partialCstResult!==void 0&&(this.cstPostNonTerminal(t.partialCstResult,r!==void 0&&r.LABEL!==void 0?r.LABEL:i),delete t.partialCstResult),t}consumeInternal(t,r,i){let n;try{let s=this.LA(1);this.tokenMatcher(s,t)===!0?(this.consumeToken(),n=s):this.consumeInternalError(t,s,i)}catch(s){n=this.consumeInternalRecovery(t,r,s)}return this.cstPostTerminal(i!==void 0&&i.LABEL!==void 0?i.LABEL:t.name,n),n}consumeInternalError(t,r,i){let n,s=this.LA(0);throw i!==void 0&&i.ERR_MSG?n=i.ERR_MSG:n=this.errorMessageProvider.buildMismatchTokenMessage({expected:t,actual:r,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new qr(n,r,s))}consumeInternalRecovery(t,r,i){if(this.recoveryEnabled&&i.name==="MismatchedTokenException"&&!this.isBackTracking()){let n=this.getFollowsForInRuleRecovery(t,r);try{return this.tryInRuleRecovery(t,n)}catch(s){throw s.name===La?i:s}}else throw i}saveRecogState(){let t=this.errors,r=ct(this.RULE_STACK);return{errors:t,lexerState:this.exportLexerState(),RULE_STACK:r,CST_STACK:this.CST_STACK}}reloadRecogState(t){this.errors=t.errors,this.importLexerState(t.lexerState),this.RULE_STACK=t.RULE_STACK}ruleInvocationStateUpdate(t,r,i){this.RULE_OCCURRENCE_STACK.push(i),this.RULE_STACK.push(t),this.cstInvocationStateUpdate(r)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let t=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[t]}shortRuleNameToFullName(t){return this.shortRuleNameToFull[t]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Fe)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var Ms=class{initErrorHandler(t){this._errors=[],this.errorMessageProvider=N(t,"errorMessageProvider")?t.errorMessageProvider:de.errorMessageProvider}SAVE_ERROR(t){if(Cr(t))return t.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:ct(this.RULE_OCCURRENCE_STACK)},this._errors.push(t),t;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return ct(this._errors)}set errors(t){this._errors=t}raiseEarlyExitException(t,r,i){let n=this.getCurrRuleFullName(),s=this.getGAstProductions()[n],o=rn(t,s,r,this.maxLookahead)[0],u=[];for(let h=1;h<=this.maxLookahead;h++)u.push(this.LA(h));let l=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:o,actual:u,previous:this.LA(0),customUserDescription:i,ruleName:n});throw this.SAVE_ERROR(new on(l,this.LA(1),this.LA(0)))}raiseNoAltException(t,r){let i=this.getCurrRuleFullName(),n=this.getGAstProductions()[i],s=en(t,n,this.maxLookahead),a=[];for(let l=1;l<=this.maxLookahead;l++)a.push(this.LA(l));let o=this.LA(0),u=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:a,previous:o,customUserDescription:r,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new sn(u,this.LA(1),o))}};var Us=class{initContentAssist(){}computeContentAssist(t,r){let i=this.gastProductionsCache[t];if(ue(i))throw Error(`Rule ->${t}<- does not exist in this grammar.`);return ys([i],r,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(t){let r=Xt(t.ruleStack),n=this.getGAstProductions()[r];return new _s(n,t).startWalking()}};var $s={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze($s);var vh=!0,Oh=Math.pow(2,8)-1,Rh=B({name:"RECORDING_PHASE_TOKEN",pattern:St.NA});or([Rh]);var Nh=zr(Rh,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(Nh);var _b={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},Fs=class{initGastRecorder(t){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let t=0;t<10;t++){let r=t>0?t:"";this[`CONSUME${r}`]=function(i,n){return this.consumeInternalRecord(i,t,n)},this[`SUBRULE${r}`]=function(i,n){return this.subruleInternalRecord(i,t,n)},this[`OPTION${r}`]=function(i){return this.optionInternalRecord(i,t)},this[`OR${r}`]=function(i){return this.orInternalRecord(i,t)},this[`MANY${r}`]=function(i){this.manyInternalRecord(t,i)},this[`MANY_SEP${r}`]=function(i){this.manySepFirstInternalRecord(t,i)},this[`AT_LEAST_ONE${r}`]=function(i){this.atLeastOneInternalRecord(t,i)},this[`AT_LEAST_ONE_SEP${r}`]=function(i){this.atLeastOneSepFirstInternalRecord(t,i)}}this.consume=function(t,r,i){return this.consumeInternalRecord(r,t,i)},this.subrule=function(t,r,i){return this.subruleInternalRecord(r,t,i)},this.option=function(t,r){return this.optionInternalRecord(r,t)},this.or=function(t,r){return this.orInternalRecord(r,t)},this.many=function(t,r){this.manyInternalRecord(t,r)},this.atLeastOne=function(t,r){this.atLeastOneInternalRecord(t,r)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let t=this;for(let r=0;r<10;r++){let i=r>0?r:"";delete t[`CONSUME${i}`],delete t[`SUBRULE${i}`],delete t[`OPTION${i}`],delete t[`OR${i}`],delete t[`MANY${i}`],delete t[`MANY_SEP${i}`],delete t[`AT_LEAST_ONE${i}`],delete t[`AT_LEAST_ONE_SEP${i}`]}delete t.consume,delete t.subrule,delete t.option,delete t.or,delete t.many,delete t.atLeastOne,delete t.ACTION,delete t.BACKTRACK,delete t.LA})}ACTION_RECORD(t){}BACKTRACK_RECORD(t,r){return()=>!0}LA_RECORD(t){return Li}topLevelRuleRecord(t,r){try{let i=new ce({definition:[],name:t});return i.name=t,this.recordingProdStack.push(i),r.call(this),this.recordingProdStack.pop(),i}catch(i){if(i.KNOWN_RECORDER_ERROR!==!0)try{i.message=i.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw i}throw i}}optionInternalRecord(t,r){return fn.call(this,Et,t,r)}atLeastOneInternalRecord(t,r){fn.call(this,kt,r,t)}atLeastOneSepFirstInternalRecord(t,r){fn.call(this,Pt,r,t,vh)}manyInternalRecord(t,r){fn.call(this,st,r,t)}manySepFirstInternalRecord(t,r){fn.call(this,It,r,t,vh)}orInternalRecord(t,r){return mb.call(this,t,r)}subruleInternalRecord(t,r,i){if(Bs(r),!t||N(t,"ruleName")===!1){let o=new Error(`<SUBRULE${Sh(r)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}let n=Ue(this.recordingProdStack),s=t.ruleName,a=new pt({idx:r,nonTerminalName:s,label:i?.LABEL,referencedRule:void 0});return n.definition.push(a),this.outputCst?_b:$s}consumeInternalRecord(t,r,i){if(Bs(r),!ya(t)){let a=new Error(`<CONSUME${Sh(r)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(t)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw a.KNOWN_RECORDER_ERROR=!0,a}let n=Ue(this.recordingProdStack),s=new J({idx:r,terminalType:t,label:i?.LABEL});return n.definition.push(s),Nh}};function fn(e,t,r,i=!1){Bs(r);let n=Ue(this.recordingProdStack),s=fe(t)?t:t.DEF,a=new e({definition:[],idx:r});return i&&(a.separator=t.SEP),N(t,"MAX_LOOKAHEAD")&&(a.maxLookahead=t.MAX_LOOKAHEAD),this.recordingProdStack.push(a),s.call(this),n.definition.push(a),this.recordingProdStack.pop(),$s}function mb(e,t){Bs(t);let r=Ue(this.recordingProdStack),i=w(e)===!1,n=i===!1?e:e.DEF,s=new wt({definition:[],idx:t,ignoreAmbiguities:i&&e.IGNORE_AMBIGUITIES===!0});N(e,"MAX_LOOKAHEAD")&&(s.maxLookahead=e.MAX_LOOKAHEAD);let a=Gi(n,o=>fe(o.GATE));return s.hasPredicates=a,r.definition.push(s),S(n,o=>{let u=new dt({definition:[]});s.definition.push(u),N(o,"IGNORE_AMBIGUITIES")?u.ignoreAmbiguities=o.IGNORE_AMBIGUITIES:N(o,"GATE")&&(u.ignoreAmbiguities=!0),this.recordingProdStack.push(u),o.ALT.call(this),this.recordingProdStack.pop()}),$s}function Sh(e){return e===0?"":`${e}`}function Bs(e){if(e<0||e>Oh){let t=new Error(`Invalid DSL Method idx value: <${e}>
	Idx value must be a none negative value smaller than ${Oh+1}`);throw t.KNOWN_RECORDER_ERROR=!0,t}}var js=class{initPerformanceTracer(t){if(N(t,"traceInitPerf")){let r=t.traceInitPerf,i=typeof r=="number";this.traceInitMaxIdent=i?r:1/0,this.traceInitPerf=i?r>0:r}else this.traceInitMaxIdent=0,this.traceInitPerf=de.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(t,r){if(this.traceInitPerf===!0){this.traceInitIndent++;let i=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${i}--> <${t}>`);let{time:n,value:s}=zi(r),a=n>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&a(`${i}<-- <${t}> time: ${n}ms`),this.traceInitIndent--,s}else return r()}};function Ih(e,t){t.forEach(r=>{let i=r.prototype;Object.getOwnPropertyNames(i).forEach(n=>{if(n==="constructor")return;let s=Object.getOwnPropertyDescriptor(i,n);s&&(s.get||s.set)?Object.defineProperty(e.prototype,n,s):e.prototype[n]=r.prototype[n]})})}var Li=zr(Fe,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(Li);var de=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:ds,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),ki=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),qt;(function(e){e[e.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",e[e.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",e[e.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",e[e.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",e[e.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",e[e.LEFT_RECURSION=5]="LEFT_RECURSION",e[e.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",e[e.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",e[e.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",e[e.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",e[e.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",e[e.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",e[e.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",e[e.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(qt||(qt={}));var hn=class e{static performSelfAnalysis(t){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let t;this.selfAnalysisDone=!0;let r=this.className;this.TRACE_INIT("toFastProps",()=>{qi(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),S(this.definedRulesNames,n=>{let a=this[n].originalGrammarAction,o;this.TRACE_INIT(`${n} Rule`,()=>{o=this.topLevelRuleRecord(n,a)}),this.gastProductionsCache[n]=o})}finally{this.disableRecording()}});let i=[];if(this.TRACE_INIT("Grammar Resolving",()=>{i=ph({rules:at(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(i)}),this.TRACE_INIT("Grammar Validations",()=>{if(H(i)&&this.skipValidations===!1){let n=dh({rules:at(this.gastProductionsCache),tokenTypes:at(this.tokensMap),errMsgProvider:Be,grammarName:r}),s=ah({lookaheadStrategy:this.lookaheadStrategy,rules:at(this.gastProductionsCache),tokenTypes:at(this.tokensMap),grammarName:r});this.definitionErrors=this.definitionErrors.concat(n,s)}}),H(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let n=Tf(at(this.gastProductionsCache));this.resyncFollows=n}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var n,s;(s=(n=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(n,{rules:at(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(at(this.gastProductionsCache))})),!e.DEFER_DEFINITION_ERRORS_HANDLING&&!H(this.definitionErrors))throw t=v(this.definitionErrors,n=>n.message),new Error(`Parser Definition Errors detected:
 ${t.join(`
-------------------------------
`)}`)})}constructor(t,r){this.definitionErrors=[],this.selfAnalysisDone=!1;let i=this;if(i.initErrorHandler(r),i.initLexerAdapter(),i.initLooksAhead(r),i.initRecognizerEngine(t,r),i.initRecoverable(r),i.initTreeBuilder(r),i.initContentAssist(),i.initGastRecorder(r),i.initPerformanceTracer(r),N(r,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=N(r,"skipValidations")?r.skipValidations:de.skipValidations}};hn.DEFER_DEFINITION_ERRORS_HANDLING=!1;Ih(hn,[vs,Rs,Cs,Ls,Ps,ks,Ms,Us,Fs,js]);var cn=class extends hn{constructor(t,r=de){let i=ct(r);i.outputCst=!0,super(t,i)}};var wh=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Eb=wh+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",yb="["+wh+"]["+Eb+"]*",xb=new RegExp("^"+yb+"$");function Ws(e,t){let r=[],i=t.exec(e);for(;i;){let n=[];n.startIndex=t.lastIndex-i[0].length;let s=i.length;for(let a=0;a<s;a++)n.push(i[a]);r.push(n),i=t.exec(e)}return r}var Pi=function(e){let t=xb.exec(e);return!(t===null||typeof t>"u")};function Ch(e){return typeof e<"u"}var Tb={allowBooleanAttributes:!1,unpairedTags:[]};function Uh(e,t){t=Object.assign({},Tb,t);let r=[],i=!1,n=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=kh(e,s),s.err)return s}else if(e[s]==="<"){let a=s;if(s++,e[s]==="!"){s=Ph(e,s);continue}else{let o=!1;e[s]==="/"&&(o=!0,s++);let u="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)u+=e[s];if(u=u.trim(),u[u.length-1]==="/"&&(u=u.substring(0,u.length-1),s--),!Ib(u)){let f;return u.trim().length===0?f="Invalid space after '<'.":f="Tag '"+u+"' is an invalid name.",Mt("InvalidTag",f,_e(e,s))}let l=vb(e,s);if(l===!1)return Mt("InvalidAttr","Attributes for '"+u+"' have open quote.",_e(e,s));let h=l.value;if(s=l.index,h[h.length-1]==="/"){let f=s-h.length;h=h.substring(0,h.length-1);let d=Mh(h,t);if(d===!0)i=!0;else return Mt(d.err.code,d.err.msg,_e(e,f+d.err.line))}else if(o)if(l.tagClosed){if(h.trim().length>0)return Mt("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",_e(e,a));if(r.length===0)return Mt("InvalidTag","Closing tag '"+u+"' has not been opened.",_e(e,a));{let f=r.pop();if(u!==f.tagName){let d=_e(e,f.tagStartPos);return Mt("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+d.line+", col "+d.col+") instead of closing tag '"+u+"'.",_e(e,a))}r.length==0&&(n=!0)}}else return Mt("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",_e(e,s));else{let f=Mh(h,t);if(f!==!0)return Mt(f.err.code,f.err.msg,_e(e,s-h.length+f.err.line));if(n===!0)return Mt("InvalidXml","Multiple possible root nodes found.",_e(e,s));t.unpairedTags.indexOf(u)!==-1||r.push({tagName:u,tagStartPos:a}),i=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Ph(e,s);continue}else if(e[s+1]==="?"){if(s=kh(e,++s),s.err)return s}else break;else if(e[s]==="&"){let f=Rb(e,s);if(f==-1)return Mt("InvalidChar","char '&' is not expected.",_e(e,s));s=f}else if(n===!0&&!Lh(e[s]))return Mt("InvalidXml","Extra text at the end",_e(e,s));e[s]==="<"&&s--}}else{if(Lh(e[s]))continue;return Mt("InvalidChar","char '"+e[s]+"' is not expected.",_e(e,s))}if(i){if(r.length==1)return Mt("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",_e(e,r[0].tagStartPos));if(r.length>0)return Mt("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Mt("InvalidXml","Start tag expected.",1);return!0}function Lh(e){return e===" "||e==="	"||e===`
`||e==="\r"}function kh(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let i=e.substr(r,t-r);if(t>5&&i==="xml")return Mt("InvalidXml","XML declaration allowed only at the start of the document.",_e(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Ph(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var bb='"',Ab="'";function vb(e,t){let r="",i="",n=!1;for(;t<e.length;t++){if(e[t]===bb||e[t]===Ab)i===""?i=e[t]:i!==e[t]||(i="");else if(e[t]===">"&&i===""){n=!0;break}r+=e[t]}return i!==""?!1:{value:r,index:t,tagClosed:n}}var Ob=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Mh(e,t){let r=Ws(e,Ob),i={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return Mt("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",pn(r[n]));if(r[n][3]!==void 0&&r[n][4]===void 0)return Mt("InvalidAttr","Attribute '"+r[n][2]+"' is without value.",pn(r[n]));if(r[n][3]===void 0&&!t.allowBooleanAttributes)return Mt("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",pn(r[n]));let s=r[n][2];if(!Nb(s))return Mt("InvalidAttr","Attribute '"+s+"' is an invalid name.",pn(r[n]));if(!i.hasOwnProperty(s))i[s]=1;else return Mt("InvalidAttr","Attribute '"+s+"' is repeated.",pn(r[n]))}return!0}function Sb(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function Rb(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Sb(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Mt(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Nb(e){return Pi(e)}function Ib(e){return Pi(e)}function _e(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function pn(e){return e.startIndex+e[1].length}var wb={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e},captureMetaData:!1},Fh=function(e){return Object.assign({},wb,e)};var Ds;typeof Symbol!="function"?Ds="@@xmlMetadata":Ds=Symbol("XML Node Metadata");var ve=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t,r){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child}),r!==void 0&&(this.child[this.child.length-1][Ds]={startIndex:r})}static getMetaDataSymbol(){return Ds}};var _n=class{constructor(t){this.suppressValidationErr=!t}readDocType(t,r){let i={};if(t[r+3]==="O"&&t[r+4]==="C"&&t[r+5]==="T"&&t[r+6]==="Y"&&t[r+7]==="P"&&t[r+8]==="E"){r=r+9;let n=1,s=!1,a=!1,o="";for(;r<t.length;r++)if(t[r]==="<"&&!a){if(s&&Vr(t,"!ENTITY",r)){r+=7;let u,l;[u,l,r]=this.readEntityExp(t,r+1,this.suppressValidationErr),l.indexOf("&")===-1&&(i[u]={regx:RegExp(`&${u};`,"g"),val:l})}else if(s&&Vr(t,"!ELEMENT",r)){r+=8;let{index:u}=this.readElementExp(t,r+1);r=u}else if(s&&Vr(t,"!ATTLIST",r))r+=8;else if(s&&Vr(t,"!NOTATION",r)){r+=9;let{index:u}=this.readNotationExp(t,r+1,this.suppressValidationErr);r=u}else if(Vr(t,"!--",r))a=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(t[r]===">"){if(a?t[r-1]==="-"&&t[r-2]==="-"&&(a=!1,n--):n--,n===0)break}else t[r]==="["?s=!0:o+=t[r];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:i,i:r}}readEntityExp(t,r){r=Te(t,r);let i="";for(;r<t.length&&!/\s/.test(t[r])&&t[r]!=='"'&&t[r]!=="'";)i+=t[r],r++;if(dn(i),r=Te(t,r),!this.suppressValidationErr){if(t.substring(r,r+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(t[r]==="%")throw new Error("Parameter entities are not supported")}let n="";return[r,n]=this.readIdentifierVal(t,r,"entity"),r--,[i,n,r]}readNotationExp(t,r){r=Te(t,r);let i="";for(;r<t.length&&!/\s/.test(t[r]);)i+=t[r],r++;!this.suppressValidationErr&&dn(i),r=Te(t,r);let n=t.substring(r,r+6).toUpperCase();if(!this.suppressValidationErr&&n!=="SYSTEM"&&n!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${n}"`);r+=n.length,r=Te(t,r);let s=null,a=null;if(n==="PUBLIC")[r,s]=this.readIdentifierVal(t,r,"publicIdentifier"),r=Te(t,r),(t[r]==='"'||t[r]==="'")&&([r,a]=this.readIdentifierVal(t,r,"systemIdentifier"));else if(n==="SYSTEM"&&([r,a]=this.readIdentifierVal(t,r,"systemIdentifier"),!this.suppressValidationErr&&!a))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:i,publicIdentifier:s,systemIdentifier:a,index:--r}}readIdentifierVal(t,r,i){let n="",s=t[r];if(s!=='"'&&s!=="'")throw new Error(`Expected quoted string, found "${s}"`);for(r++;r<t.length&&t[r]!==s;)n+=t[r],r++;if(t[r]!==s)throw new Error(`Unterminated ${i} value`);return r++,[r,n]}readElementExp(t,r){r=Te(t,r);let i="";for(;r<t.length&&!/\s/.test(t[r]);)i+=t[r],r++;if(!this.suppressValidationErr&&!Pi(i))throw new Error(`Invalid element name: "${i}"`);r=Te(t,r);let n="";if(t[r]==="E"&&Vr(t,"MPTY",r))r+=4;else if(t[r]==="A"&&Vr(t,"NY",r))r+=2;else if(t[r]==="("){for(r++;r<t.length&&t[r]!==")";)n+=t[r],r++;if(t[r]!==")")throw new Error("Unterminated content model")}else if(!this.suppressValidationErr)throw new Error(`Invalid Element Expression, found "${t[r]}"`);return{elementName:i,contentModel:n.trim(),index:r}}readAttlistExp(t,r){r=Te(t,r);let i="";for(;r<t.length&&!/\s/.test(t[r]);)i+=t[r],r++;dn(i),r=Te(t,r);let n="";for(;r<t.length&&!/\s/.test(t[r]);)n+=t[r],r++;if(!dn(n))throw new Error(`Invalid attribute name: "${n}"`);r=Te(t,r);let s="";if(t.substring(r,r+8).toUpperCase()==="NOTATION"){if(s="NOTATION",r+=8,r=Te(t,r),t[r]!=="(")throw new Error(`Expected '(', found "${t[r]}"`);r++;let o=[];for(;r<t.length&&t[r]!==")";){let u="";for(;r<t.length&&t[r]!=="|"&&t[r]!==")";)u+=t[r],r++;if(u=u.trim(),!dn(u))throw new Error(`Invalid notation name: "${u}"`);o.push(u),t[r]==="|"&&(r++,r=Te(t,r))}if(t[r]!==")")throw new Error("Unterminated list of notations");r++,s+=" ("+o.join("|")+")"}else{for(;r<t.length&&!/\s/.test(t[r]);)s+=t[r],r++;let o=["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"];if(!this.suppressValidationErr&&!o.includes(s.toUpperCase()))throw new Error(`Invalid attribute type: "${s}"`)}r=Te(t,r);let a="";return t.substring(r,r+8).toUpperCase()==="#REQUIRED"?(a="#REQUIRED",r+=8):t.substring(r,r+7).toUpperCase()==="#IMPLIED"?(a="#IMPLIED",r+=7):[r,a]=this.readIdentifierVal(t,r,"ATTLIST"),{elementName:i,attributeName:n,attributeType:s,defaultValue:a,index:r}}},Te=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t};function Vr(e,t,r){for(let i=0;i<t.length;i++)if(t[i]!==e[r+i+1])return!1;return!0}function dn(e){if(Pi(e))return e;throw new Error(`Invalid entity name ${e}`)}var Cb=/^[-+]?0x[a-fA-F0-9]+$/,Lb=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,kb={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Wa(e,t={}){if(t=Object.assign({},kb,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(e==="0")return 0;if(t.hex&&Cb.test(r))return Fb(r,16);if(r.includes("e")||r.includes("E"))return Mb(e,r,t);{let i=Lb.exec(r);if(i){let n=i[1]||"",s=i[2],a=Ub(i[3]),o=n?e[s.length+1]===".":e[s.length]===".";if(!t.leadingZeros&&(s.length>1||s.length===1&&!o))return e;{let u=Number(r),l=String(u);if(u===0)return u;if(l.search(/[eE]/)!==-1)return t.eNotation?u:e;if(r.indexOf(".")!==-1)return l==="0"||l===a||l===`${n}${a}`?u:e;let h=s?a:r;return s?h===l||n+h===l?u:e:h===l||h===n+l?u:e}}else return e}}var Pb=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Mb(e,t,r){if(!r.eNotation)return e;let i=t.match(Pb);if(i){let n=i[1]||"",s=i[3].indexOf("e")===-1?"E":"e",a=i[2],o=n?e[a.length+1]===s:e[a.length]===s;return a.length>1&&o?e:a.length===1&&(i[3].startsWith(`.${s}`)||i[3][0]===s)?Number(t):r.leadingZeros&&!o?(t=(i[1]||"")+i[3],Number(t)):e}else return e}function Ub(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substring(0,e.length-1))),e}function Fb(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function mn(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(let r of e)if(typeof r=="string"&&t===r||r instanceof RegExp&&r.test(t))return!0}:()=>!1}var gn=class{constructor(t){if(this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,i)=>Bh(i,10,"&#")},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,i)=>Bh(i,16,"&#x")}},this.addExternalEntities=Bb,this.parseXml=Gb,this.parseTextData=$b,this.resolveNameSpace=jb,this.buildAttributesMap=Db,this.isItStopNode=Vb,this.replaceEntitiesValue=zb,this.readStopNodeData=Xb,this.saveTextToParentTag=qb,this.addChild=Kb,this.ignoreAttributesFn=mn(this.options.ignoreAttributes),this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let r=0;r<this.options.stopNodes.length;r++){let i=this.options.stopNodes[r];typeof i=="string"&&(i.startsWith("*.")?this.stopNodesWildcard.add(i.substring(2)):this.stopNodesExact.add(i))}}}};function Bb(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let i=t[r];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:e[i]}}}function $b(e,t,r,i,n,s,a){if(e!==void 0&&(this.options.trimValues&&!i&&(e=e.trim()),e.length>0)){a||(e=this.replaceEntitiesValue(e));let o=this.options.tagValueProcessor(t,e,r,n,s);return o==null?e:typeof o!=typeof e||o!==e?o:this.options.trimValues?Ga(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Ga(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function jb(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var Wb=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Db(e,t){if(this.options.ignoreAttributes!==!0&&typeof e=="string"){let r=Ws(e,Wb),i=r.length,n={};for(let s=0;s<i;s++){let a=this.resolveNameSpace(r[s][1]);if(this.ignoreAttributesFn(a,t))continue;let o=r[s][4],u=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),o!==void 0){this.options.trimValues&&(o=o.trim()),o=this.replaceEntitiesValue(o);let l=this.options.attributeValueProcessor(a,o,t);l==null?n[u]=o:typeof l!=typeof o||l!==o?n[u]=l:n[u]=Ga(o,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(n[u]=!0)}if(!Object.keys(n).length)return;if(this.options.attributesGroupName){let s={};return s[this.options.attributesGroupName]=n,s}return n}}var Gb=function(e){e=e.replace(/\r\n?/g,`
`);let t=new ve("!xml"),r=t,i="",n="",s=new _n(this.options.processEntities);for(let a=0;a<e.length;a++)if(e[a]==="<")if(e[a+1]==="/"){let u=Hr(e,">",a,"Closing Tag is not closed."),l=e.substring(a+2,u).trim();if(this.options.removeNSPrefix){let d=l.indexOf(":");d!==-1&&(l=l.substr(d+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),r&&(i=this.saveTextToParentTag(i,r,n));let h=n.substring(n.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let f=0;h&&this.options.unpairedTags.indexOf(h)!==-1?(f=n.lastIndexOf(".",n.lastIndexOf(".")-1),this.tagsNodeStack.pop()):f=n.lastIndexOf("."),n=n.substring(0,f),r=this.tagsNodeStack.pop(),i="",a=u}else if(e[a+1]==="?"){let u=Da(e,a,!1,"?>");if(!u)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,r,n),!(this.options.ignoreDeclaration&&u.tagName==="?xml"||this.options.ignorePiTags)){let l=new ve(u.tagName);l.add(this.options.textNodeName,""),u.tagName!==u.tagExp&&u.attrExpPresent&&(l[":@"]=this.buildAttributesMap(u.tagExp,n)),this.addChild(r,l,n,a)}a=u.closeIndex+1}else if(e.substr(a+1,3)==="!--"){let u=Hr(e,"-->",a+4,"Comment is not closed.");if(this.options.commentPropName){let l=e.substring(a+4,u-2);i=this.saveTextToParentTag(i,r,n),r.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}a=u}else if(e.substr(a+1,2)==="!D"){let u=s.readDocType(e,a);this.docTypeEntities=u.entities,a=u.i}else if(e.substr(a+1,2)==="!["){let u=Hr(e,"]]>",a,"CDATA is not closed.")-2,l=e.substring(a+9,u);i=this.saveTextToParentTag(i,r,n);let h=this.parseTextData(l,r.tagname,n,!0,!1,!0,!0);h==null&&(h=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):r.add(this.options.textNodeName,h),a=u+2}else{let u=Da(e,a,this.options.removeNSPrefix),l=u.tagName,h=u.rawTagName,f=u.tagExp,d=u.attrExpPresent,m=u.closeIndex;if(this.options.transformTagName){let E=this.options.transformTagName(l);f===l&&(f=E),l=E}r&&i&&r.tagname!=="!xml"&&(i=this.saveTextToParentTag(i,r,n,!1));let g=r;g&&this.options.unpairedTags.indexOf(g.tagname)!==-1&&(r=this.tagsNodeStack.pop(),n=n.substring(0,n.lastIndexOf("."))),l!==t.tagname&&(n+=n?"."+l:l);let y=a;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,n,l)){let E="";if(f.length>0&&f.lastIndexOf("/")===f.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),n=n.substr(0,n.length-1),f=l):f=f.substr(0,f.length-1),a=u.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)a=u.closeIndex;else{let A=this.readStopNodeData(e,h,m+1);if(!A)throw new Error(`Unexpected end of ${h}`);a=A.i,E=A.tagContent}let x=new ve(l);l!==f&&d&&(x[":@"]=this.buildAttributesMap(f,n)),E&&(E=this.parseTextData(E,l,n,!0,d,!0,!0)),n=n.substr(0,n.lastIndexOf(".")),x.add(this.options.textNodeName,E),this.addChild(r,x,n,y)}else{if(f.length>0&&f.lastIndexOf("/")===f.length-1){if(l[l.length-1]==="/"?(l=l.substr(0,l.length-1),n=n.substr(0,n.length-1),f=l):f=f.substr(0,f.length-1),this.options.transformTagName){let x=this.options.transformTagName(l);f===l&&(f=x),l=x}let E=new ve(l);l!==f&&d&&(E[":@"]=this.buildAttributesMap(f,n)),this.addChild(r,E,n,y),n=n.substr(0,n.lastIndexOf("."))}else{let E=new ve(l);this.tagsNodeStack.push(r),l!==f&&d&&(E[":@"]=this.buildAttributesMap(f,n)),this.addChild(r,E,n,y),r=E}i="",a=m}}else i+=e[a];return t.child};function Kb(e,t,r,i){this.options.captureMetaData||(i=void 0);let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t,i))}var zb=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function qb(e,t,r,i){return e&&(i===void 0&&(i=t.child.length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,i),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function Vb(e,t,r,i){return!!(t&&t.has(i)||e&&e.has(r))}function Hb(e,t,r=">"){let i,n="";for(let s=t;s<e.length;s++){let a=e[s];if(i)a===i&&(i="");else if(a==='"'||a==="'")i=a;else if(a===r[0])if(r[1]){if(e[s+1]===r[1])return{data:n,index:s}}else return{data:n,index:s};else a==="	"&&(a=" ");n+=a}}function Hr(e,t,r,i){let n=e.indexOf(t,r);if(n===-1)throw new Error(i);return n+t.length-1}function Da(e,t,r,i=">"){let n=Hb(e,t+1,i);if(!n)return;let s=n.data,a=n.index,o=s.search(/\s/),u=s,l=!0;o!==-1&&(u=s.substring(0,o),s=s.substring(o+1).trimStart());let h=u;if(r){let f=u.indexOf(":");f!==-1&&(u=u.substr(f+1),l=u!==n.data.substr(f+1))}return{tagName:u,tagExp:s,closeIndex:a,attrExpPresent:l,rawTagName:h}}function Xb(e,t,r){let i=r,n=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=Hr(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(n--,n===0))return{tagContent:e.substring(i,r),i:s};r=s}else if(e[r+1]==="?")r=Hr(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Hr(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Hr(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Da(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&n++,r=s.closeIndex)}}function Ga(e,t,r){if(t&&typeof e=="string"){let i=e.trim();return i==="true"?!0:i==="false"?!1:Wa(e,r)}else return Ch(e)?e:""}function Bh(e,t,r){let i=Number.parseInt(e,t);return i>=0&&i<=1114111?String.fromCodePoint(i):r+e+";"}var Ka=ve.getMetaDataSymbol();function za(e,t){return $h(e,t)}function $h(e,t,r){let i,n={};for(let s=0;s<e.length;s++){let a=e[s],o=Yb(a),u="";if(r===void 0?u=o:u=r+"."+o,o===t.textNodeName)i===void 0?i=a[o]:i+=""+a[o];else{if(o===void 0)continue;if(a[o]){let l=$h(a[o],t,u),h=Zb(l,t);a[Ka]!==void 0&&(l[Ka]=a[Ka]),a[":@"]?Qb(l,a[":@"],u,t):Object.keys(l).length===1&&l[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?l=l[t.textNodeName]:Object.keys(l).length===0&&(t.alwaysCreateTextNode?l[t.textNodeName]="":l=""),n[o]!==void 0&&n.hasOwnProperty(o)?(Array.isArray(n[o])||(n[o]=[n[o]]),n[o].push(l)):t.isArray(o,u,h)?n[o]=[l]:n[o]=l}}}return typeof i=="string"?i.length>0&&(n[t.textNodeName]=i):i!==void 0&&(n[t.textNodeName]=i),n}function Yb(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let i=t[r];if(i!==":@")return i}}function Qb(e,t,r,i){if(t){let n=Object.keys(t),s=n.length;for(let a=0;a<s;a++){let o=n[a];i.isArray(o,r+"."+o,!0,!0)?e[o]=[t[o]]:e[o]=t[o]}}}function Zb(e,t){let{textNodeName:r}=t,i=Object.keys(e).length;return!!(i===0||i===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}var Mi=class{constructor(t){this.externalEntities={},this.options=Fh(t)}parse(t,r){if(typeof t!="string"&&t.toString)t=t.toString();else if(typeof t!="string")throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=Uh(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let i=new gn(this.options);i.addExternalEntities(this.externalEntities);let n=i.parseXml(t);return this.options.preserveOrder||n===void 0?n:za(n,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}static getMetaDataSymbol(){return ve.getMetaDataSymbol()}};function qa(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=`
`),Wh(e,t,"",r)}function Wh(e,t,r,i){let n="",s=!1;for(let a=0;a<e.length;a++){let o=e[a],u=Jb(o);if(u===void 0)continue;let l="";if(r.length===0?l=u:l=`${r}.${u}`,u===t.textNodeName){let g=o[u];tA(l,t)||(g=t.tagValueProcessor(u,g),g=Dh(g,t)),s&&(n+=i),n+=g,s=!1;continue}else if(u===t.cdataPropName){s&&(n+=i),n+=`<![CDATA[${o[u][0][t.textNodeName]}]]>`,s=!1;continue}else if(u===t.commentPropName){n+=i+`<!--${o[u][0][t.textNodeName]}-->`,s=!0;continue}else if(u[0]==="?"){let g=jh(o[":@"],t),y=u==="?xml"?"":i,E=o[u][0][t.textNodeName];E=E.length!==0?" "+E:"",n+=y+`<${u}${E}${g}?>`,s=!0;continue}let h=i;h!==""&&(h+=t.indentBy);let f=jh(o[":@"],t),d=i+`<${u}${f}`,m=Wh(o[u],t,l,h);t.unpairedTags.indexOf(u)!==-1?t.suppressUnpairedNode?n+=d+">":n+=d+"/>":(!m||m.length===0)&&t.suppressEmptyNode?n+=d+"/>":m&&m.endsWith(">")?n+=d+`>${m}${i}</${u}>`:(n+=d+">",m&&i!==""&&(m.includes("/>")||m.includes("</"))?n+=i+t.indentBy+m+i:n+=m,n+=`</${u}>`),s=!0}return n}function Jb(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let i=t[r];if(e.hasOwnProperty(i)&&i!==":@")return i}}function jh(e,t){let r="";if(e&&!t.ignoreAttributes)for(let i in e){if(!e.hasOwnProperty(i))continue;let n=t.attributeValueProcessor(i,e[i]);n=Dh(n,t),n===!0&&t.suppressBooleanAttributes?r+=` ${i.substr(t.attributeNamePrefix.length)}`:r+=` ${i.substr(t.attributeNamePrefix.length)}="${n}"`}return r}function tA(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let i in t.stopNodes)if(t.stopNodes[i]===e||t.stopNodes[i]==="*."+r)return!0;return!1}function Dh(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let i=t.entities[r];e=e.replace(i.regex,i.val)}return e}var eA={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function we(e){this.options=Object.assign({},eA,e),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=mn(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=nA),this.processTextOrObjNode=rA,this.options.format?(this.indentate=iA,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}we.prototype.build=function(e){return this.options.preserveOrder?qa(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0,[]).val)};we.prototype.j2x=function(e,t,r){let i="",n="",s=r.join(".");for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a))if(typeof e[a]>"u")this.isAttribute(a)&&(n+="");else if(e[a]===null)this.isAttribute(a)||a===this.options.cdataPropName?n+="":a[0]==="?"?n+=this.indentate(t)+"<"+a+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+a+"/"+this.tagEndChar;else if(e[a]instanceof Date)n+=this.buildTextValNode(e[a],a,"",t);else if(typeof e[a]!="object"){let o=this.isAttribute(a);if(o&&!this.ignoreAttributesFn(o,s))i+=this.buildAttrPairStr(o,""+e[a]);else if(!o)if(a===this.options.textNodeName){let u=this.options.tagValueProcessor(a,""+e[a]);n+=this.replaceEntitiesValue(u)}else n+=this.buildTextValNode(e[a],a,"",t)}else if(Array.isArray(e[a])){let o=e[a].length,u="",l="";for(let h=0;h<o;h++){let f=e[a][h];if(!(typeof f>"u"))if(f===null)a[0]==="?"?n+=this.indentate(t)+"<"+a+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+a+"/"+this.tagEndChar;else if(typeof f=="object")if(this.options.oneListGroup){let d=this.j2x(f,t+1,r.concat(a));u+=d.val,this.options.attributesGroupName&&f.hasOwnProperty(this.options.attributesGroupName)&&(l+=d.attrStr)}else u+=this.processTextOrObjNode(f,a,t,r);else if(this.options.oneListGroup){let d=this.options.tagValueProcessor(a,f);d=this.replaceEntitiesValue(d),u+=d}else u+=this.buildTextValNode(f,a,"",t)}this.options.oneListGroup&&(u=this.buildObjectNode(u,a,l,t)),n+=u}else if(this.options.attributesGroupName&&a===this.options.attributesGroupName){let o=Object.keys(e[a]),u=o.length;for(let l=0;l<u;l++)i+=this.buildAttrPairStr(o[l],""+e[a][o[l]])}else n+=this.processTextOrObjNode(e[a],a,t,r);return{attrStr:i,val:n}};we.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function rA(e,t,r,i){let n=this.j2x(e,r+1,i.concat(t));return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}we.prototype.buildObjectNode=function(e,t,r,i){if(e==="")return t[0]==="?"?this.indentate(i)+"<"+t+r+"?"+this.tagEndChar:this.indentate(i)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let n="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",n=""),(r||r==="")&&e.indexOf("<")===-1?this.indentate(i)+"<"+t+r+s+">"+e+n:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(i)+`<!--${e}-->`+this.newLine:this.indentate(i)+"<"+t+r+s+this.tagEndChar+e+this.indentate(i)+n}};we.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};we.prototype.buildTextValNode=function(e,t,r,i){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(i)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(i)+"<"+t+r+"?"+this.tagEndChar;{let n=this.options.tagValueProcessor(t,e);return n=this.replaceEntitiesValue(n),n===""?this.indentate(i)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(i)+"<"+t+r+">"+n+"</"+t+this.tagEndChar}};we.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function iA(e){return this.options.indentBy.repeat(e)}function nA(e){return e.startsWith(this.options.attributeNamePrefix)&&e!==this.options.textNodeName?e.substr(this.attrPrefixLen):!1}var yo=Ro(Gh(),1),Hc=Ro(Kc(),1),uv=B({name:"WhiteSpace",pattern:/\s+/,group:St.SKIPPED}),lv=B({name:"LineComment",pattern:/\/\/[^\n\r]*/,group:St.SKIPPED}),fv=B({name:"BlockComment",pattern:/\/\*[\s\S]*?\*\//,group:St.SKIPPED}),Ut=B({name:"Identifier",pattern:/[a-zA-Z_$][a-zA-Z0-9_.[\]]*/}),Xc=B({name:"QuotedIdentifier",pattern:/`([^`\\]|\\.)*`/}),Js=B({name:"From",pattern:/from/i,longer_alt:Ut}),xo=B({name:"To",pattern:/to/i,longer_alt:Ut}),To=B({name:"Transform",pattern:/transform/i,longer_alt:Ut}),Yc=B({name:"Set",pattern:/set/i,longer_alt:Ut}),Qc=B({name:"Section",pattern:/section/i,longer_alt:Ut}),Zc=B({name:"Multiple",pattern:/multiple/i,longer_alt:Ut}),Jc=B({name:"Clone",pattern:/clone/i,longer_alt:Ut}),tp=B({name:"Delete",pattern:/delete/i,longer_alt:Ut}),ep=B({name:"Define",pattern:/define/i,longer_alt:Ut}),rp=B({name:"Modify",pattern:/modify/i,longer_alt:Ut}),bo=B({name:"If",pattern:/if/i,longer_alt:Ut}),ip=B({name:"Else",pattern:/else/i,longer_alt:Ut}),np=B({name:"True",pattern:/true/i,longer_alt:Ut}),sp=B({name:"False",pattern:/false/i,longer_alt:Ut}),ap=B({name:"Null",pattern:/null/i,longer_alt:Ut}),op=B({name:"Return",pattern:/return/i,longer_alt:Ut}),up=B({name:"Unsafe",pattern:/unsafe/i,longer_alt:Ut}),lp=B({name:"Where",pattern:/where/i,longer_alt:Ut}),fp=B({name:"EqualsEquals",pattern:/==/}),hp=B({name:"EqualsEqualsEquals",pattern:/===/}),cp=B({name:"NotEquals",pattern:/!=/}),pp=B({name:"NotEqualsEquals",pattern:/!==/}),dp=B({name:"LessThanOrEqual",pattern:/<=/}),_p=B({name:"GreaterThanOrEqual",pattern:/>=/}),mp=B({name:"LessThan",pattern:/</}),gp=B({name:"GreaterThan",pattern:/>/}),Ep=B({name:"And",pattern:/&&/}),yp=B({name:"Or",pattern:/\|\|/}),xp=B({name:"Not",pattern:/!/}),Ui=B({name:"Equals",pattern:/=/}),Tp=B({name:"Plus",pattern:/\+/}),Ao=B({name:"Minus",pattern:/-/}),bp=B({name:"Times",pattern:/\*/}),Ap=B({name:"Divide",pattern:/\//}),tr=B({name:"LParen",pattern:/\(/}),fr=B({name:"RParen",pattern:/\)/}),ta=B({name:"Comma",pattern:/,/}),vp=B({name:"StringLiteral",pattern:/"(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*'/}),Op=B({name:"NumericLiteral",pattern:/-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/}),Sp=[uv,lv,fv,Js,xo,To,Yc,Qc,Zc,Jc,tp,ep,rp,bo,ip,np,sp,ap,op,up,lp,hp,fp,pp,cp,dp,_p,Ep,yp,Ui,mp,gp,xp,Tp,Ao,bp,Ap,tr,fr,ta,vp,Op,Xc,Ut],hv=new St(Sp),cv=class extends cn{constructor(){super(Sp),this.performSelfAnalysis()}query=this.RULE("query",()=>{this.CONSUME(Js),this.SUBRULE(this.typeFormat,{LABEL:"sourceType"}),this.CONSUME(xo),this.SUBRULE1(this.typeFormat,{LABEL:"targetType"}),this.OPTION(()=>{this.CONSUME(To),this.OPTION1(()=>{this.CONSUME(up)}),this.MANY(()=>{this.SUBRULE(this.action)})})});typeFormat=this.RULE("typeFormat",()=>{this.SUBRULE(this.anyIdentifier,{LABEL:"name"}),this.OPTION(()=>{this.CONSUME(tr),this.MANY_SEP({SEP:ta,DEF:()=>{this.SUBRULE(this.typeFormatParameter,{LABEL:"params"})}}),this.CONSUME(fr)})});typeFormatParameter=this.RULE("typeFormatParameter",()=>{this.OR([{GATE:()=>this.LA(2).tokenType===Ui,ALT:()=>this.SUBRULE(this.namedParameter)},{ALT:()=>this.SUBRULE(this.literal)}])});namedParameter=this.RULE("namedParameter",()=>{this.SUBRULE(this.anyIdentifier,{LABEL:"key"}),this.CONSUME(Ui),this.SUBRULE(this.literal,{LABEL:"value"})});anyIdentifier=this.RULE("anyIdentifier",()=>{this.OR([{ALT:()=>this.CONSUME(Ut)},{ALT:()=>this.CONSUME(Xc)}])});literal=this.RULE("literal",()=>{this.OR([{ALT:()=>this.CONSUME(vp)},{ALT:()=>this.CONSUME(Op)},{ALT:()=>this.CONSUME(np)},{ALT:()=>this.CONSUME(sp)},{ALT:()=>this.CONSUME(ap)}])});action=this.RULE("action",()=>{this.OR([{ALT:()=>this.SUBRULE(this.setRule)},{ALT:()=>this.SUBRULE(this.modifyRule)},{ALT:()=>this.SUBRULE(this.sectionRule)},{ALT:()=>this.SUBRULE(this.cloneRule)},{ALT:()=>this.SUBRULE(this.deleteRule)},{ALT:()=>this.SUBRULE(this.ifAction)},{ALT:()=>this.SUBRULE(this.defineRule)},{ALT:()=>this.SUBRULE(this.returnRule)}])});returnRule=this.RULE("returnRule",()=>{this.CONSUME(op),this.SUBRULE(this.expression,{LABEL:"expr"})});deleteRule=this.RULE("deleteRule",()=>{this.CONSUME(tp),this.SUBRULE(this.anyIdentifier,{LABEL:"field"})});ifAction=this.RULE("ifAction",()=>{this.CONSUME(bo),this.CONSUME(tr),this.SUBRULE(this.expression,{LABEL:"condition"}),this.CONSUME(fr),this.CONSUME2(tr),this.MANY(()=>{this.SUBRULE(this.action,{LABEL:"thenActions"})}),this.CONSUME2(fr),this.OPTION(()=>{this.CONSUME(ip),this.CONSUME3(tr),this.MANY2(()=>{this.SUBRULE2(this.action,{LABEL:"elseActions"})}),this.CONSUME3(fr)})});cloneRule=this.RULE("cloneRule",()=>{this.CONSUME(Jc),this.OPTION(()=>{this.CONSUME(tr),this.MANY_SEP({SEP:ta,DEF:()=>{this.SUBRULE(this.anyIdentifier,{LABEL:"fields"})}}),this.CONSUME(fr)})});setRule=this.RULE("setRule",()=>{this.CONSUME(Yc),this.SUBRULE(this.anyIdentifier,{LABEL:"left"}),this.CONSUME(Ui),this.SUBRULE(this.expression,{LABEL:"right"})});modifyRule=this.RULE("modifyRule",()=>{this.CONSUME(rp),this.SUBRULE(this.anyIdentifier,{LABEL:"left"}),this.CONSUME(Ui),this.SUBRULE(this.expression,{LABEL:"right"})});expression=this.RULE("expression",()=>{this.SUBRULE(this.logicalOr)});logicalOr=this.RULE("logicalOr",()=>{this.SUBRULE(this.logicalAnd,{LABEL:"lhs"}),this.MANY(()=>{this.CONSUME(yp),this.SUBRULE1(this.logicalAnd,{LABEL:"rhs"})})});logicalAnd=this.RULE("logicalAnd",()=>{this.SUBRULE(this.comparison,{LABEL:"lhs"}),this.MANY(()=>{this.CONSUME(Ep),this.SUBRULE1(this.comparison,{LABEL:"rhs"})})});comparison=this.RULE("comparison",()=>{this.SUBRULE(this.addition,{LABEL:"lhs"}),this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(fp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(hp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(cp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(pp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(dp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(_p,{LABEL:"ops"})},{ALT:()=>this.CONSUME(mp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(gp,{LABEL:"ops"})}]),this.SUBRULE1(this.addition,{LABEL:"rhs"})})});addition=this.RULE("addition",()=>{this.SUBRULE(this.multiplication,{LABEL:"lhs"}),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(Tp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(Ao,{LABEL:"ops"})}]),this.SUBRULE1(this.multiplication,{LABEL:"rhs"})})});multiplication=this.RULE("multiplication",()=>{this.SUBRULE(this.unaryExpression,{LABEL:"lhs"}),this.MANY(()=>{this.OR([{ALT:()=>this.CONSUME(bp,{LABEL:"ops"})},{ALT:()=>this.CONSUME(Ap,{LABEL:"ops"})}]),this.SUBRULE1(this.unaryExpression,{LABEL:"rhs"})})});unaryExpression=this.RULE("unaryExpression",()=>{this.OPTION(()=>{this.OR([{ALT:()=>this.CONSUME(Ao,{LABEL:"sign"})},{ALT:()=>this.CONSUME(xp,{LABEL:"sign"})}])}),this.SUBRULE(this.atomic)});atomic=this.RULE("atomic",()=>{this.OR([{ALT:()=>this.SUBRULE(this.literal)},{GATE:()=>this.LA(2).tokenType===tr,ALT:()=>this.SUBRULE(this.functionCall)},{ALT:()=>this.SUBRULE(this.anyIdentifier)},{ALT:()=>{this.CONSUME(tr),this.SUBRULE(this.expression),this.CONSUME(fr)}}])});functionCall=this.RULE("functionCall",()=>{this.OR([{ALT:()=>this.CONSUME(Ut,{LABEL:"name"})},{ALT:()=>this.CONSUME(bo,{LABEL:"name"})}]),this.CONSUME(tr),this.MANY_SEP({SEP:ta,DEF:()=>{this.SUBRULE(this.expression,{LABEL:"args"})}}),this.CONSUME(fr)});sectionRule=this.RULE("sectionRule",()=>{this.CONSUME(Qc),this.OPTION(()=>{this.CONSUME(Zc)}),this.SUBRULE(this.anyIdentifier,{LABEL:"sectionName"}),this.CONSUME(tr),this.OPTION1(()=>{this.CONSUME(Js,{LABEL:"subqueryFrom"}),this.SUBRULE(this.typeFormat,{LABEL:"subquerySourceType"}),this.CONSUME(xo,{LABEL:"subqueryTo"}),this.SUBRULE1(this.typeFormat,{LABEL:"subqueryTargetType"}),this.OPTION2(()=>{this.CONSUME(To,{LABEL:"subqueryTransform"})})}),this.MANY(()=>{this.SUBRULE(this.action)}),this.CONSUME(fr),this.OPTION3(()=>{this.CONSUME1(Js,{LABEL:"followFrom"}),this.SUBRULE(this.expression,{LABEL:"followExpr"})}),this.OPTION4(()=>{this.CONSUME(lp,{LABEL:"whereClause"}),this.SUBRULE1(this.expression,{LABEL:"whereExpr"})})});defineRule=this.RULE("defineRule",()=>{this.CONSUME(ep),this.SUBRULE(this.anyIdentifier,{LABEL:"left"}),this.CONSUME(Ui),this.SUBRULE(this.expression,{LABEL:"right"})})},In=new cv,pv={substring:(e,t)=>{if(e.length<2)throw new Error("substring() requires at least 2 arguments (string, start, [length])");let[r,i,n]=e;return n!==void 0?`String(${r}).slice(${i}, (${i}) + (${n}))`:`String(${r}).slice(${i})`},if:(e,t)=>{if(e.length!==3)throw new Error("if() requires exactly 3 arguments (condition, trueValue, falseValue)");let[r,i,n]=e;return`((${r}) ? (${i}) : (${n}))`},text:(e,t)=>{if(e.length!==1)throw new Error("text() requires exactly 1 argument (string or number)");let[r]=e;return`String(${r})`},replace:(e,t)=>{if(e.length!==3)throw new Error("replace() requires exactly 3 arguments (string, search, replacement)");let[r,i,n]=e;return`String(${r}).replace(${i}, ${n})`},number:(e,t)=>{if(e.length!==1)throw new Error("number() requires exactly 1 argument (string)");let[r]=e;return`Number(${r})`},extractnumber:(e,t)=>{if(e.length!==1)throw new Error("extractNumber() requires exactly 1 argument (string)");let[r]=e;return`(() => { const match = String(${r}).match(/\\d+(\\.\\d+)?/); return match ? Number(match[0]) : null; })()`},uppercase:(e,t)=>{if(e.length!==1)throw new Error("uppercase() requires exactly 1 argument (string)");let[r]=e;return`String(${r}).toUpperCase()`},lowercase:(e,t)=>{if(e.length!==1)throw new Error("lowercase() requires exactly 1 argument (string)");let[r]=e;return`String(${r}).toLowerCase()`},xmlnode:(e,t)=>{if(e.length<1)throw new Error("xmlnode() requires at least 1 argument (string)");let[r,...i]=e,n=i.join(", ");return`env.functions.xmlnode(${r}${n?", "+n:""})`},split:(e,t)=>{if(e.length<1)throw new Error("split() requires at least 1 argument (string)");let[r,i,n]=e,s=i!==void 0?i:'""',a=n!==void 0?`, ${n}`:"";return`String(${r}).split(${s}${a})`},to_base64:(e,t)=>{if(e.length!==1)throw new Error("to_base64() requires exactly 1 argument (string)");let[r]=e;return`env.functions.to_base64(${r})`},from_base64:(e,t)=>{if(e.length!==1)throw new Error("from_base64() requires exactly 1 argument (string)");let[r]=e;return`env.functions.from_base64(${r})`},aslist:(e,t)=>{if(e.length!==1)throw new Error("aslist() requires exactly 1 argument");let[r]=e;return`env.functions.aslist(${r})`},spreadsheet:(e,t)=>{if(e.length!==1)throw new Error("spreadsheet() requires exactly 1 argument");let[r]=e;return`env.functions.spreadsheet(${r})`},unpack:(e,t)=>{if(e.length<2)throw new Error("unpack() requires at least 2 arguments (string, fieldSpec1, [fieldSpec2, ...])");let[r,...i]=e;i.forEach(s=>{let a=s.replace(/^["']|["']$/g,""),o=a.split(":");if(o.length<3)throw new Error(`Invalid field spec for unpack(): ${a}. Expected "name:start:length[:modifier]"`);let[u,l,h]=o;if(!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(u))throw new Error(`Invalid field name in unpack() spec: "${u}". Must be a valid JavaScript identifier.`);let f=parseInt(l,10),d=parseInt(h,10);if(isNaN(f)||isNaN(d))throw new Error(`Invalid character positions in unpack() spec: ${a}`)});let n=i.join(", ");return`env.functions.unpack(${r}, ${n})`},pack:(e,t)=>{if(e.length<2)throw new Error("pack() requires at least 2 arguments (object, fieldSpec1, [fieldSpec2, ...])");let[r,...i]=e;i.forEach(s=>{let a=s.replace(/^["']|["']$/g,""),o=a.split(":");if(o.length<3)throw new Error(`Invalid field spec for pack(): ${a}. Expected "name:start:length[:modifier]"`);let[u,l,h]=o;if(!/^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(u))throw new Error(`Invalid field name in pack() spec: "${u}". Must be a valid JavaScript identifier.`);let f=parseInt(l,10),d=parseInt(h,10);if(isNaN(f)||isNaN(d))throw new Error(`Invalid character positions in pack() spec: ${a}`)});let n=i.join(", ");return`env.functions.pack(${r}, ${n})`},concat:(e,t)=>`env.functions.concat(${e.join(", ")})`,transpose:(e,t)=>{if(e.length<2)throw new Error("transpose() requires at least 2 arguments (source, key1, [key2, ...])");return`env.functions.transpose(${e.join(", ")})`},list:(e,t)=>`[${e.join(", ")}]`,array:(e,t)=>`[${e.join(", ")}]`,extract:(e,t)=>{if(e.length<2)throw new Error("extract() requires at least 2 arguments (source, key1, [key2, ...])");let[r,...i]=e;return`env.functions.extract(${r}, ${t.safeMode}, ${i.join(", ")})`}},Eo=class{sourceRoot={type:"object",properties:{}};targetRoot={type:"object",properties:{}};sourceStack=[this.sourceRoot];targetStack=[this.targetRoot];getCurrentSource(){return this.sourceStack[this.sourceStack.length-1]}getCurrentTarget(){return this.targetStack[this.targetStack.length-1]}recordAccess(e,t="any",r=!1){let i=r?this.getCurrentTarget():this.getCurrentSource();this.setInNode(i,e,t)}recordAssignment(e,t="any"){this.setInNode(this.getCurrentTarget(),e,t)}recordClone(e){let t=this.getCurrentTarget();e?e.forEach(r=>{this.setInNode(this.getCurrentSource(),r,"any"),this.setInNode(t,r,"any")}):t.isOpen=!0}recordDelete(e){let t=this.getCurrentTarget();this.deleteInNode(t,e)}pushSection(e,t,r){t!=="parent"&&this.setInNode(this.getCurrentSource(),t,r?"array":"object");let i={type:r?"array":"object"};r?i.items={type:"object",properties:{}}:i.properties={};let n={type:"object",properties:{}};this.setInNodeExplicit(this.getCurrentTarget(),e,i),this.targetStack.push(r?i.items:i),this.sourceStack.push(n)}popSection(e,t){let r=this.sourceStack.pop();this.targetStack.pop();let i=this.getCurrentSource();if(e!=="parent"){let n=this.getOrSetNode(i,e,t?"array":"object"),s=t?n.items:n;s&&(s.properties||(s.properties={}),Object.assign(s.properties,r.properties||{}))}else i.properties||(i.properties={}),Object.assign(i.properties,r.properties||{})}parsePath(e){if(!e)return[];let t=[],r=e.split(".");for(let i of r){let n=i.match(/^([^[\]]*)((?:\[\d+\])*)$/);if(n){n[1]&&t.push(n[1]);let s=n[2].match(/\[\d+\]/g);if(s)for(let a of s)t.push("[]")}else t.push(i)}return t}setInNode(e,t,r){let i=this.parsePath(t),n=e;for(let s=0;s<i.length;s++){let a=i[s],o=s===i.length-1;if(a==="[]"){n.type="array",n.items||(n.items={type:o?r:"object",properties:{}}),n=n.items;continue}n.properties||(n.properties={}),o?(!n.properties[a]||n.properties[a].type==="any")&&(n.properties[a]={type:r},r==="object"?n.properties[a].properties={}:r==="array"&&(n.properties[a].items={type:"object",properties:{}})):(n.properties[a]||(n.properties[a]={type:"object",properties:{}}),n=n.properties[a])}}setInNodeExplicit(e,t,r){let i=this.parsePath(t),n=e;for(let s=0;s<i.length;s++){let a=i[s],o=s===i.length-1;if(a==="[]"){n.type="array",n.items||(n.items={type:o?r.type:"object",properties:{}}),o?n.items=r:n=n.items;continue}n.properties||(n.properties={}),o?n.properties[a]=r:(n.properties[a]||(n.properties[a]={type:"object",properties:{}}),n=n.properties[a])}}deleteInNode(e,t){let r=this.parsePath(t),i=e;for(let n=0;n<r.length;n++){let s=r[n],a=n===r.length-1;if(s==="[]"){if(!i.items)return;a?(delete i.items,i.type="any"):i=i.items;continue}if(!i.properties)return;if(a)delete i.properties[s];else if(i=i.properties[s],!i)return}}getOrSetNode(e,t,r){let i=this.parsePath(t),n=e;for(let s=0;s<i.length;s++){let a=i[s],o=s===i.length-1;if(a==="[]"){if(n.type="array",!n.items){let l=o?r:"object";n.items={type:l},l==="object"?n.items.properties={}:l==="array"&&(n.items.items={type:"object",properties:{}})}n=n.items;continue}let u=o?r:"object";n.properties||(n.properties={}),n.properties[a]||(n.properties[a]={type:u},u==="object"?n.properties[a].properties={}:u==="array"&&(n.properties[a].items={type:"object",properties:{}})),n=n.properties[a]}return n}getResult(){return{source:this.sourceRoot,target:this.targetRoot}}},dv=In.getBaseCstVisitorConstructor(),_v=class extends dv{readFrom="source";scopeStack=[];safeMode=!0;isAnalyzing=!1;tracker=new Eo;lastInferredType="any";constructor(){super(),this.validateVisitor()}reset(){this.readFrom="source",this.scopeStack=[],this.tracker=new Eo,this.lastInferredType="any"}visitWithContext(e,t){let r=this.readFrom;this.readFrom=t.readFrom;try{return this.visit(e)}finally{this.readFrom=r}}query(e){this.reset(),this.isAnalyzing&&(this.tracker=new Eo);let t=this.visit(e.sourceType),r=this.visit(e.targetType),i=!!e.Unsafe;this.safeMode=!i,this.scopeStack.push({format:r.name,options:r.options,isSerializationScope:!0});try{let n=e.action?e.action.map(h=>this.visit(h)):[];e.Transform||n.push("Object.assign(target, source);");let s=t.name,a=r.name,o=JSON.stringify(t.options),u=JSON.stringify(r.options),l=n.some(h=>typeof h=="string"&&h.trim().startsWith("return "));return{code:`
      return function(input, env) {
        // 1. Parse Input
        const _safeSource = (v) => (typeof v === 'object' && v !== null) ? (Array.isArray(v) ? [...v] : { ...v }) : (v || {});
        const _parsedSource = env.parse('${s}', input, ${o});
        const source = _safeSource(_parsedSource);
        const _rootSource = source;
        
        // 2. Transform
        const target = {};
        const _rootTarget = target;
        ${n.join(`
        `)}

        // 3. Serialize Output
        ${l?"":`return env.serialize('${a}', target, ${u});`}
      }
    `,sourceType:t,targetType:r,analysis:this.isAnalyzing?this.tracker.getResult():void 0}}finally{this.scopeStack.pop()}}typeFormat(e){let t=this.visit(e.name),r={params:[]};return e.params&&e.params.forEach(i=>{let n=this.visit(i);typeof n=="object"&&"key"in n?r[n.key]=this.parseLiteral(n.value):r.params.push(this.parseLiteral(n))}),{name:t.name,options:r}}typeFormatParameter(e){if(e.namedParameter)return this.visit(e.namedParameter);if(e.literal)return this.visit(e.literal)}namedParameter(e){let t=this.visit(e.key).name,r=this.visit(e.value);return{key:t,value:r}}parseLiteral(e){if(e==="true")return!0;if(e==="false")return!1;if(e==="null")return null;if(e.startsWith('"')&&e.endsWith('"')||e.startsWith("'")&&e.endsWith("'"))return e.slice(1,-1);let t=Number(e);return isNaN(t)?e:t}isSimplePath(e){return e?!/[()+*/-]/.test(e)&&!e.includes(" "):!1}safify(e){return this.safeMode?e.replace(/\.(?!\?)/g,"?.").replace(/\[/g,"?.["):e}genAccess(e,t,r=!1){if(!this.safeMode||r)return t.quoted||t.name.includes("-")&&!t.name.includes(".")&&!t.name.includes("[")?`${e}["${t.name}"]`:`${e}.${t.name}`;if(t.quoted)return`${e}?.[${JSON.stringify(t.name)}]`;let i=this.safify(t.name);return`${e}?.${i}`}anyIdentifier(e){if(e.Identifier)return{name:e.Identifier[0].image,quoted:!1};if(e.QuotedIdentifier)return{name:e.QuotedIdentifier[0].image.slice(1,-1).replace(/\\(.)/g,"$1"),quoted:!0}}literal(e){if(e.StringLiteral)return this.lastInferredType="string",e.StringLiteral[0].image;if(e.NumericLiteral)return this.lastInferredType="number",e.NumericLiteral[0].image;if(e.True)return this.lastInferredType="boolean","true";if(e.False)return this.lastInferredType="boolean","false";if(e.Null)return this.lastInferredType="null","null"}action(e){if(e.setRule)return this.visit(e.setRule);if(e.modifyRule)return this.visit(e.modifyRule);if(e.sectionRule)return this.visit(e.sectionRule);if(e.cloneRule)return this.visit(e.cloneRule);if(e.ifAction)return this.visit(e.ifAction);if(e.deleteRule)return this.visit(e.deleteRule);if(e.defineRule)return this.visit(e.defineRule);if(e.returnRule)return this.visit(e.returnRule)}deleteRule(e){let t=this.visit(e.field);return this.isAnalyzing&&this.tracker.recordDelete(t.name),`delete ${this.genAccess("target",t,!0)};`}ifAction(e){let t=this.visit(e.condition),r=e.thenActions?e.thenActions.map(n=>this.visit(n)).join(`
`):"",i=e.elseActions?`else { ${e.elseActions.map(n=>this.visit(n)).join(`
`)} }`:"";return`if (${t}) {
       ${r}
     } ${i}`}cloneRule(e){if(e.fields){let t=e.fields.map(r=>this.visit(r));return this.isAnalyzing&&this.tracker.recordClone(t.map(r=>r.name)),t.map(r=>`${this.genAccess("target",r,!0)} = ${this.genAccess("source",r)};`).join(`
        `)}return this.isAnalyzing&&this.tracker.recordClone(),"Object.assign(target, source);"}setRule(e){let t=this.visit(e.left);this.lastInferredType="any";let r=this.visit(e.right);return this.isAnalyzing&&this.tracker.recordAssignment(t.name,this.lastInferredType),`${this.genAccess("target",t,!0)} = ${r};`}modifyRule(e){let t=this.visit(e.left);this.lastInferredType="any";let r=this.visitWithContext(e.right,{readFrom:"target"});return this.isAnalyzing&&this.tracker.recordAssignment(t.name,this.lastInferredType),`${this.genAccess("target",t,!0)} = ${r};`}defineRule(e){let t=this.visit(e.left);this.lastInferredType="any";let r=this.visit(e.right);return this.isAnalyzing&&this.tracker.recordAssignment(t.name,this.lastInferredType),`${this.genAccess("source",t,!0)} = ${r};`}returnRule(e){let t=this.visitWithContext(e.expr,{readFrom:"target"}),r=this.scopeStack[this.scopeStack.length-1];if(r&&r.isSerializationScope){let i=JSON.stringify(r.options);return`return env.serialize('${r.format}', ${t}, ${i});`}return`return ${t};`}expression(e){return this.visit(e.logicalOr)}logicalOr(e){let t=this.visit(e.lhs);if(e.rhs&&e.rhs.length>0){this.lastInferredType="boolean";for(let r=0;r<e.rhs.length;r++){let i=this.visit(e.rhs[r]);t=`${t} || ${i}`}}return t}logicalAnd(e){let t=this.visit(e.lhs);if(e.rhs&&e.rhs.length>0){this.lastInferredType="boolean";for(let r=0;r<e.rhs.length;r++){let i=this.visit(e.rhs[r]);t=`${t} && ${i}`}}return t}comparison(e){let t=this.visit(e.lhs);if(e.rhs){this.lastInferredType="boolean";let r=e.ops[0].image,i=this.visit(e.rhs[0]);t=`${t} ${r} ${i}`}return t}addition(e){let t=this.visit(e.lhs),r=this.lastInferredType,i=t;if(e.rhs&&e.rhs.length>0){let n=r==="string",s=r==="number";for(let a=0;a<e.rhs.length;a++){let o=e.ops[a].image,u=this.visit(e.rhs[a]);this.lastInferredType==="string"&&(n=!0),this.lastInferredType!=="number"&&(s=!1),i=`${i} ${o} ${u}`}n?this.lastInferredType="string":s?this.lastInferredType="number":this.lastInferredType="any"}else this.lastInferredType=r;return i}multiplication(e){let t=this.visit(e.lhs);if(e.rhs&&e.rhs.length>0){this.lastInferredType="number";for(let r=0;r<e.rhs.length;r++){let i=e.ops[r].image,n=this.visit(e.rhs[r]);t=`${t} ${i} ${n}`}}return t}unaryExpression(e){let t=this.visit(e.atomic);if(e.sign){let r=e.sign[0].image;return r==="!"&&(this.lastInferredType="boolean"),r==="-"&&(this.lastInferredType="number"),`${r}${t}`}return t}atomic(e){if(e.literal)return this.visit(e.literal);if(e.functionCall)return this.visit(e.functionCall);if(e.anyIdentifier){this.lastInferredType="any";let t=this.visit(e.anyIdentifier);if(["true","false","null"].includes(t.name)&&!t.quoted)return t.name;if(t.name==="_key"&&!t.quoted)return"_key";if(!t.quoted){if(t.name.startsWith("source.")||t.name.startsWith("source[")){let r=t.name.startsWith("source.")?t.name.substring(7):t.name.substring(6);return this.isAnalyzing&&r&&this.tracker.recordAccess(r,"any",!1),this.safeMode?this.safify(t.name):t.name}if(t.name.startsWith("target.")||t.name.startsWith("target[")){let r=t.name.startsWith("target.")?t.name.substring(7):t.name.substring(6);return this.isAnalyzing&&r&&this.tracker.recordAccess(r,"any",!0),this.safeMode?this.safify(t.name):t.name}if(t.name==="target")return"target";if(t.name==="source")return"source";if(t.name==="_source"||t.name.startsWith("_source.")||t.name.startsWith("_source[")){let r=t.name.substring(7);if(this.isAnalyzing){let i=r.startsWith(".")?r.substring(1):r;i&&this.tracker.recordAccess(i,"any",!1)}return`_rootSource${this.safeMode?this.safify(r):r}`}if(t.name==="_target"||t.name.startsWith("_target.")||t.name.startsWith("_target[")){let r=t.name.substring(7);if(this.isAnalyzing){let i=r.startsWith(".")?r.substring(1):r;i&&this.tracker.recordAccess(i,"any",!0)}return`_rootTarget${this.safeMode?this.safify(r):r}`}}return this.isAnalyzing&&this.tracker.recordAccess(t.name,"any",this.readFrom==="target"),this.genAccess(this.readFrom,t)}if(e.expression)return`(${this.visit(e.expression)})`}functionCall(e){let t=e.name[0].image,r=(t.startsWith("`")?t.slice(1,-1):t).toLowerCase(),i=e.args?e.args.map(s=>this.visit(s)):[],n=pv[r];if(n)return["substring","text","replace","uppercase","lowercase","to_base64","from_base64"].includes(r)?this.lastInferredType="string":["number","extractnumber"].includes(r)?this.lastInferredType="number":["aslist","transpose","list","array"].includes(r)?this.lastInferredType="array":r==="asobject"&&(this.lastInferredType="object"),n(i,this);throw new Error(`Unknown function: ${t}`)}sectionRule(e){let t=this.visit(e.sectionName),r=t.name,i=this.genAccess("target",t,!0),n,s;if(e.followExpr){let l=this.visit(e.followExpr),h=l.replace(/\?\./g,".");h==="source.parent"||h==="this.source.parent"||h===`${this.readFrom.replace(/\?\./g,".")}.parent`?(n="source",s="parent"):(n=l,s=n)}else n=this.genAccess("source",t),s=t.name;let a=!!e.Multiple,o=!!e.whereExpr,u="";if(o&&(u=this.visit(e.whereExpr)),!!e.subqueryFrom){let l=this.visit(e.subquerySourceType),h=this.visit(e.subqueryTargetType);this.scopeStack.push({format:h.name,options:h.options,isSerializationScope:!0});try{let f=!!e.subqueryTransform,d=e.action?e.action.map(x=>this.visit(x)):[];f||d.push("Object.assign(target, source);");let m=JSON.stringify(l.options),g=JSON.stringify(h.options),y=n.includes("(")||n.includes("[")||n.includes(" ")?"_sectionSource":n,E=y==="_sectionSource"?`const _sectionSource = ${n};
`:"";if(a){let x=o?`.filter((item, index) => { const source = item; const _key = index; return ${u}; })`:"";return`
        {
          ${E}if (${y} && Array.isArray(${y})) {
            ${i} = ${y}${x}.map((item, index) => {
              const subSource = env.parse('${l.name}', item, ${m});
              const source = _safeSource(subSource);
              const _key = index;
              const target = {};
              ${d.join(`
              `)}
              return env.serialize('${h.name}', target, ${g});
            });
          }
        }
        `}else return o?`
        {
          ${E}if (${y} && Array.isArray(${y})) {
            const _filtered = ${y}.find((item, index) => { const source = item; const _key = index; return ${u}; });
            if (_filtered) {
              ${i} = (function(innerSource, innerIndex) {
                const subSource = env.parse('${l.name}', innerSource, ${m});
                const source = _safeSource(subSource);
                const _key = innerIndex;
                const target = {};
                ${d.join(`
                `)}
                return env.serialize('${h.name}', target, ${g});
              })(_filtered, ${y}.indexOf(_filtered));
            }
          }
        }
        `:`
        {
          ${E}if (${y}) {
            ${i} = (function(innerSource) {
              const subSource = env.parse('${l.name}', innerSource, ${m});
              const source = _safeSource(subSource);
              const _key = 0; // Single section without where, index is effectively 0 if we consider it an "iteration"
              const target = {};
              ${d.join(`
              `)}
              return env.serialize('${h.name}', target, ${g});
            })(${y});
          }
        }
        `}finally{this.scopeStack.pop()}}this.scopeStack.push({format:"object",options:{},isSerializationScope:!1});try{let l=s;l!=="parent"&&(l=l.replace(/^source\??\./,"").replace(/^this\.source\??\./,"").replace(/\?\./g,".")),this.isAnalyzing&&(l==="parent"||this.isSimplePath(l)?this.tracker.pushSection(r,l,a):this.tracker.pushSection(r,"parent",a));try{let h=e.action?e.action.map(m=>this.visit(m)):[],f=n.includes("(")||n.includes("[")||n.includes(" ")?"_sectionSource":n,d=f==="_sectionSource"?`const _sectionSource = ${n};
`:"";if(a){let m=o?`.filter((item, index) => { const source = _safeSource(item); const _key = index; return ${u}; })`:"";return`
      {
        ${d}if (${f} && Array.isArray(${f})) {
          ${i} = ${f}${m}.map((item, index) => {
            const source = _safeSource(item);
            const _key = index;
            const target = {};
            ${h.join(`
            `)}
            return target;
          });
        }
      }
      `}else return o?`
      {
        ${d}if (${f} && Array.isArray(${f})) {
          const _filtered = ${f}.find((item, index) => { const source = _safeSource(item); const _key = index; return ${u}; });
          if (_filtered) {
            ${i} = (function(innerSource, innerIndex) {
              const source = _safeSource(innerSource);
              const _key = innerIndex;
              const target = {};
              ${h.join(`
              `)}
              return target;
            })(_filtered, ${f}.indexOf(_filtered));
          }
        }
      }
      `:`
      {
        ${d}if (${f}) {
          ${i} = (function(innerSource) {
            const source = _safeSource(innerSource);
            const _key = 0;
            const target = {};
            ${h.join(`
            `)}
            return target;
          })(${f});
        }
      }
      `}finally{if(this.isAnalyzing){let h=l==="parent"||this.isSimplePath(l)?l:"parent";this.tracker.popSection(h,a)}}}finally{this.scopeStack.pop()}}},zc=new _v,Rp={};function Fi(e,t){Rp[e.toLowerCase()]=t}function qc(e){let t=Rp[e.toLowerCase()];if(!t)throw new Error(`No adapter found for format: ${e}`);return t}function mv(e){let t="";for(;e>=0;)t=String.fromCharCode(e%26+65)+t,e=Math.floor(e/26)-1;return t}Fi("json",{parse:e=>typeof e!="string"?e:JSON.parse(e),serialize:e=>JSON.stringify(e,null,2)});var gv=new we({ignoreAttributes:!1,attributeNamePrefix:"$",textNodeName:"_",format:!0});Fi("xml",{parse:(e,t)=>typeof e!="string"?e:new Mi({ignoreAttributes:!1,removeNSPrefix:!0,...t}).parse(e),serialize:(e,t)=>{let r=t?.rootGenerated??t?.params?.[0]??"root";return(t?new we({ignoreAttributes:!1,attributeNamePrefix:"$",textNodeName:"_",format:!0,...t}):gv).build({[r]:e})}});Fi("csv",{parse:(e,t)=>{if(typeof e!="string")return e;let r=t?.delimiter??t?.params?.[0]??",";return{rows:yo.default.parse(e,{delimiter:r,skipEmptyLines:!0,...t}).data.map(i=>{let n={};return Array.isArray(i)&&i.forEach((s,a)=>{n[mv(a)]=s}),n})}},serialize:(e,t)=>{if(!e||!Array.isArray(e.rows))return"";let r=t?.delimiter??t?.params?.[0]??",",i=e.rows.map(n=>Object.keys(n).filter(s=>/^[A-Z]+$/.test(s)).sort((s,a)=>s.length!==a.length?s.length-a.length:s.localeCompare(a)).map(s=>n[s]));return yo.default.unparse(i,{delimiter:r,...t})}});Fi("edifact",{parse:(e,t)=>{if(typeof e!="string")return e;let r="'",i="+",n=":",s="?",a=e.trim();if(a.startsWith("UNA")){let f=a.substring(3,9);n=f[0],i=f[1],s=f[3],r=f[5],a=a.substring(9).trim()}t&&(t.segmentTerminator&&(r=t.segmentTerminator),t.elementSeparator&&(i=t.elementSeparator),t.componentSeparator&&(n=t.componentSeparator),t.releaseChar&&(s=t.releaseChar));let o={},u=(f,d,m)=>{let g=[],y="";for(let E=0;E<f.length;E++){let x=f[E];x===m&&E+1<f.length?y+=m+f[++E]:x===d?(g.push(y),y=""):y+=x}return g.push(y),g},l=(f,d)=>{let m="";for(let g=0;g<f.length;g++)f[g]===d&&g+1<f.length?m+=f[++g]:m+=f[g];return m},h=u(a,r,s).map(f=>f.trim()).filter(f=>f.length>0);for(let f of h){let d=u(f,i,s),m=l(d[0],s),g=d.slice(1).map(y=>{let E=u(y,n,s).map(x=>l(x,s));return E.length>1?E:E[0]});o[m]||(o[m]=[]),o[m].push(g)}return o},serialize:(e,t)=>{if(!e||typeof e!="object")return"";let r=t?.segmentTerminator??"'",i=t?.elementSeparator??"+",n=t?.componentSeparator??":",s=t?.releaseChar??"?",a=u=>{if(u==null)return"";let l=String(u),h="";for(let f of l)(f===r||f===i||f===n||f===s)&&(h+=s),h+=f;return h},o="";t?.includeUNA&&(o+=`UNA${n}${i}.${s} ${r}`);for(let u in e){let l=Array.isArray(e[u])?e[u]:[e[u]];for(let h of l){if(o+=u,Array.isArray(h))for(let f of h)o+=i,Array.isArray(f)?o+=f.map(a).join(n):o+=a(f);o+=r}}return o}});Fi("object",{parse:e=>{if(typeof e=="string"&&(e.trim().startsWith("{")||e.trim().startsWith("[")))try{return JSON.parse(e)}catch{return e}return e},serialize:e=>e});Fi("plaintext",{parse:(e,t)=>{if(typeof e!="string")return e;let r=t?.separator??t?.params?.[0]??/\r?\n/;return{rows:e.split(r).filter(i=>i.length>0)}},serialize:(e,t)=>{if(!e||!Array.isArray(e.rows))return"";let r=t?.separator??t?.params?.[0]??`
`;return e.rows.join(r)}});var Ev={spreadsheet:e=>{let t=Array.isArray(e)?e:e==null?[]:[e];if(!Array.isArray(e)&&e&&typeof e=="object"&&Array.isArray(e.rows)&&(t=e.rows),t.length===0)return[];let r=[],i=[],n=[];for(let s=0;s<t.length;s++){let a=t[s];if(!(!a||typeof a!="object"))if(s===0){n=Object.keys(a);for(let o of n)i.push(String(a[o]))}else{let o={};for(let u=0;u<n.length;u++){let l=n[u],h=i[u];o[h]=a[l]}r.push(o)}}return r},aslist:e=>Array.isArray(e)?e:e==null?[]:[e],to_base64:e=>{let t=String(e);return typeof btoa=="function"?btoa(unescape(encodeURIComponent(t))):Buffer.from(t,"utf-8").toString("base64")},from_base64:e=>{let t=String(e);return typeof atob=="function"?decodeURIComponent(escape(atob(t))):Buffer.from(t,"base64").toString("utf-8")},xmlnode:(e,...t)=>{if(t.length>0){let r=[];for(let s=0;s<t.length;s+=2)r.push([t[s],t[s+1]]);let i=r.map(([s,a])=>[`$${s}`,a]),n=Object.fromEntries(i);return{_:e,...n}}return e},unpack:(e,...t)=>{let r=String(e||""),i={};for(let n of t){let s=n.split(":");if(s.length<3)continue;let[a,o,u,l]=s,h=parseInt(o,10),f=parseInt(u,10);if(isNaN(h)||isNaN(f))continue;let d=r.substring(h,h+f);l!=="raw"&&(d=d.trim()),i[a]=d}return i},pack:(e,...t)=>{let r=e||{},i=t.map(a=>{let o=a.split(":");if(o.length<3)return null;let[u,l,h,f]=o;return{name:u,start:parseInt(l,10),length:parseInt(h,10),left:f==="left"}}).filter(a=>a!==null),n=i.reduce((a,o)=>Math.max(a,o.start+o.length),0),s=" ".repeat(n);for(let a of i){let o=String(r[a.name]??""),u=(a.left?o.padStart(a.length):o.padEnd(a.length)).substring(0,a.length);s=s.substring(0,a.start)+u+s.substring(a.start+a.length)}return s},concat:(...e)=>e.reduce((t,r)=>t.concat(Array.isArray(r)?r:r==null?[]:[r]),[]),transpose:(e,...t)=>{if(!e||typeof e!="object"||t.length===0)return[];let r=0;for(let n of t){let s=e[n];Array.isArray(s)?r=Math.max(r,s.length):s!=null&&(r=Math.max(r,1))}let i=[];for(let n=0;n<r;n++){let s={};for(let a of t){let o=e[a];Array.isArray(o)?s[a]=o[n]:s[a]=n===0?o:void 0}i.push(s)}return i},extract:(e,t,...r)=>{if(!e||typeof e!="object")return{};let i=(s,a,o)=>{if(!a)return s;let u=a.split("."),l=s;for(let h of u)if(o){if(l==null)return;l=l[h]}else l=l[h];return l},n={};for(let s of r){let a=s.indexOf(":"),o,u;a!==-1?(o=s.substring(0,a),u=s.substring(a+1)):(o=s,u=s),n[o]=i(e,u,t)}return n}};async function Np(e,t){if(t?.cache){let h=await t.cache.retrieve(e);if(h)return Vc(h)}let r=hv.tokenize(e);if(r.errors.length>0)throw new Error(`Lexing errors: ${r.errors[0].message}`);In.input=r.tokens;let i=In.query();if(In.errors.length>0)throw new Error(`Parsing errors: ${In.errors[0].message}`);zc.isAnalyzing=!!t?.analyze;let{code:n,analysis:s,sourceType:a,targetType:o}=zc.visit(i),u=Hc.default.js(n,{indent_size:2,space_in_empty_paren:!0,end_with_newline:!0});t?.cache&&await t.cache.save(e,u);let l=Vc(u);return s&&(s.sourceFormat=a.name,s.targetFormat=o.name,l.analysis=s),l}function Vc(e){let t=new Function(e)(),r={parse:(n,s,a)=>qc(n).parse(s,a),serialize:(n,s,a)=>qc(n).serialize(s,a),functions:Ev},i=(n=>t(n,r));return i.code=e,i}var Mr=globalThis.scriptArgs||globalThis.os?.args||[];typeof btoa>"u"&&(globalThis.btoa=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="";for(let i=0,n,s=0,a=t;e.charAt(s|0)||(a="=",s%1);r+=a.charAt(63&i>>8-s%1*8)){if(n=e.charCodeAt(s+=3/4),n>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");i=i<<8|n}return r});typeof atob>"u"&&(globalThis.atob=e=>{let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=e.replace(/[=]+$/,""),i="";if(r.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let n=0,s=0,a,o=0;a=r.charAt(o++);~a&&(n=n%4,s=s%4)?i+=String.fromCharCode(255&n>>(-2*s&6)):0)a=t.indexOf(a);return i});typeof Buffer>"u"&&(globalThis.Buffer={from:(e,t)=>t==="base64"?{toString:r=>r==="utf-8"?atob(e):""}:{toString:r=>r==="base64"?btoa(e):""}});async function yv(){let e={};for(let t=0;t<Mr.length;t++){let r=Mr[t];(r==="-q"||r==="--query")&&(e.query=Mr[++t]),(r==="-Q"||r==="--query-file")&&(e.queryFile=Mr[++t]),(r==="-i"||r==="--input")&&(e.input=Mr[++t]),(r==="-f"||r==="--from")&&(e.from=Mr[++t]),(r==="-t"||r==="--to")&&(e.to=Mr[++t]),r==="--cache-dir"&&(e.cacheDir=Mr[++t])}try{let t=e.query;!t&&e.queryFile&&(t=std.loadFile(e.queryFile)),t||(std.err.printf(`Error: No query provided (-q or -Q)
`),std.exit(1));let r=e.input;!r&&e.from&&(r=std.loadFile(e.from)),r||(r=std.in.readAsString()),r||(std.err.printf(`Error: No input provided (-i, -f or stdin)
`),std.exit(1));let n=await(await Np(t))(r);if(e.to){let s=std.open(e.to,"w");s.puts(n),s.close()}else std.out.puts(n+`
`);std.exit(0)}catch(t){std.err.printf(`Error: %s
`,t.message),std.exit(1)}}yv();
/*! Bundled license information:

papaparse/papaparse.js:
  (* @license
  Papa Parse
  v5.5.3
  https://github.com/mholt/PapaParse
  License: MIT
  *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
